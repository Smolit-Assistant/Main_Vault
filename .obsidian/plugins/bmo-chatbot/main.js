/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  default: () => BMOGPT
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/view.ts
var import_obsidian4 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var BMOSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  async display() {
    const models = await this.fetchData();
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: "BMO Chatbot Settings" });
    const changeLogLink = containerEl.createEl("a", {
      text: "Changelog",
      href: "https://github.com/longy2k/obsidian-bmo-chatbot/releases"
    });
    changeLogLink.style.fontSize = "0.8rem";
    const usageText = containerEl.createEl("p", {
      text: "Check usage: "
    });
    const statusText = containerEl.createEl("p", {
      text: "Check status: "
    });
    const usageLink = containerEl.createEl("a", {
      text: "https://platform.openai.com/account/usage",
      href: "https://platform.openai.com/account/usage"
    });
    const statusLink = containerEl.createEl("a", {
      text: "https://status.openai.com/",
      href: "https://status.openai.com/"
    });
    usageText.appendChild(usageLink);
    statusText.appendChild(statusLink);
    containerEl.createEl("p", { text: "Type `/help` in chat for commands." });
    containerEl.createEl("h2", { text: "General" });
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc("Insert API Key from OpenAI or Anthropic. You may need to refresh the tab after inserting.").addText((text) => text.setPlaceholder("insert-api-key").setValue(this.plugin.settings.apiKey ? `${this.plugin.settings.apiKey.slice(0, 6)}-...${this.plugin.settings.apiKey.slice(-4)}` : "").onChange(async (value) => {
      this.plugin.settings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    const addOptionsToDropdown = (dropdown, models2) => {
      models2.forEach((model) => {
        dropdown.addOption(model, model);
      });
    };
    new import_obsidian.Setting(containerEl).setName("Model").setDesc("Choose a model.").addDropdown((dropdown) => {
      if (!this.plugin.settings.apiKey || !this.plugin.settings.apiKey.startsWith("sk-ant")) {
        addOptionsToDropdown(dropdown, OPENAI_MODELS);
      }
      if (this.plugin.settings.apiKey && this.plugin.settings.apiKey.startsWith("sk-ant")) {
        addOptionsToDropdown(dropdown, ANTHROPIC_MODELS);
      }
      if (this.plugin.settings.restAPIUrl && models && models.length > 0) {
        models.forEach((model) => {
          dropdown.addOption(model, model);
        });
      }
      dropdown.setValue(this.plugin.settings.model || DEFAULT_SETTINGS.model).onChange(async (value) => {
        this.plugin.settings.model = value;
        await this.plugin.saveSettings();
        const modelName = document.querySelector("#modelName");
        if (modelName) {
          modelName.textContent = "Model: " + this.plugin.settings.model.toLowerCase();
        }
      });
    });
    new import_obsidian.Setting(containerEl).setName("System").setDesc("System role prompt.").addTextArea(
      (text) => text.setPlaceholder("You are a helpful assistant.").setValue(this.plugin.settings.system_role !== void 0 ? this.plugin.settings.system_role : "You are a helpful assistant who responds in markdown.").onChange(async (value) => {
        this.plugin.settings.system_role = value !== void 0 ? value : DEFAULT_SETTINGS.system_role;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Max Tokens").setDesc(descLink("The maximum number of tokens, or words, that the model is allowed to generate in its output.", "https://platform.openai.com/tokenizer")).addText(
      (text) => text.setPlaceholder("4096").setValue(this.plugin.settings.max_tokens).onChange(async (value) => {
        this.plugin.settings.max_tokens = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Temperature").setDesc("Temperature controls how random the generated output is. Lower values make the text more predictable, while higher values make it more creative and unpredictable.").addSlider(
      (slider) => slider.setLimits(0, 1, 0.05).setValue(this.plugin.settings.temperature !== void 0 ? this.plugin.settings.temperature : DEFAULT_SETTINGS.temperature).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.temperature = value;
        await this.plugin.saveSettings();
      })
    );
    function descLink(text, link) {
      const frag = new DocumentFragment();
      const desc = document.createElement("span");
      desc.innerText = text + " ";
      frag.appendChild(desc);
      const anchor = document.createElement("a");
      anchor.href = link;
      anchor.target = "_blank";
      anchor.rel = "noopener noreferrer";
      anchor.innerText = "(https://platform.openai.com/tokenizer)";
      frag.appendChild(anchor);
      return frag;
    }
    new import_obsidian.Setting(containerEl).setName("Allow Reference Current Note").setDesc("Allow chatbot to reference current active note during conversation.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.referenceCurrentNote).onChange((value) => {
        this.plugin.settings.referenceCurrentNote = value;
        this.plugin.saveSettings();
        const referenceCurrentNoteElement = document.getElementById("referenceCurrentNote");
        if (referenceCurrentNoteElement) {
          if (value) {
            referenceCurrentNoteElement.style.display = "block";
          } else {
            referenceCurrentNoteElement.style.display = "none";
          }
        }
      })
    );
    containerEl.createEl("h2", { text: "Appearance" });
    new import_obsidian.Setting(containerEl).setName("User Name").setDesc("Create a username.").addText(
      (text) => text.setPlaceholder("Enter user name").setValue(this.plugin.settings.userName || DEFAULT_SETTINGS.userName).onChange(async (value) => {
        this.plugin.settings.userName = value ? value.toUpperCase() : DEFAULT_SETTINGS.userName;
        text.inputEl.maxLength = 30;
        await this.plugin.saveSettings();
        const userNames = document.querySelectorAll(".userName");
        userNames.forEach((userName) => {
          userName.textContent = this.plugin.settings.userName;
        });
      })
    );
    new import_obsidian.Setting(containerEl).setName("Chatbot Name").setDesc("Name your chatbot.").addText(
      (text) => text.setPlaceholder("Enter chatbot name").setValue(this.plugin.settings.chatbotName || DEFAULT_SETTINGS.chatbotName).onChange(async (value) => {
        this.plugin.settings.chatbotName = value ? value.toUpperCase() : DEFAULT_SETTINGS.chatbotName;
        text.inputEl.maxLength = 30;
        await this.plugin.saveSettings();
        const chatbotNameHeading = document.querySelector("#chatbotNameHeading");
        const chatbotNames = document.querySelectorAll(".chatbotName");
        if (chatbotNameHeading) {
          chatbotNameHeading.textContent = this.plugin.settings.chatbotName;
        }
        chatbotNames.forEach((chatbotName) => {
          chatbotName.textContent = this.plugin.settings.chatbotName;
        });
      })
    );
    let colorPicker1;
    const defaultUserMessageBackgroundColor = getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.userMessageBackgroundColor).trim();
    new import_obsidian.Setting(containerEl).setName("Background color for User Messages").setDesc("Modify the background color of the userMessage element.").addButton(
      (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
        const defaultValue = colorToHex(defaultUserMessageBackgroundColor);
        colorPicker1.setValue(defaultValue);
        const messageContainer = document.querySelector("#messageContainer");
        if (messageContainer) {
          const userMessages = messageContainer.querySelectorAll(".userMessage");
          userMessages.forEach((userMessage) => {
            const element = userMessage;
            element.style.backgroundColor = defaultValue;
          });
          await this.plugin.saveSettings();
        }
      })
    ).addColorPicker((color) => {
      colorPicker1 = color;
      let defaultValue = this.plugin.settings.userMessageBackgroundColor;
      if (this.plugin.settings.userMessageBackgroundColor == "--background-primary") {
        defaultValue = colorToHex(defaultUserMessageBackgroundColor);
      }
      color.setValue(defaultValue).onChange(async (value) => {
        const hexValue = colorToHex(value);
        this.plugin.settings.userMessageBackgroundColor = hexValue;
        const messageContainer = document.querySelector("#messageContainer");
        if (messageContainer) {
          const userMessages = messageContainer.querySelectorAll(".userMessage");
          userMessages.forEach((userMessage) => {
            const element = userMessage;
            element.style.backgroundColor = hexValue;
          });
        }
        await this.plugin.saveSettings();
      });
    });
    let colorPicker2;
    const defaultBotMessageBackgroundColor = getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.botMessageBackgroundColor).trim();
    new import_obsidian.Setting(containerEl).setName("Background color for Bot Messages").setDesc("Modify the background color of the botMessage element.").addButton(
      (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
        const defaultValue = colorToHex(defaultBotMessageBackgroundColor);
        colorPicker2.setValue(defaultValue);
        const messageContainer = document.querySelector("#messageContainer");
        if (messageContainer) {
          const botMessages = messageContainer.querySelectorAll(".botMessage");
          botMessages.forEach((botMessage) => {
            const element = botMessage;
            element.style.backgroundColor = defaultValue;
          });
          await this.plugin.saveSettings();
        }
      })
    ).addColorPicker((color) => {
      colorPicker2 = color;
      let defaultValue = this.plugin.settings.botMessageBackgroundColor;
      if (this.plugin.settings.botMessageBackgroundColor == "--background-secondary") {
        defaultValue = colorToHex(defaultBotMessageBackgroundColor);
      }
      color.setValue(defaultValue).onChange(async (value) => {
        const hexValue = colorToHex(value);
        this.plugin.settings.botMessageBackgroundColor = hexValue;
        const messageContainer = document.querySelector("#messageContainer");
        if (messageContainer) {
          const botMessages = messageContainer.querySelectorAll(".botMessage");
          botMessages.forEach((botMessage) => {
            const element = botMessage;
            element.style.backgroundColor = hexValue;
          });
        }
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2", { text: "Chat History" });
    new import_obsidian.Setting(containerEl).setName("Chat History Folder Path").setDesc("Save your chat history in a specified folder.").addText(
      (text) => text.setPlaceholder("BMO/").setValue(this.plugin.settings.chatHistoryPath || DEFAULT_SETTINGS.chatHistoryPath).onChange(async (value) => {
        this.plugin.settings.chatHistoryPath = value ? value : DEFAULT_SETTINGS.chatHistoryPath;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Template File Path").setDesc("Insert your template file path.").addText(
      (text) => text.setPlaceholder("templates/bmo.md").setValue(this.plugin.settings.templateFilePath || DEFAULT_SETTINGS.templateFilePath).onChange(async (value) => {
        this.plugin.settings.templateFilePath = value ? value : DEFAULT_SETTINGS.templateFilePath;
        if (value) {
          if (!this.plugin.settings.templateFilePath.endsWith(".md")) {
            this.plugin.settings.templateFilePath += ".md";
          }
          await this.plugin.saveSettings();
          const allFiles = app.vault.getFiles();
          const fileExists = allFiles.some((file) => file.path.toLowerCase() === this.plugin.settings.templateFilePath.toLowerCase());
          if (fileExists) {
            text.inputEl.style.borderColor = "";
          } else {
            text.inputEl.style.borderColor = "red";
          }
        } else {
          text.inputEl.style.borderColor = "";
          this.plugin.settings.templateFilePath = DEFAULT_SETTINGS.templateFilePath;
        }
      })
    );
    new import_obsidian.Setting(containerEl).setName("Allow Rename Note Title").setDesc("Allow model to rename the note title when saving chat history.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.allowRenameNoteTitle).onChange((value) => {
        this.plugin.settings.allowRenameNoteTitle = value;
        this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Advanced" });
    new import_obsidian.Setting(containerEl).setName("OPENAI BASE URL").setDesc("Enter your custom OpenAI base url.").addButton(
      (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
        this.plugin.settings.openAIBaseUrl = DEFAULT_SETTINGS.openAIBaseUrl;
        await this.plugin.saveSettings();
        this.display();
      })
    ).addText(
      (text) => text.setPlaceholder("https://api.openai.com/v1").setValue(this.plugin.settings.openAIBaseUrl || DEFAULT_SETTINGS.openAIBaseUrl).onChange(async (value) => {
        this.plugin.settings.openAIBaseUrl = value ? value : DEFAULT_SETTINGS.openAIBaseUrl;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("REST API URL").setDesc(descLink1("Enter your REST API URL using", "https://github.com/go-skynet/LocalAI", "")).addText(
      (text) => text.setPlaceholder("http://localhost:8080").setValue(this.plugin.settings.restAPIUrl || DEFAULT_SETTINGS.restAPIUrl).onChange(async (value) => {
        this.plugin.settings.restAPIUrl = value ? value : DEFAULT_SETTINGS.restAPIUrl;
        await this.plugin.saveSettings();
      })
    );
    function descLink1(text, link, extraWords) {
      const frag = new DocumentFragment();
      const desc = document.createElement("span");
      desc.innerText = text + " ";
      frag.appendChild(desc);
      const anchor = document.createElement("a");
      anchor.href = link;
      anchor.target = "_blank";
      anchor.rel = "noopener noreferrer";
      anchor.innerText = "LocalAI";
      frag.appendChild(anchor);
      const extra = document.createElement("span");
      extra.innerText = " " + extraWords;
      frag.appendChild(extra);
      return frag;
    }
  }
  async fetchData() {
    const restAPIUrl = this.plugin.settings.restAPIUrl;
    if (!restAPIUrl) {
      return;
    }
    const url = restAPIUrl + "/v1/models";
    try {
      const response = await (0, import_obsidian.requestUrl)({
        url,
        method: "GET",
        headers: {
          "Content-Type": "application/json"
        }
      });
      const jsonData = response.json;
      const models = jsonData.data.map((model) => model.id);
      this.plugin.settings.models = models;
      return models;
    } catch (error) {
      console.error("Error:", error);
    }
  }
};
function colorToHex(colorValue) {
  if (colorValue.startsWith("hsl")) {
    const match = colorValue.match(/(\d+(\.\d+)?)%?/g);
    if (match === null || match.length < 3) {
      throw new Error("Invalid HSL value");
    }
    const h = parseInt(match[0]) / 360;
    const s = parseInt(match[1]) / 100;
    const l = parseInt(match[2]) / 100;
    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    const r = hue2rgb(p, q, h + 1 / 3);
    const g = hue2rgb(p, q, h);
    const b = hue2rgb(p, q, h - 1 / 3);
    const toHex = function(c) {
      const hex2 = Math.round(c * 255).toString(16);
      return hex2.length === 1 ? "0" + hex2 : hex2;
    };
    const hex = "#" + toHex(r) + toHex(g) + toHex(b);
    return hex;
  } else if (colorValue.startsWith("rgb")) {
    const sep = colorValue.indexOf(",") > -1 ? "," : " ";
    const rgbArray = colorValue.substr(4).split(")")[0].split(sep);
    let r = (+rgbArray[0]).toString(16), g = (+rgbArray[1]).toString(16), b = (+rgbArray[2]).toString(16);
    if (r.length == 1)
      r = "0" + r;
    if (g.length == 1)
      g = "0" + g;
    if (b.length == 1)
      b = "0" + b;
    return "#" + r + g + b;
  } else {
    return colorValue;
  }
}
function hue2rgb(p, q, t) {
  if (t < 0)
    t += 1;
  if (t > 1)
    t -= 1;
  if (t < 1 / 6)
    return p + (q - p) * 6 * t;
  if (t < 1 / 2)
    return q;
  if (t < 2 / 3)
    return p + (q - p) * (2 / 3 - t) * 6;
  return p;
}

// node_modules/marked/lib/marked.esm.js
function getDefaults() {
  return {
    async: false,
    baseUrl: null,
    breaks: false,
    extensions: null,
    gfm: true,
    headerIds: true,
    headerPrefix: "",
    highlight: null,
    hooks: null,
    langPrefix: "language-",
    mangle: true,
    pedantic: false,
    renderer: null,
    sanitize: false,
    sanitizer: null,
    silent: false,
    smartypants: false,
    tokenizer: null,
    walkTokens: null,
    xhtml: false
  };
}
var defaults = getDefaults();
function changeDefaults(newDefaults) {
  defaults = newDefaults;
}
var escapeTest = /[&<>"']/;
var escapeReplace = new RegExp(escapeTest.source, "g");
var escapeTestNoEncode = /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/;
var escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, "g");
var escapeReplacements = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
};
var getEscapeReplacement = (ch) => escapeReplacements[ch];
function escape(html, encode) {
  if (encode) {
    if (escapeTest.test(html)) {
      return html.replace(escapeReplace, getEscapeReplacement);
    }
  } else {
    if (escapeTestNoEncode.test(html)) {
      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);
    }
  }
  return html;
}
var unescapeTest = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;
function unescape(html) {
  return html.replace(unescapeTest, (_, n) => {
    n = n.toLowerCase();
    if (n === "colon")
      return ":";
    if (n.charAt(0) === "#") {
      return n.charAt(1) === "x" ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));
    }
    return "";
  });
}
var caret = /(^|[^\[])\^/g;
function edit(regex, opt) {
  regex = typeof regex === "string" ? regex : regex.source;
  opt = opt || "";
  const obj = {
    replace: (name, val) => {
      val = val.source || val;
      val = val.replace(caret, "$1");
      regex = regex.replace(name, val);
      return obj;
    },
    getRegex: () => {
      return new RegExp(regex, opt);
    }
  };
  return obj;
}
var nonWordAndColonTest = /[^\w:]/g;
var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
function cleanUrl(sanitize, base, href) {
  if (sanitize) {
    let prot;
    try {
      prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, "").toLowerCase();
    } catch (e) {
      return null;
    }
    if (prot.indexOf("javascript:") === 0 || prot.indexOf("vbscript:") === 0 || prot.indexOf("data:") === 0) {
      return null;
    }
  }
  if (base && !originIndependentUrl.test(href)) {
    href = resolveUrl(base, href);
  }
  try {
    href = encodeURI(href).replace(/%25/g, "%");
  } catch (e) {
    return null;
  }
  return href;
}
var baseUrls = {};
var justDomain = /^[^:]+:\/*[^/]*$/;
var protocol = /^([^:]+:)[\s\S]*$/;
var domain = /^([^:]+:\/*[^/]*)[\s\S]*$/;
function resolveUrl(base, href) {
  if (!baseUrls[" " + base]) {
    if (justDomain.test(base)) {
      baseUrls[" " + base] = base + "/";
    } else {
      baseUrls[" " + base] = rtrim(base, "/", true);
    }
  }
  base = baseUrls[" " + base];
  const relativeBase = base.indexOf(":") === -1;
  if (href.substring(0, 2) === "//") {
    if (relativeBase) {
      return href;
    }
    return base.replace(protocol, "$1") + href;
  } else if (href.charAt(0) === "/") {
    if (relativeBase) {
      return href;
    }
    return base.replace(domain, "$1") + href;
  } else {
    return base + href;
  }
}
var noopTest = { exec: function noopTest2() {
} };
function splitCells(tableRow, count) {
  const row = tableRow.replace(/\|/g, (match, offset, str) => {
    let escaped = false, curr = offset;
    while (--curr >= 0 && str[curr] === "\\")
      escaped = !escaped;
    if (escaped) {
      return "|";
    } else {
      return " |";
    }
  }), cells = row.split(/ \|/);
  let i = 0;
  if (!cells[0].trim()) {
    cells.shift();
  }
  if (cells.length > 0 && !cells[cells.length - 1].trim()) {
    cells.pop();
  }
  if (cells.length > count) {
    cells.splice(count);
  } else {
    while (cells.length < count)
      cells.push("");
  }
  for (; i < cells.length; i++) {
    cells[i] = cells[i].trim().replace(/\\\|/g, "|");
  }
  return cells;
}
function rtrim(str, c, invert) {
  const l = str.length;
  if (l === 0) {
    return "";
  }
  let suffLen = 0;
  while (suffLen < l) {
    const currChar = str.charAt(l - suffLen - 1);
    if (currChar === c && !invert) {
      suffLen++;
    } else if (currChar !== c && invert) {
      suffLen++;
    } else {
      break;
    }
  }
  return str.slice(0, l - suffLen);
}
function findClosingBracket(str, b) {
  if (str.indexOf(b[1]) === -1) {
    return -1;
  }
  const l = str.length;
  let level = 0, i = 0;
  for (; i < l; i++) {
    if (str[i] === "\\") {
      i++;
    } else if (str[i] === b[0]) {
      level++;
    } else if (str[i] === b[1]) {
      level--;
      if (level < 0) {
        return i;
      }
    }
  }
  return -1;
}
function checkSanitizeDeprecation(opt) {
  if (opt && opt.sanitize && !opt.silent) {
    console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");
  }
}
function repeatString(pattern, count) {
  if (count < 1) {
    return "";
  }
  let result = "";
  while (count > 1) {
    if (count & 1) {
      result += pattern;
    }
    count >>= 1;
    pattern += pattern;
  }
  return result + pattern;
}
function outputLink(cap, link, raw, lexer2) {
  const href = link.href;
  const title = link.title ? escape(link.title) : null;
  const text = cap[1].replace(/\\([\[\]])/g, "$1");
  if (cap[0].charAt(0) !== "!") {
    lexer2.state.inLink = true;
    const token = {
      type: "link",
      raw,
      href,
      title,
      text,
      tokens: lexer2.inlineTokens(text)
    };
    lexer2.state.inLink = false;
    return token;
  }
  return {
    type: "image",
    raw,
    href,
    title,
    text: escape(text)
  };
}
function indentCodeCompensation(raw, text) {
  const matchIndentToCode = raw.match(/^(\s+)(?:```)/);
  if (matchIndentToCode === null) {
    return text;
  }
  const indentToCode = matchIndentToCode[1];
  return text.split("\n").map((node) => {
    const matchIndentInNode = node.match(/^\s+/);
    if (matchIndentInNode === null) {
      return node;
    }
    const [indentInNode] = matchIndentInNode;
    if (indentInNode.length >= indentToCode.length) {
      return node.slice(indentToCode.length);
    }
    return node;
  }).join("\n");
}
var Tokenizer = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  space(src) {
    const cap = this.rules.block.newline.exec(src);
    if (cap && cap[0].length > 0) {
      return {
        type: "space",
        raw: cap[0]
      };
    }
  }
  code(src) {
    const cap = this.rules.block.code.exec(src);
    if (cap) {
      const text = cap[0].replace(/^ {1,4}/gm, "");
      return {
        type: "code",
        raw: cap[0],
        codeBlockStyle: "indented",
        text: !this.options.pedantic ? rtrim(text, "\n") : text
      };
    }
  }
  fences(src) {
    const cap = this.rules.block.fences.exec(src);
    if (cap) {
      const raw = cap[0];
      const text = indentCodeCompensation(raw, cap[3] || "");
      return {
        type: "code",
        raw,
        lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, "$1") : cap[2],
        text
      };
    }
  }
  heading(src) {
    const cap = this.rules.block.heading.exec(src);
    if (cap) {
      let text = cap[2].trim();
      if (/#$/.test(text)) {
        const trimmed = rtrim(text, "#");
        if (this.options.pedantic) {
          text = trimmed.trim();
        } else if (!trimmed || / $/.test(trimmed)) {
          text = trimmed.trim();
        }
      }
      return {
        type: "heading",
        raw: cap[0],
        depth: cap[1].length,
        text,
        tokens: this.lexer.inline(text)
      };
    }
  }
  hr(src) {
    const cap = this.rules.block.hr.exec(src);
    if (cap) {
      return {
        type: "hr",
        raw: cap[0]
      };
    }
  }
  blockquote(src) {
    const cap = this.rules.block.blockquote.exec(src);
    if (cap) {
      const text = cap[0].replace(/^ *>[ \t]?/gm, "");
      const top = this.lexer.state.top;
      this.lexer.state.top = true;
      const tokens = this.lexer.blockTokens(text);
      this.lexer.state.top = top;
      return {
        type: "blockquote",
        raw: cap[0],
        tokens,
        text
      };
    }
  }
  list(src) {
    let cap = this.rules.block.list.exec(src);
    if (cap) {
      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;
      let bull = cap[1].trim();
      const isordered = bull.length > 1;
      const list = {
        type: "list",
        raw: "",
        ordered: isordered,
        start: isordered ? +bull.slice(0, -1) : "",
        loose: false,
        items: []
      };
      bull = isordered ? `\\d{1,9}\\${bull.slice(-1)}` : `\\${bull}`;
      if (this.options.pedantic) {
        bull = isordered ? bull : "[*+-]";
      }
      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[	 ][^\\n]*)?(?:\\n|$))`);
      while (src) {
        endEarly = false;
        if (!(cap = itemRegex.exec(src))) {
          break;
        }
        if (this.rules.block.hr.test(src)) {
          break;
        }
        raw = cap[0];
        src = src.substring(raw.length);
        line = cap[2].split("\n", 1)[0].replace(/^\t+/, (t) => " ".repeat(3 * t.length));
        nextLine = src.split("\n", 1)[0];
        if (this.options.pedantic) {
          indent = 2;
          itemContents = line.trimLeft();
        } else {
          indent = cap[2].search(/[^ ]/);
          indent = indent > 4 ? 1 : indent;
          itemContents = line.slice(indent);
          indent += cap[1].length;
        }
        blankLine = false;
        if (!line && /^ *$/.test(nextLine)) {
          raw += nextLine + "\n";
          src = src.substring(nextLine.length + 1);
          endEarly = true;
        }
        if (!endEarly) {
          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`);
          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`);
          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\`\`\`|~~~)`);
          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);
          while (src) {
            rawLine = src.split("\n", 1)[0];
            nextLine = rawLine;
            if (this.options.pedantic) {
              nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, "  ");
            }
            if (fencesBeginRegex.test(nextLine)) {
              break;
            }
            if (headingBeginRegex.test(nextLine)) {
              break;
            }
            if (nextBulletRegex.test(nextLine)) {
              break;
            }
            if (hrRegex.test(src)) {
              break;
            }
            if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) {
              itemContents += "\n" + nextLine.slice(indent);
            } else {
              if (blankLine) {
                break;
              }
              if (line.search(/[^ ]/) >= 4) {
                break;
              }
              if (fencesBeginRegex.test(line)) {
                break;
              }
              if (headingBeginRegex.test(line)) {
                break;
              }
              if (hrRegex.test(line)) {
                break;
              }
              itemContents += "\n" + nextLine;
            }
            if (!blankLine && !nextLine.trim()) {
              blankLine = true;
            }
            raw += rawLine + "\n";
            src = src.substring(rawLine.length + 1);
            line = nextLine.slice(indent);
          }
        }
        if (!list.loose) {
          if (endsWithBlankLine) {
            list.loose = true;
          } else if (/\n *\n *$/.test(raw)) {
            endsWithBlankLine = true;
          }
        }
        if (this.options.gfm) {
          istask = /^\[[ xX]\] /.exec(itemContents);
          if (istask) {
            ischecked = istask[0] !== "[ ] ";
            itemContents = itemContents.replace(/^\[[ xX]\] +/, "");
          }
        }
        list.items.push({
          type: "list_item",
          raw,
          task: !!istask,
          checked: ischecked,
          loose: false,
          text: itemContents
        });
        list.raw += raw;
      }
      list.items[list.items.length - 1].raw = raw.trimRight();
      list.items[list.items.length - 1].text = itemContents.trimRight();
      list.raw = list.raw.trimRight();
      const l = list.items.length;
      for (i = 0; i < l; i++) {
        this.lexer.state.top = false;
        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);
        if (!list.loose) {
          const spacers = list.items[i].tokens.filter((t) => t.type === "space");
          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some((t) => /\n.*\n/.test(t.raw));
          list.loose = hasMultipleLineBreaks;
        }
      }
      if (list.loose) {
        for (i = 0; i < l; i++) {
          list.items[i].loose = true;
        }
      }
      return list;
    }
  }
  html(src) {
    const cap = this.rules.block.html.exec(src);
    if (cap) {
      const token = {
        type: "html",
        raw: cap[0],
        pre: !this.options.sanitizer && (cap[1] === "pre" || cap[1] === "script" || cap[1] === "style"),
        text: cap[0]
      };
      if (this.options.sanitize) {
        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);
        token.type = "paragraph";
        token.text = text;
        token.tokens = this.lexer.inline(text);
      }
      return token;
    }
  }
  def(src) {
    const cap = this.rules.block.def.exec(src);
    if (cap) {
      const tag = cap[1].toLowerCase().replace(/\s+/g, " ");
      const href = cap[2] ? cap[2].replace(/^<(.*)>$/, "$1").replace(this.rules.inline._escapes, "$1") : "";
      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, "$1") : cap[3];
      return {
        type: "def",
        tag,
        raw: cap[0],
        href,
        title
      };
    }
  }
  table(src) {
    const cap = this.rules.block.table.exec(src);
    if (cap) {
      const item = {
        type: "table",
        header: splitCells(cap[1]).map((c) => {
          return { text: c };
        }),
        align: cap[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\n[ \t]*$/, "").split("\n") : []
      };
      if (item.header.length === item.align.length) {
        item.raw = cap[0];
        let l = item.align.length;
        let i, j, k, row;
        for (i = 0; i < l; i++) {
          if (/^ *-+: *$/.test(item.align[i])) {
            item.align[i] = "right";
          } else if (/^ *:-+: *$/.test(item.align[i])) {
            item.align[i] = "center";
          } else if (/^ *:-+ *$/.test(item.align[i])) {
            item.align[i] = "left";
          } else {
            item.align[i] = null;
          }
        }
        l = item.rows.length;
        for (i = 0; i < l; i++) {
          item.rows[i] = splitCells(item.rows[i], item.header.length).map((c) => {
            return { text: c };
          });
        }
        l = item.header.length;
        for (j = 0; j < l; j++) {
          item.header[j].tokens = this.lexer.inline(item.header[j].text);
        }
        l = item.rows.length;
        for (j = 0; j < l; j++) {
          row = item.rows[j];
          for (k = 0; k < row.length; k++) {
            row[k].tokens = this.lexer.inline(row[k].text);
          }
        }
        return item;
      }
    }
  }
  lheading(src) {
    const cap = this.rules.block.lheading.exec(src);
    if (cap) {
      return {
        type: "heading",
        raw: cap[0],
        depth: cap[2].charAt(0) === "=" ? 1 : 2,
        text: cap[1],
        tokens: this.lexer.inline(cap[1])
      };
    }
  }
  paragraph(src) {
    const cap = this.rules.block.paragraph.exec(src);
    if (cap) {
      const text = cap[1].charAt(cap[1].length - 1) === "\n" ? cap[1].slice(0, -1) : cap[1];
      return {
        type: "paragraph",
        raw: cap[0],
        text,
        tokens: this.lexer.inline(text)
      };
    }
  }
  text(src) {
    const cap = this.rules.block.text.exec(src);
    if (cap) {
      return {
        type: "text",
        raw: cap[0],
        text: cap[0],
        tokens: this.lexer.inline(cap[0])
      };
    }
  }
  escape(src) {
    const cap = this.rules.inline.escape.exec(src);
    if (cap) {
      return {
        type: "escape",
        raw: cap[0],
        text: escape(cap[1])
      };
    }
  }
  tag(src) {
    const cap = this.rules.inline.tag.exec(src);
    if (cap) {
      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {
        this.lexer.state.inLink = true;
      } else if (this.lexer.state.inLink && /^<\/a>/i.test(cap[0])) {
        this.lexer.state.inLink = false;
      }
      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])) {
        this.lexer.state.inRawBlock = true;
      } else if (this.lexer.state.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])) {
        this.lexer.state.inRawBlock = false;
      }
      return {
        type: this.options.sanitize ? "text" : "html",
        raw: cap[0],
        inLink: this.lexer.state.inLink,
        inRawBlock: this.lexer.state.inRawBlock,
        text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]
      };
    }
  }
  link(src) {
    const cap = this.rules.inline.link.exec(src);
    if (cap) {
      const trimmedUrl = cap[2].trim();
      if (!this.options.pedantic && /^</.test(trimmedUrl)) {
        if (!/>$/.test(trimmedUrl)) {
          return;
        }
        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), "\\");
        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {
          return;
        }
      } else {
        const lastParenIndex = findClosingBracket(cap[2], "()");
        if (lastParenIndex > -1) {
          const start = cap[0].indexOf("!") === 0 ? 5 : 4;
          const linkLen = start + cap[1].length + lastParenIndex;
          cap[2] = cap[2].substring(0, lastParenIndex);
          cap[0] = cap[0].substring(0, linkLen).trim();
          cap[3] = "";
        }
      }
      let href = cap[2];
      let title = "";
      if (this.options.pedantic) {
        const link = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);
        if (link) {
          href = link[1];
          title = link[3];
        }
      } else {
        title = cap[3] ? cap[3].slice(1, -1) : "";
      }
      href = href.trim();
      if (/^</.test(href)) {
        if (this.options.pedantic && !/>$/.test(trimmedUrl)) {
          href = href.slice(1);
        } else {
          href = href.slice(1, -1);
        }
      }
      return outputLink(cap, {
        href: href ? href.replace(this.rules.inline._escapes, "$1") : href,
        title: title ? title.replace(this.rules.inline._escapes, "$1") : title
      }, cap[0], this.lexer);
    }
  }
  reflink(src, links) {
    let cap;
    if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {
      let link = (cap[2] || cap[1]).replace(/\s+/g, " ");
      link = links[link.toLowerCase()];
      if (!link) {
        const text = cap[0].charAt(0);
        return {
          type: "text",
          raw: text,
          text
        };
      }
      return outputLink(cap, link, cap[0], this.lexer);
    }
  }
  emStrong(src, maskedSrc, prevChar = "") {
    let match = this.rules.inline.emStrong.lDelim.exec(src);
    if (!match)
      return;
    if (match[3] && prevChar.match(/[\p{L}\p{N}]/u))
      return;
    const nextChar = match[1] || match[2] || "";
    if (!nextChar || nextChar && (prevChar === "" || this.rules.inline.punctuation.exec(prevChar))) {
      const lLength = match[0].length - 1;
      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;
      const endReg = match[0][0] === "*" ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;
      endReg.lastIndex = 0;
      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);
      while ((match = endReg.exec(maskedSrc)) != null) {
        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];
        if (!rDelim)
          continue;
        rLength = rDelim.length;
        if (match[3] || match[4]) {
          delimTotal += rLength;
          continue;
        } else if (match[5] || match[6]) {
          if (lLength % 3 && !((lLength + rLength) % 3)) {
            midDelimTotal += rLength;
            continue;
          }
        }
        delimTotal -= rLength;
        if (delimTotal > 0)
          continue;
        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);
        const raw = src.slice(0, lLength + match.index + (match[0].length - rDelim.length) + rLength);
        if (Math.min(lLength, rLength) % 2) {
          const text2 = raw.slice(1, -1);
          return {
            type: "em",
            raw,
            text: text2,
            tokens: this.lexer.inlineTokens(text2)
          };
        }
        const text = raw.slice(2, -2);
        return {
          type: "strong",
          raw,
          text,
          tokens: this.lexer.inlineTokens(text)
        };
      }
    }
  }
  codespan(src) {
    const cap = this.rules.inline.code.exec(src);
    if (cap) {
      let text = cap[2].replace(/\n/g, " ");
      const hasNonSpaceChars = /[^ ]/.test(text);
      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);
      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {
        text = text.substring(1, text.length - 1);
      }
      text = escape(text, true);
      return {
        type: "codespan",
        raw: cap[0],
        text
      };
    }
  }
  br(src) {
    const cap = this.rules.inline.br.exec(src);
    if (cap) {
      return {
        type: "br",
        raw: cap[0]
      };
    }
  }
  del(src) {
    const cap = this.rules.inline.del.exec(src);
    if (cap) {
      return {
        type: "del",
        raw: cap[0],
        text: cap[2],
        tokens: this.lexer.inlineTokens(cap[2])
      };
    }
  }
  autolink(src, mangle2) {
    const cap = this.rules.inline.autolink.exec(src);
    if (cap) {
      let text, href;
      if (cap[2] === "@") {
        text = escape(this.options.mangle ? mangle2(cap[1]) : cap[1]);
        href = "mailto:" + text;
      } else {
        text = escape(cap[1]);
        href = text;
      }
      return {
        type: "link",
        raw: cap[0],
        text,
        href,
        tokens: [
          {
            type: "text",
            raw: text,
            text
          }
        ]
      };
    }
  }
  url(src, mangle2) {
    let cap;
    if (cap = this.rules.inline.url.exec(src)) {
      let text, href;
      if (cap[2] === "@") {
        text = escape(this.options.mangle ? mangle2(cap[0]) : cap[0]);
        href = "mailto:" + text;
      } else {
        let prevCapZero;
        do {
          prevCapZero = cap[0];
          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];
        } while (prevCapZero !== cap[0]);
        text = escape(cap[0]);
        if (cap[1] === "www.") {
          href = "http://" + cap[0];
        } else {
          href = cap[0];
        }
      }
      return {
        type: "link",
        raw: cap[0],
        text,
        href,
        tokens: [
          {
            type: "text",
            raw: text,
            text
          }
        ]
      };
    }
  }
  inlineText(src, smartypants2) {
    const cap = this.rules.inline.text.exec(src);
    if (cap) {
      let text;
      if (this.lexer.state.inRawBlock) {
        text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];
      } else {
        text = escape(this.options.smartypants ? smartypants2(cap[0]) : cap[0]);
      }
      return {
        type: "text",
        raw: cap[0],
        text
      };
    }
  }
};
var block = {
  newline: /^(?: *(?:\n|$))+/,
  code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,
  fences: /^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,
  hr: /^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,
  heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,
  blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,
  list: /^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,
  html: "^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",
  def: /^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,
  table: noopTest,
  lheading: /^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  // regex template, placeholders will be replaced according to different paragraph
  // interruption rules of commonmark and the original markdown spec:
  _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,
  text: /^[^\n]+/
};
block._label = /(?!\s*\])(?:\\.|[^\[\]\\])+/;
block._title = /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;
block.def = edit(block.def).replace("label", block._label).replace("title", block._title).getRegex();
block.bullet = /(?:[*+-]|\d{1,9}[.)])/;
block.listItemStart = edit(/^( *)(bull) */).replace("bull", block.bullet).getRegex();
block.list = edit(block.list).replace(/bull/g, block.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + block.def.source + ")").getRegex();
block._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";
block._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/;
block.html = edit(block.html, "i").replace("comment", block._comment).replace("tag", block._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();
block.paragraph = edit(block._paragraph).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.blockquote = edit(block.blockquote).replace("paragraph", block.paragraph).getRegex();
block.normal = { ...block };
block.gfm = {
  ...block.normal,
  table: "^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"
  // Cells
};
block.gfm.table = edit(block.gfm.table).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.gfm.paragraph = edit(block._paragraph).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("table", block.gfm.table).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.pedantic = {
  ...block.normal,
  html: edit(
    `^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`
  ).replace("comment", block._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,
  heading: /^(#{1,6})(.*)(?:\n+|$)/,
  fences: noopTest,
  // fences not supported
  lheading: /^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  paragraph: edit(block.normal._paragraph).replace("hr", block.hr).replace("heading", " *#{1,6} *[^\n]").replace("lheading", block.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex()
};
var inline = {
  escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,
  autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/,
  url: noopTest,
  tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",
  // CDATA section
  link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,
  reflink: /^!?\[(label)\]\[(ref)\]/,
  nolink: /^!?\[(ref)\](?:\[\])?/,
  reflinkSearch: "reflink|nolink(?!\\()",
  emStrong: {
    lDelim: /^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,
    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.
    //          () Skip orphan inside strong                                      () Consume to delim     (1) #***                (2) a***#, a***                             (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a
    rDelimAst: /^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,
    rDelimUnd: /^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/
    // ^- Not allowed for _
  },
  code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,
  br: /^( {2,}|\\)\n(?!\s*$)/,
  del: noopTest,
  text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,
  punctuation: /^([\spunctuation])/
};
inline._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";
inline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();
inline.blockSkip = /\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;
inline.escapedEmSt = /(?:^|[^\\])(?:\\\\)*\\[*_]/g;
inline._comment = edit(block._comment).replace("(?:-->|$)", "-->").getRegex();
inline.emStrong.lDelim = edit(inline.emStrong.lDelim).replace(/punct/g, inline._punctuation).getRegex();
inline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, "g").replace(/punct/g, inline._punctuation).getRegex();
inline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, "g").replace(/punct/g, inline._punctuation).getRegex();
inline._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;
inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;
inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;
inline.autolink = edit(inline.autolink).replace("scheme", inline._scheme).replace("email", inline._email).getRegex();
inline._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;
inline.tag = edit(inline.tag).replace("comment", inline._comment).replace("attribute", inline._attribute).getRegex();
inline._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;
inline._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;
inline._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;
inline.link = edit(inline.link).replace("label", inline._label).replace("href", inline._href).replace("title", inline._title).getRegex();
inline.reflink = edit(inline.reflink).replace("label", inline._label).replace("ref", block._label).getRegex();
inline.nolink = edit(inline.nolink).replace("ref", block._label).getRegex();
inline.reflinkSearch = edit(inline.reflinkSearch, "g").replace("reflink", inline.reflink).replace("nolink", inline.nolink).getRegex();
inline.normal = { ...inline };
inline.pedantic = {
  ...inline.normal,
  strong: {
    start: /^__|\*\*/,
    middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
    endAst: /\*\*(?!\*)/g,
    endUnd: /__(?!_)/g
  },
  em: {
    start: /^_|\*/,
    middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,
    endAst: /\*(?!\*)/g,
    endUnd: /_(?!_)/g
  },
  link: edit(/^!?\[(label)\]\((.*?)\)/).replace("label", inline._label).getRegex(),
  reflink: edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", inline._label).getRegex()
};
inline.gfm = {
  ...inline.normal,
  escape: edit(inline.escape).replace("])", "~|])").getRegex(),
  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,
  url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,
  _backpedal: /(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,
  del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,
  text: /^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/
};
inline.gfm.url = edit(inline.gfm.url, "i").replace("email", inline.gfm._extended_email).getRegex();
inline.breaks = {
  ...inline.gfm,
  br: edit(inline.br).replace("{2,}", "*").getRegex(),
  text: edit(inline.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex()
};
function smartypants(text) {
  return text.replace(/---/g, "\u2014").replace(/--/g, "\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1\u2018").replace(/'/g, "\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1\u201C").replace(/"/g, "\u201D").replace(/\.{3}/g, "\u2026");
}
function mangle(text) {
  let out = "", i, ch;
  const l = text.length;
  for (i = 0; i < l; i++) {
    ch = text.charCodeAt(i);
    if (Math.random() > 0.5) {
      ch = "x" + ch.toString(16);
    }
    out += "&#" + ch + ";";
  }
  return out;
}
var Lexer = class {
  constructor(options2) {
    this.tokens = [];
    this.tokens.links = /* @__PURE__ */ Object.create(null);
    this.options = options2 || defaults;
    this.options.tokenizer = this.options.tokenizer || new Tokenizer();
    this.tokenizer = this.options.tokenizer;
    this.tokenizer.options = this.options;
    this.tokenizer.lexer = this;
    this.inlineQueue = [];
    this.state = {
      inLink: false,
      inRawBlock: false,
      top: true
    };
    const rules = {
      block: block.normal,
      inline: inline.normal
    };
    if (this.options.pedantic) {
      rules.block = block.pedantic;
      rules.inline = inline.pedantic;
    } else if (this.options.gfm) {
      rules.block = block.gfm;
      if (this.options.breaks) {
        rules.inline = inline.breaks;
      } else {
        rules.inline = inline.gfm;
      }
    }
    this.tokenizer.rules = rules;
  }
  /**
   * Expose Rules
   */
  static get rules() {
    return {
      block,
      inline
    };
  }
  /**
   * Static Lex Method
   */
  static lex(src, options2) {
    const lexer2 = new Lexer(options2);
    return lexer2.lex(src);
  }
  /**
   * Static Lex Inline Method
   */
  static lexInline(src, options2) {
    const lexer2 = new Lexer(options2);
    return lexer2.inlineTokens(src);
  }
  /**
   * Preprocessing
   */
  lex(src) {
    src = src.replace(/\r\n|\r/g, "\n");
    this.blockTokens(src, this.tokens);
    let next;
    while (next = this.inlineQueue.shift()) {
      this.inlineTokens(next.src, next.tokens);
    }
    return this.tokens;
  }
  /**
   * Lexing
   */
  blockTokens(src, tokens = []) {
    if (this.options.pedantic) {
      src = src.replace(/\t/g, "    ").replace(/^ +$/gm, "");
    } else {
      src = src.replace(/^( *)(\t+)/gm, (_, leading, tabs) => {
        return leading + "    ".repeat(tabs.length);
      });
    }
    let token, lastToken, cutSrc, lastParagraphClipped;
    while (src) {
      if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some((extTokenizer) => {
        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {
          src = src.substring(token.raw.length);
          tokens.push(token);
          return true;
        }
        return false;
      })) {
        continue;
      }
      if (token = this.tokenizer.space(src)) {
        src = src.substring(token.raw.length);
        if (token.raw.length === 1 && tokens.length > 0) {
          tokens[tokens.length - 1].raw += "\n";
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.code(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && (lastToken.type === "paragraph" || lastToken.type === "text")) {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.fences(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.heading(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.hr(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.blockquote(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.list(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.html(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.def(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && (lastToken.type === "paragraph" || lastToken.type === "text")) {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.raw;
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else if (!this.tokens.links[token.tag]) {
          this.tokens.links[token.tag] = {
            href: token.href,
            title: token.title
          };
        }
        continue;
      }
      if (token = this.tokenizer.table(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.lheading(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      cutSrc = src;
      if (this.options.extensions && this.options.extensions.startBlock) {
        let startIndex = Infinity;
        const tempSrc = src.slice(1);
        let tempStart;
        this.options.extensions.startBlock.forEach(function(getStartIndex) {
          tempStart = getStartIndex.call({ lexer: this }, tempSrc);
          if (typeof tempStart === "number" && tempStart >= 0) {
            startIndex = Math.min(startIndex, tempStart);
          }
        });
        if (startIndex < Infinity && startIndex >= 0) {
          cutSrc = src.substring(0, startIndex + 1);
        }
      }
      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {
        lastToken = tokens[tokens.length - 1];
        if (lastParagraphClipped && lastToken.type === "paragraph") {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue.pop();
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        lastParagraphClipped = cutSrc.length !== src.length;
        src = src.substring(token.raw.length);
        continue;
      }
      if (token = this.tokenizer.text(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && lastToken.type === "text") {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue.pop();
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (src) {
        const errMsg = "Infinite loop on byte: " + src.charCodeAt(0);
        if (this.options.silent) {
          console.error(errMsg);
          break;
        } else {
          throw new Error(errMsg);
        }
      }
    }
    this.state.top = true;
    return tokens;
  }
  inline(src, tokens = []) {
    this.inlineQueue.push({ src, tokens });
    return tokens;
  }
  /**
   * Lexing/Compiling
   */
  inlineTokens(src, tokens = []) {
    let token, lastToken, cutSrc;
    let maskedSrc = src;
    let match;
    let keepPrevChar, prevChar;
    if (this.tokens.links) {
      const links = Object.keys(this.tokens.links);
      if (links.length > 0) {
        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {
          if (links.includes(match[0].slice(match[0].lastIndexOf("[") + 1, -1))) {
            maskedSrc = maskedSrc.slice(0, match.index) + "[" + repeatString("a", match[0].length - 2) + "]" + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);
          }
        }
      }
    }
    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {
      maskedSrc = maskedSrc.slice(0, match.index) + "[" + repeatString("a", match[0].length - 2) + "]" + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    }
    while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {
      maskedSrc = maskedSrc.slice(0, match.index + match[0].length - 2) + "++" + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);
      this.tokenizer.rules.inline.escapedEmSt.lastIndex--;
    }
    while (src) {
      if (!keepPrevChar) {
        prevChar = "";
      }
      keepPrevChar = false;
      if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some((extTokenizer) => {
        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {
          src = src.substring(token.raw.length);
          tokens.push(token);
          return true;
        }
        return false;
      })) {
        continue;
      }
      if (token = this.tokenizer.escape(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.tag(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && token.type === "text" && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.link(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.reflink(src, this.tokens.links)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && token.type === "text" && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.codespan(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.br(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.del(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.autolink(src, mangle)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      cutSrc = src;
      if (this.options.extensions && this.options.extensions.startInline) {
        let startIndex = Infinity;
        const tempSrc = src.slice(1);
        let tempStart;
        this.options.extensions.startInline.forEach(function(getStartIndex) {
          tempStart = getStartIndex.call({ lexer: this }, tempSrc);
          if (typeof tempStart === "number" && tempStart >= 0) {
            startIndex = Math.min(startIndex, tempStart);
          }
        });
        if (startIndex < Infinity && startIndex >= 0) {
          cutSrc = src.substring(0, startIndex + 1);
        }
      }
      if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {
        src = src.substring(token.raw.length);
        if (token.raw.slice(-1) !== "_") {
          prevChar = token.raw.slice(-1);
        }
        keepPrevChar = true;
        lastToken = tokens[tokens.length - 1];
        if (lastToken && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (src) {
        const errMsg = "Infinite loop on byte: " + src.charCodeAt(0);
        if (this.options.silent) {
          console.error(errMsg);
          break;
        } else {
          throw new Error(errMsg);
        }
      }
    }
    return tokens;
  }
};
var Renderer = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  code(code, infostring, escaped) {
    const lang = (infostring || "").match(/\S*/)[0];
    if (this.options.highlight) {
      const out = this.options.highlight(code, lang);
      if (out != null && out !== code) {
        escaped = true;
        code = out;
      }
    }
    code = code.replace(/\n$/, "") + "\n";
    if (!lang) {
      return "<pre><code>" + (escaped ? code : escape(code, true)) + "</code></pre>\n";
    }
    return '<pre><code class="' + this.options.langPrefix + escape(lang) + '">' + (escaped ? code : escape(code, true)) + "</code></pre>\n";
  }
  /**
   * @param {string} quote
   */
  blockquote(quote) {
    return `<blockquote>
${quote}</blockquote>
`;
  }
  html(html) {
    return html;
  }
  /**
   * @param {string} text
   * @param {string} level
   * @param {string} raw
   * @param {any} slugger
   */
  heading(text, level, raw, slugger) {
    if (this.options.headerIds) {
      const id = this.options.headerPrefix + slugger.slug(raw);
      return `<h${level} id="${id}">${text}</h${level}>
`;
    }
    return `<h${level}>${text}</h${level}>
`;
  }
  hr() {
    return this.options.xhtml ? "<hr/>\n" : "<hr>\n";
  }
  list(body, ordered, start) {
    const type = ordered ? "ol" : "ul", startatt = ordered && start !== 1 ? ' start="' + start + '"' : "";
    return "<" + type + startatt + ">\n" + body + "</" + type + ">\n";
  }
  /**
   * @param {string} text
   */
  listitem(text) {
    return `<li>${text}</li>
`;
  }
  checkbox(checked) {
    return "<input " + (checked ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";
  }
  /**
   * @param {string} text
   */
  paragraph(text) {
    return `<p>${text}</p>
`;
  }
  /**
   * @param {string} header
   * @param {string} body
   */
  table(header, body) {
    if (body)
      body = `<tbody>${body}</tbody>`;
    return "<table>\n<thead>\n" + header + "</thead>\n" + body + "</table>\n";
  }
  /**
   * @param {string} content
   */
  tablerow(content) {
    return `<tr>
${content}</tr>
`;
  }
  tablecell(content, flags) {
    const type = flags.header ? "th" : "td";
    const tag = flags.align ? `<${type} align="${flags.align}">` : `<${type}>`;
    return tag + content + `</${type}>
`;
  }
  /**
   * span level renderer
   * @param {string} text
   */
  strong(text) {
    return `<strong>${text}</strong>`;
  }
  /**
   * @param {string} text
   */
  em(text) {
    return `<em>${text}</em>`;
  }
  /**
   * @param {string} text
   */
  codespan(text) {
    return `<code>${text}</code>`;
  }
  br() {
    return this.options.xhtml ? "<br/>" : "<br>";
  }
  /**
   * @param {string} text
   */
  del(text) {
    return `<del>${text}</del>`;
  }
  /**
   * @param {string} href
   * @param {string} title
   * @param {string} text
   */
  link(href, title, text) {
    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);
    if (href === null) {
      return text;
    }
    let out = '<a href="' + href + '"';
    if (title) {
      out += ' title="' + title + '"';
    }
    out += ">" + text + "</a>";
    return out;
  }
  /**
   * @param {string} href
   * @param {string} title
   * @param {string} text
   */
  image(href, title, text) {
    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);
    if (href === null) {
      return text;
    }
    let out = `<img src="${href}" alt="${text}"`;
    if (title) {
      out += ` title="${title}"`;
    }
    out += this.options.xhtml ? "/>" : ">";
    return out;
  }
  text(text) {
    return text;
  }
};
var TextRenderer = class {
  // no need for block level renderers
  strong(text) {
    return text;
  }
  em(text) {
    return text;
  }
  codespan(text) {
    return text;
  }
  del(text) {
    return text;
  }
  html(text) {
    return text;
  }
  text(text) {
    return text;
  }
  link(href, title, text) {
    return "" + text;
  }
  image(href, title, text) {
    return "" + text;
  }
  br() {
    return "";
  }
};
var Slugger = class {
  constructor() {
    this.seen = {};
  }
  /**
   * @param {string} value
   */
  serialize(value) {
    return value.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");
  }
  /**
   * Finds the next safe (unique) slug to use
   * @param {string} originalSlug
   * @param {boolean} isDryRun
   */
  getNextSafeSlug(originalSlug, isDryRun) {
    let slug = originalSlug;
    let occurenceAccumulator = 0;
    if (this.seen.hasOwnProperty(slug)) {
      occurenceAccumulator = this.seen[originalSlug];
      do {
        occurenceAccumulator++;
        slug = originalSlug + "-" + occurenceAccumulator;
      } while (this.seen.hasOwnProperty(slug));
    }
    if (!isDryRun) {
      this.seen[originalSlug] = occurenceAccumulator;
      this.seen[slug] = 0;
    }
    return slug;
  }
  /**
   * Convert string to unique id
   * @param {object} [options]
   * @param {boolean} [options.dryrun] Generates the next unique slug without
   * updating the internal accumulator.
   */
  slug(value, options2 = {}) {
    const slug = this.serialize(value);
    return this.getNextSafeSlug(slug, options2.dryrun);
  }
};
var Parser = class {
  constructor(options2) {
    this.options = options2 || defaults;
    this.options.renderer = this.options.renderer || new Renderer();
    this.renderer = this.options.renderer;
    this.renderer.options = this.options;
    this.textRenderer = new TextRenderer();
    this.slugger = new Slugger();
  }
  /**
   * Static Parse Method
   */
  static parse(tokens, options2) {
    const parser2 = new Parser(options2);
    return parser2.parse(tokens);
  }
  /**
   * Static Parse Inline Method
   */
  static parseInline(tokens, options2) {
    const parser2 = new Parser(options2);
    return parser2.parseInline(tokens);
  }
  /**
   * Parse Loop
   */
  parse(tokens, top = true) {
    let out = "", i, j, k, l2, l3, row, cell, header, body, token, ordered, start, loose, itemBody, item, checked, task, checkbox, ret;
    const l = tokens.length;
    for (i = 0; i < l; i++) {
      token = tokens[i];
      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {
        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);
        if (ret !== false || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "paragraph", "text"].includes(token.type)) {
          out += ret || "";
          continue;
        }
      }
      switch (token.type) {
        case "space": {
          continue;
        }
        case "hr": {
          out += this.renderer.hr();
          continue;
        }
        case "heading": {
          out += this.renderer.heading(
            this.parseInline(token.tokens),
            token.depth,
            unescape(this.parseInline(token.tokens, this.textRenderer)),
            this.slugger
          );
          continue;
        }
        case "code": {
          out += this.renderer.code(
            token.text,
            token.lang,
            token.escaped
          );
          continue;
        }
        case "table": {
          header = "";
          cell = "";
          l2 = token.header.length;
          for (j = 0; j < l2; j++) {
            cell += this.renderer.tablecell(
              this.parseInline(token.header[j].tokens),
              { header: true, align: token.align[j] }
            );
          }
          header += this.renderer.tablerow(cell);
          body = "";
          l2 = token.rows.length;
          for (j = 0; j < l2; j++) {
            row = token.rows[j];
            cell = "";
            l3 = row.length;
            for (k = 0; k < l3; k++) {
              cell += this.renderer.tablecell(
                this.parseInline(row[k].tokens),
                { header: false, align: token.align[k] }
              );
            }
            body += this.renderer.tablerow(cell);
          }
          out += this.renderer.table(header, body);
          continue;
        }
        case "blockquote": {
          body = this.parse(token.tokens);
          out += this.renderer.blockquote(body);
          continue;
        }
        case "list": {
          ordered = token.ordered;
          start = token.start;
          loose = token.loose;
          l2 = token.items.length;
          body = "";
          for (j = 0; j < l2; j++) {
            item = token.items[j];
            checked = item.checked;
            task = item.task;
            itemBody = "";
            if (item.task) {
              checkbox = this.renderer.checkbox(checked);
              if (loose) {
                if (item.tokens.length > 0 && item.tokens[0].type === "paragraph") {
                  item.tokens[0].text = checkbox + " " + item.tokens[0].text;
                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === "text") {
                    item.tokens[0].tokens[0].text = checkbox + " " + item.tokens[0].tokens[0].text;
                  }
                } else {
                  item.tokens.unshift({
                    type: "text",
                    text: checkbox
                  });
                }
              } else {
                itemBody += checkbox;
              }
            }
            itemBody += this.parse(item.tokens, loose);
            body += this.renderer.listitem(itemBody, task, checked);
          }
          out += this.renderer.list(body, ordered, start);
          continue;
        }
        case "html": {
          out += this.renderer.html(token.text);
          continue;
        }
        case "paragraph": {
          out += this.renderer.paragraph(this.parseInline(token.tokens));
          continue;
        }
        case "text": {
          body = token.tokens ? this.parseInline(token.tokens) : token.text;
          while (i + 1 < l && tokens[i + 1].type === "text") {
            token = tokens[++i];
            body += "\n" + (token.tokens ? this.parseInline(token.tokens) : token.text);
          }
          out += top ? this.renderer.paragraph(body) : body;
          continue;
        }
        default: {
          const errMsg = 'Token with "' + token.type + '" type was not found.';
          if (this.options.silent) {
            console.error(errMsg);
            return;
          } else {
            throw new Error(errMsg);
          }
        }
      }
    }
    return out;
  }
  /**
   * Parse Inline Tokens
   */
  parseInline(tokens, renderer) {
    renderer = renderer || this.renderer;
    let out = "", i, token, ret;
    const l = tokens.length;
    for (i = 0; i < l; i++) {
      token = tokens[i];
      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {
        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);
        if (ret !== false || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(token.type)) {
          out += ret || "";
          continue;
        }
      }
      switch (token.type) {
        case "escape": {
          out += renderer.text(token.text);
          break;
        }
        case "html": {
          out += renderer.html(token.text);
          break;
        }
        case "link": {
          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));
          break;
        }
        case "image": {
          out += renderer.image(token.href, token.title, token.text);
          break;
        }
        case "strong": {
          out += renderer.strong(this.parseInline(token.tokens, renderer));
          break;
        }
        case "em": {
          out += renderer.em(this.parseInline(token.tokens, renderer));
          break;
        }
        case "codespan": {
          out += renderer.codespan(token.text);
          break;
        }
        case "br": {
          out += renderer.br();
          break;
        }
        case "del": {
          out += renderer.del(this.parseInline(token.tokens, renderer));
          break;
        }
        case "text": {
          out += renderer.text(token.text);
          break;
        }
        default: {
          const errMsg = 'Token with "' + token.type + '" type was not found.';
          if (this.options.silent) {
            console.error(errMsg);
            return;
          } else {
            throw new Error(errMsg);
          }
        }
      }
    }
    return out;
  }
};
var Hooks = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  /**
   * Process markdown before marked
   */
  preprocess(markdown) {
    return markdown;
  }
  /**
   * Process HTML after marked is finished
   */
  postprocess(html) {
    return html;
  }
};
__publicField(Hooks, "passThroughHooks", /* @__PURE__ */ new Set([
  "preprocess",
  "postprocess"
]));
function onError(silent, async, callback) {
  return (e) => {
    e.message += "\nPlease report this to https://github.com/markedjs/marked.";
    if (silent) {
      const msg = "<p>An error occurred:</p><pre>" + escape(e.message + "", true) + "</pre>";
      if (async) {
        return Promise.resolve(msg);
      }
      if (callback) {
        callback(null, msg);
        return;
      }
      return msg;
    }
    if (async) {
      return Promise.reject(e);
    }
    if (callback) {
      callback(e);
      return;
    }
    throw e;
  };
}
function parseMarkdown(lexer2, parser2) {
  return (src, opt, callback) => {
    if (typeof opt === "function") {
      callback = opt;
      opt = null;
    }
    const origOpt = { ...opt };
    opt = { ...marked.defaults, ...origOpt };
    const throwError = onError(opt.silent, opt.async, callback);
    if (typeof src === "undefined" || src === null) {
      return throwError(new Error("marked(): input parameter is undefined or null"));
    }
    if (typeof src !== "string") {
      return throwError(new Error("marked(): input parameter is of type " + Object.prototype.toString.call(src) + ", string expected"));
    }
    checkSanitizeDeprecation(opt);
    if (opt.hooks) {
      opt.hooks.options = opt;
    }
    if (callback) {
      const highlight = opt.highlight;
      let tokens;
      try {
        if (opt.hooks) {
          src = opt.hooks.preprocess(src);
        }
        tokens = lexer2(src, opt);
      } catch (e) {
        return throwError(e);
      }
      const done = function(err) {
        let out;
        if (!err) {
          try {
            if (opt.walkTokens) {
              marked.walkTokens(tokens, opt.walkTokens);
            }
            out = parser2(tokens, opt);
            if (opt.hooks) {
              out = opt.hooks.postprocess(out);
            }
          } catch (e) {
            err = e;
          }
        }
        opt.highlight = highlight;
        return err ? throwError(err) : callback(null, out);
      };
      if (!highlight || highlight.length < 3) {
        return done();
      }
      delete opt.highlight;
      if (!tokens.length)
        return done();
      let pending = 0;
      marked.walkTokens(tokens, function(token) {
        if (token.type === "code") {
          pending++;
          setTimeout(() => {
            highlight(token.text, token.lang, function(err, code) {
              if (err) {
                return done(err);
              }
              if (code != null && code !== token.text) {
                token.text = code;
                token.escaped = true;
              }
              pending--;
              if (pending === 0) {
                done();
              }
            });
          }, 0);
        }
      });
      if (pending === 0) {
        done();
      }
      return;
    }
    if (opt.async) {
      return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src).then((src2) => lexer2(src2, opt)).then((tokens) => opt.walkTokens ? Promise.all(marked.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens).then((tokens) => parser2(tokens, opt)).then((html) => opt.hooks ? opt.hooks.postprocess(html) : html).catch(throwError);
    }
    try {
      if (opt.hooks) {
        src = opt.hooks.preprocess(src);
      }
      const tokens = lexer2(src, opt);
      if (opt.walkTokens) {
        marked.walkTokens(tokens, opt.walkTokens);
      }
      let html = parser2(tokens, opt);
      if (opt.hooks) {
        html = opt.hooks.postprocess(html);
      }
      return html;
    } catch (e) {
      return throwError(e);
    }
  };
}
function marked(src, opt, callback) {
  return parseMarkdown(Lexer.lex, Parser.parse)(src, opt, callback);
}
marked.options = marked.setOptions = function(opt) {
  marked.defaults = { ...marked.defaults, ...opt };
  changeDefaults(marked.defaults);
  return marked;
};
marked.getDefaults = getDefaults;
marked.defaults = defaults;
marked.use = function(...args) {
  const extensions = marked.defaults.extensions || { renderers: {}, childTokens: {} };
  args.forEach((pack) => {
    const opts = { ...pack };
    opts.async = marked.defaults.async || opts.async || false;
    if (pack.extensions) {
      pack.extensions.forEach((ext) => {
        if (!ext.name) {
          throw new Error("extension name required");
        }
        if (ext.renderer) {
          const prevRenderer = extensions.renderers[ext.name];
          if (prevRenderer) {
            extensions.renderers[ext.name] = function(...args2) {
              let ret = ext.renderer.apply(this, args2);
              if (ret === false) {
                ret = prevRenderer.apply(this, args2);
              }
              return ret;
            };
          } else {
            extensions.renderers[ext.name] = ext.renderer;
          }
        }
        if (ext.tokenizer) {
          if (!ext.level || ext.level !== "block" && ext.level !== "inline") {
            throw new Error("extension level must be 'block' or 'inline'");
          }
          if (extensions[ext.level]) {
            extensions[ext.level].unshift(ext.tokenizer);
          } else {
            extensions[ext.level] = [ext.tokenizer];
          }
          if (ext.start) {
            if (ext.level === "block") {
              if (extensions.startBlock) {
                extensions.startBlock.push(ext.start);
              } else {
                extensions.startBlock = [ext.start];
              }
            } else if (ext.level === "inline") {
              if (extensions.startInline) {
                extensions.startInline.push(ext.start);
              } else {
                extensions.startInline = [ext.start];
              }
            }
          }
        }
        if (ext.childTokens) {
          extensions.childTokens[ext.name] = ext.childTokens;
        }
      });
      opts.extensions = extensions;
    }
    if (pack.renderer) {
      const renderer = marked.defaults.renderer || new Renderer();
      for (const prop in pack.renderer) {
        const prevRenderer = renderer[prop];
        renderer[prop] = (...args2) => {
          let ret = pack.renderer[prop].apply(renderer, args2);
          if (ret === false) {
            ret = prevRenderer.apply(renderer, args2);
          }
          return ret;
        };
      }
      opts.renderer = renderer;
    }
    if (pack.tokenizer) {
      const tokenizer = marked.defaults.tokenizer || new Tokenizer();
      for (const prop in pack.tokenizer) {
        const prevTokenizer = tokenizer[prop];
        tokenizer[prop] = (...args2) => {
          let ret = pack.tokenizer[prop].apply(tokenizer, args2);
          if (ret === false) {
            ret = prevTokenizer.apply(tokenizer, args2);
          }
          return ret;
        };
      }
      opts.tokenizer = tokenizer;
    }
    if (pack.hooks) {
      const hooks = marked.defaults.hooks || new Hooks();
      for (const prop in pack.hooks) {
        const prevHook = hooks[prop];
        if (Hooks.passThroughHooks.has(prop)) {
          hooks[prop] = (arg) => {
            if (marked.defaults.async) {
              return Promise.resolve(pack.hooks[prop].call(hooks, arg)).then((ret2) => {
                return prevHook.call(hooks, ret2);
              });
            }
            const ret = pack.hooks[prop].call(hooks, arg);
            return prevHook.call(hooks, ret);
          };
        } else {
          hooks[prop] = (...args2) => {
            let ret = pack.hooks[prop].apply(hooks, args2);
            if (ret === false) {
              ret = prevHook.apply(hooks, args2);
            }
            return ret;
          };
        }
      }
      opts.hooks = hooks;
    }
    if (pack.walkTokens) {
      const walkTokens2 = marked.defaults.walkTokens;
      opts.walkTokens = function(token) {
        let values = [];
        values.push(pack.walkTokens.call(this, token));
        if (walkTokens2) {
          values = values.concat(walkTokens2.call(this, token));
        }
        return values;
      };
    }
    marked.setOptions(opts);
  });
};
marked.walkTokens = function(tokens, callback) {
  let values = [];
  for (const token of tokens) {
    values = values.concat(callback.call(marked, token));
    switch (token.type) {
      case "table": {
        for (const cell of token.header) {
          values = values.concat(marked.walkTokens(cell.tokens, callback));
        }
        for (const row of token.rows) {
          for (const cell of row) {
            values = values.concat(marked.walkTokens(cell.tokens, callback));
          }
        }
        break;
      }
      case "list": {
        values = values.concat(marked.walkTokens(token.items, callback));
        break;
      }
      default: {
        if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {
          marked.defaults.extensions.childTokens[token.type].forEach(function(childTokens) {
            values = values.concat(marked.walkTokens(token[childTokens], callback));
          });
        } else if (token.tokens) {
          values = values.concat(marked.walkTokens(token.tokens, callback));
        }
      }
    }
  }
  return values;
};
marked.parseInline = parseMarkdown(Lexer.lexInline, Parser.parseInline);
marked.Parser = Parser;
marked.parser = Parser.parse;
marked.Renderer = Renderer;
marked.TextRenderer = TextRenderer;
marked.Lexer = Lexer;
marked.lexer = Lexer.lex;
marked.Tokenizer = Tokenizer;
marked.Slugger = Slugger;
marked.Hooks = Hooks;
marked.parse = marked;
var options = marked.options;
var setOptions = marked.setOptions;
var use = marked.use;
var walkTokens = marked.walkTokens;
var parseInline = marked.parseInline;
var parser = Parser.parse;
var lexer = Lexer.lex;

// src/commands.ts
var import_obsidian3 = require("obsidian");

// src/models.ts
var import_obsidian2 = require("obsidian");

// node_modules/openai/version.mjs
var VERSION = "4.6.0";

// node_modules/openai/streaming.mjs
var Stream = class {
  constructor(response, controller) {
    this.response = response;
    this.controller = controller;
    this.decoder = new SSEDecoder();
  }
  async *iterMessages() {
    if (!this.response.body) {
      this.controller.abort();
      throw new Error(`Attempted to iterate over a response with no body`);
    }
    const lineDecoder = new LineDecoder();
    const iter = readableStreamAsyncIterable(this.response.body);
    for await (const chunk of iter) {
      for (const line of lineDecoder.decode(chunk)) {
        const sse = this.decoder.decode(line);
        if (sse)
          yield sse;
      }
    }
    for (const line of lineDecoder.flush()) {
      const sse = this.decoder.decode(line);
      if (sse)
        yield sse;
    }
  }
  async *[Symbol.asyncIterator]() {
    let done = false;
    try {
      for await (const sse of this.iterMessages()) {
        if (done)
          continue;
        if (sse.data.startsWith("[DONE]")) {
          done = true;
          continue;
        }
        if (sse.event === null) {
          try {
            yield JSON.parse(sse.data);
          } catch (e) {
            console.error(`Could not parse message into JSON:`, sse.data);
            console.error(`From chunk:`, sse.raw);
            throw e;
          }
        }
      }
      done = true;
    } catch (e) {
      if (e instanceof Error && e.name === "AbortError")
        return;
      throw e;
    } finally {
      if (!done)
        this.controller.abort();
    }
  }
};
var SSEDecoder = class {
  constructor() {
    this.event = null;
    this.data = [];
    this.chunks = [];
  }
  decode(line) {
    if (line.endsWith("\r")) {
      line = line.substring(0, line.length - 1);
    }
    if (!line) {
      if (!this.event && !this.data.length)
        return null;
      const sse = {
        event: this.event,
        data: this.data.join("\n"),
        raw: this.chunks
      };
      this.event = null;
      this.data = [];
      this.chunks = [];
      return sse;
    }
    this.chunks.push(line);
    if (line.startsWith(":")) {
      return null;
    }
    let [fieldname, _, value] = partition(line, ":");
    if (value.startsWith(" ")) {
      value = value.substring(1);
    }
    if (fieldname === "event") {
      this.event = value;
    } else if (fieldname === "data") {
      this.data.push(value);
    }
    return null;
  }
};
var LineDecoder = class {
  constructor() {
    this.buffer = [];
    this.trailingCR = false;
  }
  decode(chunk) {
    let text = this.decodeText(chunk);
    if (this.trailingCR) {
      text = "\r" + text;
      this.trailingCR = false;
    }
    if (text.endsWith("\r")) {
      this.trailingCR = true;
      text = text.slice(0, -1);
    }
    if (!text) {
      return [];
    }
    const trailingNewline = LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
    let lines = text.split(LineDecoder.NEWLINE_REGEXP);
    if (lines.length === 1 && !trailingNewline) {
      this.buffer.push(lines[0]);
      return [];
    }
    if (this.buffer.length > 0) {
      lines = [this.buffer.join("") + lines[0], ...lines.slice(1)];
      this.buffer = [];
    }
    if (!trailingNewline) {
      this.buffer = [lines.pop() || ""];
    }
    return lines;
  }
  decodeText(bytes) {
    var _a2;
    if (bytes == null)
      return "";
    if (typeof bytes === "string")
      return bytes;
    if (typeof Buffer !== "undefined") {
      if (bytes instanceof Buffer) {
        return bytes.toString();
      }
      if (bytes instanceof Uint8Array) {
        return Buffer.from(bytes).toString();
      }
      throw new Error(
        `Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`
      );
    }
    if (typeof TextDecoder !== "undefined") {
      if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
        (_a2 = this.textDecoder) !== null && _a2 !== void 0 ? _a2 : this.textDecoder = new TextDecoder("utf8");
        return this.textDecoder.decode(bytes);
      }
      throw new Error(
        `Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`
      );
    }
    throw new Error(
      `Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`
    );
  }
  flush() {
    if (!this.buffer.length && !this.trailingCR) {
      return [];
    }
    const lines = [this.buffer.join("")];
    this.buffer = [];
    this.trailingCR = false;
    return lines;
  }
};
LineDecoder.NEWLINE_CHARS = /* @__PURE__ */ new Set(["\n", "\r", "\v", "\f", "", "", "", "\x85", "\u2028", "\u2029"]);
LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;
function partition(str, delimiter) {
  const index = str.indexOf(delimiter);
  if (index !== -1) {
    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];
  }
  return [str, "", ""];
}
function readableStreamAsyncIterable(stream) {
  if (stream[Symbol.asyncIterator])
    return stream;
  const reader = stream.getReader();
  return {
    async next() {
      try {
        const result = await reader.read();
        if (result === null || result === void 0 ? void 0 : result.done)
          reader.releaseLock();
        return result;
      } catch (e) {
        reader.releaseLock();
        throw e;
      }
    },
    async return() {
      const cancelPromise = reader.cancel();
      reader.releaseLock();
      await cancelPromise;
      return { done: true, value: void 0 };
    },
    [Symbol.asyncIterator]() {
      return this;
    }
  };
}

// node_modules/openai/error.mjs
var error_exports = {};
__export(error_exports, {
  APIConnectionError: () => APIConnectionError,
  APIConnectionTimeoutError: () => APIConnectionTimeoutError,
  APIError: () => APIError,
  APIUserAbortError: () => APIUserAbortError,
  AuthenticationError: () => AuthenticationError,
  BadRequestError: () => BadRequestError,
  ConflictError: () => ConflictError,
  InternalServerError: () => InternalServerError,
  NotFoundError: () => NotFoundError,
  PermissionDeniedError: () => PermissionDeniedError,
  RateLimitError: () => RateLimitError,
  UnprocessableEntityError: () => UnprocessableEntityError
});
var APIError = class extends Error {
  constructor(status, error, message, headers) {
    super(APIError.makeMessage(error, message));
    this.status = status;
    this.headers = headers;
    const data = error;
    this.error = data;
    this.code = data === null || data === void 0 ? void 0 : data["code"];
    this.param = data === null || data === void 0 ? void 0 : data["param"];
    this.type = data === null || data === void 0 ? void 0 : data["type"];
  }
  static makeMessage(error, message) {
    return (error === null || error === void 0 ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message || "Unknown error occurred";
  }
  static generate(status, errorResponse, message, headers) {
    if (!status) {
      return new APIConnectionError({ cause: castToError(errorResponse) });
    }
    const error = errorResponse === null || errorResponse === void 0 ? void 0 : errorResponse["error"];
    if (status === 400) {
      return new BadRequestError(status, error, message, headers);
    }
    if (status === 401) {
      return new AuthenticationError(status, error, message, headers);
    }
    if (status === 403) {
      return new PermissionDeniedError(status, error, message, headers);
    }
    if (status === 404) {
      return new NotFoundError(status, error, message, headers);
    }
    if (status === 409) {
      return new ConflictError(status, error, message, headers);
    }
    if (status === 422) {
      return new UnprocessableEntityError(status, error, message, headers);
    }
    if (status === 429) {
      return new RateLimitError(status, error, message, headers);
    }
    if (status >= 500) {
      return new InternalServerError(status, error, message, headers);
    }
    return new APIError(status, error, message, headers);
  }
};
var APIUserAbortError = class extends APIError {
  constructor({ message } = {}) {
    super(void 0, void 0, message || "Request was aborted.", void 0);
    this.status = void 0;
  }
};
var APIConnectionError = class extends APIError {
  constructor({ message, cause }) {
    super(void 0, void 0, message || "Connection error.", void 0);
    this.status = void 0;
    if (cause)
      this.cause = cause;
  }
};
var APIConnectionTimeoutError = class extends APIConnectionError {
  constructor({ message } = {}) {
    super({ message: message !== null && message !== void 0 ? message : "Request timed out." });
  }
};
var BadRequestError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 400;
  }
};
var AuthenticationError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 401;
  }
};
var PermissionDeniedError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 403;
  }
};
var NotFoundError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 404;
  }
};
var ConflictError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 409;
  }
};
var UnprocessableEntityError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 422;
  }
};
var RateLimitError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 429;
  }
};
var InternalServerError = class extends APIError {
};

// node_modules/openai/_shims/agent.mjs
var getDefaultAgent = (url) => {
  return void 0;
};

// node_modules/openai/_shims/fetch.mjs
var _fetch = fetch.bind(void 0);
var isPolyfilled = false;

// node_modules/openai/_shims/form-data.mjs
var _FormData = FormData;
var _File = typeof File !== "undefined" ? File : (
  // Bun doesn't implement File yet, so just make a shim that throws a helpful error message
  class File2 extends Blob {
    constructor() {
      throw new Error(`file uploads aren't supported in this environment yet as 'File' is not defined`);
    }
  }
);

// node_modules/openai/_shims/getMultipartRequestOptions.mjs
async function getMultipartRequestOptions(form, opts) {
  return { ...opts, body: new MultipartBody(form) };
}

// node_modules/openai/_shims/fileFromPath.mjs
async function fileFromPath() {
  throw new Error(
    "The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads"
  );
}

// node_modules/openai/_shims/node-readable.mjs
function isFsReadStream(value) {
  return false;
}

// node_modules/openai/uploads.mjs
var isResponseLike = (value) => value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
var isFileLike = (value) => value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && isBlobLike(value);
var isBlobLike = (value) => value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
var isUploadable = (value) => {
  return isFileLike(value) || isResponseLike(value) || isFsReadStream(value);
};
async function toFile(value, name, options2 = {}) {
  var _a2, _b, _c;
  value = await value;
  if (isResponseLike(value)) {
    const blob = await value.blob();
    name || (name = (_a2 = new URL(value.url).pathname.split(/[\\/]/).pop()) !== null && _a2 !== void 0 ? _a2 : "unknown_file");
    return new _File([blob], name, options2);
  }
  const bits = await getBytes(value);
  name || (name = (_b = getName(value)) !== null && _b !== void 0 ? _b : "unknown_file");
  if (!options2.type) {
    const type = (_c = bits[0]) === null || _c === void 0 ? void 0 : _c.type;
    if (typeof type === "string") {
      options2 = { ...options2, type };
    }
  }
  return new _File(bits, name, options2);
}
async function getBytes(value) {
  var _a2;
  let parts = [];
  if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
  value instanceof ArrayBuffer) {
    parts.push(value);
  } else if (isBlobLike(value)) {
    parts.push(await value.arrayBuffer());
  } else if (isAsyncIterableIterator(value)) {
    for await (const chunk of value) {
      parts.push(chunk);
    }
  } else {
    throw new Error(
      `Unexpected data type: ${typeof value}; constructor: ${(_a2 = value === null || value === void 0 ? void 0 : value.constructor) === null || _a2 === void 0 ? void 0 : _a2.name}; props: ${propsForError(value)}`
    );
  }
  return parts;
}
function propsForError(value) {
  const props = Object.getOwnPropertyNames(value);
  return `[${props.map((p) => `"${p}"`).join(", ")}]`;
}
function getName(value) {
  var _a2;
  return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
  ((_a2 = getStringFromMaybeBuffer(value.path)) === null || _a2 === void 0 ? void 0 : _a2.split(/[\\/]/).pop());
}
var getStringFromMaybeBuffer = (x) => {
  if (typeof x === "string")
    return x;
  if (typeof Buffer !== "undefined" && x instanceof Buffer)
    return String(x);
  return void 0;
};
var isAsyncIterableIterator = (value) => value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
var MultipartBody = class {
  constructor(body) {
    this.body = body;
  }
  get [Symbol.toStringTag]() {
    return "MultipartBody";
  }
};
var isMultipartBody = (body) => body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";
var multipartFormRequestOptions = async (opts) => {
  const form = await createForm(opts.body);
  return getMultipartRequestOptions(form, opts);
};
var createForm = async (body) => {
  const form = new _FormData();
  await Promise.all(Object.entries(body || {}).map(([key, value]) => addFormValue(form, key, value)));
  return form;
};
var addFormValue = async (form, key, value) => {
  if (value === void 0)
    return;
  if (value == null) {
    throw new TypeError(
      `Received null for "${key}"; to pass null in FormData, you must use the string 'null'`
    );
  }
  if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
    form.append(key, String(value));
  } else if (isUploadable(value)) {
    const file = await toFile(value);
    form.append(key, file);
  } else if (Array.isArray(value)) {
    await Promise.all(value.map((entry) => addFormValue(form, key + "[]", entry)));
  } else if (typeof value === "object") {
    await Promise.all(
      Object.entries(value).map(([name, prop]) => addFormValue(form, `${key}[${name}]`, prop))
    );
  } else {
    throw new TypeError(
      `Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`
    );
  }
};

// node_modules/openai/core.mjs
var __classPrivateFieldSet = function(receiver, state, value, kind, f) {
  if (kind === "m")
    throw new TypeError("Private method is not writable");
  if (kind === "a" && !f)
    throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet = function(receiver, state, kind, f) {
  if (kind === "a" && !f)
    throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _AbstractPage_client;
var MAX_RETRIES = 2;
async function defaultParseResponse(props) {
  const { response } = props;
  if (props.options.stream) {
    return new Stream(response, props.controller);
  }
  const contentType = response.headers.get("content-type");
  if (contentType === null || contentType === void 0 ? void 0 : contentType.includes("application/json")) {
    const json = await response.json();
    debug("response", response.status, response.url, response.headers, json);
    return json;
  }
  const text = await response.text();
  debug("response", response.status, response.url, response.headers, text);
  return text;
}
var APIPromise = class extends Promise {
  constructor(responsePromise, parseResponse = defaultParseResponse) {
    super((resolve) => {
      resolve(null);
    });
    this.responsePromise = responsePromise;
    this.parseResponse = parseResponse;
  }
  _thenUnwrap(transform) {
    return new APIPromise(this.responsePromise, async (props) => transform(await this.parseResponse(props)));
  }
  /**
   * Gets the raw `Response` instance instead of parsing the response
   * data.
   *
   * If you want to parse the response body but still get the `Response`
   * instance, you can use {@link withResponse()}.
   */
  asResponse() {
    return this.responsePromise.then((p) => p.response);
  }
  /**
   * Gets the parsed response data and the raw `Response` instance.
   *
   * If you just want to get the raw `Response` instance without parsing it,
   * you can use {@link asResponse()}.
   */
  async withResponse() {
    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);
    return { data, response };
  }
  parse() {
    if (!this.parsedPromise) {
      this.parsedPromise = this.responsePromise.then(this.parseResponse);
    }
    return this.parsedPromise;
  }
  then(onfulfilled, onrejected) {
    return this.parse().then(onfulfilled, onrejected);
  }
  catch(onrejected) {
    return this.parse().catch(onrejected);
  }
  finally(onfinally) {
    return this.parse().finally(onfinally);
  }
};
var APIClient = class {
  constructor({
    baseURL,
    maxRetries,
    timeout = 6e5,
    // 10 minutes
    httpAgent,
    fetch: overridenFetch
  }) {
    this.baseURL = baseURL;
    this.maxRetries = validatePositiveInteger(
      "maxRetries",
      maxRetries !== null && maxRetries !== void 0 ? maxRetries : MAX_RETRIES
    );
    this.timeout = validatePositiveInteger("timeout", timeout);
    this.httpAgent = httpAgent;
    this.fetch = overridenFetch !== null && overridenFetch !== void 0 ? overridenFetch : _fetch;
  }
  authHeaders(opts) {
    return {};
  }
  /**
   * Override this to add your own default headers, for example:
   *
   *  {
   *    ...super.defaultHeaders(),
   *    Authorization: 'Bearer 123',
   *  }
   */
  defaultHeaders(opts) {
    return {
      Accept: "application/json",
      "Content-Type": "application/json",
      "User-Agent": this.getUserAgent(),
      ...getPlatformHeaders(),
      ...this.authHeaders(opts)
    };
  }
  /**
   * Override this to add your own headers validation:
   */
  validateHeaders(headers, customHeaders) {
  }
  defaultIdempotencyKey() {
    return `stainless-node-retry-${uuid4()}`;
  }
  get(path, opts) {
    return this.methodRequest("get", path, opts);
  }
  post(path, opts) {
    return this.methodRequest("post", path, opts);
  }
  patch(path, opts) {
    return this.methodRequest("patch", path, opts);
  }
  put(path, opts) {
    return this.methodRequest("put", path, opts);
  }
  delete(path, opts) {
    return this.methodRequest("delete", path, opts);
  }
  methodRequest(method, path, opts) {
    return this.request(Promise.resolve(opts).then((opts2) => ({ method, path, ...opts2 })));
  }
  getAPIList(path, Page2, opts) {
    return this.requestAPIList(Page2, { method: "get", path, ...opts });
  }
  calculateContentLength(body) {
    if (typeof body === "string") {
      if (typeof Buffer !== "undefined") {
        return Buffer.byteLength(body, "utf8").toString();
      }
      if (typeof TextEncoder !== "undefined") {
        const encoder = new TextEncoder();
        const encoded = encoder.encode(body);
        return encoded.length.toString();
      }
    }
    return null;
  }
  buildRequest(options2) {
    var _a2, _b, _c, _d, _e, _f;
    const { method, path, query, headers = {} } = options2;
    const body = isMultipartBody(options2.body) ? options2.body.body : options2.body ? JSON.stringify(options2.body, null, 2) : null;
    const contentLength = this.calculateContentLength(body);
    const url = this.buildURL(path, query);
    if ("timeout" in options2)
      validatePositiveInteger("timeout", options2.timeout);
    const timeout = (_a2 = options2.timeout) !== null && _a2 !== void 0 ? _a2 : this.timeout;
    const httpAgent = (_c = (_b = options2.httpAgent) !== null && _b !== void 0 ? _b : this.httpAgent) !== null && _c !== void 0 ? _c : getDefaultAgent(url);
    const minAgentTimeout = timeout + 1e3;
    if (typeof ((_d = httpAgent === null || httpAgent === void 0 ? void 0 : httpAgent.options) === null || _d === void 0 ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) !== null && _e !== void 0 ? _e : 0)) {
      httpAgent.options.timeout = minAgentTimeout;
    }
    if (this.idempotencyHeader && method !== "get") {
      if (!options2.idempotencyKey)
        options2.idempotencyKey = this.defaultIdempotencyKey();
      headers[this.idempotencyHeader] = options2.idempotencyKey;
    }
    const reqHeaders = {
      ...contentLength && { "Content-Length": contentLength },
      ...this.defaultHeaders(options2),
      ...headers
    };
    if (isMultipartBody(options2.body) && !isPolyfilled) {
      delete reqHeaders["Content-Type"];
    }
    Object.keys(reqHeaders).forEach((key) => reqHeaders[key] === null && delete reqHeaders[key]);
    const req = {
      method,
      ...body && { body },
      headers: reqHeaders,
      ...httpAgent && { agent: httpAgent },
      // @ts-ignore node-fetch uses a custom AbortSignal type that is
      // not compatible with standard web types
      signal: (_f = options2.signal) !== null && _f !== void 0 ? _f : null
    };
    this.validateHeaders(reqHeaders, headers);
    return { req, url, timeout };
  }
  /**
   * Used as a callback for mutating the given `RequestInit` object.
   *
   * This is useful for cases where you want to add certain headers based off of
   * the request properties, e.g. `method` or `url`.
   */
  async prepareRequest(request, { url, options: options2 }) {
  }
  parseHeaders(headers) {
    return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header) => [...header])) : { ...headers };
  }
  makeStatusError(status, error, message, headers) {
    return APIError.generate(status, error, message, headers);
  }
  request(options2, remainingRetries = null) {
    return new APIPromise(this.makeRequest(options2, remainingRetries));
  }
  async makeRequest(optionsInput, retriesRemaining) {
    var _a2, _b, _c;
    const options2 = await optionsInput;
    if (retriesRemaining == null) {
      retriesRemaining = (_a2 = options2.maxRetries) !== null && _a2 !== void 0 ? _a2 : this.maxRetries;
    }
    const { req, url, timeout } = this.buildRequest(options2);
    await this.prepareRequest(req, { url, options: options2 });
    debug("request", url, options2, req.headers);
    if ((_b = options2.signal) === null || _b === void 0 ? void 0 : _b.aborted) {
      throw new APIUserAbortError();
    }
    const controller = new AbortController();
    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);
    if (response instanceof Error) {
      if ((_c = options2.signal) === null || _c === void 0 ? void 0 : _c.aborted) {
        throw new APIUserAbortError();
      }
      if (retriesRemaining) {
        return this.retryRequest(options2, retriesRemaining);
      }
      if (response.name === "AbortError") {
        throw new APIConnectionTimeoutError();
      }
      throw new APIConnectionError({ cause: response });
    }
    const responseHeaders = createResponseHeaders(response.headers);
    if (!response.ok) {
      if (retriesRemaining && this.shouldRetry(response)) {
        return this.retryRequest(options2, retriesRemaining, responseHeaders);
      }
      const errText = await response.text().catch(() => "Unknown");
      const errJSON = safeJSON(errText);
      const errMessage = errJSON ? void 0 : errText;
      debug("response", response.status, url, responseHeaders, errMessage);
      const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
      throw err;
    }
    return { response, options: options2, controller };
  }
  requestAPIList(Page2, options2) {
    const request = this.makeRequest(options2, null);
    return new PagePromise(this, request, Page2);
  }
  buildURL(path, query) {
    const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
    const defaultQuery = this.defaultQuery();
    if (!isEmptyObj(defaultQuery)) {
      query = { ...defaultQuery, ...query };
    }
    if (query) {
      url.search = this.stringifyQuery(query);
    }
    return url.toString();
  }
  stringifyQuery(query) {
    return Object.entries(query).filter(([_, value]) => typeof value !== "undefined").map(([key, value]) => {
      if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
      }
      if (value === null) {
        return `${encodeURIComponent(key)}=`;
      }
      throw new Error(
        `Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`
      );
    }).join("&");
  }
  async fetchWithTimeout(url, init, ms, controller) {
    const { signal, ...options2 } = init || {};
    if (signal)
      signal.addEventListener("abort", () => controller.abort());
    const timeout = setTimeout(() => controller.abort(), ms);
    return this.getRequestClient().fetch(url, { signal: controller.signal, ...options2 }).finally(() => {
      clearTimeout(timeout);
    });
  }
  getRequestClient() {
    return { fetch: this.fetch };
  }
  shouldRetry(response) {
    const shouldRetryHeader = response.headers.get("x-should-retry");
    if (shouldRetryHeader === "true")
      return true;
    if (shouldRetryHeader === "false")
      return false;
    if (response.status === 409)
      return true;
    if (response.status === 429)
      return true;
    if (response.status >= 500)
      return true;
    return false;
  }
  async retryRequest(options2, retriesRemaining, responseHeaders) {
    var _a2;
    retriesRemaining -= 1;
    const retryAfter = parseInt(
      (responseHeaders === null || responseHeaders === void 0 ? void 0 : responseHeaders["retry-after"]) || ""
    );
    const maxRetries = (_a2 = options2.maxRetries) !== null && _a2 !== void 0 ? _a2 : this.maxRetries;
    const timeout = this.calculateRetryTimeoutSeconds(retriesRemaining, retryAfter, maxRetries) * 1e3;
    await sleep(timeout);
    return this.makeRequest(options2, retriesRemaining);
  }
  calculateRetryTimeoutSeconds(retriesRemaining, retryAfter, maxRetries) {
    const initialRetryDelay = 0.5;
    const maxRetryDelay = 2;
    if (Number.isInteger(retryAfter) && retryAfter <= 60) {
      return retryAfter;
    }
    const numRetries = maxRetries - retriesRemaining;
    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(numRetries - 1, 2), maxRetryDelay);
    const jitter = Math.random() - 0.5;
    return sleepSeconds + jitter;
  }
  getUserAgent() {
    return `${this.constructor.name}/JS ${VERSION}`;
  }
};
var AbstractPage = class {
  constructor(client, response, body, options2) {
    _AbstractPage_client.set(this, void 0);
    __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
    this.options = options2;
    this.response = response;
    this.body = body;
  }
  hasNextPage() {
    const items = this.getPaginatedItems();
    if (!items.length)
      return false;
    return this.nextPageInfo() != null;
  }
  async getNextPage() {
    const nextInfo = this.nextPageInfo();
    if (!nextInfo) {
      throw new Error(
        "No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`."
      );
    }
    const nextOptions = { ...this.options };
    if ("params" in nextInfo) {
      nextOptions.query = { ...nextOptions.query, ...nextInfo.params };
    } else if ("url" in nextInfo) {
      const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];
      for (const [key, value] of params) {
        nextInfo.url.searchParams.set(key, value);
      }
      nextOptions.query = void 0;
      nextOptions.path = nextInfo.url.toString();
    }
    return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(
      this.constructor,
      nextOptions
    );
  }
  async *iterPages() {
    let page = this;
    yield page;
    while (page.hasNextPage()) {
      page = await page.getNextPage();
      yield page;
    }
  }
  async *[(_AbstractPage_client = /* @__PURE__ */ new WeakMap(), Symbol.asyncIterator)]() {
    for await (const page of this.iterPages()) {
      for (const item of page.getPaginatedItems()) {
        yield item;
      }
    }
  }
};
var PagePromise = class extends APIPromise {
  constructor(client, request, Page2) {
    super(
      request,
      async (props) => new Page2(client, props.response, await defaultParseResponse(props), props.options)
    );
  }
  /**
   * Allow auto-paginating iteration on an unawaited list call, eg:
   *
   *    for await (const item of client.items.list()) {
   *      console.log(item)
   *    }
   */
  async *[Symbol.asyncIterator]() {
    const page = await this;
    for await (const item of page) {
      yield item;
    }
  }
};
var createResponseHeaders = (headers) => {
  return new Proxy(
    Object.fromEntries(
      // @ts-ignore
      headers.entries()
    ),
    {
      get(target, name) {
        const key = name.toString();
        return target[key.toLowerCase()] || target[key];
      }
    }
  );
};
var requestOptionsKeys = {
  method: true,
  path: true,
  query: true,
  body: true,
  headers: true,
  maxRetries: true,
  stream: true,
  timeout: true,
  httpAgent: true,
  signal: true,
  idempotencyKey: true
};
var isRequestOptions = (obj) => {
  return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k));
};
var getPlatformProperties = () => {
  if (typeof Deno !== "undefined" && Deno.build != null) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(Deno.build.os),
      "X-Stainless-Arch": normalizeArch(Deno.build.arch),
      "X-Stainless-Runtime": "deno",
      "X-Stainless-Runtime-Version": Deno.version
    };
  }
  if (typeof EdgeRuntime !== "undefined") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": `other:${EdgeRuntime}`,
      "X-Stainless-Runtime": "edge",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(process.platform),
      "X-Stainless-Arch": normalizeArch(process.arch),
      "X-Stainless-Runtime": "node",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  const browserInfo = getBrowserInfo();
  if (browserInfo) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": "unknown",
      "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
      "X-Stainless-Runtime-Version": browserInfo.version
    };
  }
  return {
    "X-Stainless-Lang": "js",
    "X-Stainless-Package-Version": VERSION,
    "X-Stainless-OS": "Unknown",
    "X-Stainless-Arch": "unknown",
    "X-Stainless-Runtime": "unknown",
    "X-Stainless-Runtime-Version": "unknown"
  };
};
function getBrowserInfo() {
  if (typeof navigator === "undefined" || !navigator) {
    return null;
  }
  const browserPatterns = [
    { key: "edge", pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "chrome", pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "firefox", pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "safari", pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/ }
  ];
  for (const { key, pattern } of browserPatterns) {
    const match = pattern.exec(navigator.userAgent);
    if (match) {
      const major = match[1] || 0;
      const minor = match[2] || 0;
      const patch = match[3] || 0;
      return { browser: key, version: `${major}.${minor}.${patch}` };
    }
  }
  return null;
}
var normalizeArch = (arch) => {
  if (arch === "x32")
    return "x32";
  if (arch === "x86_64" || arch === "x64")
    return "x64";
  if (arch === "arm")
    return "arm";
  if (arch === "aarch64" || arch === "arm64")
    return "arm64";
  if (arch)
    return `other:${arch}`;
  return "unknown";
};
var normalizePlatform = (platform) => {
  platform = platform.toLowerCase();
  if (platform.includes("ios"))
    return "iOS";
  if (platform === "android")
    return "Android";
  if (platform === "darwin")
    return "MacOS";
  if (platform === "win32")
    return "Windows";
  if (platform === "freebsd")
    return "FreeBSD";
  if (platform === "openbsd")
    return "OpenBSD";
  if (platform === "linux")
    return "Linux";
  if (platform)
    return `Other:${platform}`;
  return "Unknown";
};
var _platformHeaders;
var getPlatformHeaders = () => {
  return _platformHeaders !== null && _platformHeaders !== void 0 ? _platformHeaders : _platformHeaders = getPlatformProperties();
};
var safeJSON = (text) => {
  try {
    return JSON.parse(text);
  } catch (err) {
    return void 0;
  }
};
var startsWithSchemeRegexp = new RegExp("^(?:[a-z]+:)?//", "i");
var isAbsoluteURL = (url) => {
  return startsWithSchemeRegexp.test(url);
};
var sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
var validatePositiveInteger = (name, n) => {
  if (typeof n !== "number" || !Number.isInteger(n)) {
    throw new Error(`${name} must be an integer`);
  }
  if (n < 0) {
    throw new Error(`${name} must be a positive integer`);
  }
  return n;
};
var castToError = (err) => {
  if (err instanceof Error)
    return err;
  return new Error(err);
};
var readEnv = (env) => {
  var _a2, _b, _c, _d;
  if (typeof process !== "undefined") {
    return (_b = (_a2 = process.env) === null || _a2 === void 0 ? void 0 : _a2[env]) !== null && _b !== void 0 ? _b : void 0;
  }
  if (typeof Deno !== "undefined") {
    return (_d = (_c = Deno.env) === null || _c === void 0 ? void 0 : _c.get) === null || _d === void 0 ? void 0 : _d.call(_c, env);
  }
  return void 0;
};
function isEmptyObj(obj) {
  if (!obj)
    return true;
  for (const _k in obj)
    return false;
  return true;
}
function hasOwn(obj, key) {
  return Object.prototype.hasOwnProperty.call(obj, key);
}
function debug(action, ...args) {
  if (typeof process !== "undefined" && process.env["DEBUG"] === "true") {
    console.log(`OpenAI:DEBUG:${action}`, ...args);
  }
}
var uuid4 = () => {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
    const r = Math.random() * 16 | 0;
    const v = c === "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
};
var isRunningInBrowser = () => {
  return (
    // @ts-ignore
    typeof window !== "undefined" && // @ts-ignore
    typeof window.document !== "undefined" && // @ts-ignore
    typeof navigator !== "undefined"
  );
};

// node_modules/openai/pagination.mjs
var Page = class extends AbstractPage {
  constructor(client, response, body, options2) {
    super(client, response, body, options2);
    this.object = body.object;
    this.data = body.data;
  }
  getPaginatedItems() {
    return this.data;
  }
  // @deprecated Please use `nextPageInfo()` instead
  /**
   * This page represents a response that isn't actually paginated at the API level
   * so there will never be any next page params.
   */
  nextPageParams() {
    return null;
  }
  nextPageInfo() {
    return null;
  }
};
var CursorPage = class extends AbstractPage {
  constructor(client, response, body, options2) {
    super(client, response, body, options2);
    this.data = body.data;
  }
  getPaginatedItems() {
    return this.data;
  }
  // @deprecated Please use `nextPageInfo()` instead
  nextPageParams() {
    const info = this.nextPageInfo();
    if (!info)
      return null;
    if ("params" in info)
      return info.params;
    const params = Object.fromEntries(info.url.searchParams);
    if (!Object.keys(params).length)
      return null;
    return params;
  }
  nextPageInfo() {
    var _a2, _b;
    if (!((_a2 = this.data) === null || _a2 === void 0 ? void 0 : _a2.length)) {
      return null;
    }
    const next = (_b = this.data[this.data.length - 1]) === null || _b === void 0 ? void 0 : _b.id;
    if (!next)
      return null;
    return { params: { after: next } };
  }
};

// node_modules/openai/resource.mjs
var APIResource = class {
  constructor(client) {
    this.client = client;
    this.get = client.get.bind(client);
    this.post = client.post.bind(client);
    this.patch = client.patch.bind(client);
    this.put = client.put.bind(client);
    this.delete = client.delete.bind(client);
    this.getAPIList = client.getAPIList.bind(client);
  }
};

// node_modules/openai/resources/audio/transcriptions.mjs
var Transcriptions = class extends APIResource {
  /**
   * Transcribes audio into the input language.
   */
  create(body, options2) {
    return this.post("/audio/transcriptions", multipartFormRequestOptions({ body, ...options2 }));
  }
};
(function(Transcriptions2) {
})(Transcriptions || (Transcriptions = {}));

// node_modules/openai/resources/audio/translations.mjs
var Translations = class extends APIResource {
  /**
   * Translates audio into English.
   */
  create(body, options2) {
    return this.post("/audio/translations", multipartFormRequestOptions({ body, ...options2 }));
  }
};
(function(Translations2) {
})(Translations || (Translations = {}));

// node_modules/openai/resources/audio/audio.mjs
var Audio = class extends APIResource {
  constructor() {
    super(...arguments);
    this.transcriptions = new Transcriptions(this.client);
    this.translations = new Translations(this.client);
  }
};
(function(Audio2) {
  Audio2.Transcriptions = Transcriptions;
  Audio2.Translations = Translations;
})(Audio || (Audio = {}));

// node_modules/openai/resources/chat/completions.mjs
var Completions = class extends APIResource {
  create(body, options2) {
    var _a2;
    return this.post("/chat/completions", {
      body,
      ...options2,
      stream: (_a2 = body.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
(function(Completions3) {
})(Completions || (Completions = {}));

// node_modules/openai/resources/chat/chat.mjs
var Chat = class extends APIResource {
  constructor() {
    super(...arguments);
    this.completions = new Completions(this.client);
  }
};
(function(Chat2) {
  Chat2.Completions = Completions;
})(Chat || (Chat = {}));

// node_modules/openai/resources/completions.mjs
var Completions2 = class extends APIResource {
  create(body, options2) {
    var _a2;
    return this.post("/completions", {
      body,
      ...options2,
      stream: (_a2 = body.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
(function(Completions3) {
})(Completions2 || (Completions2 = {}));

// node_modules/openai/resources/embeddings.mjs
var Embeddings = class extends APIResource {
  /**
   * Creates an embedding vector representing the input text.
   */
  create(body, options2) {
    return this.post("/embeddings", { body, ...options2 });
  }
};
(function(Embeddings2) {
})(Embeddings || (Embeddings = {}));

// node_modules/openai/resources/edits.mjs
var Edits = class extends APIResource {
  /**
   * Creates a new edit for the provided input, instruction, and parameters.
   *
   * @deprecated The Edits API is deprecated; please use Chat Completions instead.
   *
   * https://openai.com/blog/gpt-4-api-general-availability#deprecation-of-the-edits-api
   */
  create(body, options2) {
    return this.post("/edits", { body, ...options2 });
  }
};
(function(Edits2) {
})(Edits || (Edits = {}));

// node_modules/openai/resources/files.mjs
var Files = class extends APIResource {
  /**
   * Upload a file that contains document(s) to be used across various
   * endpoints/features. Currently, the size of all the files uploaded by one
   * organization can be up to 1 GB. Please contact us if you need to increase the
   * storage limit.
   */
  create(body, options2) {
    return this.post("/files", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Returns information about a specific file.
   */
  retrieve(fileId, options2) {
    return this.get(`/files/${fileId}`, options2);
  }
  /**
   * Returns a list of files that belong to the user's organization.
   */
  list(options2) {
    return this.getAPIList("/files", FileObjectsPage, options2);
  }
  /**
   * Delete a file.
   */
  del(fileId, options2) {
    return this.delete(`/files/${fileId}`, options2);
  }
  /**
   * Returns the contents of the specified file
   */
  retrieveContent(fileId, options2) {
    return this.get(`/files/${fileId}/content`, {
      ...options2,
      headers: {
        Accept: "application/json",
        ...options2 === null || options2 === void 0 ? void 0 : options2.headers
      }
    });
  }
  /**
   * Waits for the given file to be processed, default timeout is 30 mins.
   */
  async waitForProcessing(id, { pollInterval = 5e3, maxWait = 30 * 60 * 1e3 } = {}) {
    const TERMINAL_STATES = /* @__PURE__ */ new Set(["processed", "error", "deleted"]);
    const start = Date.now();
    let file = await this.retrieve(id);
    while (!file.status || !TERMINAL_STATES.has(file.status)) {
      await sleep(pollInterval);
      file = await this.retrieve(id);
      if (Date.now() - start > maxWait) {
        throw new APIConnectionTimeoutError({
          message: `Giving up on waiting for file ${id} to finish processing after ${maxWait} milliseconds.`
        });
      }
    }
    return file;
  }
};
var FileObjectsPage = class extends Page {
};
(function(Files2) {
})(Files || (Files = {}));

// node_modules/openai/resources/fine-tunes.mjs
var FineTunes = class extends APIResource {
  /**
   * Creates a job that fine-tunes a specified model from a given dataset.
   *
   * Response includes details of the enqueued job including job status and the name
   * of the fine-tuned models once complete.
   *
   * [Learn more about fine-tuning](/docs/guides/legacy-fine-tuning)
   */
  create(body, options2) {
    return this.post("/fine-tunes", { body, ...options2 });
  }
  /**
   * Gets info about the fine-tune job.
   *
   * [Learn more about fine-tuning](/docs/guides/legacy-fine-tuning)
   */
  retrieve(fineTuneId, options2) {
    return this.get(`/fine-tunes/${fineTuneId}`, options2);
  }
  /**
   * List your organization's fine-tuning jobs
   */
  list(options2) {
    return this.getAPIList("/fine-tunes", FineTunesPage, options2);
  }
  /**
   * Immediately cancel a fine-tune job.
   */
  cancel(fineTuneId, options2) {
    return this.post(`/fine-tunes/${fineTuneId}/cancel`, options2);
  }
  listEvents(fineTuneId, query, options2) {
    var _a2;
    return this.get(`/fine-tunes/${fineTuneId}/events`, {
      query,
      timeout: 864e5,
      ...options2,
      stream: (_a2 = query === null || query === void 0 ? void 0 : query.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
var FineTunesPage = class extends Page {
};
(function(FineTunes2) {
})(FineTunes || (FineTunes = {}));

// node_modules/openai/resources/fine-tuning/jobs.mjs
var Jobs = class extends APIResource {
  /**
   * Creates a job that fine-tunes a specified model from a given dataset.
   *
   * Response includes details of the enqueued job including job status and the name
   * of the fine-tuned models once complete.
   *
   * [Learn more about fine-tuning](/docs/guides/fine-tuning)
   */
  create(body, options2) {
    return this.post("/fine_tuning/jobs", { body, ...options2 });
  }
  /**
   * Get info about a fine-tuning job.
   *
   * [Learn more about fine-tuning](/docs/guides/fine-tuning)
   */
  retrieve(fineTuningJobId, options2) {
    return this.get(`/fine_tuning/jobs/${fineTuningJobId}`, options2);
  }
  list(query = {}, options2) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this.getAPIList("/fine_tuning/jobs", FineTuningJobsPage, { query, ...options2 });
  }
  /**
   * Immediately cancel a fine-tune job.
   */
  cancel(fineTuningJobId, options2) {
    return this.post(`/fine_tuning/jobs/${fineTuningJobId}/cancel`, options2);
  }
  listEvents(fineTuningJobId, query = {}, options2) {
    if (isRequestOptions(query)) {
      return this.listEvents(fineTuningJobId, {}, query);
    }
    return this.getAPIList(`/fine_tuning/jobs/${fineTuningJobId}/events`, FineTuningJobEventsPage, {
      query,
      ...options2
    });
  }
};
var FineTuningJobsPage = class extends CursorPage {
};
var FineTuningJobEventsPage = class extends CursorPage {
};
(function(Jobs2) {
})(Jobs || (Jobs = {}));

// node_modules/openai/resources/fine-tuning/fine-tuning.mjs
var FineTuning = class extends APIResource {
  constructor() {
    super(...arguments);
    this.jobs = new Jobs(this.client);
  }
};
(function(FineTuning2) {
  FineTuning2.Jobs = Jobs;
  FineTuning2.FineTuningJobsPage = FineTuningJobsPage;
  FineTuning2.FineTuningJobEventsPage = FineTuningJobEventsPage;
})(FineTuning || (FineTuning = {}));

// node_modules/openai/resources/images.mjs
var Images = class extends APIResource {
  /**
   * Creates a variation of a given image.
   */
  createVariation(body, options2) {
    return this.post("/images/variations", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Creates an edited or extended image given an original image and a prompt.
   */
  edit(body, options2) {
    return this.post("/images/edits", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Creates an image given a prompt.
   */
  generate(body, options2) {
    return this.post("/images/generations", { body, ...options2 });
  }
};
(function(Images2) {
})(Images || (Images = {}));

// node_modules/openai/resources/models.mjs
var Models = class extends APIResource {
  /**
   * Retrieves a model instance, providing basic information about the model such as
   * the owner and permissioning.
   */
  retrieve(model, options2) {
    return this.get(`/models/${model}`, options2);
  }
  /**
   * Lists the currently available models, and provides basic information about each
   * one such as the owner and availability.
   */
  list(options2) {
    return this.getAPIList("/models", ModelsPage, options2);
  }
  /**
   * Delete a fine-tuned model. You must have the Owner role in your organization to
   * delete a model.
   */
  del(model, options2) {
    return this.delete(`/models/${model}`, options2);
  }
};
var ModelsPage = class extends Page {
};
(function(Models2) {
})(Models || (Models = {}));

// node_modules/openai/resources/moderations.mjs
var Moderations = class extends APIResource {
  /**
   * Classifies if text violates OpenAI's Content Policy
   */
  create(body, options2) {
    return this.post("/moderations", { body, ...options2 });
  }
};
(function(Moderations2) {
})(Moderations || (Moderations = {}));

// node_modules/openai/index.mjs
var _a;
var OpenAI = class extends APIClient {
  /**
   * API Client for interfacing with the OpenAI API.
   *
   * @param {string} [opts.apiKey=process.env['OPENAI_API_KEY']] - The API Key to send to the API.
   * @param {string} [opts.baseURL] - Override the default base URL for the API.
   * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
   * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
   * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
   * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
   * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
   * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
   * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
   * @param {string | null} [opts.organization]
   */
  constructor(_b) {
    var _c, _d, _e;
    var {
      apiKey = readEnv("OPENAI_API_KEY"),
      organization = (_c = readEnv("OPENAI_ORG_ID")) !== null && _c !== void 0 ? _c : null,
      ...opts
    } = _b === void 0 ? {} : _b;
    if (apiKey === void 0) {
      throw new Error(
        "The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' })."
      );
    }
    const options2 = {
      apiKey,
      organization,
      ...opts,
      baseURL: (_d = opts.baseURL) !== null && _d !== void 0 ? _d : `https://api.openai.com/v1`
    };
    if (!options2.dangerouslyAllowBrowser && isRunningInBrowser()) {
      throw new Error(
        "It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n"
      );
    }
    super({
      baseURL: options2.baseURL,
      timeout: (_e = options2.timeout) !== null && _e !== void 0 ? _e : 6e5,
      httpAgent: options2.httpAgent,
      maxRetries: options2.maxRetries,
      fetch: options2.fetch
    });
    this.completions = new Completions2(this);
    this.chat = new Chat(this);
    this.edits = new Edits(this);
    this.embeddings = new Embeddings(this);
    this.files = new Files(this);
    this.images = new Images(this);
    this.audio = new Audio(this);
    this.moderations = new Moderations(this);
    this.models = new Models(this);
    this.fineTuning = new FineTuning(this);
    this.fineTunes = new FineTunes(this);
    this._options = options2;
    this.apiKey = apiKey;
    this.organization = organization;
  }
  defaultQuery() {
    return this._options.defaultQuery;
  }
  defaultHeaders(opts) {
    return {
      ...super.defaultHeaders(opts),
      "OpenAI-Organization": this.organization,
      ...this._options.defaultHeaders
    };
  }
  authHeaders(opts) {
    return { Authorization: `Bearer ${this.apiKey}` };
  }
};
_a = OpenAI;
OpenAI.OpenAI = _a;
OpenAI.APIError = APIError;
OpenAI.APIConnectionError = APIConnectionError;
OpenAI.APIConnectionTimeoutError = APIConnectionTimeoutError;
OpenAI.APIUserAbortError = APIUserAbortError;
OpenAI.NotFoundError = NotFoundError;
OpenAI.ConflictError = ConflictError;
OpenAI.RateLimitError = RateLimitError;
OpenAI.BadRequestError = BadRequestError;
OpenAI.AuthenticationError = AuthenticationError;
OpenAI.InternalServerError = InternalServerError;
OpenAI.PermissionDeniedError = PermissionDeniedError;
OpenAI.UnprocessableEntityError = UnprocessableEntityError;
var {
  APIError: APIError2,
  APIConnectionError: APIConnectionError2,
  APIConnectionTimeoutError: APIConnectionTimeoutError2,
  APIUserAbortError: APIUserAbortError2,
  NotFoundError: NotFoundError2,
  ConflictError: ConflictError2,
  RateLimitError: RateLimitError2,
  BadRequestError: BadRequestError2,
  AuthenticationError: AuthenticationError2,
  InternalServerError: InternalServerError2,
  PermissionDeniedError: PermissionDeniedError2,
  UnprocessableEntityError: UnprocessableEntityError2
} = error_exports;
(function(OpenAI2) {
  OpenAI2.toFile = toFile;
  OpenAI2.fileFromPath = fileFromPath;
  OpenAI2.Page = Page;
  OpenAI2.CursorPage = CursorPage;
  OpenAI2.Completions = Completions2;
  OpenAI2.Chat = Chat;
  OpenAI2.Edits = Edits;
  OpenAI2.Embeddings = Embeddings;
  OpenAI2.Files = Files;
  OpenAI2.FileObjectsPage = FileObjectsPage;
  OpenAI2.Images = Images;
  OpenAI2.Audio = Audio;
  OpenAI2.Moderations = Moderations;
  OpenAI2.Models = Models;
  OpenAI2.ModelsPage = ModelsPage;
  OpenAI2.FineTuning = FineTuning;
  OpenAI2.FineTunes = FineTunes;
  OpenAI2.FineTunesPage = FineTunesPage;
})(OpenAI || (OpenAI = {}));
var openai_default = OpenAI;

// src/models.ts
async function fetchOpenAIAPI(settings, referenceCurrentNote, messageHistoryContent2 = [], maxTokens, temperature) {
  var _a2, _b, _c, _d, _e, _f;
  const openai = new openai_default({
    apiKey: settings.apiKey,
    baseURL: settings.openAIBaseUrl,
    dangerouslyAllowBrowser: true
    // apiKey is stored within data.json
  });
  const messageHistory2 = messageHistoryContent2.map((item) => ({
    role: item.role,
    content: item.content
  }));
  try {
    const stream = await openai.chat.completions.create({
      model: settings.model,
      max_tokens: parseInt(maxTokens),
      temperature,
      messages: [
        { role: "system", content: referenceCurrentNote + settings.system_role },
        ...messageHistory2
      ],
      stream: true
    });
    let message = "";
    for await (const part of stream) {
      const content = ((_b = (_a2 = part.choices[0]) == null ? void 0 : _a2.delta) == null ? void 0 : _b.content) || "";
      message += content;
      const messageContainerEl = document.querySelector("#messageContainer");
      if (messageContainerEl) {
        const botMessages = messageContainerEl.querySelectorAll(".botMessage");
        const lastBotMessage = botMessages[botMessages.length - 1];
        const messageBlock = lastBotMessage.querySelector(".messageBlock");
        if (messageBlock) {
          messageBlock.innerHTML = marked(message);
          addParagraphBreaks(messageBlock);
          prismHighlighting(messageBlock);
          codeBlockCopyButton(messageBlock);
        }
      }
    }
    addMessage(message, "botMessage", settings);
  } catch (error) {
    const messageContainerEl = document.querySelector("#messageContainer");
    if (messageContainerEl) {
      const botMessages = messageContainerEl.querySelectorAll(".botMessage");
      const lastBotMessage = botMessages[botMessages.length - 1];
      const messageBlock = lastBotMessage.querySelector(".messageBlock");
      if (messageBlock) {
        messageBlock.innerHTML = marked(((_d = (_c = error.response) == null ? void 0 : _c.data) == null ? void 0 : _d.error) || error.message);
        addMessage(messageBlock.innerHTML, "botMessage", settings);
      }
    }
    throw new Error(((_f = (_e = error.response) == null ? void 0 : _e.data) == null ? void 0 : _f.error) || error.message);
  }
}
async function fetchOpenAIAPITitle(settings, markdownContent) {
  var _a2, _b;
  const openai = new openai_default({
    apiKey: settings.apiKey,
    baseURL: settings.openAIBaseUrl,
    dangerouslyAllowBrowser: true
    // apiKey is stored within data.json
  });
  const prompt = `Based on the following markdown content, create a new, suitable title.
     The title should not contain any of the following characters: backslashes, forward slashes, or colons.
     Also, please provide the title without using quotation marks:

`;
  try {
    const chatCompletion = await openai.chat.completions.create({
      model: settings.model,
      messages: [
        { role: "system", content: prompt + markdownContent }
      ]
    });
    let title = chatCompletion.choices[0].message.content;
    if (title) {
      title = title.replace(/[\\/:]/g, "");
    }
    return title;
  } catch (error) {
    console.log("ERROR");
    throw new Error(((_b = (_a2 = error.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.error) || error.message);
  }
}
async function requestUrlAnthropicAPI(url, settings, referenceCurrentNote, messageHistoryContent2 = [], maxTokens, temperature) {
  const headers = {
    "anthropic-version": "2023-06-01",
    "content-type": "application/json",
    "x-api-key": settings.apiKey
  };
  const messageHistoryString = messageHistoryContent2.map((entry) => entry.content).join("\n");
  const requestBody = {
    model: settings.model,
    prompt: `

Human: ${referenceCurrentNote}

${settings.system_role}

${messageHistoryString}

Assistant:`,
    max_tokens_to_sample: parseInt(maxTokens) || 1e5,
    temperature,
    stream: true
  };
  try {
    const response = await (0, import_obsidian2.requestUrl)({
      url,
      method: "POST",
      headers,
      body: JSON.stringify(requestBody)
    });
    return response;
  } catch (error) {
    const messageContainerEl = document.querySelector("#messageContainer");
    if (messageContainerEl) {
      const botMessages = messageContainerEl.querySelectorAll(".botMessage");
      const lastBotMessage = botMessages[botMessages.length - 1];
      const messageBlock = lastBotMessage.querySelector(".messageBlock");
      if (messageBlock) {
        messageBlock.innerHTML = "Max tokens overflow. Please reduce max_tokens or clear chat messages. We recommend clearing max_tokens for best results.";
        addMessage(messageBlock.innerHTML, "botMessage", settings);
        const loadingEl = lastBotMessage.querySelector("#loading");
        if (loadingEl) {
          loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
          lastBotMessage.removeChild(loadingEl);
        }
      }
    }
    console.error("Error making API request:", error);
    throw error;
  }
}
async function requestUrlChatCompletion(url, settings, referenceCurrentNote, messageHistoryContent2 = [], maxTokens, temperature) {
  const messageHistory2 = messageHistoryContent2.map((item) => ({
    role: item.role,
    content: item.content
  }));
  try {
    const response = await (0, import_obsidian2.requestUrl)({
      url: url + "/v1/chat/completions",
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${settings.apiKey}`
      },
      body: JSON.stringify({
        model: settings.model,
        messages: [
          { role: "system", content: referenceCurrentNote + settings.system_role },
          ...messageHistory2
        ],
        max_tokens: parseInt(maxTokens),
        temperature
      })
    });
    return response;
  } catch (error) {
    console.error("Error making API request:", error);
    throw error;
  }
}

// src/commands.ts
function executeCommand(input, settings, plugin) {
  const command = input.split(" ")[0];
  switch (command) {
    case "/commands":
    case "/help":
      commandHelp(settings);
      break;
    case "/inspect":
    case "/settings":
      commandInspect(settings);
      break;
    case "/model":
      return commandModel(input, settings, plugin);
    case "/reference":
    case "/ref":
      commandReference(input, settings, plugin);
      break;
    case "/temp":
      commandTemperature(input, settings, plugin);
      break;
    case "/maxtokens":
      commandMaxTokens(input, settings, plugin);
      break;
    case "/system":
      commandSystem(input, settings, plugin);
      break;
    case "/append":
      commandAppend(settings);
      break;
    case "/save":
      commandSave(settings);
      break;
    case "/clear":
    case "/c":
      removeMessageThread(0);
      break;
    default:
      commandFalse(settings, plugin);
  }
}
function createBotMessage(currentSettings) {
  const messageContainer = document.querySelector("#messageContainer");
  const botMessage = document.createElement("div");
  botMessage.classList.add("botMessage");
  botMessage.style.backgroundColor = colorToHex(
    currentSettings.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.botMessageBackgroundColor).trim()
  );
  messageContainer == null ? void 0 : messageContainer.appendChild(botMessage);
  const botNameSpan = document.createElement("span");
  botNameSpan.textContent = currentSettings.chatbotName || DEFAULT_SETTINGS.chatbotName;
  botNameSpan.className = "chatbotName";
  botMessage.appendChild(botNameSpan);
  const messageBlock = document.createElement("div");
  messageBlock.classList.add("messageBlock");
  botMessage.appendChild(messageBlock);
  return messageBlock;
}
function displayMessage(messageBlock, messageHtml, currentSettings) {
  const messageContainer = document.querySelector("#messageContainer");
  if (messageContainer) {
    const botMessages = messageContainer.querySelectorAll(".botMessage");
    const lastBotMessage = botMessages[botMessages.length - 1];
    const messageBlock2 = lastBotMessage.querySelector(".messageBlock");
    if (messageBlock2) {
      messageBlock2.innerHTML = messageHtml;
      addMessage(messageBlock.innerHTML, "botMessage", currentSettings);
      lastBotMessage.appendChild(messageBlock2);
      lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  }
}
async function commandFalse(currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  const formattedSettings = `
      <div class="formattedSettings">
          <p><strong>Command not recognized.</strong></p>
      </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
function commandHelp(currentSettings) {
  const messageBlock = createBotMessage(currentSettings);
  const formattedSettings = `
    <div class="formattedSettings">
      <h2>Commands</h2>
      <p><code>/inspect</code> - Show system setting.</p>
      <p><code>/model "[MODEL-NAME]" or [VALUE]</code> - Change model.</p>
      <p><code>/system "[PROMPT]"</code> - Change system setting.</p>
      <p><code>/maxtokens [VALUE]</code> - Set max tokens.</p>
      <p><code>/temp [VALUE]</code> - Change temperature range 0 from to 1.</p>
      <p><code>/ref on | off</code> - Turn on or off "reference current note".</p>
      <p><code>/append</code> - Append current chat history to current active note.</p>
      <p><code>/save</code> - Save current chat history to a note.</p>
      <p><code>/clear</code> or <code>/c</code> - Clear chat history.</p>
    </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
}
function commandInspect(currentSettings) {
  const messageBlock = createBotMessage(currentSettings);
  const formattedSettings = `
    <div class="formattedSettings">
      <h2>Inspect</h2>
      <p><strong>MODEL:</strong> ${currentSettings.model}</p>
      <p><strong>SYSTEM:</strong> "${currentSettings.system_role}"</p>
      <p><strong>MAX TOKENS:</strong> "${currentSettings.max_tokens}"</p>
      <p><strong>TEMPERATURE:</strong> ${currentSettings.temperature}</p>
      <p><strong>REFERENCE CURRENT NOTE:</strong> ${currentSettings.referenceCurrentNote}</p>
      <p><strong>USERNAME:</strong> ${currentSettings.userName}</p>
      <p><strong>CHATBOT NAME:</strong> ${currentSettings.chatbotName}</p>
      <p><strong>USER BACKGROUND COLOR:</strong> "${currentSettings.userMessageBackgroundColor}"</p>
      <p><strong>BOT BACKGROUND COLOR:</strong> "${currentSettings.botMessageBackgroundColor}"</p>
      <p><strong>REST API URL:</strong> "${currentSettings.restAPIUrl}"</p>
    </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
}
async function commandModel(input, currentSettings, plugin) {
  var _a2;
  const messageBlock = createBotMessage(currentSettings);
  if (!input.split(" ")[1]) {
    const messageHtml = `<div class="formattedSettings"><p><strong>Please select a model.</strong></p></div>`;
    displayMessage(messageBlock, messageHtml, currentSettings);
    return;
  }
  if (input.split(" ")[1] !== void 0) {
    const inputModel = input.split(" ")[1].replace(/^"(.*)"$/, "$1");
    const anthropicKeyModels = createModelObject(ANTHROPIC_MODELS);
    const openAIKeyModels = createModelObject(OPENAI_MODELS);
    let messageHtml = "";
    if (currentSettings.apiKey.startsWith("sk-ant")) {
      if (anthropicKeyModels[inputModel] || ["claude-instant-1.2", "claude-2.0"].includes(inputModel)) {
        currentSettings.model = (_a2 = anthropicKeyModels[inputModel]) != null ? _a2 : inputModel;
        messageHtml = `<div class="formattedSettings"><p><strong>Updated Model to ${currentSettings.model}</strong></p></div>`;
      } else {
        messageHtml = `<div class="formattedSettings"><p><strong>Model '${inputModel}' does not exist for this API key.</strong></p></div>`;
      }
    } else if (currentSettings.apiKey.startsWith("sk-")) {
      if (openAIKeyModels[inputModel] || ["gpt-3.5-turbo", "gpt-3.5-turbo-1106", "gpt-3.5-turbo-16k-0613", "gpt-4", "gpt-4-1106-preview"].includes(inputModel)) {
        currentSettings.model = openAIKeyModels[inputModel] || inputModel;
        messageHtml = `<div class="formattedSettings"><p><strong>Updated Model to ${currentSettings.model}</strong></p></div>`;
      } else {
        messageHtml = `<div class="formattedSettings"><p><strong>Model '${inputModel}' does not exist for this API key.</strong></p></div>`;
      }
    } else {
      messageHtml = `<div class="formattedSettings"><p><strong>Invalid API key.</strong></p></div>`;
    }
    displayMessage(messageBlock, messageHtml, currentSettings);
    await plugin.saveSettings();
    return currentSettings;
  }
}
async function commandReference(input, currentSettings, plugin) {
  var _a2;
  const messageBlock = createBotMessage(currentSettings);
  let formattedSettings = "";
  const referenceCurrentNoteElement = document.getElementById("referenceCurrentNote");
  const inputValue = (_a2 = input.split(" ")[1]) == null ? void 0 : _a2.toLowerCase();
  if (inputValue === "true" || inputValue === "on") {
    currentSettings.referenceCurrentNote = true;
    if (referenceCurrentNoteElement) {
      referenceCurrentNoteElement.style.display = "block";
    }
    formattedSettings += `
          <div class="formattedSettings">
            <p><strong>Reference updated: on</strong></p>
          </div>
      `;
  } else if (inputValue === "false" || inputValue === "off") {
    currentSettings.referenceCurrentNote = false;
    if (referenceCurrentNoteElement) {
      referenceCurrentNoteElement.style.display = "none";
    }
    formattedSettings += `
          <div class="formattedSettings">
            <p><strong>Reference updated: off</strong></p>
          </div>
      `;
  } else {
    formattedSettings += `
        <div class="formattedSettings">
          <p><strong>Invalid command.</strong></p>
        </div>
    `;
  }
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
async function commandTemperature(input, currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  const inputValue = input.split(" ")[1];
  const floatValue = parseFloat(inputValue);
  let temperatureSettingMessage;
  if (currentSettings && !isNaN(floatValue) && floatValue >= 0 && floatValue <= 1) {
    currentSettings.temperature = parseFloat((Math.round(floatValue / 0.05) * 0.05).toFixed(2));
    temperatureSettingMessage = `${currentSettings.temperature}`;
  } else {
    temperatureSettingMessage = "Invalid.";
  }
  const formattedSettings = `
      <div class="formattedSettings">
        <p><strong>Temperature updated: ${temperatureSettingMessage}</strong></p>
      </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
async function commandMaxTokens(input, currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  let formattedSettings = "";
  const maxTokensValue = input.split(" ")[1];
  let maxTokensSettingMessage;
  if (maxTokensValue !== void 0 && maxTokensValue !== "") {
    const inputValue = parseInt(maxTokensValue);
    if (!isNaN(inputValue) && inputValue >= 0) {
      currentSettings.max_tokens = inputValue.toString();
      maxTokensSettingMessage = `Max tokens updated: ${inputValue}`;
    } else {
      maxTokensSettingMessage = "Max tokens update: invalid";
    }
  } else {
    currentSettings.max_tokens = "";
    maxTokensSettingMessage = "Max tokens cleared.";
  }
  formattedSettings += `
      <div class="formattedSettings">
          <p><strong>${maxTokensSettingMessage}</strong></p>
      </div>
  `;
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
async function commandSystem(input, currentSettings, plugin) {
  const messageBlock = createBotMessage(currentSettings);
  let formattedSettings = "";
  const systemPromptValue = input.match(/"([^"]+)"/);
  if (systemPromptValue !== null) {
    if (systemPromptValue[1]) {
      currentSettings.system_role = systemPromptValue[1];
      formattedSettings += `
              <div class="formattedSettings">
                  <p><strong>System updated: "${systemPromptValue[1]}"</strong></p>
              </div>
          `;
    }
  } else {
    currentSettings.system_role = "";
    formattedSettings += `
          <div class="formattedSettings">
              <p><strong>System cleared.</strong></p>
          </div>
      `;
  }
  displayMessage(messageBlock, formattedSettings, currentSettings);
  await plugin.saveSettings();
}
async function commandAppend(currentSettings) {
  let markdownContent = "";
  const activeFile = app.workspace.getActiveFile();
  if ((activeFile == null ? void 0 : activeFile.extension) === "md") {
    const existingContent = await app.vault.read(activeFile);
    const userNames = document.querySelectorAll(".userName");
    let userNameText = "USER";
    if (userNames.length > 0) {
      const userNameNode = userNames[0];
      Array.from(userNameNode.childNodes).forEach((node) => {
        if (node.nodeType === Node.TEXT_NODE && node.textContent) {
          userNameText = node.textContent.trim().toUpperCase();
        }
      });
    }
    const chatbotNames = document.querySelectorAll(".chatbotName");
    const chatbotNameText = chatbotNames.length > 0 && chatbotNames[0].textContent ? chatbotNames[0].textContent.toUpperCase() : "ASSISTANT";
    if (await this.app.vault.adapter.exists(filenameMessageHistoryJSON)) {
      try {
        const jsonContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
        const messages = JSON.parse(jsonContent);
        let skipNext = false;
        markdownContent += messages.filter((message, index, array) => {
          if (skipNext && message.role === "assistant") {
            skipNext = false;
            return false;
          }
          if (message.content.startsWith("/")) {
            skipNext = index + 1 < array.length && array[index + 1].role === "assistant";
            return false;
          }
          return true;
        }).map((message) => {
          let roleText = message.role.toUpperCase();
          roleText = roleText === "USER" ? userNameText : roleText;
          roleText = roleText === "ASSISTANT" ? chatbotNameText : roleText;
          return `###### ${roleText}
${message.content}
`;
        }).join("\n");
      } catch (error) {
        console.error("Error processing message history:", error);
      }
    }
    const updatedContent = existingContent + "\n" + markdownContent;
    await app.vault.modify(activeFile, updatedContent);
    new import_obsidian3.Notice("Appended conversation.");
  } else {
    new import_obsidian3.Notice("No active note to append to.");
  }
}
async function commandSave(currentSettings) {
  let folderName = currentSettings.chatHistoryPath;
  const baseFileName = "Chat History";
  const fileExtension = ".md";
  if (folderName && !folderName.endsWith("/")) {
    folderName += "/";
  }
  const now = new Date();
  const dateTimeStamp = now.getFullYear() + "-" + (now.getMonth() + 1).toString().padStart(2, "0") + "-" + now.getDate().toString().padStart(2, "0") + " " + now.getHours().toString().padStart(2, "0") + "-" + now.getMinutes().toString().padStart(2, "0") + "-" + now.getSeconds().toString().padStart(2, "0");
  try {
    let markdownContent = "";
    const allFiles = app.vault.getFiles();
    const modelNameElement = document.querySelector("#modelName");
    let modelName = "GPT-3.5-TURBO";
    if (modelNameElement && modelNameElement.textContent) {
      modelName = modelNameElement.textContent.replace("Model: ", "").toUpperCase();
    }
    const templateFile = allFiles.find((file2) => file2.path.toLowerCase() === currentSettings.templateFilePath.toLowerCase());
    if (templateFile) {
      let fileContent = await app.vault.read(templateFile);
      if (/^---\s*[\s\S]*?---/.test(fileContent)) {
        fileContent = fileContent.replace(/^---/, `---
model: ${modelName}`);
      } else {
        fileContent = `---
  model: ${modelName}
---
` + fileContent;
      }
      markdownContent += fileContent;
    } else {
      markdownContent += `---
  model: ${modelName}
---
`;
    }
    const userNames = document.querySelectorAll(".userName");
    let userNameText = "USER";
    if (userNames.length > 0) {
      const userNameNode = userNames[0];
      Array.from(userNameNode.childNodes).forEach((node) => {
        if (node.nodeType === Node.TEXT_NODE && node.textContent) {
          userNameText = node.textContent.trim().toUpperCase();
        }
      });
    }
    const chatbotNames = document.querySelectorAll(".chatbotName");
    const chatbotNameText = chatbotNames.length > 0 && chatbotNames[0].textContent ? chatbotNames[0].textContent.toUpperCase() : "ASSISTANT";
    if (await this.app.vault.adapter.exists(filenameMessageHistoryJSON)) {
      try {
        const jsonContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
        const messages = JSON.parse(jsonContent);
        let skipNext = false;
        markdownContent += messages.filter((message, index, array) => {
          if (skipNext && message.role === "assistant") {
            skipNext = false;
            return false;
          }
          if (message.content.startsWith("/")) {
            skipNext = index + 1 < array.length && array[index + 1].role === "assistant";
            return false;
          }
          return true;
        }).map((message) => {
          let roleText = message.role.toUpperCase();
          roleText = roleText === "USER" ? userNameText : roleText;
          roleText = roleText === "ASSISTANT" ? chatbotNameText : roleText;
          return `###### ${roleText}
${message.content}
`;
        }).join("\n");
      } catch (error) {
        console.error("Error processing message history:", error);
      }
    }
    if (!await this.app.vault.adapter.exists(folderName)) {
      await this.app.vault.createFolder(folderName);
    }
    let fileName = "";
    if (currentSettings.allowRenameNoteTitle) {
      let referenceCurrentNote = "";
      let uniqueNameFound = false;
      let modelRenameTitle;
      const activeFile = this.app.workspace.getActiveFile();
      if (activeFile) {
        if (currentSettings.referenceCurrentNote) {
          referenceCurrentNote = await getActiveFileContent(activeFile);
        }
      }
      const fileNameExists = (name) => {
        return allFiles.some((file2) => file2.path === folderName + name + fileExtension);
      };
      while (!uniqueNameFound) {
        modelRenameTitle = await fetchOpenAIAPITitle(currentSettings, referenceCurrentNote + markdownContent);
        if (!fileNameExists(modelRenameTitle)) {
          uniqueNameFound = true;
        }
      }
      fileName = folderName + modelRenameTitle + fileExtension;
    } else {
      fileName = folderName + baseFileName + " " + dateTimeStamp + fileExtension;
    }
    const file = await this.app.vault.create(fileName, markdownContent);
    if (file) {
      new import_obsidian3.Notice("Saved conversation.");
      this.app.workspace.openLinkText(fileName, "", true, { active: true });
    }
  } catch (error) {
    console.error("Failed to create note:", error);
  }
}
function createModelObject(modelsArray) {
  const modelObject = {};
  modelsArray.forEach((model, index) => {
    modelObject[(index + 1).toString()] = model;
  });
  return modelObject;
}

// src/view.ts
var VIEW_TYPE_CHATBOT = "chatbot-view";
var filenameMessageHistoryJSON = "./.obsidian/plugins/bmo-chatbot/data/messageHistory.json";
var ANTHROPIC_MODELS = ["claude-instant-1.2", "claude-2.0"];
var OPENAI_MODELS = ["gpt-3.5-turbo", "gpt-3.5-turbo-1106", "gpt-4", "gpt-4-1106-preview"];
var messageHistory = [];
function clearMessageHistory() {
  messageHistory = [];
}
var messageHistoryContent = [];
var BMOView = class extends import_obsidian4.ItemView {
  constructor(leaf, settings, plugin) {
    super(leaf);
    this.preventEnter = false;
    this.settings = settings;
    this.plugin = plugin;
    this.icon = "bot";
  }
  getViewType() {
    return VIEW_TYPE_CHATBOT;
  }
  getDisplayText() {
    return "Chatbot";
  }
  async onOpen() {
    this.registerEvent(this.app.workspace.on("file-open", this.handleFileOpenEvent.bind(this)));
    const container = this.containerEl.children[1];
    container.empty();
    const chatbotContainer = container.createEl("div", {
      attr: {
        class: "chatbotContainer"
      }
    });
    chatbotContainer.createEl("h1", {
      text: this.settings.chatbotName || DEFAULT_SETTINGS.chatbotName,
      attr: {
        id: "chatbotNameHeading"
      }
    });
    chatbotContainer.createEl("p", {
      text: "Model: " + this.settings.model || DEFAULT_SETTINGS.model,
      attr: {
        id: "modelName"
      }
    });
    const spanElement = chatbotContainer.createEl("span", {
      attr: {
        class: "dotIndicator",
        id: "markDownBoolean"
      }
    });
    const referenceCurrentNoteElement = chatbotContainer.createEl("p", {
      text: "Reference Current Note",
      attr: {
        id: "referenceCurrentNote"
      }
    });
    referenceCurrentNoteElement.appendChild(spanElement);
    referenceCurrentNoteElement.style.display = "none";
    if (referenceCurrentNoteElement) {
      if (this.settings.referenceCurrentNote) {
        referenceCurrentNoteElement.style.display = "block";
      } else {
        referenceCurrentNoteElement.style.display = "none";
      }
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      await getActiveFileContent(activeFile);
    }
    const messageContainer = chatbotContainer.createEl("div", {
      attr: {
        id: "messageContainer"
      }
    });
    await loadData();
    messageContainer.id = "messageContainer";
    messageHistory.forEach((messageData, index) => {
      const buttonContainerDiv = document.createElement("div");
      buttonContainerDiv.className = "button-container";
      if (messageData.role == "user") {
        const userMessageDiv = document.createElement("div");
        userMessageDiv.className = "userMessage";
        userMessageDiv.style.backgroundColor = colorToHex(this.settings.userMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.userMessageBackgroundColor).trim());
        const userMessageToolBarDiv = document.createElement("div");
        userMessageToolBarDiv.className = "userMessageToolBar";
        const userNameSpan = document.createElement("span");
        userNameSpan.className = "userName";
        userNameSpan.textContent = this.settings.userName || DEFAULT_SETTINGS.userName;
        const userP = document.createElement("p");
        const copyUserButton = displayUserCopyButton(userP);
        const trashButton = displayTrash();
        userMessageToolBarDiv.appendChild(userNameSpan);
        userMessageToolBarDiv.appendChild(buttonContainerDiv);
        buttonContainerDiv.appendChild(copyUserButton);
        buttonContainerDiv.appendChild(trashButton);
        userMessageDiv.appendChild(userMessageToolBarDiv);
        userMessageDiv.appendChild(userP);
        messageContainer.appendChild(userMessageDiv);
        if (ANTHROPIC_MODELS.includes(this.settings.model)) {
          const fullString = messageData.content;
          const cleanString = fullString.split(" ").slice(1).join(" ").trim();
          userP.innerHTML = marked(cleanString);
        } else {
          userP.innerHTML = marked(messageData.content);
        }
      }
      if (messageData.role == "assistant") {
        const botMessageDiv = document.createElement("div");
        botMessageDiv.className = "botMessage";
        botMessageDiv.style.backgroundColor = colorToHex(this.settings.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.botMessageBackgroundColor).trim());
        const botMessageToolBarDiv = document.createElement("div");
        botMessageToolBarDiv.className = "botMessageToolBar";
        const botNameSpan = document.createElement("span");
        botNameSpan.textContent = this.settings.chatbotName || DEFAULT_SETTINGS.chatbotName;
        botNameSpan.className = "chatbotName";
        const messageBlockDiv = document.createElement("div");
        messageBlockDiv.className = "messageBlock";
        let botP = "";
        const messageText = messageData.content;
        if (messageHistory.length >= 2) {
          if (ANTHROPIC_MODELS.includes(this.settings.model)) {
            const cleanString = messageText.split(" ").slice(1).join(" ").trim();
            botP = marked(cleanString);
          } else if (messageData.content.includes('div class="formattedSettings"')) {
            botP = messageData.content;
          } else {
            botP = marked(messageData.content);
          }
        }
        const newBotP = document.createElement("p");
        newBotP.innerHTML = botP;
        botMessageToolBarDiv.appendChild(botNameSpan);
        botMessageToolBarDiv.appendChild(buttonContainerDiv);
        if (!messageText.includes('div class="formattedSettings"')) {
          const copyBotButton = displayBotCopyButton(messageData, this.settings);
          buttonContainerDiv.appendChild(copyBotButton);
        }
        botMessageDiv.appendChild(botMessageToolBarDiv);
        messageBlockDiv.appendChild(newBotP);
        botMessageDiv.appendChild(messageBlockDiv);
        messageContainer.appendChild(botMessageDiv);
        prismHighlighting(messageBlockDiv);
        codeBlockCopyButton(messageBlockDiv);
        if (!messageData.content.includes('div class="formattedSettings"')) {
          addParagraphBreaks(messageBlockDiv);
        }
        const botMessages = messageContainer.querySelectorAll(".botMessage");
        const lastBotMessage = botMessages[botMessages.length - 1];
        lastBotMessage.appendChild(messageBlockDiv);
        lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    });
    const parentElement = document.getElementById("parentElementId");
    parentElement == null ? void 0 : parentElement.appendChild(messageContainer);
    const chatbox = chatbotContainer.createEl("div", {
      attr: {
        class: "chatbox"
      }
    });
    const textarea = document.createElement("textarea");
    textarea.setAttribute("contenteditable", true.toString());
    textarea.setAttribute("placeholder", "Start typing...");
    chatbox.appendChild(textarea);
    this.textareaElement = textarea;
    this.addEventListeners();
  }
  addEventListeners() {
    this.textareaElement.addEventListener("keyup", this.handleKeyup.bind(this));
    this.textareaElement.addEventListener("keydown", this.handleKeydown.bind(this));
    this.textareaElement.addEventListener("input", this.handleInput.bind(this));
    this.textareaElement.addEventListener("blur", this.handleBlur.bind(this));
  }
  async handleFileOpenEvent(file) {
    await getActiveFileContent(file);
  }
  async handleKeyup(event) {
    if (this.preventEnter === false && !event.shiftKey && event.key === "Enter") {
      loadData();
      event.preventDefault();
      const input = this.textareaElement.value.trim();
      if (input.length === 0) {
        return;
      }
      if (ANTHROPIC_MODELS.includes(this.settings.model)) {
        addMessage("\n\nHuman: " + input, "userMessage", this.settings);
      } else {
        addMessage(input, "userMessage", this.settings);
      }
      const userP = document.createElement("p");
      const markdownContent = marked(input);
      userP.innerHTML = markdownContent;
      const userMessageDiv = document.createElement("div");
      userMessageDiv.className = "userMessage";
      userMessageDiv.style.backgroundColor = colorToHex(this.settings.userMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.userMessageBackgroundColor).trim());
      const userMessageToolBarDiv = document.createElement("div");
      userMessageToolBarDiv.className = "userMessageToolBar";
      const userNameSpan = document.createElement("span");
      userNameSpan.className = "userName";
      userNameSpan.textContent = this.settings.userName || DEFAULT_SETTINGS.userName;
      const buttonContainerDiv = document.createElement("div");
      buttonContainerDiv.className = "button-container";
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const copyUserButton = displayUserCopyButton(userP);
        const trashButton = displayTrash();
        userMessageToolBarDiv.appendChild(userNameSpan);
        userMessageToolBarDiv.appendChild(buttonContainerDiv);
        buttonContainerDiv.appendChild(copyUserButton);
        buttonContainerDiv.appendChild(trashButton);
        userMessageDiv.appendChild(userMessageToolBarDiv);
        userMessageDiv.appendChild(userP);
        messageContainer.appendChild(userMessageDiv);
        if (input.startsWith("/")) {
          executeCommand(input, this.settings, this.plugin);
          const modelName = document.querySelector("#modelName");
          if (modelName) {
            modelName.textContent = "Model: " + this.settings.model.toLowerCase();
          }
        } else {
          const botMessageDiv = document.createElement("div");
          botMessageDiv.className = "botMessage";
          botMessageDiv.style.backgroundColor = colorToHex(this.settings.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.botMessageBackgroundColor).trim());
          const botMessageToolBarDiv = document.createElement("div");
          botMessageToolBarDiv.className = "botMessageToolBar";
          const botNameSpan = document.createElement("span");
          botNameSpan.textContent = this.settings.chatbotName || DEFAULT_SETTINGS.chatbotName;
          botNameSpan.className = "chatbotName";
          const messageBlockDiv = document.createElement("div");
          messageBlockDiv.className = "messageBlock";
          botMessageToolBarDiv.appendChild(botNameSpan);
          botMessageDiv.appendChild(botMessageToolBarDiv);
          botMessageDiv.appendChild(messageBlockDiv);
          messageContainer.appendChild(botMessageDiv);
          const loadingEl = document.createElement("span");
          loadingEl.setAttribute("id", "loading");
          loadingEl.style.display = "inline-block";
          loadingEl.textContent = "...";
          const updateLoadingAnimation = () => {
            var _a2;
            const loadingEl2 = document.querySelector("#loading");
            if (!loadingEl2) {
              return;
            }
            loadingEl2.textContent += ".";
            if (((_a2 = loadingEl2.textContent) == null ? void 0 : _a2.length) && loadingEl2.textContent.length > 3) {
              loadingEl2.textContent = ".";
            }
          };
          if (!OPENAI_MODELS.includes(this.settings.model)) {
            botMessageDiv.appendChild(loadingEl);
            loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
          }
          const loadingAnimationIntervalId = setInterval(updateLoadingAnimation, 500);
          const spacer = document.createElement("div");
          spacer.setAttribute("id", "spacer");
          messageContainer.appendChild(spacer);
          userMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
          this.preventEnter = true;
          this.BMOchatbot(input).then(() => {
            const spacer2 = messageContainer.querySelector("#spacer");
            if (spacer2) {
              spacer2.remove();
            }
            this.preventEnter = false;
            clearInterval(loadingAnimationIntervalId);
          }).catch(() => {
            clearInterval(loadingAnimationIntervalId);
            const botParagraph = document.createElement("p");
            botParagraph.textContent = "Oops, something went wrong. Please try again.";
            botMessageDiv.appendChild(botParagraph);
          });
        }
      }
      this.textareaElement.value = "";
      this.textareaElement.style.height = "29px";
      this.textareaElement.value = this.textareaElement.value.replace(/^[\r\n]+|[\r\n]+$/gm, "");
      this.textareaElement.setSelectionRange(0, 0);
    }
  }
  handleKeydown(event) {
    if (event.key === "Enter" && !event.shiftKey) {
      event.preventDefault();
    }
  }
  handleInput(event) {
    this.textareaElement.style.height = "29px";
    this.textareaElement.style.height = this.textareaElement.scrollHeight + "px";
  }
  handleBlur(event) {
    if (!this.textareaElement.value) {
      this.textareaElement.style.height = "29px";
    }
  }
  exportSettings() {
    return this.settings;
  }
  cleanup() {
    this.textareaElement.removeEventListener("keyup", this.handleKeyup.bind(this));
    this.textareaElement.addEventListener("keydown", this.handleKeydown.bind(this));
    this.textareaElement.removeEventListener("input", this.handleInput.bind(this));
    this.textareaElement.removeEventListener("blur", this.handleBlur.bind(this));
    if (this.loadingAnimationIntervalId) {
      clearInterval(this.loadingAnimationIntervalId);
    }
  }
  async BMOchatbot(_input) {
    let referenceCurrentNote = "";
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      if (this.settings.referenceCurrentNote) {
        referenceCurrentNote = await getActiveFileContent(activeFile);
      }
    }
    const messageContainerEl = document.querySelector("#messageContainer");
    const chatbotNameHeading = document.querySelector("#chatbotNameHeading");
    const chatbox = document.querySelector(".chatbox textarea");
    if (!this.settings.apiKey && OPENAI_MODELS.includes(this.settings.model)) {
      new import_obsidian4.Notice("API key not found. Please add your OpenAI API key in the plugin settings.");
      if (chatbotNameHeading) {
        chatbotNameHeading.textContent = "ERROR";
      }
      const lastDiv = messageContainerEl == null ? void 0 : messageContainerEl.lastElementChild;
      const errorMessage = document.createElement("p");
      errorMessage.textContent = "API key not found. Please add your OpenAI API key in the plugin settings.";
      errorMessage.classList.add("errorMessage");
      const chatbotNameError = lastDiv.querySelector(".chatbotName");
      chatbotNameError.textContent = "ERROR";
      lastDiv.appendChild(errorMessage);
      chatbox.disabled = true;
    } else {
      let systemReferenceCurrentNote = "";
      if (this.settings.referenceCurrentNote) {
        systemReferenceCurrentNote = "Refer to note if asked.";
      }
      const maxTokens = this.settings.max_tokens;
      const temperature = this.settings.temperature;
      const settings = {
        apiKey: this.settings.apiKey,
        model: this.settings.model,
        system_role: systemReferenceCurrentNote + this.settings.system_role
      };
      if (OPENAI_MODELS.includes(this.settings.model)) {
        try {
          await fetchOpenAIAPI(this.settings, referenceCurrentNote, messageHistoryContent, maxTokens, temperature);
        } catch (error) {
          new import_obsidian4.Notice("Error occurred while fetching completion: " + error.message);
          console.log(error.message);
          console.log("messageHistory: " + messageHistory);
        }
      } else if (ANTHROPIC_MODELS.includes(this.settings.model)) {
        try {
          const url = "https://api.anthropic.com/v1/complete";
          const response = await requestUrlAnthropicAPI(url, this.settings, referenceCurrentNote, messageHistoryContent, maxTokens, temperature);
          const message = response.text;
          const lines = message.split("\n");
          let completionText = "";
          for (const line of lines) {
            if (line.startsWith("data:")) {
              const eventData = JSON.parse(line.slice("data:".length));
              if (eventData.completion) {
                completionText += eventData.completion;
              }
            }
          }
          if (messageContainerEl) {
            const botMessages = messageContainerEl.querySelectorAll(".botMessage");
            const lastBotMessage = botMessages[botMessages.length - 1];
            const loadingEl = lastBotMessage.querySelector("#loading");
            if (loadingEl) {
              loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
              lastBotMessage.removeChild(loadingEl);
            }
            const messageBlock = lastBotMessage.querySelector(".messageBlock");
            if (messageBlock) {
              messageBlock.innerHTML = marked(completionText);
              addParagraphBreaks(messageBlock);
              prismHighlighting(messageBlock);
              codeBlockCopyButton(messageBlock);
            }
            lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
          }
          addMessage("\n\nAssistant: " + completionText, "botMessage", this.settings);
        } catch (error) {
          console.error("Error:", error);
        }
      } else {
        try {
          const response = await requestUrlChatCompletion(this.settings.restAPIUrl, settings, referenceCurrentNote, messageHistoryContent, maxTokens, temperature);
          const message = response.json.choices[0].message.content;
          addMessage(message, "botMessage", this.settings);
          if (messageContainerEl) {
            const botMessages = messageContainerEl.querySelectorAll(".botMessage");
            const lastBotMessage = botMessages[botMessages.length - 1];
            const loadingEl = lastBotMessage.querySelector("#loading");
            if (loadingEl) {
              loadingEl.scrollIntoView({ behavior: "smooth", block: "end" });
              lastBotMessage.removeChild(loadingEl);
            }
            const messageBlock = document.createElement("p");
            const markdownContent = marked(message);
            messageBlock.innerHTML = markdownContent;
            messageBlock.classList.add("messageBlock");
            addParagraphBreaks(messageBlock);
            prismHighlighting(messageBlock);
            codeBlockCopyButton(messageBlock);
            lastBotMessage.appendChild(messageBlock);
            lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
          }
        } catch (error) {
          new import_obsidian4.Notice("Error occurred while fetching completion: " + error.message);
          console.log(error.message);
          console.log("messageHistory: " + messageHistory);
        }
      }
    }
  }
  async onClose() {
  }
};
async function loadData() {
  if (!await this.app.vault.adapter.exists("./.obsidian/plugins/bmo-chatbot/data/")) {
    this.app.vault.adapter.mkdir("./.obsidian/plugins/bmo-chatbot/data/");
  }
  if (await this.app.vault.adapter.exists(filenameMessageHistoryJSON)) {
    try {
      const fileContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
      if (fileContent.trim() === "") {
        messageHistory = [];
      } else {
        messageHistory = JSON.parse(fileContent);
      }
    } catch (error) {
      console.error("Error processing message history:", error);
    }
  } else {
    messageHistory = [];
  }
}
async function getActiveFileContent(file) {
  const activeFile = app.workspace.getActiveFile();
  const dotElement = document.querySelector(".dotIndicator");
  let currentNote = "";
  if ((activeFile == null ? void 0 : activeFile.extension) === "md") {
    const content = await app.vault.read(activeFile);
    currentNote = "Note:```" + content + "```\n";
    if (dotElement) {
      dotElement.style.backgroundColor = "green";
    }
  } else {
    if (dotElement) {
      dotElement.style.backgroundColor = "#da2c2c";
    }
  }
  return currentNote;
}
async function addMessage(input, messageType, settings, index) {
  const messageObj = {
    role: "",
    content: ""
  };
  if (messageType === "userMessage") {
    messageObj.role = "user";
    messageObj.content = input;
  } else if (messageType === "botMessage") {
    messageObj.role = "assistant";
    messageObj.content = input;
    const botMessageToolBarDiv = document.querySelectorAll(".botMessageToolBar");
    const lastBotMessageToolBarDiv = botMessageToolBarDiv[botMessageToolBarDiv.length - 1];
    if (botMessageToolBarDiv.length > 0) {
      if (!messageObj.content.includes('div class="formattedSettings"')) {
        const copyBotButton = displayBotCopyButton(messageObj, settings);
        lastBotMessageToolBarDiv.appendChild(copyBotButton);
      }
    }
  }
  messageHistory.push(messageObj);
  messageHistoryContent = messageHistory.map((item) => {
    return {
      role: item.role,
      content: item.content
    };
  });
  const jsonString = JSON.stringify(messageHistoryContent, null, 4);
  try {
    await this.app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing to message history file:", error);
  }
}
function prismHighlighting(messageBlock) {
  (0, import_obsidian4.loadPrism)().then((Prism) => {
    const codeBlocks = messageBlock == null ? void 0 : messageBlock.querySelectorAll(".messageBlock pre code");
    codeBlocks == null ? void 0 : codeBlocks.forEach((codeBlock) => {
      const language = codeBlock.className.replace("language-", "");
      const code = codeBlock.textContent;
      if (language && Prism.languages[language]) {
        const highlightedCode = Prism.highlight(code, Prism.languages[language]);
        codeBlock.innerHTML = highlightedCode;
      }
    });
  });
}
function codeBlockCopyButton(messageBlock) {
  const codeBlocks = messageBlock.querySelectorAll(".messageBlock pre code");
  codeBlocks.forEach((codeElement) => {
    const copyButton = document.createElement("button");
    copyButton.textContent = "copy";
    (0, import_obsidian4.setIcon)(copyButton, "copy");
    copyButton.classList.add("copy-button");
    copyButton.title = "copy";
    if (codeElement.parentNode) {
      codeElement.parentNode.insertBefore(copyButton, codeElement.nextSibling);
    }
    copyButton.addEventListener("click", () => {
      var _a2;
      const language = ((_a2 = codeElement.getAttribute("class")) == null ? void 0 : _a2.replace("language-", "")) || "";
      const codeText = `\`\`\`${language}
${codeElement.textContent}\`\`\``;
      if (codeText) {
        navigator.clipboard.writeText(codeText).then(() => {
          new import_obsidian4.Notice("Copied codeblock.");
        }, (err) => {
          console.error("Failed to copy code: ", err);
          new import_obsidian4.Notice("Failed to copy code: ", err);
        });
      }
    });
  });
}
function addParagraphBreaks(messageBlock) {
  const paragraphs = messageBlock.querySelectorAll("p");
  for (let i = 0; i < paragraphs.length; i++) {
    const p = paragraphs[i];
    const nextSibling = p.nextElementSibling;
    if (nextSibling && nextSibling.nodeName === "P") {
      const br = document.createElement("br");
      const parent = p.parentNode;
      if (parent) {
        parent.insertBefore(br, nextSibling);
      }
    }
  }
}
function copyMessageToClipboard(message) {
  navigator.clipboard.writeText(message).then(function() {
  }).catch(function(err) {
    console.error("Unable to copy message: ", err);
  });
}
function displayUserCopyButton(userP) {
  const copyButton = document.createElement("button");
  copyButton.textContent = "copy";
  (0, import_obsidian4.setIcon)(copyButton, "copy");
  copyButton.classList.add("copy-button");
  copyButton.title = "copy";
  copyButton.addEventListener("click", function() {
    const messageText = userP.textContent;
    if (messageText !== null) {
      copyMessageToClipboard(messageText);
      new import_obsidian4.Notice("Copied user message.");
    } else {
      console.error("Message content is null. Cannot copy.");
    }
  });
  return copyButton;
}
function displayBotCopyButton(messageObj, settings) {
  const copyButton = document.createElement("button");
  copyButton.textContent = "copy";
  (0, import_obsidian4.setIcon)(copyButton, "copy");
  copyButton.classList.add("copy-button");
  copyButton.title = "copy";
  let messageText = messageObj.content;
  if (messageText !== null) {
    if (ANTHROPIC_MODELS.includes(settings.model)) {
      const fullString = messageObj.content;
      const cleanString = fullString.split(" ").slice(1).join(" ").trim();
      messageText = cleanString;
    }
  } else {
    new import_obsidian4.Notice("Message content is null. Cannot copy.");
    console.error("Message content is null. Cannot copy.");
  }
  copyButton.addEventListener("click", function() {
    if (messageText !== null) {
      copyMessageToClipboard(messageText);
      new import_obsidian4.Notice("Copied bot message.");
    } else {
      console.error("Message content is null. Cannot copy.");
    }
  });
  return copyButton;
}
function displayTrash() {
  const trashButton = document.createElement("button");
  trashButton.textContent = "trash";
  (0, import_obsidian4.setIcon)(trashButton, "trash");
  trashButton.classList.add("trash-button");
  trashButton.title = "trash";
  let lastClickedElement = null;
  trashButton.addEventListener("click", function(event) {
    event.stopPropagation();
    lastClickedElement = event.target;
    while (lastClickedElement && !lastClickedElement.classList.contains("userMessage")) {
      lastClickedElement = lastClickedElement.parentElement;
    }
    if (lastClickedElement) {
      const userMessages = Array.from(document.querySelectorAll("#messageContainer .userMessage"));
      const index = userMessages.indexOf(lastClickedElement) * 2;
      if (index !== -1) {
        const modal = new import_obsidian4.Modal(app);
        modal.contentEl.innerHTML = `
                <div class="modal-content">
                    <h2>Delete Message Block.</h2>
                    <p>Are you sure you want to delete this message block?</p>
                    <button id="confirmDelete">Confirm Delete</button>
                </div>
                `;
        const confirmDeleteButton = modal.contentEl.querySelector("#confirmDelete");
        confirmDeleteButton == null ? void 0 : confirmDeleteButton.addEventListener("click", async function() {
          deleteMessage(index);
          new import_obsidian4.Notice("Message deleted.");
          modal.close();
        });
        modal.open();
      }
    }
  });
  return trashButton;
}
async function deleteMessage(index) {
  const messageContainer = document.querySelector("#messageContainer");
  const divElements = messageContainer == null ? void 0 : messageContainer.querySelectorAll("div.botMessage, div.userMessage");
  if (divElements && divElements.length > 0 && index >= 0 && index < divElements.length) {
    messageContainer == null ? void 0 : messageContainer.removeChild(divElements[index]);
    if (index + 1 < divElements.length) {
      const nextMessage = divElements[index + 1];
      if (nextMessage.classList.contains("botMessage")) {
        messageContainer == null ? void 0 : messageContainer.removeChild(nextMessage);
      }
    }
  }
  if (messageHistory[index + 1] && messageHistory[index + 1].role === "assistant") {
    messageHistory.splice(index, 2);
  } else {
    messageHistory.splice(index, 1);
  }
  const jsonString = JSON.stringify(messageHistory, null, 4);
  try {
    await app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing messageHistory.json", error);
  }
}
async function removeMessageThread(index) {
  const messageContainer = document.querySelector("#messageContainer");
  const divElements = messageContainer == null ? void 0 : messageContainer.querySelectorAll("div.botMessage, div.userMessage");
  if (divElements && divElements.length > 0 && index >= 0 && index < divElements.length) {
    for (let i = index; i < divElements.length; i++) {
      messageContainer == null ? void 0 : messageContainer.removeChild(divElements[i]);
    }
  }
  messageHistory.splice(index);
  const jsonString = JSON.stringify(messageHistory, null, 4);
  try {
    await app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing messageHistory.json", error);
  }
}

// src/main.ts
var DEFAULT_SETTINGS = {
  apiKey: "",
  max_tokens: "",
  model: "gpt-3.5-turbo",
  system_role: "",
  temperature: 1,
  userName: "USER",
  chatbotName: "BMO",
  chatbotContainerBackgroundColor: "--background-secondary",
  userMessageBackgroundColor: "--background-primary",
  botMessageBackgroundColor: "--background-secondary",
  chatHistoryPath: "BMO/",
  templateFilePath: "",
  openAIBaseUrl: "https://api.openai.com/v1",
  restAPIUrl: "",
  models: void 0,
  referenceCurrentNote: false,
  allowRenameNoteTitle: false
};
var BMOGPT = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_CHATBOT,
      (leaf) => new BMOView(leaf, this.settings, this)
    );
    this.addRibbonIcon("bot", "Chatbot (Clear Conversation)", () => {
      this.activateView();
      this.app.vault.adapter.write(filenameMessageHistoryJSON, "");
      clearMessageHistory();
    });
    this.addCommand({
      id: "open-bmo-chatbot",
      name: "Open BMO Chatbot",
      callback: () => {
        this.activateView();
      },
      hotkeys: [
        {
          modifiers: ["Mod"],
          key: "0"
        }
      ]
    });
    this.addSettingTab(new BMOSettingTab(this.app, this));
  }
  async onunload() {
    this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT).forEach((leaf) => {
      const bmoView = leaf.view;
      if (bmoView) {
        this.saveSettings();
        bmoView.cleanup();
      }
    });
  }
  async activateView() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_CHATBOT);
    const rightLeaf = this.app.workspace.getRightLeaf(false);
    await rightLeaf.setViewState({
      type: VIEW_TYPE_CHATBOT,
      active: true
    });
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT)[0]
    );
    const textarea = document.querySelector(".chatbox textarea");
    if (textarea) {
      textarea.style.opacity = "0";
      textarea.style.transition = "opacity 1s ease-in-out";
      setTimeout(() => {
        textarea.focus();
        textarea.style.opacity = "1";
      }, 50);
    }
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT)[0]
    );
    const messageContainer = document.querySelector("#messageContainer");
    if (messageContainer) {
      messageContainer.scroll({
        top: messageContainer.scrollHeight,
        behavior: "smooth"
      });
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3ZpZXcudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgIm5vZGVfbW9kdWxlcy9tYXJrZWQvbGliL21hcmtlZC5lc20uanMiLCAic3JjL2NvbW1hbmRzLnRzIiwgInNyYy9tb2RlbHMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvdmVyc2lvbi50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9zdHJlYW1pbmcudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvZXJyb3IudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvX3NoaW1zL2FnZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvX3NoaW1zL2ZldGNoLm1qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL19zaGltcy9mb3JtLWRhdGEubWpzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL19zaGltcy9nZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9fc2hpbXMvZmlsZUZyb21QYXRoLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL19zaGltcy9ub2RlLXJlYWRhYmxlLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3VwbG9hZHMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvY29yZS50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9wYWdpbmF0aW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9hdWRpby90cmFuc2NyaXB0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvYXVkaW8vdHJhbnNsYXRpb25zLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9hdWRpby9hdWRpby50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvY2hhdC9jb21wbGV0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvY2hhdC9jaGF0LnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9jb21wbGV0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZW1iZWRkaW5ncy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZWRpdHMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2ZpbGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9maW5lLXR1bmVzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9maW5lLXR1bmluZy9qb2JzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9maW5lLXR1bmluZy9maW5lLXR1bmluZy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvaW1hZ2VzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9tb2RlbHMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL21vZGVyYXRpb25zLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL2luZGV4LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBCTU9WaWV3LCBWSUVXX1RZUEVfQ0hBVEJPVCwgZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04sIGNsZWFyTWVzc2FnZUhpc3RvcnkgfSBmcm9tIFwiLi92aWV3XCI7XG5pbXBvcnQgeyBCTU9TZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQk1PU2V0dGluZ3Mge1xuXHRtb2RlbHM6IGFueTtcblx0YXBpS2V5OiBzdHJpbmc7XG5cdG1heF90b2tlbnM6IHN0cmluZztcblx0bW9kZWw6IHN0cmluZztcblx0c3lzdGVtX3JvbGU6IHN0cmluZztcblx0dGVtcGVyYXR1cmU6IG51bWJlcjtcblx0dXNlck5hbWU6IHN0cmluZztcblx0Y2hhdGJvdE5hbWU6IHN0cmluZztcblx0Y2hhdGJvdENvbnRhaW5lckJhY2tncm91bmRDb2xvcjogc3RyaW5nO1xuXHR1c2VyTWVzc2FnZUJhY2tncm91bmRDb2xvcjogc3RyaW5nO1xuXHRib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG5cdGNoYXRIaXN0b3J5UGF0aDogc3RyaW5nO1xuXHR0ZW1wbGF0ZUZpbGVQYXRoOiBzdHJpbmc7XG5cdG9wZW5BSUJhc2VVcmw6IHN0cmluZztcblx0cmVzdEFQSVVybDogc3RyaW5nO1xuXHRyZWZlcmVuY2VDdXJyZW50Tm90ZTogYm9vbGVhbjtcblx0YWxsb3dSZW5hbWVOb3RlVGl0bGU6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBCTU9TZXR0aW5ncyA9IHtcblx0YXBpS2V5OiAnJyxcblx0bWF4X3Rva2VuczogJycsXG5cdG1vZGVsOiAnZ3B0LTMuNS10dXJibycsXG5cdHN5c3RlbV9yb2xlOiAnJyxcblx0dGVtcGVyYXR1cmU6IDEuMDAsXG5cdHVzZXJOYW1lOiAnVVNFUicsXG5cdGNoYXRib3ROYW1lOiAnQk1PJyxcblx0Y2hhdGJvdENvbnRhaW5lckJhY2tncm91bmRDb2xvcjogJy0tYmFja2dyb3VuZC1zZWNvbmRhcnknLFxuXHR1c2VyTWVzc2FnZUJhY2tncm91bmRDb2xvcjogJy0tYmFja2dyb3VuZC1wcmltYXJ5Jyxcblx0Ym90TWVzc2FnZUJhY2tncm91bmRDb2xvcjogJy0tYmFja2dyb3VuZC1zZWNvbmRhcnknLFxuXHRjaGF0SGlzdG9yeVBhdGg6ICdCTU8vJyxcblx0dGVtcGxhdGVGaWxlUGF0aDogJycsXG5cdG9wZW5BSUJhc2VVcmw6ICdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxJyxcblx0cmVzdEFQSVVybDogJycsXG5cdG1vZGVsczogdW5kZWZpbmVkLFxuXHRyZWZlcmVuY2VDdXJyZW50Tm90ZTogZmFsc2UsXG5cdGFsbG93UmVuYW1lTm90ZVRpdGxlOiBmYWxzZSxcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCTU9HUFQgZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogQk1PU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcblx0XHRcdFZJRVdfVFlQRV9DSEFUQk9ULFxuXHRcdFx0KGxlYWYpID0+IG5ldyBCTU9WaWV3KGxlYWYsIHRoaXMuc2V0dGluZ3MsIHRoaXMpXG5cdFx0KTtcblxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImJvdFwiLCBcIkNoYXRib3QgKENsZWFyIENvbnZlcnNhdGlvbilcIiwgKCkgPT4ge1xuXHRcdFx0dGhpcy5hY3RpdmF0ZVZpZXcoKTtcblx0XHRcdHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04sICcnKTtcblx0XHRcdGNsZWFyTWVzc2FnZUhpc3RvcnkoKTtcblxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnb3Blbi1ibW8tY2hhdGJvdCcsXG4gICAgICAgICAgICBuYW1lOiAnT3BlbiBCTU8gQ2hhdGJvdCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaG90a2V5czogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bW9kaWZpZXJzOiBbJ01vZCddLFxuXHRcdFx0XHRcdGtleTogJzAnLFxuXHRcdFx0XHR9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEJNT1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0fVxuXG5cdGFzeW5jIG9udW5sb2FkKCkge1xuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NIQVRCT1QpLmZvckVhY2goKGxlYWYpID0+IHtcblx0XHRcdGNvbnN0IGJtb1ZpZXcgPSBsZWFmLnZpZXcgYXMgQk1PVmlldztcblx0XG5cdFx0XHRpZiAoYm1vVmlldykge1xuXHRcdFx0XHR0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRibW9WaWV3LmNsZWFudXAoKTtcblx0XHRcdH0gXG5cdFx0fSk7XG5cdH1cblxuXHRhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0hBVEJPVCk7XG5cdFxuXHRcdGNvbnN0IHJpZ2h0TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuXHRcdGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0dHlwZTogVklFV19UWVBFX0NIQVRCT1QsXG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NIQVRCT1QpWzBdXG5cdFx0KTtcblx0XG5cdFx0Ly8gRm9jdXMgb24gdGhlIHRleHRhcmVhXG5cdFx0Y29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJveCB0ZXh0YXJlYScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG5cdFxuXHRcdGlmICh0ZXh0YXJlYSkge1xuXHRcdFx0dGV4dGFyZWEuc3R5bGUub3BhY2l0eSA9ICcwJztcblx0XHRcdHRleHRhcmVhLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAxcyBlYXNlLWluLW91dCc7XG5cdFxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHRleHRhcmVhLmZvY3VzKCk7XG5cdFx0XHRcdHRleHRhcmVhLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG5cdFx0XHR9LCA1MCk7IFxuXHRcdH1cblx0XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DSEFUQk9UKVswXVxuXHRcdCk7XG5cdFxuXHRcdGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21lc3NhZ2VDb250YWluZXJcIik7XG5cdFx0aWYgKG1lc3NhZ2VDb250YWluZXIpIHtcblx0XHRcdG1lc3NhZ2VDb250YWluZXIuc2Nyb2xsKHtcblx0XHRcdFx0dG9wOiBtZXNzYWdlQ29udGFpbmVyLnNjcm9sbEhlaWdodCwgXG5cdFx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJyBcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRcblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufSIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgTm90aWNlLCBzZXRJY29uLCBsb2FkUHJpc20sIFRGaWxlLCBNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtERUZBVUxUX1NFVFRJTkdTLCBCTU9TZXR0aW5nc30gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IGNvbG9yVG9IZXggfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgbWFya2VkIH0gZnJvbSBcIm1hcmtlZFwiO1xuaW1wb3J0IHsgZXhlY3V0ZUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuaW1wb3J0IHsgZmV0Y2hPcGVuQUlBUEksIHJlcXVlc3RVcmxBbnRocm9waWNBUEksIHJlcXVlc3RVcmxDaGF0Q29tcGxldGlvbiB9IGZyb20gXCIuL21vZGVsc1wiO1xuaW1wb3J0IEJNT0dQVCBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX0NIQVRCT1QgPSBcImNoYXRib3Qtdmlld1wiO1xuZXhwb3J0IGNvbnN0IGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OID0gJy4vLm9ic2lkaWFuL3BsdWdpbnMvYm1vLWNoYXRib3QvZGF0YS9tZXNzYWdlSGlzdG9yeS5qc29uJztcblxuZXhwb3J0IGNvbnN0IEFOVEhST1BJQ19NT0RFTFMgPSBbXCJjbGF1ZGUtaW5zdGFudC0xLjJcIiwgXCJjbGF1ZGUtMi4wXCJdO1xuZXhwb3J0IGNvbnN0IE9QRU5BSV9NT0RFTFMgPSBbXCJncHQtMy41LXR1cmJvXCIsIFwiZ3B0LTMuNS10dXJiby0xMTA2XCIsIFwiZ3B0LTRcIiwgXCJncHQtNC0xMTA2LXByZXZpZXdcIl07XG5cbmV4cG9ydCBsZXQgbWVzc2FnZUhpc3Rvcnk6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhck1lc3NhZ2VIaXN0b3J5KCkge1xuICAgIG1lc3NhZ2VIaXN0b3J5ID0gW107XG59XG5cbmxldCBtZXNzYWdlSGlzdG9yeUNvbnRlbnQ6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdID0gW107XG5cbmV4cG9ydCBjbGFzcyBCTU9WaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIHB1YmxpYyBzZXR0aW5nczogQk1PU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSB0ZXh0YXJlYUVsZW1lbnQ6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsb2FkaW5nQW5pbWF0aW9uSW50ZXJ2YWxJZDogbnVtYmVyO1xuICAgIHByaXZhdGUgcHJldmVudEVudGVyID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBwbHVnaW46IEJNT0dQVDtcblxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHNldHRpbmdzOiBCTU9TZXR0aW5ncywgcGx1Z2luOiBCTU9HUFQpIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuaWNvbiA9ICdib3QnOyAgICAgIFxuICAgIH1cblxuICAgIGdldFZpZXdUeXBlKCkge1xuICAgICAgICByZXR1cm4gVklFV19UWVBFX0NIQVRCT1Q7XG4gICAgfVxuXG4gICAgZ2V0RGlzcGxheVRleHQoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRib3RcIjtcbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBvbk9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgdGhpcy5oYW5kbGVGaWxlT3BlbkV2ZW50LmJpbmQodGhpcykpKTtcblxuXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBjb25zdCBjaGF0Ym90Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJjaGF0Ym90Q29udGFpbmVyXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNoYXRib3RDb250YWluZXIuY3JlYXRlRWwoXCJoMVwiLCB7IFxuICAgICAgICAgICAgdGV4dDogdGhpcy5zZXR0aW5ncy5jaGF0Ym90TmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmNoYXRib3ROYW1lLFxuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGlkOiBcImNoYXRib3ROYW1lSGVhZGluZ1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNoYXRib3RDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiTW9kZWw6IFwiICsgdGhpcy5zZXR0aW5ncy5tb2RlbCB8fCBERUZBVUxUX1NFVFRJTkdTLm1vZGVsLFxuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGlkOiBcIm1vZGVsTmFtZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHNwYW5FbGVtZW50ID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGNsYXNzOiBcImRvdEluZGljYXRvclwiLFxuICAgICAgICAgICAgICAgIGlkOiBcIm1hcmtEb3duQm9vbGVhblwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50ID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJSZWZlcmVuY2UgQ3VycmVudCBOb3RlXCIsXG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgaWQ6IFwicmVmZXJlbmNlQ3VycmVudE5vdGVcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3BhbkVsZW1lbnQpO1xuXG4gICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUpIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgYXdhaXQgZ2V0QWN0aXZlRmlsZUNvbnRlbnQoYWN0aXZlRmlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgaWQ6IFwibWVzc2FnZUNvbnRhaW5lclwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCBsb2FkRGF0YSgpO1xuICAgICAgICBcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5pZCA9IFwibWVzc2FnZUNvbnRhaW5lclwiO1xuICAgICAgICBcbiAgICAgICAgbWVzc2FnZUhpc3RvcnkuZm9yRWFjaCgobWVzc2FnZURhdGEsIGluZGV4KSA9PiB7ICAgICBcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXJEaXYuY2xhc3NOYW1lID0gXCJidXR0b24tY29udGFpbmVyXCI7XG5cbiAgICAgICAgICAgIGlmIChtZXNzYWdlRGF0YS5yb2xlID09IFwidXNlclwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlRGl2LmNsYXNzTmFtZSA9IFwidXNlck1lc3NhZ2VcIjtcbiAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KHRoaXMuc2V0dGluZ3MudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgfHwgXG4gICAgICAgICAgICAgICAgICAgIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShERUZBVUxUX1NFVFRJTkdTLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlVG9vbEJhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VUb29sQmFyRGl2LmNsYXNzTmFtZSA9IFwidXNlck1lc3NhZ2VUb29sQmFyXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlck5hbWVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgdXNlck5hbWVTcGFuLmNsYXNzTmFtZSA9IFwidXNlck5hbWVcIjtcbiAgICAgICAgICAgICAgICB1c2VyTmFtZVNwYW4udGV4dENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLnVzZXJOYW1lIHx8IERFRkFVTFRfU0VUVElOR1MudXNlck5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvcHlVc2VyQnV0dG9uID0gZGlzcGxheVVzZXJDb3B5QnV0dG9uKHVzZXJQKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IGRpc3BsYXlUcmFzaCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZCh1c2VyTmFtZVNwYW4pO1xuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXJEaXYpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjb3B5VXNlckJ1dHRvbik7XG4gICAgICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKHRyYXNoQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZVRvb2xCYXJEaXYpO1xuICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlRGl2LmFwcGVuZENoaWxkKHVzZXJQKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKHVzZXJNZXNzYWdlRGl2KTtcblxuICAgICAgICAgICAgICAgIGlmIChBTlRIUk9QSUNfTU9ERUxTLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxTdHJpbmcgPSBtZXNzYWdlRGF0YS5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhblN0cmluZyA9IGZ1bGxTdHJpbmcuc3BsaXQoJyAnKS5zbGljZSgxKS5qb2luKCcgJykudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB1c2VyUC5pbm5lckhUTUwgPSBtYXJrZWQoY2xlYW5TdHJpbmcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJQLmlubmVySFRNTCA9IG1hcmtlZChtZXNzYWdlRGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VEYXRhLnJvbGUgPT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gXCJib3RNZXNzYWdlXCI7XG4gICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KHRoaXMuc2V0dGluZ3MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgICAgICBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCkpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZVRvb2xCYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2LmNsYXNzTmFtZSA9IFwiYm90TWVzc2FnZVRvb2xCYXJcIjtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgYm90TmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTsgXG4gICAgICAgICAgICAgICAgYm90TmFtZVNwYW4udGV4dENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLmNoYXRib3ROYW1lIHx8IERFRkFVTFRfU0VUVElOR1MuY2hhdGJvdE5hbWU7XG4gICAgICAgICAgICAgICAgLy8gYm90TmFtZVNwYW4uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjaGF0Ym90TmFtZVwiKVxuICAgICAgICAgICAgICAgIGJvdE5hbWVTcGFuLmNsYXNzTmFtZSA9IFwiY2hhdGJvdE5hbWVcIjtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJsb2NrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2tEaXYuY2xhc3NOYW1lID0gXCJtZXNzYWdlQmxvY2tcIjtcblxuICAgICAgICAgICAgICAgIGxldCBib3RQID0gJyc7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlVGV4dCA9IG1lc3NhZ2VEYXRhLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBTlRIUk9QSUNfTU9ERUxTLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhblN0cmluZyA9IG1lc3NhZ2VUZXh0LnNwbGl0KCcgJykuc2xpY2UoMSkuam9pbignICcpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdFAgPSBtYXJrZWQoY2xlYW5TdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2VEYXRhLmNvbnRlbnQuaW5jbHVkZXMoJ2RpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm90UCA9IG1lc3NhZ2VEYXRhLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm90UCA9IG1hcmtlZChtZXNzYWdlRGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdCb3RQID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIG5ld0JvdFAuaW5uZXJIVE1MID0gYm90UDtcblxuICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2LmFwcGVuZENoaWxkKGJvdE5hbWVTcGFuKTtcbiAgICAgICAgICAgICAgICBib3RNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXJEaXYpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlVGV4dC5pbmNsdWRlcygnZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvcHlCb3RCdXR0b24gPSBkaXNwbGF5Qm90Q29weUJ1dHRvbihtZXNzYWdlRGF0YSwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjb3B5Qm90QnV0dG9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChib3RNZXNzYWdlVG9vbEJhckRpdik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUJsb2NrRGl2LmFwcGVuZENoaWxkKG5ld0JvdFApO1xuICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrRGl2KTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9ja0Rpdik7XG4gICAgICAgICAgICAgICAgY29kZUJsb2NrQ29weUJ1dHRvbihtZXNzYWdlQmxvY2tEaXYpO1xuICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZURhdGEuY29udGVudC5pbmNsdWRlcygnZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIicpKXtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9ja0Rpdik7ICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2UuYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrRGl2KTtcbiAgICAgICAgICAgICAgICBsYXN0Qm90TWVzc2FnZS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFyZW50RWxlbWVudElkXCIpO1xuICAgICAgICBwYXJlbnRFbGVtZW50Py5hcHBlbmRDaGlsZChtZXNzYWdlQ29udGFpbmVyKTtcblxuICAgICAgICBjb25zdCBjaGF0Ym94ID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiY2hhdGJveFwiLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIHRydWUudG9TdHJpbmcoKSk7XG4gICAgICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiU3RhcnQgdHlwaW5nLi4uXCIpO1xuICAgICAgICBjaGF0Ym94LmFwcGVuZENoaWxkKHRleHRhcmVhKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50ID0gdGV4dGFyZWEgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5oYW5kbGVLZXl1cC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVLZXlkb3duLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGhpcy5oYW5kbGVJbnB1dC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgdGhpcy5oYW5kbGVCbHVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUZpbGVPcGVuRXZlbnQoZmlsZTogVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgZ2V0QWN0aXZlRmlsZUNvbnRlbnQoZmlsZSk7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGhhbmRsZUtleXVwKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG5cbiAgICAgICAgaWYgKHRoaXMucHJldmVudEVudGVyID09PSBmYWxzZSAmJiAhZXZlbnQuc2hpZnRLZXkgJiYgZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgIGxvYWREYXRhKCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLnRleHRhcmVhRWxlbWVudC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoQU5USFJPUElDX01PREVMUy5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgIGFkZE1lc3NhZ2UoJ1xcblxcbkh1bWFuOiAnICsgaW5wdXQsICd1c2VyTWVzc2FnZScsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKGlucHV0LCAndXNlck1lc3NhZ2UnLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdXNlclAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtkb3duQ29udGVudCA9IG1hcmtlZChpbnB1dCk7XG4gICAgICAgICAgICB1c2VyUC5pbm5lckhUTUwgPSBtYXJrZG93bkNvbnRlbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdXNlck1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gXCJ1c2VyTWVzc2FnZVwiO1xuICAgICAgICAgICAgdXNlck1lc3NhZ2VEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JUb0hleCh0aGlzLnNldHRpbmdzLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yIHx8IFxuICAgICAgICAgICAgICAgIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShERUZBVUxUX1NFVFRJTkdTLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZVRvb2xCYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdXNlck1lc3NhZ2VUb29sQmFyRGl2LmNsYXNzTmFtZSA9IFwidXNlck1lc3NhZ2VUb29sQmFyXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHVzZXJOYW1lU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgdXNlck5hbWVTcGFuLmNsYXNzTmFtZSA9IFwidXNlck5hbWVcIjtcbiAgICAgICAgICAgIHVzZXJOYW1lU3Bhbi50ZXh0Q29udGVudCA9IHRoaXMuc2V0dGluZ3MudXNlck5hbWUgfHwgREVGQVVMVF9TRVRUSU5HUy51c2VyTmFtZTtcblxuICAgICAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5jbGFzc05hbWUgPSBcImJ1dHRvbi1jb250YWluZXJcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVzc2FnZUNvbnRhaW5lclwiKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29weVVzZXJCdXR0b24gPSBkaXNwbGF5VXNlckNvcHlCdXR0b24odXNlclApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyYXNoQnV0dG9uID0gZGlzcGxheVRyYXNoKCk7XG5cbiAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZVRvb2xCYXJEaXYuYXBwZW5kQ2hpbGQodXNlck5hbWVTcGFuKTtcbiAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZVRvb2xCYXJEaXYuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyRGl2KTtcbiAgICAgICAgICAgICAgICBidXR0b25Db250YWluZXJEaXYuYXBwZW5kQ2hpbGQoY29weVVzZXJCdXR0b24pO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0cmFzaEJ1dHRvbik7XG4gICAgICAgICAgICAgICAgdXNlck1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQodXNlck1lc3NhZ2VUb29sQmFyRGl2KTtcbiAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5hcHBlbmRDaGlsZCh1c2VyUCk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZURpdik7XG5cbiAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlQ29tbWFuZChpbnB1dCwgdGhpcy5zZXR0aW5ncywgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlbE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kZWxOYW1lJykgYXMgSFRNTEhlYWRpbmdFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWxOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWUudGV4dENvbnRlbnQgPSAnTW9kZWw6ICcgKyB0aGlzLnNldHRpbmdzLm1vZGVsLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgfSAgIFxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5jbGFzc05hbWUgPSBcImJvdE1lc3NhZ2VcIjtcbiAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KHRoaXMuc2V0dGluZ3MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKERFRkFVTFRfU0VUVElOR1MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvcikudHJpbSgpKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlVG9vbEJhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2LmNsYXNzTmFtZSA9IFwiYm90TWVzc2FnZVRvb2xCYXJcIjtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBib3ROYW1lU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpOyBcbiAgICAgICAgICAgICAgICAgICAgYm90TmFtZVNwYW4udGV4dENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLmNoYXRib3ROYW1lIHx8IERFRkFVTFRfU0VUVElOR1MuY2hhdGJvdE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJvdE5hbWVTcGFuLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY2hhdGJvdE5hbWVcIilcbiAgICAgICAgICAgICAgICAgICAgYm90TmFtZVNwYW4uY2xhc3NOYW1lID0gXCJjaGF0Ym90TmFtZVwiO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9ja0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9ja0Rpdi5jbGFzc05hbWUgPSBcIm1lc3NhZ2VCbG9ja1wiO1xuXG4gICAgICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2LmFwcGVuZENoaWxkKGJvdE5hbWVTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChib3RNZXNzYWdlVG9vbEJhckRpdik7XG4gICAgICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0VsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwibG9hZGluZ1wiKTsgXG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjsgXG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmdFbC50ZXh0Q29udGVudCA9IFwiLi4uXCI7IFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIERlZmluZSBhIGZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBhbmltYXRpb25cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlTG9hZGluZ0FuaW1hdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvYWRpbmdFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdFbC50ZXh0Q29udGVudCArPSBcIi5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBsb2FkaW5nIGFuaW1hdGlvbiBoYXMgcmVhY2hlZCB0aHJlZSBkb3RzLCByZXNldCBpdCB0byBvbmUgZG90XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGluZ0VsLnRleHRDb250ZW50Py5sZW5ndGggJiYgbG9hZGluZ0VsLnRleHRDb250ZW50Lmxlbmd0aCA+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nRWwudGV4dENvbnRlbnQgPSBcIi5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTsgIFxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghT1BFTkFJX01PREVMUy5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChsb2FkaW5nRWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0VsLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ2VuZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nQW5pbWF0aW9uSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHVwZGF0ZUxvYWRpbmdBbmltYXRpb24sIDUwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgc3BhY2VyIGVsZW1lbnQgZm9yIHNjcm9sbGluZyBtb3N0IHJlY2VudCB1c2VyTWVzc2FnZS9ib3RNZXNzYWdlIHRvXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwYWNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIHNwYWNlci5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInNwYWNlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGFjZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlRGl2LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIsIGJsb2NrOiBcInN0YXJ0XCIgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RW50ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBjaGF0Ym90IGZ1bmN0aW9uIHdpdGggdGhlIHVzZXIncyBpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0aGlzLkJNT2NoYXRib3QoaW5wdXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BhY2VyID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI3NwYWNlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BhY2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGxvYWRpbmdBbmltYXRpb25JbnRlcnZhbElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0b3AgdGhlIGxvYWRpbmcgYW5pbWF0aW9uIGFuZCB1cGRhdGUgdGhlIGJvdCBtZXNzYWdlIHdpdGggYW4gZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwobG9hZGluZ0FuaW1hdGlvbkludGVydmFsSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdFBhcmFncmFwaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdFBhcmFncmFwaC50ZXh0Q29udGVudCA9IFwiT29wcywgc29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChib3RQYXJhZ3JhcGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIyOXB4XCI7XG4gICAgICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC52YWx1ZSA9IHRoaXMudGV4dGFyZWFFbGVtZW50LnZhbHVlLnJlcGxhY2UoL15bXFxyXFxuXSt8W1xcclxcbl0rJC9nbSxcIlwiKTsgLy8gcmVtb3ZlIG5ld2xpbmVzIG9ubHkgYXQgYmVnaW5uaW5nIG9yIGVuZCBvZiBpbnB1dFxuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIgJiYgIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlSW5wdXQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnN0eWxlLmhlaWdodCA9IFwiMjlweFwiO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLnRleHRhcmVhRWxlbWVudC5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgaGFuZGxlQmx1cihldmVudDogRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRleHRhcmVhRWxlbWVudC52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIyOXB4XCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3M7XG4gICAgfVxuICAgIFxuICAgIGNsZWFudXAoKSB7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZUtleXVwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUtleWRvd24uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmhhbmRsZUlucHV0LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmhhbmRsZUJsdXIuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgLy8gQ2xlYXIgdGhlIGxvYWRpbmcgYW5pbWF0aW9uIGludGVydmFsIGlmIGl0J3MgYWN0aXZlXG4gICAgICAgIGlmICh0aGlzLmxvYWRpbmdBbmltYXRpb25JbnRlcnZhbElkKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMubG9hZGluZ0FuaW1hdGlvbkludGVydmFsSWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgQk1PY2hhdGJvdChfaW5wdXQ6IHN0cmluZykge1xuICAgICAgICBsZXQgcmVmZXJlbmNlQ3VycmVudE5vdGUgPSAnJztcblxuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblxuICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUpIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZSA9IGF3YWl0IGdldEFjdGl2ZUZpbGVDb250ZW50KGFjdGl2ZUZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgY29uc3QgY2hhdGJvdE5hbWVIZWFkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXRib3ROYW1lSGVhZGluZycpO1xuICAgICAgICBjb25zdCBjaGF0Ym94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3ggdGV4dGFyZWEnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXG4gICAgICAgIC8vIElmIGFwaUtleSBkb2VzIG5vdCBleGlzdC5cbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmFwaUtleSAmJiBPUEVOQUlfTU9ERUxTLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiQVBJIGtleSBub3QgZm91bmQuIFBsZWFzZSBhZGQgeW91ciBPcGVuQUkgQVBJIGtleSBpbiB0aGUgcGx1Z2luIHNldHRpbmdzLlwiKTtcbiAgICAgICAgICAgIGlmIChjaGF0Ym90TmFtZUhlYWRpbmcpe1xuICAgICAgICAgICAgICAgIGNoYXRib3ROYW1lSGVhZGluZy50ZXh0Q29udGVudCA9IFwiRVJST1JcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbGFzdERpdiA9IG1lc3NhZ2VDb250YWluZXJFbD8ubGFzdEVsZW1lbnRDaGlsZCBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiQVBJIGtleSBub3QgZm91bmQuIFBsZWFzZSBhZGQgeW91ciBPcGVuQUkgQVBJIGtleSBpbiB0aGUgcGx1Z2luIHNldHRpbmdzLlwiO1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2Vycm9yTWVzc2FnZScpO1xuICAgICAgICAgICAgLy8gY29uc3QgY2hhdGJvdE5hbWVFcnJvciA9IGxhc3REaXYucXVlcnlTZWxlY3RvcignI2NoYXRib3ROYW1lJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBjaGF0Ym90TmFtZUVycm9yID0gbGFzdERpdi5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdE5hbWUnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIGNoYXRib3ROYW1lRXJyb3IudGV4dENvbnRlbnQgPSBcIkVSUk9SXCI7XG4gICAgICAgICAgICBsYXN0RGl2LmFwcGVuZENoaWxkKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICBjaGF0Ym94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgc3lzdGVtUmVmZXJlbmNlQ3VycmVudE5vdGUgPSAnJztcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUpIHtcbiAgICAgICAgICAgICAgICBzeXN0ZW1SZWZlcmVuY2VDdXJyZW50Tm90ZSA9ICdSZWZlciB0byBub3RlIGlmIGFza2VkLidcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbWF4VG9rZW5zID0gdGhpcy5zZXR0aW5ncy5tYXhfdG9rZW5zO1xuICAgICAgICAgICAgY29uc3QgdGVtcGVyYXR1cmUgPSB0aGlzLnNldHRpbmdzLnRlbXBlcmF0dXJlO1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgYXBpS2V5OiB0aGlzLnNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5tb2RlbCxcbiAgICAgICAgICAgICAgICBzeXN0ZW1fcm9sZTogc3lzdGVtUmVmZXJlbmNlQ3VycmVudE5vdGUgKyB0aGlzLnNldHRpbmdzLnN5c3RlbV9yb2xlXG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgICAgIC8vIE9wZW5BSSBtb2RlbHNcbiAgICAgICAgICAgIGlmIChPUEVOQUlfTU9ERUxTLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hPcGVuQUlBUEkodGhpcy5zZXR0aW5ncywgcmVmZXJlbmNlQ3VycmVudE5vdGUsIG1lc3NhZ2VIaXN0b3J5Q29udGVudCwgbWF4VG9rZW5zLCB0ZW1wZXJhdHVyZSk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgY29tcGxldGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJtZXNzYWdlSGlzdG9yeTogXCIgKyBtZXNzYWdlSGlzdG9yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQU5USFJPUElDX01PREVMUy5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9ICdodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxL2NvbXBsZXRlJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsQW50aHJvcGljQVBJKHVybCwgdGhpcy5zZXR0aW5ncywgcmVmZXJlbmNlQ3VycmVudE5vdGUsIG1lc3NhZ2VIaXN0b3J5Q29udGVudCwgbWF4VG9rZW5zLCB0ZW1wZXJhdHVyZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlLnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gbWVzc2FnZS5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb21wbGV0aW9uVGV4dCA9ICcnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCdkYXRhOicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudERhdGEgPSBKU09OLnBhcnNlKGxpbmUuc2xpY2UoJ2RhdGE6Jy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudERhdGEuY29tcGxldGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVGV4dCArPSBldmVudERhdGEuY29tcGxldGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUNvbnRhaW5lckVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJvdE1lc3NhZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gbGFzdEJvdE1lc3NhZ2UucXVlcnlTZWxlY3RvcihcIiNsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGluZ0VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0VsLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ2VuZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2UucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJsb2NrID0gbGFzdEJvdE1lc3NhZ2UucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VCbG9jaycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJsb2NrLmlubmVySFRNTCA9IG1hcmtlZChjb21wbGV0aW9uVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXJhZ3JhcGhCcmVha3MobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmlzbUhpZ2hsaWdodGluZyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGFkZE1lc3NhZ2UoJ1xcblxcbkFzc2lzdGFudDogJyArIGNvbXBsZXRpb25UZXh0LCAnYm90TWVzc2FnZScsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7IFxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmxDaGF0Q29tcGxldGlvbih0aGlzLnNldHRpbmdzLnJlc3RBUElVcmwsIHNldHRpbmdzLCByZWZlcmVuY2VDdXJyZW50Tm90ZSwgbWVzc2FnZUhpc3RvcnlDb250ZW50LCBtYXhUb2tlbnMsIHRlbXBlcmF0dXJlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlLmpzb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkTWVzc2FnZShtZXNzYWdlLCAnYm90TWVzc2FnZScsIHRoaXMuc2V0dGluZ3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RCb3RNZXNzYWdlID0gYm90TWVzc2FnZXNbYm90TWVzc2FnZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKFwiI2xvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nRWwuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnZW5kJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Qm90TWVzc2FnZS5yZW1vdmVDaGlsZChsb2FkaW5nRWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2Rvd25Db250ZW50ID0gbWFya2VkKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJsb2NrLmlubmVySFRNTCA9IG1hcmtkb3duQ29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5jbGFzc0xpc3QuYWRkKFwibWVzc2FnZUJsb2NrXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXJhZ3JhcGhCcmVha3MobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlQmxvY2tDb3B5QnV0dG9uKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLmFwcGVuZENoaWxkKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Qm90TWVzc2FnZS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjb21wbGV0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1lc3NhZ2VIaXN0b3J5OiBcIiArIG1lc3NhZ2VIaXN0b3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJCTU8gc2V0dGluZ3M6XCIsIHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgICAgIC8vIE5vdGhpbmcgdG8gY2xlYW4gdXAuXG4gICAgfVxuXG59XG5cbi8vIENyZWF0ZSBkYXRhIGZvbGRlciBhbmQgbG9hZCBKU09OIGZpbGVcbmFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKCkge1xuICAgIGlmICghYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoJy4vLm9ic2lkaWFuL3BsdWdpbnMvYm1vLWNoYXRib3QvZGF0YS8nKSkge1xuICAgICAgICB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKCcuLy5vYnNpZGlhbi9wbHVnaW5zL2Jtby1jaGF0Ym90L2RhdGEvJyk7XG4gICAgfVxuXG4gICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04pO1xuXG4gICAgICAgICAgICBpZiAoZmlsZUNvbnRlbnQudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUhpc3RvcnkgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUhpc3RvcnkgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIG1lc3NhZ2UgaGlzdG9yeTpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZUhpc3RvcnkgPSBbXTtcbiAgICB9XG59XG5cbi8vIFJlZmVyZW5jZSBDdXJyZW50IE5vdGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY3RpdmVGaWxlQ29udGVudChmaWxlOiBURmlsZSkge1xuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBjb25zdCBkb3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRvdEluZGljYXRvcicpO1xuICAgIGxldCBjdXJyZW50Tm90ZSA9ICcnO1xuICAgIGlmIChhY3RpdmVGaWxlPy5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICBjdXJyZW50Tm90ZSA9ICdOb3RlOmBgYCcgKyBjb250ZW50ICsgJ2BgYFxcbic7XG4gICAgICAgIGlmIChkb3RFbGVtZW50KSB7XG4gICAgICAgICAgICAoZG90RWxlbWVudCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkb3RFbGVtZW50KSB7XG4gICAgICAgICAgICAoZG90RWxlbWVudCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNkYTJjMmMnO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50Tm90ZTtcbn1cblxuLy8gQWRkIGEgbmV3IG1lc3NhZ2UgdG8gdGhlIG1lc3NhZ2VIaXN0b3J5IGFycmF5IGFuZCBzYXZlIGl0IHRvIHRoZSBmaWxlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkTWVzc2FnZShpbnB1dDogc3RyaW5nLCBtZXNzYWdlVHlwZTogJ3VzZXJNZXNzYWdlJyB8ICdib3RNZXNzYWdlJywgc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBpbmRleD86IG51bWJlcikge1xuICAgIGNvbnN0IG1lc3NhZ2VPYmo6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfSA9IHtcbiAgICAgICAgcm9sZTogXCJcIixcbiAgICAgICAgY29udGVudDogXCJcIlxuICAgIH07XG5cbiAgICBpZiAobWVzc2FnZVR5cGUgPT09ICd1c2VyTWVzc2FnZScpIHtcbiAgICAgICAgbWVzc2FnZU9iai5yb2xlID0gJ3VzZXInO1xuICAgICAgICBtZXNzYWdlT2JqLmNvbnRlbnQgPSBpbnB1dDtcbiAgICB9IGVsc2UgaWYgKG1lc3NhZ2VUeXBlID09PSAnYm90TWVzc2FnZScpIHtcbiAgICAgICAgbWVzc2FnZU9iai5yb2xlID0gJ2Fzc2lzdGFudCc7ICBcbiAgICAgICAgbWVzc2FnZU9iai5jb250ZW50ID0gaW5wdXQ7XG5cbiAgICAgICAgY29uc3QgYm90TWVzc2FnZVRvb2xCYXJEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJvdE1lc3NhZ2VUb29sQmFyXCIpO1xuICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZVRvb2xCYXJEaXYgPSBib3RNZXNzYWdlVG9vbEJhckRpdltib3RNZXNzYWdlVG9vbEJhckRpdi5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGJvdE1lc3NhZ2VUb29sQmFyRGl2Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICghbWVzc2FnZU9iai5jb250ZW50LmluY2x1ZGVzKCdkaXYgY2xhc3M9XCJmb3JtYXR0ZWRTZXR0aW5nc1wiJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb3B5Qm90QnV0dG9uID0gZGlzcGxheUJvdENvcHlCdXR0b24obWVzc2FnZU9iaiwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZChjb3B5Qm90QnV0dG9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgbWVzc2FnZUhpc3RvcnkucHVzaChtZXNzYWdlT2JqKTtcblxuICAgIG1lc3NhZ2VIaXN0b3J5Q29udGVudCA9IG1lc3NhZ2VIaXN0b3J5Lm1hcChpdGVtID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvbGU6IGl0ZW0ucm9sZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudFxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VIaXN0b3J5Q29udGVudCwgbnVsbCwgNCk7XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OLCBqc29uU3RyaW5nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igd3JpdGluZyB0byBtZXNzYWdlIGhpc3RvcnkgZmlsZTpcIiwgZXJyb3IpO1xuICAgIH1cbn1cblxuLy8gSGFuZGxlIFByaXNtYSBIaWdobGlnaHRpbmcgZm9yIGNvZGUgYmxvY2tzXG5leHBvcnQgZnVuY3Rpb24gcHJpc21IaWdobGlnaHRpbmcobWVzc2FnZUJsb2NrOiB7IHF1ZXJ5U2VsZWN0b3JBbGw6IChhcmcwOiBzdHJpbmcpID0+IGFueTsgfSkge1xuICAgICAgICBsb2FkUHJpc20oKS50aGVuKChQcmlzbSkgPT4ge1xuICAgICAgICBjb25zdCBjb2RlQmxvY2tzID0gbWVzc2FnZUJsb2NrPy5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZUJsb2NrIHByZSBjb2RlJyk7XG5cbiAgICAgICAgY29kZUJsb2Nrcz8uZm9yRWFjaCgoY29kZUJsb2NrOiB7IGNsYXNzTmFtZTogc3RyaW5nOyB0ZXh0Q29udGVudDogYW55OyBpbm5lckhUTUw6IGFueTsgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSBjb2RlQmxvY2suY2xhc3NOYW1lLnJlcGxhY2UoXCJsYW5ndWFnZS1cIiwgXCJcIik7XG4gICAgICAgICAgICBjb25zdCBjb2RlID0gY29kZUJsb2NrLnRleHRDb250ZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobGFuZ3VhZ2UgJiYgUHJpc20ubGFuZ3VhZ2VzW2xhbmd1YWdlXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhpZ2hsaWdodGVkQ29kZSA9IFByaXNtLmhpZ2hsaWdodChjb2RlLCBQcmlzbS5sYW5ndWFnZXNbbGFuZ3VhZ2VdKTtcbiAgICAgICAgICAgICAgICBjb2RlQmxvY2suaW5uZXJIVE1MID0gaGlnaGxpZ2h0ZWRDb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuLy8gQ29weSBidXR0b24gZm9yIGNvZGUgYmxvY2tzXG5leHBvcnQgZnVuY3Rpb24gY29kZUJsb2NrQ29weUJ1dHRvbihtZXNzYWdlQmxvY2s6IHsgcXVlcnlTZWxlY3RvckFsbDogKGFyZzA6IHN0cmluZykgPT4gYW55OyB9KSB7XG4gICAgY29uc3QgY29kZUJsb2NrcyA9IG1lc3NhZ2VCbG9jay5xdWVyeVNlbGVjdG9yQWxsKCcubWVzc2FnZUJsb2NrIHByZSBjb2RlJyk7XG4gICAgY29kZUJsb2Nrcy5mb3JFYWNoKChjb2RlRWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgY29weUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGNvcHlCdXR0b24udGV4dENvbnRlbnQgPSBcImNvcHlcIjtcbiAgICAgICAgc2V0SWNvbihjb3B5QnV0dG9uLCBcImNvcHlcIik7XG4gICAgICAgIGNvcHlCdXR0b24uY2xhc3NMaXN0LmFkZChcImNvcHktYnV0dG9uXCIpO1xuICAgICAgICBjb3B5QnV0dG9uLnRpdGxlID0gXCJjb3B5XCI7XG4gICAgICAgIGlmIChjb2RlRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICBjb2RlRWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjb3B5QnV0dG9uLCBjb2RlRWxlbWVudC5uZXh0U2libGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgY29weUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgbGFuZ3VhZ2UgZnJvbSB0aGUgY2xhc3MgYXR0cmlidXRlXG4gICAgICAgICAgICBjb25zdCBsYW5ndWFnZSA9IGNvZGVFbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKT8ucmVwbGFjZSgnbGFuZ3VhZ2UtJywgJycpIHx8ICcnO1xuICAgICAgICAgICAgLy8gRm9ybWF0IHRoZSBjb2RlIHRleHQgaW4gbWFya2Rvd24gY29kZSBibG9jayBzeW50YXhcbiAgICAgICAgICAgIGNvbnN0IGNvZGVUZXh0ID0gYFxcYFxcYFxcYCR7bGFuZ3VhZ2V9XFxuJHtjb2RlRWxlbWVudC50ZXh0Q29udGVudH1cXGBcXGBcXGBgO1xuICAgICAgICAgICAgaWYgKGNvZGVUZXh0KSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoY29kZVRleHQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDb3BpZWQgY29kZWJsb2NrLicpO1xuICAgICAgICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjb3B5IGNvZGU6IFwiLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNvcHkgY29kZTogXCIsIGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vLyBBZGQgbGluZSBicmVhayBiZXR3ZWVuIGNvbnNlY3V0aXZlIDxwPiBlbGVtZW50c1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFBhcmFncmFwaEJyZWFrcyhtZXNzYWdlQmxvY2s6IHsgcXVlcnlTZWxlY3RvckFsbDogKGFyZzA6IHN0cmluZykgPT4gYW55OyB9KSB7XG4gICAgY29uc3QgcGFyYWdyYXBocyA9IG1lc3NhZ2VCbG9jay5xdWVyeVNlbGVjdG9yQWxsKFwicFwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFncmFwaHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcCA9IHBhcmFncmFwaHNbaV07XG4gICAgICAgIGNvbnN0IG5leHRTaWJsaW5nID0gcC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIGlmIChuZXh0U2libGluZyAmJiBuZXh0U2libGluZy5ub2RlTmFtZSA9PT0gXCJQXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoYnIsIG5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHlNZXNzYWdlVG9DbGlwYm9hcmQobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQobWVzc2FnZSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIGNvcGllZCB0byBjbGlwYm9hcmQnKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjb3B5IG1lc3NhZ2U6ICcsIGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlVc2VyQ29weUJ1dHRvbiAodXNlclA6IEhUTUxQYXJhZ3JhcGhFbGVtZW50KSB7XG4gICAgY29uc3QgY29weUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY29weUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiY29weVwiO1xuICAgIHNldEljb24oY29weUJ1dHRvbiwgXCJjb3B5XCIpO1xuICAgIGNvcHlCdXR0b24uY2xhc3NMaXN0LmFkZChcImNvcHktYnV0dG9uXCIpO1xuICAgIGNvcHlCdXR0b24udGl0bGUgPSBcImNvcHlcIjtcblxuICAgIGNvcHlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZVRleHQgPSB1c2VyUC50ZXh0Q29udGVudDtcblxuICAgICAgICBpZiAobWVzc2FnZVRleHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvcHlNZXNzYWdlVG9DbGlwYm9hcmQobWVzc2FnZVRleHQpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29waWVkIHVzZXIgbWVzc2FnZS4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01lc3NhZ2UgY29udGVudCBpcyBudWxsLiBDYW5ub3QgY29weS4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb3B5QnV0dG9uO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5Qm90Q29weUJ1dHRvbiAobWVzc2FnZU9iajoge3JvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nO30sIHNldHRpbmdzOiBCTU9TZXR0aW5ncykge1xuICAgIGNvbnN0IGNvcHlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGNvcHlCdXR0b24udGV4dENvbnRlbnQgPSBcImNvcHlcIjtcbiAgICBzZXRJY29uKGNvcHlCdXR0b24sIFwiY29weVwiKTtcbiAgICBjb3B5QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjb3B5LWJ1dHRvblwiKTtcbiAgICBjb3B5QnV0dG9uLnRpdGxlID0gXCJjb3B5XCI7XG5cbiAgICBsZXQgbWVzc2FnZVRleHQgPSBtZXNzYWdlT2JqLmNvbnRlbnQ7XG5cbiAgICBpZiAobWVzc2FnZVRleHQgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXMoc2V0dGluZ3MubW9kZWwpKSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsU3RyaW5nID0gbWVzc2FnZU9iai5jb250ZW50O1xuICAgICAgICAgICAgY29uc3QgY2xlYW5TdHJpbmcgPSBmdWxsU3RyaW5nLnNwbGl0KCcgJykuc2xpY2UoMSkuam9pbignICcpLnRyaW0oKTtcbiAgICAgICAgICAgIG1lc3NhZ2VUZXh0ID0gY2xlYW5TdHJpbmc7XG4gICAgICAgIH0gXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTWVzc2FnZSBjb250ZW50IGlzIG51bGwuIENhbm5vdCBjb3B5LicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdNZXNzYWdlIGNvbnRlbnQgaXMgbnVsbC4gQ2Fubm90IGNvcHkuJyk7XG4gICAgfVxuXG4gICAgY29weUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAobWVzc2FnZVRleHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvcHlNZXNzYWdlVG9DbGlwYm9hcmQobWVzc2FnZVRleHQpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29waWVkIGJvdCBtZXNzYWdlLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWVzc2FnZSBjb250ZW50IGlzIG51bGwuIENhbm5vdCBjb3B5LicpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvcHlCdXR0b247XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlUcmFzaCAoKSB7XG4gICAgY29uc3QgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIHRyYXNoQnV0dG9uLnRleHRDb250ZW50ID0gXCJ0cmFzaFwiO1xuICAgIHNldEljb24odHJhc2hCdXR0b24sIFwidHJhc2hcIik7XG4gICAgdHJhc2hCdXR0b24uY2xhc3NMaXN0LmFkZChcInRyYXNoLWJ1dHRvblwiKTtcbiAgICB0cmFzaEJ1dHRvbi50aXRsZSA9IFwidHJhc2hcIjtcblxuICAgIGxldCBsYXN0Q2xpY2tlZEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICAvLyBBZGQgYSBjbGljayBldmVudCBsaXN0ZW5lciB0byB0aGUgZWxsaXBzaXMgc3BhbiB0byB0b2dnbGUgdGhlIGRyb3Bkb3duXG4gICAgdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgbGFzdENsaWNrZWRFbGVtZW50ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIHdoaWxlIChsYXN0Q2xpY2tlZEVsZW1lbnQgJiYgIWxhc3RDbGlja2VkRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXJNZXNzYWdlJykpIHtcbiAgICAgICAgICAgIGxhc3RDbGlja2VkRWxlbWVudCA9IGxhc3RDbGlja2VkRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxhc3RDbGlja2VkRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVzc2FnZUNvbnRhaW5lciAudXNlck1lc3NhZ2UnKSk7XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyTWVzc2FnZXMuaW5kZXhPZihsYXN0Q2xpY2tlZEVsZW1lbnQpICogMjtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoYXBwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBtb2RhbC5jb250ZW50RWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMj5EZWxldGUgTWVzc2FnZSBCbG9jay48L2gyPlxuICAgICAgICAgICAgICAgICAgICA8cD5BcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgbWVzc2FnZSBibG9jaz88L3A+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjb25maXJtRGVsZXRlXCI+Q29uZmlybSBEZWxldGU8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmlybURlbGV0ZUJ1dHRvbiA9IG1vZGFsLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm1EZWxldGVcIik7XG4gICAgICAgICAgICAgICAgY29uZmlybURlbGV0ZUJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlTWVzc2FnZShpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ01lc3NhZ2UgZGVsZXRlZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGlkZUFsbERyb3Bkb3ducygpO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9KTtcbiAgICByZXR1cm4gdHJhc2hCdXR0b247XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVNZXNzYWdlKGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcblxuICAgIGNvbnN0IGRpdkVsZW1lbnRzID0gbWVzc2FnZUNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvckFsbCgnZGl2LmJvdE1lc3NhZ2UsIGRpdi51c2VyTWVzc2FnZScpO1xuXG4gICAgaWYgKGRpdkVsZW1lbnRzICYmIGRpdkVsZW1lbnRzLmxlbmd0aCA+IDAgJiYgaW5kZXggPj0gMCAmJiBpbmRleCA8IGRpdkVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIHNwZWNpZmllZCBtZXNzYWdlIGFuZCB0aGUgbmV4dCBvbmUgaWYgaXQgZXhpc3RzXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXI/LnJlbW92ZUNoaWxkKGRpdkVsZW1lbnRzW2luZGV4XSk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBuZXh0IG1lc3NhZ2UgaXMgZnJvbSB0aGUgYXNzaXN0YW50IGFuZCByZW1vdmUgaXQgaWYgaXQgaXNcbiAgICAgICAgaWYgKGluZGV4ICsgMSA8IGRpdkVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgbmV4dE1lc3NhZ2UgPSBkaXZFbGVtZW50c1tpbmRleCArIDFdO1xuICAgICAgICAgICAgaWYgKG5leHRNZXNzYWdlLmNsYXNzTGlzdC5jb250YWlucygnYm90TWVzc2FnZScpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lcj8ucmVtb3ZlQ2hpbGQobmV4dE1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlSGlzdG9yeSBieSByZW1vdmluZyB0aGUgc3BlY2lmaWVkIGluZGV4IGFuZCBwb3RlbnRpYWxseSB0aGUgbmV4dCBvbmVcbiAgICBpZiAobWVzc2FnZUhpc3RvcnlbaW5kZXggKyAxXSAmJiBtZXNzYWdlSGlzdG9yeVtpbmRleCArIDFdLnJvbGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgbWVzc2FnZUhpc3Rvcnkuc3BsaWNlKGluZGV4LCAyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBtZXNzYWdlSGlzdG9yeS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBqc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkobWVzc2FnZUhpc3RvcnksIG51bGwsIDQpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04sIGpzb25TdHJpbmcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdyaXRpbmcgbWVzc2FnZUhpc3RvcnkuanNvbicsIGVycm9yKTtcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVNZXNzYWdlVGhyZWFkKGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgXG4gICAgY29uc3QgZGl2RWxlbWVudHMgPSBtZXNzYWdlQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yQWxsKCdkaXYuYm90TWVzc2FnZSwgZGl2LnVzZXJNZXNzYWdlJyk7XG4gIFxuICAgIGlmIChkaXZFbGVtZW50cyAmJiBkaXZFbGVtZW50cy5sZW5ndGggPiAwICYmIGluZGV4ID49IDAgJiYgaW5kZXggPCBkaXZFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IGRpdkVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1lc3NhZ2VDb250YWluZXI/LnJlbW92ZUNoaWxkKGRpdkVsZW1lbnRzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtZXNzYWdlSGlzdG9yeS5zcGxpY2UoaW5kZXgpO1xuICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlSGlzdG9yeSwgbnVsbCwgNCk7XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTiwganNvblN0cmluZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd3JpdGluZyBtZXNzYWdlSGlzdG9yeS5qc29uJywgZXJyb3IpO1xuICAgIH1cbn1cblxuXG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBDb2xvckNvbXBvbmVudCwgcmVxdWVzdFVybCwgRHJvcGRvd25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9tYWluJztcbmltcG9ydCBCTU9HUFQgZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IEFOVEhST1BJQ19NT0RFTFMsIE9QRU5BSV9NT0RFTFMgfSBmcm9tICcuL3ZpZXcnO1xuXG5leHBvcnQgY2xhc3MgQk1PU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEJNT0dQVDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBCTU9HUFQpIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRhc3luYyBkaXNwbGF5KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMuZmV0Y2hEYXRhKCk7XG5cblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDEnLCB7dGV4dDogJ0JNTyBDaGF0Ym90IFNldHRpbmdzJ30pO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSBlbGVtZW50XG5cdFx0Y29uc3QgY2hhbmdlTG9nTGluayA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiYVwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNoYW5nZWxvZ1wiLFxuXHRcdFx0aHJlZjogXCJodHRwczovL2dpdGh1Yi5jb20vbG9uZ3kyay9vYnNpZGlhbi1ibW8tY2hhdGJvdC9yZWxlYXNlc1wiLFxuXHRcdH0pO1xuXG5cdFx0Ly8gU2V0IHRoZSBzdHlsZSBzZXBhcmF0ZWx5XG5cdFx0Y2hhbmdlTG9nTGluay5zdHlsZS5mb250U2l6ZSA9IFwiMC44cmVtXCI7ICAvLyBBZGp1c3QgdGhlIGZvbnQgc2l6ZSBhcyBuZWVkZWRcblxuXG5cdFx0Y29uc3QgdXNhZ2VUZXh0ID0gY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2hlY2sgdXNhZ2U6IFwiLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3Qgc3RhdHVzVGV4dCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNoZWNrIHN0YXR1czogXCIsXG5cdFx0fSk7XG5cdFx0XG5cdFx0Y29uc3QgdXNhZ2VMaW5rID0gY29udGFpbmVyRWwuY3JlYXRlRWwoXCJhXCIsIHtcblx0XHRcdFx0dGV4dDogXCJodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vYWNjb3VudC91c2FnZVwiLFxuXHRcdFx0XHRocmVmOiBcImh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9hY2NvdW50L3VzYWdlXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBzdGF0dXNMaW5rID0gY29udGFpbmVyRWwuY3JlYXRlRWwoXCJhXCIsIHtcblx0XHRcdHRleHQ6IFwiaHR0cHM6Ly9zdGF0dXMub3BlbmFpLmNvbS9cIixcblx0XHRcdGhyZWY6IFwiaHR0cHM6Ly9zdGF0dXMub3BlbmFpLmNvbS9cIixcblx0XHR9KTtcblxuXHRcdHVzYWdlVGV4dC5hcHBlbmRDaGlsZCh1c2FnZUxpbmspO1xuXHRcdHN0YXR1c1RleHQuYXBwZW5kQ2hpbGQoc3RhdHVzTGluayk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHt0ZXh0OiAnVHlwZSBgL2hlbHBgIGluIGNoYXQgZm9yIGNvbW1hbmRzLid9KTtcblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09IEdFTkVSQUwgPT09PT09PT09PT09PT09PT09PT09PT1cblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnR2VuZXJhbCd9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0FQSSBLZXknKVxuXHRcdFx0LnNldERlc2MoJ0luc2VydCBBUEkgS2V5IGZyb20gT3BlbkFJIG9yIEFudGhyb3BpYy4gWW91IG1heSBuZWVkIHRvIHJlZnJlc2ggdGhlIHRhYiBhZnRlciBpbnNlcnRpbmcuJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ2luc2VydC1hcGkta2V5Jylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA/IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleS5zbGljZSgwLCA2KX0tLi4uJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkuc2xpY2UoLTQpfWAgOiBcIlwiKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdC8vIEZ1bmN0aW9uIHRvIGFkZCBvcHRpb25zIHRvIGRyb3Bkb3duXG5cdFx0Y29uc3QgYWRkT3B0aW9uc1RvRHJvcGRvd24gPSAoZHJvcGRvd246IERyb3Bkb3duQ29tcG9uZW50LCBtb2RlbHM6IGFueVtdKSA9PiB7XG5cdFx0XHRtb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XG5cdFx0XHRkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcblx0XHRcdH0pO1xuXHRcdH07XG4gIFxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnTW9kZWwnKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBhIG1vZGVsLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuXG5cdFx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5IHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkuc3RhcnRzV2l0aChcInNrLWFudFwiKSkge1xuXHRcdFx0XHRcdGFkZE9wdGlvbnNUb0Ryb3Bkb3duKGRyb3Bkb3duLCBPUEVOQUlfTU9ERUxTKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5ICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleS5zdGFydHNXaXRoKFwic2stYW50XCIpKSB7XG5cdFx0XHRcdFx0YWRkT3B0aW9uc1RvRHJvcGRvd24oZHJvcGRvd24sIEFOVEhST1BJQ19NT0RFTFMpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXN0QVBJVXJsICYmIG1vZGVscyAmJiBtb2RlbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdG1vZGVscy5mb3JFYWNoKChtb2RlbDogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsIHx8IERFRkFVTFRfU0VUVElOR1MubW9kZWwpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdGNvbnN0IG1vZGVsTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RlbE5hbWUnKSBhcyBIVE1MSGVhZGluZ0VsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKG1vZGVsTmFtZSkge1xuXHRcdFx0XHRcdFx0bW9kZWxOYW1lLnRleHRDb250ZW50ID0gJ01vZGVsOiAnICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWwudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0fSk7XG5cdFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdC5zZXROYW1lKCdTeXN0ZW0nKVxuXHRcdC5zZXREZXNjKCdTeXN0ZW0gcm9sZSBwcm9tcHQuJylcblx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG5cdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nKVxuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbV9yb2xlICE9PSB1bmRlZmluZWQgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1fcm9sZSA6IFwiWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHdobyByZXNwb25kcyBpbiBtYXJrZG93bi5cIilcblx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtX3JvbGUgPSB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBERUZBVUxUX1NFVFRJTkdTLnN5c3RlbV9yb2xlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ01heCBUb2tlbnMnKVxuXHRcdFx0LnNldERlc2MoZGVzY0xpbmsoJ1RoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMsIG9yIHdvcmRzLCB0aGF0IHRoZSBtb2RlbCBpcyBhbGxvd2VkIHRvIGdlbmVyYXRlIGluIGl0cyBvdXRwdXQuJywgJ2h0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS90b2tlbml6ZXInKSlcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJzQwOTYnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4X3Rva2Vucylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1heF90b2tlbnMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ1RlbXBlcmF0dXJlJylcblx0XHQuc2V0RGVzYygnVGVtcGVyYXR1cmUgY29udHJvbHMgaG93IHJhbmRvbSB0aGUgZ2VuZXJhdGVkIG91dHB1dCBpcy4gTG93ZXIgdmFsdWVzIG1ha2UgdGhlIHRleHQgbW9yZSBwcmVkaWN0YWJsZSwgd2hpbGUgaGlnaGVyIHZhbHVlcyBtYWtlIGl0IG1vcmUgY3JlYXRpdmUgYW5kIHVucHJlZGljdGFibGUuJylcblx0XHQuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcblx0XHRcdC5zZXRMaW1pdHMoMCwgMSwgMC4wNSlcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSAhPT0gdW5kZWZpbmVkID8gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUgOiBERUZBVUxUX1NFVFRJTkdTLnRlbXBlcmF0dXJlKVxuXHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcblx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUgPSB2YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRmdW5jdGlvbiBkZXNjTGluayh0ZXh0OiBzdHJpbmcsIGxpbms6IHN0cmluZyk6IERvY3VtZW50RnJhZ21lbnQge1xuXHRcdFx0XHRjb25zdCBmcmFnID0gbmV3IERvY3VtZW50RnJhZ21lbnQoKTtcblx0XHRcdFx0Y29uc3QgZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblx0XHRcdFx0ZGVzYy5pbm5lclRleHQgPSB0ZXh0ICsgJyAnO1xuXHRcdFx0XHRmcmFnLmFwcGVuZENoaWxkKGRlc2MpO1xuXG5cdFx0XHRcdGNvbnN0IGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblx0XHRcdFx0YW5jaG9yLmhyZWYgPSBsaW5rO1xuXHRcdFx0XHRhbmNob3IudGFyZ2V0ID0gJ19ibGFuayc7XG5cdFx0XHRcdGFuY2hvci5yZWwgPSAnbm9vcGVuZXIgbm9yZWZlcnJlcic7XG5cdFx0XHRcdGFuY2hvci5pbm5lclRleHQgPSAnKGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS90b2tlbml6ZXIpJztcblx0XHRcdFx0ZnJhZy5hcHBlbmRDaGlsZChhbmNob3IpO1xuXG5cdFx0XHRcdHJldHVybiBmcmFnO1xuXHRcdH1cblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdC5zZXROYW1lKCdBbGxvdyBSZWZlcmVuY2UgQ3VycmVudCBOb3RlJylcblx0XHQuc2V0RGVzYygnQWxsb3cgY2hhdGJvdCB0byByZWZlcmVuY2UgY3VycmVudCBhY3RpdmUgbm90ZSBkdXJpbmcgY29udmVyc2F0aW9uLicpXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUgPSB2YWx1ZTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0Y29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZmVyZW5jZUN1cnJlbnROb3RlJyk7XG5cdFx0XHRcdGlmIChyZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQpIHtcblx0XHRcdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0XHRcdHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PSBBUFBFQVJBTkNFID09PT09PT09PT09PT09PT09PT09PT09XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ0FwcGVhcmFuY2UnfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoJ1VzZXIgTmFtZScpXG4gICAgICAgIC5zZXREZXNjKCdDcmVhdGUgYSB1c2VybmFtZS4nKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdXNlciBuYW1lJylcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VyTmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLnVzZXJOYW1lKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VyTmFtZSA9IHZhbHVlID8gdmFsdWUudG9VcHBlckNhc2UoKSA6IERFRkFVTFRfU0VUVElOR1MudXNlck5hbWU7XG5cdFx0XHRcdHRleHQuaW5wdXRFbC5tYXhMZW5ndGggPSAzMDtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdGNvbnN0IHVzZXJOYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51c2VyTmFtZScpIGFzIE5vZGVMaXN0T2Y8SFRNTEhlYWRpbmdFbGVtZW50Pjtcblx0XHRcdFx0dXNlck5hbWVzLmZvckVhY2godXNlck5hbWUgPT4ge1xuXHRcdFx0XHRcdHVzZXJOYW1lLnRleHRDb250ZW50ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlck5hbWU7XG5cdFx0XHRcdH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnQ2hhdGJvdCBOYW1lJylcbiAgICAgICAgLnNldERlc2MoJ05hbWUgeW91ciBjaGF0Ym90LicpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciBjaGF0Ym90IG5hbWUnKVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRib3ROYW1lIHx8IERFRkFVTFRfU0VUVElOR1MuY2hhdGJvdE5hbWUpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRib3ROYW1lID0gdmFsdWUgPyB2YWx1ZS50b1VwcGVyQ2FzZSgpIDogREVGQVVMVF9TRVRUSU5HUy5jaGF0Ym90TmFtZTtcblx0XHRcdFx0dGV4dC5pbnB1dEVsLm1heExlbmd0aCA9IDMwO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0Y29uc3QgY2hhdGJvdE5hbWVIZWFkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXRib3ROYW1lSGVhZGluZycpIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcblx0XHRcdFx0Y29uc3QgY2hhdGJvdE5hbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXRib3ROYW1lJykgYXMgTm9kZUxpc3RPZjxIVE1MSGVhZGluZ0VsZW1lbnQ+O1xuXHRcdFx0XHRpZiAoY2hhdGJvdE5hbWVIZWFkaW5nKSB7XG5cdFx0XHRcdFx0Y2hhdGJvdE5hbWVIZWFkaW5nLnRleHRDb250ZW50ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdGJvdE5hbWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2hhdGJvdE5hbWVzLmZvckVhY2goY2hhdGJvdE5hbWUgPT4ge1xuXHRcdFx0XHRcdGNoYXRib3ROYW1lLnRleHRDb250ZW50ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdGJvdE5hbWU7XG5cdFx0XHRcdH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcdFx0XG5cblx0XHRsZXQgY29sb3JQaWNrZXIxOiBDb2xvckNvbXBvbmVudDtcblx0XHRjb25zdCBkZWZhdWx0VXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy51c2VyTWVzc2FnZUJhY2tncm91bmRDb2xvcikudHJpbSgpO1xuXHRcdFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0JhY2tncm91bmQgY29sb3IgZm9yIFVzZXIgTWVzc2FnZXMnKVxuXHRcdFx0LnNldERlc2MoJ01vZGlmeSB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgdXNlck1lc3NhZ2UgZWxlbWVudC4nKVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG5cdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiUmVzdG9yZSBEZWZhdWx0XCIpXG5cdFx0XHRcdC5zZXRJY29uKFwicm90YXRlLWN3XCIpXG5cdFx0XHRcdC5zZXRDbGFzcyhcImNsaWNrYWJsZS1pY29uXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBkZWZhdWx0VmFsdWUgPSBjb2xvclRvSGV4KGRlZmF1bHRVc2VyTWVzc2FnZUJhY2tncm91bmRDb2xvcik7XG5cdFx0XHRcdFx0Y29sb3JQaWNrZXIxLnNldFZhbHVlKGRlZmF1bHRWYWx1ZSk7XG5cdFx0XG5cdFx0XHRcdFx0Y29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG5cdFx0XHRcdFx0aWYgKG1lc3NhZ2VDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHVzZXJNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnVzZXJNZXNzYWdlJyk7XG5cdFx0XHRcdFx0XHR1c2VyTWVzc2FnZXMuZm9yRWFjaCgodXNlck1lc3NhZ2UpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZWxlbWVudCA9IHVzZXJNZXNzYWdlIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGRlZmF1bHRWYWx1ZTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0LmFkZENvbG9yUGlja2VyKChjb2xvcikgPT4ge1xuXHRcdFx0XHRjb2xvclBpY2tlcjEgPSBjb2xvcjtcblxuXHRcdFx0XHRsZXQgZGVmYXVsdFZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3I7XG5cblx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yID09IFwiLS1iYWNrZ3JvdW5kLXByaW1hcnlcIikge1xuXHRcdFx0XHRcdGRlZmF1bHRWYWx1ZSA9IGNvbG9yVG9IZXgoZGVmYXVsdFVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbG9yLnNldFZhbHVlKGRlZmF1bHRWYWx1ZSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGhleFZhbHVlID0gY29sb3JUb0hleCh2YWx1ZSk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgPSBoZXhWYWx1ZTtcblx0XHRcdFx0XHRjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcblx0XHRcdFx0XHRpZiAobWVzc2FnZUNvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0Y29uc3QgdXNlck1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudXNlck1lc3NhZ2UnKTtcblx0XHRcdFx0XHRcdHVzZXJNZXNzYWdlcy5mb3JFYWNoKCh1c2VyTWVzc2FnZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBlbGVtZW50ID0gdXNlck1lc3NhZ2UgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGV4VmFsdWU7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcdFx0XG5cdFx0XHRcblx0XHRsZXQgY29sb3JQaWNrZXIyOiBDb2xvckNvbXBvbmVudDtcblx0XHRjb25zdCBkZWZhdWx0Qm90TWVzc2FnZUJhY2tncm91bmRDb2xvciA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShERUZBVUxUX1NFVFRJTkdTLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IpLnRyaW0oKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0JhY2tncm91bmQgY29sb3IgZm9yIEJvdCBNZXNzYWdlcycpXG5cdFx0XHQuc2V0RGVzYygnTW9kaWZ5IHRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBib3RNZXNzYWdlIGVsZW1lbnQuJylcblx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuXHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIlJlc3RvcmUgRGVmYXVsdFwiKVxuXHRcdFx0XHQuc2V0SWNvbihcInJvdGF0ZS1jd1wiKVxuXHRcdFx0XHQuc2V0Q2xhc3MoXCJjbGlja2FibGUtaWNvblwiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZGVmYXVsdFZhbHVlID0gY29sb3JUb0hleChkZWZhdWx0Qm90TWVzc2FnZUJhY2tncm91bmRDb2xvcik7XG5cdFx0XHRcdFx0Y29sb3JQaWNrZXIyLnNldFZhbHVlKGRlZmF1bHRWYWx1ZSk7XG5cdFx0XG5cdFx0XHRcdFx0Y29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG5cdFx0XHRcdFx0aWYgKG1lc3NhZ2VDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYm90TWVzc2FnZScpO1xuXHRcdFx0XHRcdFx0Ym90TWVzc2FnZXMuZm9yRWFjaCgoYm90TWVzc2FnZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBlbGVtZW50ID0gYm90TWVzc2FnZSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdFx0ZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0VmFsdWU7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3IpID0+IHtcblx0XHRcdFx0Y29sb3JQaWNrZXIyID0gY29sb3I7XG5cblx0XHRcdFx0bGV0IGRlZmF1bHRWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3I7XG5cblx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgPT0gXCItLWJhY2tncm91bmQtc2Vjb25kYXJ5XCIpIHtcblx0XHRcdFx0XHRkZWZhdWx0VmFsdWUgPSBjb2xvclRvSGV4KGRlZmF1bHRCb3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbG9yLnNldFZhbHVlKGRlZmF1bHRWYWx1ZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBoZXhWYWx1ZSA9IGNvbG9yVG9IZXgodmFsdWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciA9IGhleFZhbHVlO1xuXHRcdFx0XHRcdFx0Y29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG5cdFx0XHRcdFx0XHRpZiAobWVzc2FnZUNvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBib3RNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmJvdE1lc3NhZ2UnKTtcblx0XHRcdFx0XHRcdFx0Ym90TWVzc2FnZXMuZm9yRWFjaCgoYm90TWVzc2FnZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSBib3RNZXNzYWdlIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRcdGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGV4VmFsdWU7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdH0pO1xuXHRcdH0pOyBcdFxuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT0gQ0hBVCBISVNUT1JZID09PT09PT09PT09PT09PT09PT1cblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnQ2hhdCBIaXN0b3J5J30pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBGb2xkZXIgUGF0aCcpXG5cdFx0LnNldERlc2MoJ1NhdmUgeW91ciBjaGF0IGhpc3RvcnkgaW4gYSBzcGVjaWZpZWQgZm9sZGVyLicpXG5cdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0JNTy8nKVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRIaXN0b3J5UGF0aCB8fCBERUZBVUxUX1NFVFRJTkdTLmNoYXRIaXN0b3J5UGF0aClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlQYXRoID0gdmFsdWUgPyB2YWx1ZSA6IERFRkFVTFRfU0VUVElOR1MuY2hhdEhpc3RvcnlQYXRoO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHQuc2V0TmFtZSgnVGVtcGxhdGUgRmlsZSBQYXRoJylcblx0XHQuc2V0RGVzYygnSW5zZXJ0IHlvdXIgdGVtcGxhdGUgZmlsZSBwYXRoLicpXG5cdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3RlbXBsYXRlcy9ibW8ubWQnKVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlRmlsZVBhdGggfHwgREVGQVVMVF9TRVRUSU5HUy50ZW1wbGF0ZUZpbGVQYXRoKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUZpbGVQYXRoID0gdmFsdWUgPyB2YWx1ZSA6IERFRkFVTFRfU0VUVElOR1MudGVtcGxhdGVGaWxlUGF0aDtcblx0XHRcdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIHByb3ZpZGVkIGZpbGUgcGF0aCBlbmRzIHdpdGggJy5tZCcsIGlmIG5vdCwgYXBwZW5kIGl0XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUZpbGVQYXRoLmVuZHNXaXRoKCcubWQnKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVGaWxlUGF0aCArPSAnLm1kJztcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcblx0XHRcdFx0XHRjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpOyAvLyBSZXRyaWV2ZSBhbGwgZmlsZXMgZnJvbSB0aGUgdmF1bHRcblx0XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIHNwZWNpZmllZCBmaWxlIHBhdGggKGluY2x1ZGluZyBkaXJlY3RvcmllcykgZXhpc3RzIGluIHRoZSBhcnJheSBvZiBmaWxlc1xuXHRcdFx0XHRcdGNvbnN0IGZpbGVFeGlzdHMgPSBhbGxGaWxlcy5zb21lKGZpbGUgPT4gXG5cdFx0XHRcdFx0XHRmaWxlLnBhdGgudG9Mb3dlckNhc2UoKSA9PT0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVGaWxlUGF0aC50b0xvd2VyQ2FzZSgpKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChmaWxlRXhpc3RzKSB7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIkZpbGUgZXhpc3RzIGluIHZhdWx0IVwiKTtcblx0XHRcdFx0XHRcdHRleHQuaW5wdXRFbC5zdHlsZS5ib3JkZXJDb2xvciA9IFwiXCI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiRmlsZSBkb2VzIG5vdCBleGlzdCBpbiB2YXVsdC5cIik7XG5cdFx0XHRcdFx0XHR0ZXh0LmlucHV0RWwuc3R5bGUuYm9yZGVyQ29sb3IgPSBcInJlZFwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBJZiB0aGUgaW5wdXQgaXMgZW1wdHksIHJlc2V0IHRoZSBib3JkZXIgY29sb3Jcblx0XHRcdFx0XHR0ZXh0LmlucHV0RWwuc3R5bGUuYm9yZGVyQ29sb3IgPSBcIlwiO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlRmlsZVBhdGggPSBERUZBVUxUX1NFVFRJTkdTLnRlbXBsYXRlRmlsZVBhdGg7XG5cdFx0XHRcdH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHQuc2V0TmFtZSgnQWxsb3cgUmVuYW1lIE5vdGUgVGl0bGUnKVxuXHRcdC5zZXREZXNjKCdBbGxvdyBtb2RlbCB0byByZW5hbWUgdGhlIG5vdGUgdGl0bGUgd2hlbiBzYXZpbmcgY2hhdCBoaXN0b3J5LicpXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFsbG93UmVuYW1lTm90ZVRpdGxlKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYWxsb3dSZW5hbWVOb3RlVGl0bGUgPSB2YWx1ZTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0XHRcdFxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09IEFEVkFOQ0VEID09PT09PT09PT09PT09PT09PT09PT09XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ0FkdmFuY2VkJ30pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ09QRU5BSSBCQVNFIFVSTCcpXG5cdFx0LnNldERlc2MoJ0VudGVyIHlvdXIgY3VzdG9tIE9wZW5BSSBiYXNlIHVybC4nKVxuXHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuXHRcdFx0LnNldEJ1dHRvblRleHQoXCJSZXN0b3JlIERlZmF1bHRcIilcblx0XHRcdC5zZXRJY29uKFwicm90YXRlLWN3XCIpXG5cdFx0XHQuc2V0Q2xhc3MoXCJjbGlja2FibGUtaWNvblwiKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuQUlCYXNlVXJsID0gREVGQVVMVF9TRVRUSU5HUy5vcGVuQUlCYXNlVXJsO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHR9KVxuXHRcdClcblx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdC5zZXRQbGFjZWhvbGRlcignaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MScpXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbkFJQmFzZVVybCB8fCBERUZBVUxUX1NFVFRJTkdTLm9wZW5BSUJhc2VVcmwpXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbkFJQmFzZVVybCA9IHZhbHVlID8gdmFsdWUgOiBERUZBVUxUX1NFVFRJTkdTLm9wZW5BSUJhc2VVcmw7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdC5zZXROYW1lKCdSRVNUIEFQSSBVUkwnKVxuXHRcdC5zZXREZXNjKGRlc2NMaW5rMSgnRW50ZXIgeW91ciBSRVNUIEFQSSBVUkwgdXNpbmcnLCAnaHR0cHM6Ly9naXRodWIuY29tL2dvLXNreW5ldC9Mb2NhbEFJJywgJycpKVxuXHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0LnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjgwODAnKVxuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc3RBUElVcmwgfHwgREVGQVVMVF9TRVRUSU5HUy5yZXN0QVBJVXJsKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc3RBUElVcmwgPSB2YWx1ZSA/IHZhbHVlIDogREVGQVVMVF9TRVRUSU5HUy5yZXN0QVBJVXJsO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRmdW5jdGlvbiBkZXNjTGluazEodGV4dDogc3RyaW5nLCBsaW5rOiBzdHJpbmcsIGV4dHJhV29yZHM6IHN0cmluZyk6IERvY3VtZW50RnJhZ21lbnQge1xuXHRcdFx0Y29uc3QgZnJhZyA9IG5ldyBEb2N1bWVudEZyYWdtZW50KCk7XG5cdFx0XHRjb25zdCBkZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHRcdFx0ZGVzYy5pbm5lclRleHQgPSB0ZXh0ICsgJyAnO1xuXHRcdFx0ZnJhZy5hcHBlbmRDaGlsZChkZXNjKTtcblx0XHRcblx0XHRcdGNvbnN0IGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblx0XHRcdGFuY2hvci5ocmVmID0gbGluaztcblx0XHRcdGFuY2hvci50YXJnZXQgPSAnX2JsYW5rJztcblx0XHRcdGFuY2hvci5yZWwgPSAnbm9vcGVuZXIgbm9yZWZlcnJlcic7XG5cdFx0XHRhbmNob3IuaW5uZXJUZXh0ID0gJ0xvY2FsQUknO1xuXHRcdFx0ZnJhZy5hcHBlbmRDaGlsZChhbmNob3IpO1xuXHRcdFxuXHRcdFx0Y29uc3QgZXh0cmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0XHRleHRyYS5pbm5lclRleHQgPSAnICcgKyBleHRyYVdvcmRzO1xuXHRcdFx0ZnJhZy5hcHBlbmRDaGlsZChleHRyYSk7XG5cdFx0XG5cdFx0XHRyZXR1cm4gZnJhZztcblx0XHR9XG5cdH1cblxuXHRhc3luYyBmZXRjaERhdGEoKSB7XG5cdFx0Y29uc3QgcmVzdEFQSVVybCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc3RBUElVcmw7XG5cblx0XHRpZiAoIXJlc3RBUElVcmwpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IHVybCA9IHJlc3RBUElVcmwgKyAnL3YxL21vZGVscyc7XG5cdFxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblx0XG5cdFx0XHRjb25zdCBqc29uRGF0YSA9IHJlc3BvbnNlLmpzb247XG5cdFxuXHRcdFx0Y29uc3QgbW9kZWxzID0ganNvbkRhdGEuZGF0YS5tYXAoKG1vZGVsOiB7IGlkOiBhbnk7IH0pID0+IG1vZGVsLmlkKTtcblxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxzID0gbW9kZWxzOyAgXG5cdFxuXHRcdFx0cmV0dXJuIG1vZGVscztcblx0XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbG9yVG9IZXgoY29sb3JWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoY29sb3JWYWx1ZS5zdGFydHNXaXRoKFwiaHNsXCIpKSB7XG4gICAgICAvLyBDb252ZXJ0IEhTTCB0byBIRVhcbiAgICAgIGNvbnN0IG1hdGNoID0gY29sb3JWYWx1ZS5tYXRjaCgvKFxcZCsoXFwuXFxkKyk/KSU/L2cpO1xuICAgICAgaWYgKG1hdGNoID09PSBudWxsIHx8IG1hdGNoLmxlbmd0aCA8IDMpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEhTTCB2YWx1ZVwiKTtcblx0fVxuXG4gICAgICBjb25zdCBoID0gcGFyc2VJbnQobWF0Y2hbMF0pIC8gMzYwO1xuICAgICAgY29uc3QgcyA9IHBhcnNlSW50KG1hdGNoWzFdKSAvIDEwMDtcbiAgICAgIGNvbnN0IGwgPSBwYXJzZUludChtYXRjaFsyXSkgLyAxMDA7XG4gIFxuICAgICAgY29uc3QgcSA9IGwgPCAwLjUgPyBsICogKDEgKyBzKSA6IGwgKyBzIC0gbCAqIHM7XG4gICAgICBjb25zdCBwID0gMiAqIGwgLSBxO1xuICAgICAgY29uc3QgciA9IGh1ZTJyZ2IocCwgcSwgaCArIDEgLyAzKTtcbiAgICAgIGNvbnN0IGcgPSBodWUycmdiKHAsIHEsIGgpO1xuICAgICAgY29uc3QgYiA9IGh1ZTJyZ2IocCwgcSwgaCAtIDEgLyAzKTtcbiAgXG4gICAgICBjb25zdCB0b0hleCA9IGZ1bmN0aW9uIChjOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgaGV4ID0gTWF0aC5yb3VuZChjICogMjU1KS50b1N0cmluZygxNik7XG4gICAgICAgIHJldHVybiBoZXgubGVuZ3RoID09PSAxID8gXCIwXCIgKyBoZXggOiBoZXg7XG4gICAgICB9O1xuICBcbiAgICAgIGNvbnN0IGhleCA9IFwiI1wiICsgdG9IZXgocikgKyB0b0hleChnKSArIHRvSGV4KGIpO1xuICAgICAgcmV0dXJuIGhleDtcbiAgICB9IGVsc2UgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcInJnYlwiKSkge1xuICAgICAgLy8gQ29udmVydCBSR0IgdG8gSEVYXG4gICAgICBjb25zdCBzZXAgPSBjb2xvclZhbHVlLmluZGV4T2YoXCIsXCIpID4gLTEgPyBcIixcIiA6IFwiIFwiO1xuICAgICAgY29uc3QgcmdiQXJyYXkgPSBjb2xvclZhbHVlLnN1YnN0cig0KS5zcGxpdChcIilcIilbMF0uc3BsaXQoc2VwKTtcbiAgXG4gICAgICBsZXQgciA9ICgrcmdiQXJyYXlbMF0pLnRvU3RyaW5nKDE2KSxcbiAgICAgICAgZyA9ICgrcmdiQXJyYXlbMV0pLnRvU3RyaW5nKDE2KSxcbiAgICAgICAgYiA9ICgrcmdiQXJyYXlbMl0pLnRvU3RyaW5nKDE2KTtcbiAgXG4gICAgICBpZiAoci5sZW5ndGggPT0gMSlcbiAgICAgICAgciA9IFwiMFwiICsgcjtcbiAgICAgIGlmIChnLmxlbmd0aCA9PSAxKVxuICAgICAgICBnID0gXCIwXCIgKyBnO1xuICAgICAgaWYgKGIubGVuZ3RoID09IDEpXG4gICAgICAgIGIgPSBcIjBcIiArIGI7XG4gIFxuICAgICAgcmV0dXJuIFwiI1wiICsgciArIGcgKyBiO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB0aGUgY29sb3JWYWx1ZSBpcyBuZWl0aGVyIFJHQiBub3IgSFNMLCByZXR1cm4gdGhlIGlucHV0XG4gICAgICByZXR1cm4gY29sb3JWYWx1ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGh1ZTJyZ2IocDogbnVtYmVyLCBxOiBudW1iZXIsIHQ6IG51bWJlcikge1xuXHRpZiAodCA8IDApIHQgKz0gMTtcblx0aWYgKHQgPiAxKSB0IC09IDE7XG5cdGlmICh0IDwgMSAvIDYpIHJldHVybiBwICsgKHEgLSBwKSAqIDYgKiB0O1xuXHRpZiAodCA8IDEgLyAyKSByZXR1cm4gcTtcblx0aWYgKHQgPCAyIC8gMykgcmV0dXJuIHAgKyAocSAtIHApICogKDIgLyAzIC0gdCkgKiA2O1xuXHRyZXR1cm4gcDtcbn0iLCAiLyoqXG4gKiBtYXJrZWQgdjQuMy4wIC0gYSBtYXJrZG93biBwYXJzZXJcbiAqIENvcHlyaWdodCAoYykgMjAxMS0yMDIzLCBDaHJpc3RvcGhlciBKZWZmcmV5LiAoTUlUIExpY2Vuc2VkKVxuICogaHR0cHM6Ly9naXRodWIuY29tL21hcmtlZGpzL21hcmtlZFxuICovXG5cbi8qKlxuICogRE8gTk9UIEVESVQgVEhJUyBGSUxFXG4gKiBUaGUgY29kZSBpbiB0aGlzIGZpbGUgaXMgZ2VuZXJhdGVkIGZyb20gZmlsZXMgaW4gLi9zcmMvXG4gKi9cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKSB7XG4gIHJldHVybiB7XG4gICAgYXN5bmM6IGZhbHNlLFxuICAgIGJhc2VVcmw6IG51bGwsXG4gICAgYnJlYWtzOiBmYWxzZSxcbiAgICBleHRlbnNpb25zOiBudWxsLFxuICAgIGdmbTogdHJ1ZSxcbiAgICBoZWFkZXJJZHM6IHRydWUsXG4gICAgaGVhZGVyUHJlZml4OiAnJyxcbiAgICBoaWdobGlnaHQ6IG51bGwsXG4gICAgaG9va3M6IG51bGwsXG4gICAgbGFuZ1ByZWZpeDogJ2xhbmd1YWdlLScsXG4gICAgbWFuZ2xlOiB0cnVlLFxuICAgIHBlZGFudGljOiBmYWxzZSxcbiAgICByZW5kZXJlcjogbnVsbCxcbiAgICBzYW5pdGl6ZTogZmFsc2UsXG4gICAgc2FuaXRpemVyOiBudWxsLFxuICAgIHNpbGVudDogZmFsc2UsXG4gICAgc21hcnR5cGFudHM6IGZhbHNlLFxuICAgIHRva2VuaXplcjogbnVsbCxcbiAgICB3YWxrVG9rZW5zOiBudWxsLFxuICAgIHhodG1sOiBmYWxzZVxuICB9O1xufVxuXG5sZXQgZGVmYXVsdHMgPSBnZXREZWZhdWx0cygpO1xuXG5mdW5jdGlvbiBjaGFuZ2VEZWZhdWx0cyhuZXdEZWZhdWx0cykge1xuICBkZWZhdWx0cyA9IG5ld0RlZmF1bHRzO1xufVxuXG4vKipcbiAqIEhlbHBlcnNcbiAqL1xuY29uc3QgZXNjYXBlVGVzdCA9IC9bJjw+XCInXS87XG5jb25zdCBlc2NhcGVSZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVUZXN0LnNvdXJjZSwgJ2cnKTtcbmNvbnN0IGVzY2FwZVRlc3ROb0VuY29kZSA9IC9bPD5cIiddfCYoPyEoI1xcZHsxLDd9fCNbWHhdW2EtZkEtRjAtOV17MSw2fXxcXHcrKTspLztcbmNvbnN0IGVzY2FwZVJlcGxhY2VOb0VuY29kZSA9IG5ldyBSZWdFeHAoZXNjYXBlVGVzdE5vRW5jb2RlLnNvdXJjZSwgJ2cnKTtcbmNvbnN0IGVzY2FwZVJlcGxhY2VtZW50cyA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjMzk7J1xufTtcbmNvbnN0IGdldEVzY2FwZVJlcGxhY2VtZW50ID0gKGNoKSA9PiBlc2NhcGVSZXBsYWNlbWVudHNbY2hdO1xuZnVuY3Rpb24gZXNjYXBlKGh0bWwsIGVuY29kZSkge1xuICBpZiAoZW5jb2RlKSB7XG4gICAgaWYgKGVzY2FwZVRlc3QudGVzdChodG1sKSkge1xuICAgICAgcmV0dXJuIGh0bWwucmVwbGFjZShlc2NhcGVSZXBsYWNlLCBnZXRFc2NhcGVSZXBsYWNlbWVudCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChlc2NhcGVUZXN0Tm9FbmNvZGUudGVzdChodG1sKSkge1xuICAgICAgcmV0dXJuIGh0bWwucmVwbGFjZShlc2NhcGVSZXBsYWNlTm9FbmNvZGUsIGdldEVzY2FwZVJlcGxhY2VtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaHRtbDtcbn1cblxuY29uc3QgdW5lc2NhcGVUZXN0ID0gLyYoIyg/OlxcZCspfCg/OiN4WzAtOUEtRmEtZl0rKXwoPzpcXHcrKSk7Py9pZztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuICovXG5mdW5jdGlvbiB1bmVzY2FwZShodG1sKSB7XG4gIC8vIGV4cGxpY2l0bHkgbWF0Y2ggZGVjaW1hbCwgaGV4LCBhbmQgbmFtZWQgSFRNTCBlbnRpdGllc1xuICByZXR1cm4gaHRtbC5yZXBsYWNlKHVuZXNjYXBlVGVzdCwgKF8sIG4pID0+IHtcbiAgICBuID0gbi50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChuID09PSAnY29sb24nKSByZXR1cm4gJzonO1xuICAgIGlmIChuLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICByZXR1cm4gbi5jaGFyQXQoMSkgPT09ICd4J1xuICAgICAgICA/IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQobi5zdWJzdHJpbmcoMiksIDE2KSlcbiAgICAgICAgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKCtuLnN1YnN0cmluZygxKSk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfSk7XG59XG5cbmNvbnN0IGNhcmV0ID0gLyhefFteXFxbXSlcXF4vZztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZyB8IFJlZ0V4cH0gcmVnZXhcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRcbiAqL1xuZnVuY3Rpb24gZWRpdChyZWdleCwgb3B0KSB7XG4gIHJlZ2V4ID0gdHlwZW9mIHJlZ2V4ID09PSAnc3RyaW5nJyA/IHJlZ2V4IDogcmVnZXguc291cmNlO1xuICBvcHQgPSBvcHQgfHwgJyc7XG4gIGNvbnN0IG9iaiA9IHtcbiAgICByZXBsYWNlOiAobmFtZSwgdmFsKSA9PiB7XG4gICAgICB2YWwgPSB2YWwuc291cmNlIHx8IHZhbDtcbiAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKGNhcmV0LCAnJDEnKTtcbiAgICAgIHJlZ2V4ID0gcmVnZXgucmVwbGFjZShuYW1lLCB2YWwpO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGdldFJlZ2V4OiAoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleCwgb3B0KTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBvYmo7XG59XG5cbmNvbnN0IG5vbldvcmRBbmRDb2xvblRlc3QgPSAvW15cXHc6XS9nO1xuY29uc3Qgb3JpZ2luSW5kZXBlbmRlbnRVcmwgPSAvXiR8XlthLXpdW2EtejAtOSsuLV0qOnxeWz8jXS9pO1xuXG4vKipcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2FuaXRpemVcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlXG4gKiBAcGFyYW0ge3N0cmluZ30gaHJlZlxuICovXG5mdW5jdGlvbiBjbGVhblVybChzYW5pdGl6ZSwgYmFzZSwgaHJlZikge1xuICBpZiAoc2FuaXRpemUpIHtcbiAgICBsZXQgcHJvdDtcbiAgICB0cnkge1xuICAgICAgcHJvdCA9IGRlY29kZVVSSUNvbXBvbmVudCh1bmVzY2FwZShocmVmKSlcbiAgICAgICAgLnJlcGxhY2Uobm9uV29yZEFuZENvbG9uVGVzdCwgJycpXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAocHJvdC5pbmRleE9mKCdqYXZhc2NyaXB0OicpID09PSAwIHx8IHByb3QuaW5kZXhPZigndmJzY3JpcHQ6JykgPT09IDAgfHwgcHJvdC5pbmRleE9mKCdkYXRhOicpID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgaWYgKGJhc2UgJiYgIW9yaWdpbkluZGVwZW5kZW50VXJsLnRlc3QoaHJlZikpIHtcbiAgICBocmVmID0gcmVzb2x2ZVVybChiYXNlLCBocmVmKTtcbiAgfVxuICB0cnkge1xuICAgIGhyZWYgPSBlbmNvZGVVUkkoaHJlZikucmVwbGFjZSgvJTI1L2csICclJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gaHJlZjtcbn1cblxuY29uc3QgYmFzZVVybHMgPSB7fTtcbmNvbnN0IGp1c3REb21haW4gPSAvXlteOl0rOlxcLypbXi9dKiQvO1xuY29uc3QgcHJvdG9jb2wgPSAvXihbXjpdKzopW1xcc1xcU10qJC87XG5jb25zdCBkb21haW4gPSAvXihbXjpdKzpcXC8qW14vXSopW1xcc1xcU10qJC87XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBocmVmXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVVcmwoYmFzZSwgaHJlZikge1xuICBpZiAoIWJhc2VVcmxzWycgJyArIGJhc2VdKSB7XG4gICAgLy8gd2UgY2FuIGlnbm9yZSBldmVyeXRoaW5nIGluIGJhc2UgYWZ0ZXIgdGhlIGxhc3Qgc2xhc2ggb2YgaXRzIHBhdGggY29tcG9uZW50LFxuICAgIC8vIGJ1dCB3ZSBtaWdodCBuZWVkIHRvIGFkZCBfdGhhdF9cbiAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NiNzZWN0aW9uLTNcbiAgICBpZiAoanVzdERvbWFpbi50ZXN0KGJhc2UpKSB7XG4gICAgICBiYXNlVXJsc1snICcgKyBiYXNlXSA9IGJhc2UgKyAnLyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhc2VVcmxzWycgJyArIGJhc2VdID0gcnRyaW0oYmFzZSwgJy8nLCB0cnVlKTtcbiAgICB9XG4gIH1cbiAgYmFzZSA9IGJhc2VVcmxzWycgJyArIGJhc2VdO1xuICBjb25zdCByZWxhdGl2ZUJhc2UgPSBiYXNlLmluZGV4T2YoJzonKSA9PT0gLTE7XG5cbiAgaWYgKGhyZWYuc3Vic3RyaW5nKDAsIDIpID09PSAnLy8nKSB7XG4gICAgaWYgKHJlbGF0aXZlQmFzZSkge1xuICAgICAgcmV0dXJuIGhyZWY7XG4gICAgfVxuICAgIHJldHVybiBiYXNlLnJlcGxhY2UocHJvdG9jb2wsICckMScpICsgaHJlZjtcbiAgfSBlbHNlIGlmIChocmVmLmNoYXJBdCgwKSA9PT0gJy8nKSB7XG4gICAgaWYgKHJlbGF0aXZlQmFzZSkge1xuICAgICAgcmV0dXJuIGhyZWY7XG4gICAgfVxuICAgIHJldHVybiBiYXNlLnJlcGxhY2UoZG9tYWluLCAnJDEnKSArIGhyZWY7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2UgKyBocmVmO1xuICB9XG59XG5cbmNvbnN0IG5vb3BUZXN0ID0geyBleGVjOiBmdW5jdGlvbiBub29wVGVzdCgpIHt9IH07XG5cbmZ1bmN0aW9uIHNwbGl0Q2VsbHModGFibGVSb3csIGNvdW50KSB7XG4gIC8vIGVuc3VyZSB0aGF0IGV2ZXJ5IGNlbGwtZGVsaW1pdGluZyBwaXBlIGhhcyBhIHNwYWNlXG4gIC8vIGJlZm9yZSBpdCB0byBkaXN0aW5ndWlzaCBpdCBmcm9tIGFuIGVzY2FwZWQgcGlwZVxuICBjb25zdCByb3cgPSB0YWJsZVJvdy5yZXBsYWNlKC9cXHwvZywgKG1hdGNoLCBvZmZzZXQsIHN0cikgPT4ge1xuICAgICAgbGV0IGVzY2FwZWQgPSBmYWxzZSxcbiAgICAgICAgY3VyciA9IG9mZnNldDtcbiAgICAgIHdoaWxlICgtLWN1cnIgPj0gMCAmJiBzdHJbY3Vycl0gPT09ICdcXFxcJykgZXNjYXBlZCA9ICFlc2NhcGVkO1xuICAgICAgaWYgKGVzY2FwZWQpIHtcbiAgICAgICAgLy8gb2RkIG51bWJlciBvZiBzbGFzaGVzIG1lYW5zIHwgaXMgZXNjYXBlZFxuICAgICAgICAvLyBzbyB3ZSBsZWF2ZSBpdCBhbG9uZVxuICAgICAgICByZXR1cm4gJ3wnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWRkIHNwYWNlIGJlZm9yZSB1bmVzY2FwZWQgfFxuICAgICAgICByZXR1cm4gJyB8JztcbiAgICAgIH1cbiAgICB9KSxcbiAgICBjZWxscyA9IHJvdy5zcGxpdCgvIFxcfC8pO1xuICBsZXQgaSA9IDA7XG5cbiAgLy8gRmlyc3QvbGFzdCBjZWxsIGluIGEgcm93IGNhbm5vdCBiZSBlbXB0eSBpZiBpdCBoYXMgbm8gbGVhZGluZy90cmFpbGluZyBwaXBlXG4gIGlmICghY2VsbHNbMF0udHJpbSgpKSB7IGNlbGxzLnNoaWZ0KCk7IH1cbiAgaWYgKGNlbGxzLmxlbmd0aCA+IDAgJiYgIWNlbGxzW2NlbGxzLmxlbmd0aCAtIDFdLnRyaW0oKSkgeyBjZWxscy5wb3AoKTsgfVxuXG4gIGlmIChjZWxscy5sZW5ndGggPiBjb3VudCkge1xuICAgIGNlbGxzLnNwbGljZShjb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKGNlbGxzLmxlbmd0aCA8IGNvdW50KSBjZWxscy5wdXNoKCcnKTtcbiAgfVxuXG4gIGZvciAoOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBsZWFkaW5nIG9yIHRyYWlsaW5nIHdoaXRlc3BhY2UgaXMgaWdub3JlZCBwZXIgdGhlIGdmbSBzcGVjXG4gICAgY2VsbHNbaV0gPSBjZWxsc1tpXS50cmltKCkucmVwbGFjZSgvXFxcXFxcfC9nLCAnfCcpO1xuICB9XG4gIHJldHVybiBjZWxscztcbn1cblxuLyoqXG4gKiBSZW1vdmUgdHJhaWxpbmcgJ2Mncy4gRXF1aXZhbGVudCB0byBzdHIucmVwbGFjZSgvYyokLywgJycpLlxuICogL2MqJC8gaXMgdnVsbmVyYWJsZSB0byBSRURPUy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge3N0cmluZ30gY1xuICogQHBhcmFtIHtib29sZWFufSBpbnZlcnQgUmVtb3ZlIHN1ZmZpeCBvZiBub24tYyBjaGFycyBpbnN0ZWFkLiBEZWZhdWx0IGZhbHNleS5cbiAqL1xuZnVuY3Rpb24gcnRyaW0oc3RyLCBjLCBpbnZlcnQpIHtcbiAgY29uc3QgbCA9IHN0ci5sZW5ndGg7XG4gIGlmIChsID09PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLy8gTGVuZ3RoIG9mIHN1ZmZpeCBtYXRjaGluZyB0aGUgaW52ZXJ0IGNvbmRpdGlvbi5cbiAgbGV0IHN1ZmZMZW4gPSAwO1xuXG4gIC8vIFN0ZXAgbGVmdCB1bnRpbCB3ZSBmYWlsIHRvIG1hdGNoIHRoZSBpbnZlcnQgY29uZGl0aW9uLlxuICB3aGlsZSAoc3VmZkxlbiA8IGwpIHtcbiAgICBjb25zdCBjdXJyQ2hhciA9IHN0ci5jaGFyQXQobCAtIHN1ZmZMZW4gLSAxKTtcbiAgICBpZiAoY3VyckNoYXIgPT09IGMgJiYgIWludmVydCkge1xuICAgICAgc3VmZkxlbisrO1xuICAgIH0gZWxzZSBpZiAoY3VyckNoYXIgIT09IGMgJiYgaW52ZXJ0KSB7XG4gICAgICBzdWZmTGVuKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdHIuc2xpY2UoMCwgbCAtIHN1ZmZMZW4pO1xufVxuXG5mdW5jdGlvbiBmaW5kQ2xvc2luZ0JyYWNrZXQoc3RyLCBiKSB7XG4gIGlmIChzdHIuaW5kZXhPZihiWzFdKSA9PT0gLTEpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgY29uc3QgbCA9IHN0ci5sZW5ndGg7XG4gIGxldCBsZXZlbCA9IDAsXG4gICAgaSA9IDA7XG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHN0cltpXSA9PT0gJ1xcXFwnKSB7XG4gICAgICBpKys7XG4gICAgfSBlbHNlIGlmIChzdHJbaV0gPT09IGJbMF0pIHtcbiAgICAgIGxldmVsKys7XG4gICAgfSBlbHNlIGlmIChzdHJbaV0gPT09IGJbMV0pIHtcbiAgICAgIGxldmVsLS07XG4gICAgICBpZiAobGV2ZWwgPCAwKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbmZ1bmN0aW9uIGNoZWNrU2FuaXRpemVEZXByZWNhdGlvbihvcHQpIHtcbiAgaWYgKG9wdCAmJiBvcHQuc2FuaXRpemUgJiYgIW9wdC5zaWxlbnQpIHtcbiAgICBjb25zb2xlLndhcm4oJ21hcmtlZCgpOiBzYW5pdGl6ZSBhbmQgc2FuaXRpemVyIHBhcmFtZXRlcnMgYXJlIGRlcHJlY2F0ZWQgc2luY2UgdmVyc2lvbiAwLjcuMCwgc2hvdWxkIG5vdCBiZSB1c2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4gUmVhZCBtb3JlIGhlcmU6IGh0dHBzOi8vbWFya2VkLmpzLm9yZy8jL1VTSU5HX0FEVkFOQ0VELm1kI29wdGlvbnMnKTtcbiAgfVxufVxuXG4vLyBjb3BpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTQ1MDExMy84MDY3Nzdcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdHRlcm5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudFxuICovXG5mdW5jdGlvbiByZXBlYXRTdHJpbmcocGF0dGVybiwgY291bnQpIHtcbiAgaWYgKGNvdW50IDwgMSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBsZXQgcmVzdWx0ID0gJyc7XG4gIHdoaWxlIChjb3VudCA+IDEpIHtcbiAgICBpZiAoY291bnQgJiAxKSB7XG4gICAgICByZXN1bHQgKz0gcGF0dGVybjtcbiAgICB9XG4gICAgY291bnQgPj49IDE7XG4gICAgcGF0dGVybiArPSBwYXR0ZXJuO1xuICB9XG4gIHJldHVybiByZXN1bHQgKyBwYXR0ZXJuO1xufVxuXG5mdW5jdGlvbiBvdXRwdXRMaW5rKGNhcCwgbGluaywgcmF3LCBsZXhlcikge1xuICBjb25zdCBocmVmID0gbGluay5ocmVmO1xuICBjb25zdCB0aXRsZSA9IGxpbmsudGl0bGUgPyBlc2NhcGUobGluay50aXRsZSkgOiBudWxsO1xuICBjb25zdCB0ZXh0ID0gY2FwWzFdLnJlcGxhY2UoL1xcXFwoW1xcW1xcXV0pL2csICckMScpO1xuXG4gIGlmIChjYXBbMF0uY2hhckF0KDApICE9PSAnIScpIHtcbiAgICBsZXhlci5zdGF0ZS5pbkxpbmsgPSB0cnVlO1xuICAgIGNvbnN0IHRva2VuID0ge1xuICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgcmF3LFxuICAgICAgaHJlZixcbiAgICAgIHRpdGxlLFxuICAgICAgdGV4dCxcbiAgICAgIHRva2VuczogbGV4ZXIuaW5saW5lVG9rZW5zKHRleHQpXG4gICAgfTtcbiAgICBsZXhlci5zdGF0ZS5pbkxpbmsgPSBmYWxzZTtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnaW1hZ2UnLFxuICAgIHJhdyxcbiAgICBocmVmLFxuICAgIHRpdGxlLFxuICAgIHRleHQ6IGVzY2FwZSh0ZXh0KVxuICB9O1xufVxuXG5mdW5jdGlvbiBpbmRlbnRDb2RlQ29tcGVuc2F0aW9uKHJhdywgdGV4dCkge1xuICBjb25zdCBtYXRjaEluZGVudFRvQ29kZSA9IHJhdy5tYXRjaCgvXihcXHMrKSg/OmBgYCkvKTtcblxuICBpZiAobWF0Y2hJbmRlbnRUb0NvZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGNvbnN0IGluZGVudFRvQ29kZSA9IG1hdGNoSW5kZW50VG9Db2RlWzFdO1xuXG4gIHJldHVybiB0ZXh0XG4gICAgLnNwbGl0KCdcXG4nKVxuICAgIC5tYXAobm9kZSA9PiB7XG4gICAgICBjb25zdCBtYXRjaEluZGVudEluTm9kZSA9IG5vZGUubWF0Y2goL15cXHMrLyk7XG4gICAgICBpZiAobWF0Y2hJbmRlbnRJbk5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtpbmRlbnRJbk5vZGVdID0gbWF0Y2hJbmRlbnRJbk5vZGU7XG5cbiAgICAgIGlmIChpbmRlbnRJbk5vZGUubGVuZ3RoID49IGluZGVudFRvQ29kZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuc2xpY2UoaW5kZW50VG9Db2RlLmxlbmd0aCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0pXG4gICAgLmpvaW4oJ1xcbicpO1xufVxuXG4vKipcbiAqIFRva2VuaXplclxuICovXG5jbGFzcyBUb2tlbml6ZXIge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCBkZWZhdWx0cztcbiAgfVxuXG4gIHNwYWNlKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2submV3bGluZS5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCAmJiBjYXBbMF0ubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NwYWNlJyxcbiAgICAgICAgcmF3OiBjYXBbMF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgY29kZShzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmNvZGUuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGNvbnN0IHRleHQgPSBjYXBbMF0ucmVwbGFjZSgvXiB7MSw0fS9nbSwgJycpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgY29kZUJsb2NrU3R5bGU6ICdpbmRlbnRlZCcsXG4gICAgICAgIHRleHQ6ICF0aGlzLm9wdGlvbnMucGVkYW50aWNcbiAgICAgICAgICA/IHJ0cmltKHRleHQsICdcXG4nKVxuICAgICAgICAgIDogdGV4dFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmZW5jZXMoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5mZW5jZXMuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGNvbnN0IHJhdyA9IGNhcFswXTtcbiAgICAgIGNvbnN0IHRleHQgPSBpbmRlbnRDb2RlQ29tcGVuc2F0aW9uKHJhdywgY2FwWzNdIHx8ICcnKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICByYXcsXG4gICAgICAgIGxhbmc6IGNhcFsyXSA/IGNhcFsyXS50cmltKCkucmVwbGFjZSh0aGlzLnJ1bGVzLmlubGluZS5fZXNjYXBlcywgJyQxJykgOiBjYXBbMl0sXG4gICAgICAgIHRleHRcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgaGVhZGluZyhzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmhlYWRpbmcuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGxldCB0ZXh0ID0gY2FwWzJdLnRyaW0oKTtcblxuICAgICAgLy8gcmVtb3ZlIHRyYWlsaW5nICNzXG4gICAgICBpZiAoLyMkLy50ZXN0KHRleHQpKSB7XG4gICAgICAgIGNvbnN0IHRyaW1tZWQgPSBydHJpbSh0ZXh0LCAnIycpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljKSB7XG4gICAgICAgICAgdGV4dCA9IHRyaW1tZWQudHJpbSgpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0cmltbWVkIHx8IC8gJC8udGVzdCh0cmltbWVkKSkge1xuICAgICAgICAgIC8vIENvbW1vbk1hcmsgcmVxdWlyZXMgc3BhY2UgYmVmb3JlIHRyYWlsaW5nICNzXG4gICAgICAgICAgdGV4dCA9IHRyaW1tZWQudHJpbSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIGRlcHRoOiBjYXBbMV0ubGVuZ3RoLFxuICAgICAgICB0ZXh0LFxuICAgICAgICB0b2tlbnM6IHRoaXMubGV4ZXIuaW5saW5lKHRleHQpXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGhyKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2suaHIuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdocicsXG4gICAgICAgIHJhdzogY2FwWzBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGJsb2NrcXVvdGUoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5ibG9ja3F1b3RlLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gY2FwWzBdLnJlcGxhY2UoL14gKj5bIFxcdF0/L2dtLCAnJyk7XG4gICAgICBjb25zdCB0b3AgPSB0aGlzLmxleGVyLnN0YXRlLnRvcDtcbiAgICAgIHRoaXMubGV4ZXIuc3RhdGUudG9wID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHRva2VucyA9IHRoaXMubGV4ZXIuYmxvY2tUb2tlbnModGV4dCk7XG4gICAgICB0aGlzLmxleGVyLnN0YXRlLnRvcCA9IHRvcDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdibG9ja3F1b3RlJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRva2VucyxcbiAgICAgICAgdGV4dFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBsaXN0KHNyYykge1xuICAgIGxldCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmxpc3QuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGxldCByYXcsIGlzdGFzaywgaXNjaGVja2VkLCBpbmRlbnQsIGksIGJsYW5rTGluZSwgZW5kc1dpdGhCbGFua0xpbmUsXG4gICAgICAgIGxpbmUsIG5leHRMaW5lLCByYXdMaW5lLCBpdGVtQ29udGVudHMsIGVuZEVhcmx5O1xuXG4gICAgICBsZXQgYnVsbCA9IGNhcFsxXS50cmltKCk7XG4gICAgICBjb25zdCBpc29yZGVyZWQgPSBidWxsLmxlbmd0aCA+IDE7XG5cbiAgICAgIGNvbnN0IGxpc3QgPSB7XG4gICAgICAgIHR5cGU6ICdsaXN0JyxcbiAgICAgICAgcmF3OiAnJyxcbiAgICAgICAgb3JkZXJlZDogaXNvcmRlcmVkLFxuICAgICAgICBzdGFydDogaXNvcmRlcmVkID8gK2J1bGwuc2xpY2UoMCwgLTEpIDogJycsXG4gICAgICAgIGxvb3NlOiBmYWxzZSxcbiAgICAgICAgaXRlbXM6IFtdXG4gICAgICB9O1xuXG4gICAgICBidWxsID0gaXNvcmRlcmVkID8gYFxcXFxkezEsOX1cXFxcJHtidWxsLnNsaWNlKC0xKX1gIDogYFxcXFwke2J1bGx9YDtcblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZWRhbnRpYykge1xuICAgICAgICBidWxsID0gaXNvcmRlcmVkID8gYnVsbCA6ICdbKistXSc7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBuZXh0IGxpc3QgaXRlbVxuICAgICAgY29uc3QgaXRlbVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiggezAsM30ke2J1bGx9KSgoPzpbXFx0IF1bXlxcXFxuXSopPyg/OlxcXFxufCQpKWApO1xuXG4gICAgICAvLyBDaGVjayBpZiBjdXJyZW50IGJ1bGxldCBwb2ludCBjYW4gc3RhcnQgYSBuZXcgTGlzdCBJdGVtXG4gICAgICB3aGlsZSAoc3JjKSB7XG4gICAgICAgIGVuZEVhcmx5ID0gZmFsc2U7XG4gICAgICAgIGlmICghKGNhcCA9IGl0ZW1SZWdleC5leGVjKHNyYykpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ydWxlcy5ibG9jay5oci50ZXN0KHNyYykpIHsgLy8gRW5kIGxpc3QgaWYgYnVsbGV0IHdhcyBhY3R1YWxseSBIUiAocG9zc2libHkgbW92ZSBpbnRvIGl0ZW1SZWdleD8pXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByYXcgPSBjYXBbMF07XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcocmF3Lmxlbmd0aCk7XG5cbiAgICAgICAgbGluZSA9IGNhcFsyXS5zcGxpdCgnXFxuJywgMSlbMF0ucmVwbGFjZSgvXlxcdCsvLCAodCkgPT4gJyAnLnJlcGVhdCgzICogdC5sZW5ndGgpKTtcbiAgICAgICAgbmV4dExpbmUgPSBzcmMuc3BsaXQoJ1xcbicsIDEpWzBdO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMpIHtcbiAgICAgICAgICBpbmRlbnQgPSAyO1xuICAgICAgICAgIGl0ZW1Db250ZW50cyA9IGxpbmUudHJpbUxlZnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbmRlbnQgPSBjYXBbMl0uc2VhcmNoKC9bXiBdLyk7IC8vIEZpbmQgZmlyc3Qgbm9uLXNwYWNlIGNoYXJcbiAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgPiA0ID8gMSA6IGluZGVudDsgLy8gVHJlYXQgaW5kZW50ZWQgY29kZSBibG9ja3MgKD4gNCBzcGFjZXMpIGFzIGhhdmluZyBvbmx5IDEgaW5kZW50XG4gICAgICAgICAgaXRlbUNvbnRlbnRzID0gbGluZS5zbGljZShpbmRlbnQpO1xuICAgICAgICAgIGluZGVudCArPSBjYXBbMV0ubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgYmxhbmtMaW5lID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFsaW5lICYmIC9eICokLy50ZXN0KG5leHRMaW5lKSkgeyAvLyBJdGVtcyBiZWdpbiB3aXRoIGF0IG1vc3Qgb25lIGJsYW5rIGxpbmVcbiAgICAgICAgICByYXcgKz0gbmV4dExpbmUgKyAnXFxuJztcbiAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKG5leHRMaW5lLmxlbmd0aCArIDEpO1xuICAgICAgICAgIGVuZEVhcmx5ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZW5kRWFybHkpIHtcbiAgICAgICAgICBjb25zdCBuZXh0QnVsbGV0UmVnZXggPSBuZXcgUmVnRXhwKGBeIHswLCR7TWF0aC5taW4oMywgaW5kZW50IC0gMSl9fSg/OlsqKy1dfFxcXFxkezEsOX1bLildKSgoPzpbIFxcdF1bXlxcXFxuXSopPyg/OlxcXFxufCQpKWApO1xuICAgICAgICAgIGNvbnN0IGhyUmVnZXggPSBuZXcgUmVnRXhwKGBeIHswLCR7TWF0aC5taW4oMywgaW5kZW50IC0gMSl9fSgoPzotICopezMsfXwoPzpfICopezMsfXwoPzpcXFxcKiAqKXszLH0pKD86XFxcXG4rfCQpYCk7XG4gICAgICAgICAgY29uc3QgZmVuY2VzQmVnaW5SZWdleCA9IG5ldyBSZWdFeHAoYF4gezAsJHtNYXRoLm1pbigzLCBpbmRlbnQgLSAxKX19KD86XFxgXFxgXFxgfH5+filgKTtcbiAgICAgICAgICBjb25zdCBoZWFkaW5nQmVnaW5SZWdleCA9IG5ldyBSZWdFeHAoYF4gezAsJHtNYXRoLm1pbigzLCBpbmRlbnQgLSAxKX19I2ApO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgZm9sbG93aW5nIGxpbmVzIHNob3VsZCBiZSBpbmNsdWRlZCBpbiBMaXN0IEl0ZW1cbiAgICAgICAgICB3aGlsZSAoc3JjKSB7XG4gICAgICAgICAgICByYXdMaW5lID0gc3JjLnNwbGl0KCdcXG4nLCAxKVswXTtcbiAgICAgICAgICAgIG5leHRMaW5lID0gcmF3TGluZTtcblxuICAgICAgICAgICAgLy8gUmUtYWxpZ24gdG8gZm9sbG93IGNvbW1vbm1hcmsgbmVzdGluZyBydWxlc1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZWRhbnRpYykge1xuICAgICAgICAgICAgICBuZXh0TGluZSA9IG5leHRMaW5lLnJlcGxhY2UoL14gezEsNH0oPz0oIHs0fSkqW14gXSkvZywgJyAgJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVuZCBsaXN0IGl0ZW0gaWYgZm91bmQgY29kZSBmZW5jZXNcbiAgICAgICAgICAgIGlmIChmZW5jZXNCZWdpblJlZ2V4LnRlc3QobmV4dExpbmUpKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFbmQgbGlzdCBpdGVtIGlmIGZvdW5kIHN0YXJ0IG9mIG5ldyBoZWFkaW5nXG4gICAgICAgICAgICBpZiAoaGVhZGluZ0JlZ2luUmVnZXgudGVzdChuZXh0TGluZSkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVuZCBsaXN0IGl0ZW0gaWYgZm91bmQgc3RhcnQgb2YgbmV3IGJ1bGxldFxuICAgICAgICAgICAgaWYgKG5leHRCdWxsZXRSZWdleC50ZXN0KG5leHRMaW5lKSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSG9yaXpvbnRhbCBydWxlIGZvdW5kXG4gICAgICAgICAgICBpZiAoaHJSZWdleC50ZXN0KHNyYykpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXh0TGluZS5zZWFyY2goL1teIF0vKSA+PSBpbmRlbnQgfHwgIW5leHRMaW5lLnRyaW0oKSkgeyAvLyBEZWRlbnQgaWYgcG9zc2libGVcbiAgICAgICAgICAgICAgaXRlbUNvbnRlbnRzICs9ICdcXG4nICsgbmV4dExpbmUuc2xpY2UoaW5kZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIG5vdCBlbm91Z2ggaW5kZW50YXRpb25cbiAgICAgICAgICAgICAgaWYgKGJsYW5rTGluZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gcGFyYWdyYXBoIGNvbnRpbnVhdGlvbiB1bmxlc3MgbGFzdCBsaW5lIHdhcyBhIGRpZmZlcmVudCBibG9jayBsZXZlbCBlbGVtZW50XG4gICAgICAgICAgICAgIGlmIChsaW5lLnNlYXJjaCgvW14gXS8pID49IDQpIHsgLy8gaW5kZW50ZWQgY29kZSBibG9ja1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChmZW5jZXNCZWdpblJlZ2V4LnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaGVhZGluZ0JlZ2luUmVnZXgudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChoclJlZ2V4LnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGl0ZW1Db250ZW50cyArPSAnXFxuJyArIG5leHRMaW5lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWJsYW5rTGluZSAmJiAhbmV4dExpbmUudHJpbSgpKSB7IC8vIENoZWNrIGlmIGN1cnJlbnQgbGluZSBpcyBibGFua1xuICAgICAgICAgICAgICBibGFua0xpbmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByYXcgKz0gcmF3TGluZSArICdcXG4nO1xuICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhyYXdMaW5lLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgbGluZSA9IG5leHRMaW5lLnNsaWNlKGluZGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFsaXN0Lmxvb3NlKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHByZXZpb3VzIGl0ZW0gZW5kZWQgd2l0aCBhIGJsYW5rIGxpbmUsIHRoZSBsaXN0IGlzIGxvb3NlXG4gICAgICAgICAgaWYgKGVuZHNXaXRoQmxhbmtMaW5lKSB7XG4gICAgICAgICAgICBsaXN0Lmxvb3NlID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKC9cXG4gKlxcbiAqJC8udGVzdChyYXcpKSB7XG4gICAgICAgICAgICBlbmRzV2l0aEJsYW5rTGluZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIHRhc2sgbGlzdCBpdGVtc1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdmbSkge1xuICAgICAgICAgIGlzdGFzayA9IC9eXFxbWyB4WF1cXF0gLy5leGVjKGl0ZW1Db250ZW50cyk7XG4gICAgICAgICAgaWYgKGlzdGFzaykge1xuICAgICAgICAgICAgaXNjaGVja2VkID0gaXN0YXNrWzBdICE9PSAnWyBdICc7XG4gICAgICAgICAgICBpdGVtQ29udGVudHMgPSBpdGVtQ29udGVudHMucmVwbGFjZSgvXlxcW1sgeFhdXFxdICsvLCAnJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGlzdC5pdGVtcy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnbGlzdF9pdGVtJyxcbiAgICAgICAgICByYXcsXG4gICAgICAgICAgdGFzazogISFpc3Rhc2ssXG4gICAgICAgICAgY2hlY2tlZDogaXNjaGVja2VkLFxuICAgICAgICAgIGxvb3NlOiBmYWxzZSxcbiAgICAgICAgICB0ZXh0OiBpdGVtQ29udGVudHNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGlzdC5yYXcgKz0gcmF3O1xuICAgICAgfVxuXG4gICAgICAvLyBEbyBub3QgY29uc3VtZSBuZXdsaW5lcyBhdCBlbmQgb2YgZmluYWwgaXRlbS4gQWx0ZXJuYXRpdmVseSwgbWFrZSBpdGVtUmVnZXggKnN0YXJ0KiB3aXRoIGFueSBuZXdsaW5lcyB0byBzaW1wbGlmeS9zcGVlZCB1cCBlbmRzV2l0aEJsYW5rTGluZSBsb2dpY1xuICAgICAgbGlzdC5pdGVtc1tsaXN0Lml0ZW1zLmxlbmd0aCAtIDFdLnJhdyA9IHJhdy50cmltUmlnaHQoKTtcbiAgICAgIGxpc3QuaXRlbXNbbGlzdC5pdGVtcy5sZW5ndGggLSAxXS50ZXh0ID0gaXRlbUNvbnRlbnRzLnRyaW1SaWdodCgpO1xuICAgICAgbGlzdC5yYXcgPSBsaXN0LnJhdy50cmltUmlnaHQoKTtcblxuICAgICAgY29uc3QgbCA9IGxpc3QuaXRlbXMubGVuZ3RoO1xuXG4gICAgICAvLyBJdGVtIGNoaWxkIHRva2VucyBoYW5kbGVkIGhlcmUgYXQgZW5kIGJlY2F1c2Ugd2UgbmVlZGVkIHRvIGhhdmUgdGhlIGZpbmFsIGl0ZW0gdG8gdHJpbSBpdCBmaXJzdFxuICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLmxleGVyLnN0YXRlLnRvcCA9IGZhbHNlO1xuICAgICAgICBsaXN0Lml0ZW1zW2ldLnRva2VucyA9IHRoaXMubGV4ZXIuYmxvY2tUb2tlbnMobGlzdC5pdGVtc1tpXS50ZXh0LCBbXSk7XG5cbiAgICAgICAgaWYgKCFsaXN0Lmxvb3NlKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgbGlzdCBzaG91bGQgYmUgbG9vc2VcbiAgICAgICAgICBjb25zdCBzcGFjZXJzID0gbGlzdC5pdGVtc1tpXS50b2tlbnMuZmlsdGVyKHQgPT4gdC50eXBlID09PSAnc3BhY2UnKTtcbiAgICAgICAgICBjb25zdCBoYXNNdWx0aXBsZUxpbmVCcmVha3MgPSBzcGFjZXJzLmxlbmd0aCA+IDAgJiYgc3BhY2Vycy5zb21lKHQgPT4gL1xcbi4qXFxuLy50ZXN0KHQucmF3KSk7XG5cbiAgICAgICAgICBsaXN0Lmxvb3NlID0gaGFzTXVsdGlwbGVMaW5lQnJlYWtzO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCBhbGwgaXRlbXMgdG8gbG9vc2UgaWYgbGlzdCBpcyBsb29zZVxuICAgICAgaWYgKGxpc3QubG9vc2UpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGxpc3QuaXRlbXNbaV0ubG9vc2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsaXN0O1xuICAgIH1cbiAgfVxuXG4gIGh0bWwoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5odG1sLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHtcbiAgICAgICAgdHlwZTogJ2h0bWwnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgcHJlOiAhdGhpcy5vcHRpb25zLnNhbml0aXplclxuICAgICAgICAgICYmIChjYXBbMV0gPT09ICdwcmUnIHx8IGNhcFsxXSA9PT0gJ3NjcmlwdCcgfHwgY2FwWzFdID09PSAnc3R5bGUnKSxcbiAgICAgICAgdGV4dDogY2FwWzBdXG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYW5pdGl6ZSkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5vcHRpb25zLnNhbml0aXplciA/IHRoaXMub3B0aW9ucy5zYW5pdGl6ZXIoY2FwWzBdKSA6IGVzY2FwZShjYXBbMF0pO1xuICAgICAgICB0b2tlbi50eXBlID0gJ3BhcmFncmFwaCc7XG4gICAgICAgIHRva2VuLnRleHQgPSB0ZXh0O1xuICAgICAgICB0b2tlbi50b2tlbnMgPSB0aGlzLmxleGVyLmlubGluZSh0ZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gIH1cblxuICBkZWYoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5kZWYuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGNvbnN0IHRhZyA9IGNhcFsxXS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgIGNvbnN0IGhyZWYgPSBjYXBbMl0gPyBjYXBbMl0ucmVwbGFjZSgvXjwoLiopPiQvLCAnJDEnKS5yZXBsYWNlKHRoaXMucnVsZXMuaW5saW5lLl9lc2NhcGVzLCAnJDEnKSA6ICcnO1xuICAgICAgY29uc3QgdGl0bGUgPSBjYXBbM10gPyBjYXBbM10uc3Vic3RyaW5nKDEsIGNhcFszXS5sZW5ndGggLSAxKS5yZXBsYWNlKHRoaXMucnVsZXMuaW5saW5lLl9lc2NhcGVzLCAnJDEnKSA6IGNhcFszXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdkZWYnLFxuICAgICAgICB0YWcsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICBocmVmLFxuICAgICAgICB0aXRsZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICB0YWJsZShzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLnRhYmxlLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICB0eXBlOiAndGFibGUnLFxuICAgICAgICBoZWFkZXI6IHNwbGl0Q2VsbHMoY2FwWzFdKS5tYXAoYyA9PiB7IHJldHVybiB7IHRleHQ6IGMgfTsgfSksXG4gICAgICAgIGFsaWduOiBjYXBbMl0ucmVwbGFjZSgvXiAqfFxcfCAqJC9nLCAnJykuc3BsaXQoLyAqXFx8ICovKSxcbiAgICAgICAgcm93czogY2FwWzNdICYmIGNhcFszXS50cmltKCkgPyBjYXBbM10ucmVwbGFjZSgvXFxuWyBcXHRdKiQvLCAnJykuc3BsaXQoJ1xcbicpIDogW11cbiAgICAgIH07XG5cbiAgICAgIGlmIChpdGVtLmhlYWRlci5sZW5ndGggPT09IGl0ZW0uYWxpZ24ubGVuZ3RoKSB7XG4gICAgICAgIGl0ZW0ucmF3ID0gY2FwWzBdO1xuXG4gICAgICAgIGxldCBsID0gaXRlbS5hbGlnbi5sZW5ndGg7XG4gICAgICAgIGxldCBpLCBqLCBrLCByb3c7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpZiAoL14gKi0rOiAqJC8udGVzdChpdGVtLmFsaWduW2ldKSkge1xuICAgICAgICAgICAgaXRlbS5hbGlnbltpXSA9ICdyaWdodCc7XG4gICAgICAgICAgfSBlbHNlIGlmICgvXiAqOi0rOiAqJC8udGVzdChpdGVtLmFsaWduW2ldKSkge1xuICAgICAgICAgICAgaXRlbS5hbGlnbltpXSA9ICdjZW50ZXInO1xuICAgICAgICAgIH0gZWxzZSBpZiAoL14gKjotKyAqJC8udGVzdChpdGVtLmFsaWduW2ldKSkge1xuICAgICAgICAgICAgaXRlbS5hbGlnbltpXSA9ICdsZWZ0JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbS5hbGlnbltpXSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbCA9IGl0ZW0ucm93cy5sZW5ndGg7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpdGVtLnJvd3NbaV0gPSBzcGxpdENlbGxzKGl0ZW0ucm93c1tpXSwgaXRlbS5oZWFkZXIubGVuZ3RoKS5tYXAoYyA9PiB7IHJldHVybiB7IHRleHQ6IGMgfTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYXJzZSBjaGlsZCB0b2tlbnMgaW5zaWRlIGhlYWRlcnMgYW5kIGNlbGxzXG5cbiAgICAgICAgLy8gaGVhZGVyIGNoaWxkIHRva2Vuc1xuICAgICAgICBsID0gaXRlbS5oZWFkZXIubGVuZ3RoO1xuICAgICAgICBmb3IgKGogPSAwOyBqIDwgbDsgaisrKSB7XG4gICAgICAgICAgaXRlbS5oZWFkZXJbal0udG9rZW5zID0gdGhpcy5sZXhlci5pbmxpbmUoaXRlbS5oZWFkZXJbal0udGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjZWxsIGNoaWxkIHRva2Vuc1xuICAgICAgICBsID0gaXRlbS5yb3dzLmxlbmd0aDtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IGw7IGorKykge1xuICAgICAgICAgIHJvdyA9IGl0ZW0ucm93c1tqXTtcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgcm93Lmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICByb3dba10udG9rZW5zID0gdGhpcy5sZXhlci5pbmxpbmUocm93W2tdLnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGxoZWFkaW5nKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2subGhlYWRpbmcuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIGRlcHRoOiBjYXBbMl0uY2hhckF0KDApID09PSAnPScgPyAxIDogMixcbiAgICAgICAgdGV4dDogY2FwWzFdLFxuICAgICAgICB0b2tlbnM6IHRoaXMubGV4ZXIuaW5saW5lKGNhcFsxXSlcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcGFyYWdyYXBoKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2sucGFyYWdyYXBoLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gY2FwWzFdLmNoYXJBdChjYXBbMV0ubGVuZ3RoIC0gMSkgPT09ICdcXG4nXG4gICAgICAgID8gY2FwWzFdLnNsaWNlKDAsIC0xKVxuICAgICAgICA6IGNhcFsxXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZSh0ZXh0KVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICB0ZXh0KHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2sudGV4dC5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdGV4dDogY2FwWzBdLFxuICAgICAgICB0b2tlbnM6IHRoaXMubGV4ZXIuaW5saW5lKGNhcFswXSlcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgZXNjYXBlKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLmVzY2FwZS5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2VzY2FwZScsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0ZXh0OiBlc2NhcGUoY2FwWzFdKVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICB0YWcoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUudGFnLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBpZiAoIXRoaXMubGV4ZXIuc3RhdGUuaW5MaW5rICYmIC9ePGEgL2kudGVzdChjYXBbMF0pKSB7XG4gICAgICAgIHRoaXMubGV4ZXIuc3RhdGUuaW5MaW5rID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5sZXhlci5zdGF0ZS5pbkxpbmsgJiYgL148XFwvYT4vaS50ZXN0KGNhcFswXSkpIHtcbiAgICAgICAgdGhpcy5sZXhlci5zdGF0ZS5pbkxpbmsgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5sZXhlci5zdGF0ZS5pblJhd0Jsb2NrICYmIC9ePChwcmV8Y29kZXxrYmR8c2NyaXB0KShcXHN8PikvaS50ZXN0KGNhcFswXSkpIHtcbiAgICAgICAgdGhpcy5sZXhlci5zdGF0ZS5pblJhd0Jsb2NrID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5sZXhlci5zdGF0ZS5pblJhd0Jsb2NrICYmIC9ePFxcLyhwcmV8Y29kZXxrYmR8c2NyaXB0KShcXHN8PikvaS50ZXN0KGNhcFswXSkpIHtcbiAgICAgICAgdGhpcy5sZXhlci5zdGF0ZS5pblJhd0Jsb2NrID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHRoaXMub3B0aW9ucy5zYW5pdGl6ZVxuICAgICAgICAgID8gJ3RleHQnXG4gICAgICAgICAgOiAnaHRtbCcsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICBpbkxpbms6IHRoaXMubGV4ZXIuc3RhdGUuaW5MaW5rLFxuICAgICAgICBpblJhd0Jsb2NrOiB0aGlzLmxleGVyLnN0YXRlLmluUmF3QmxvY2ssXG4gICAgICAgIHRleHQ6IHRoaXMub3B0aW9ucy5zYW5pdGl6ZVxuICAgICAgICAgID8gKHRoaXMub3B0aW9ucy5zYW5pdGl6ZXJcbiAgICAgICAgICAgID8gdGhpcy5vcHRpb25zLnNhbml0aXplcihjYXBbMF0pXG4gICAgICAgICAgICA6IGVzY2FwZShjYXBbMF0pKVxuICAgICAgICAgIDogY2FwWzBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGxpbmsoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUubGluay5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgY29uc3QgdHJpbW1lZFVybCA9IGNhcFsyXS50cmltKCk7XG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5wZWRhbnRpYyAmJiAvXjwvLnRlc3QodHJpbW1lZFVybCkpIHtcbiAgICAgICAgLy8gY29tbW9ubWFyayByZXF1aXJlcyBtYXRjaGluZyBhbmdsZSBicmFja2V0c1xuICAgICAgICBpZiAoISgvPiQvLnRlc3QodHJpbW1lZFVybCkpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZW5kaW5nIGFuZ2xlIGJyYWNrZXQgY2Fubm90IGJlIGVzY2FwZWRcbiAgICAgICAgY29uc3QgcnRyaW1TbGFzaCA9IHJ0cmltKHRyaW1tZWRVcmwuc2xpY2UoMCwgLTEpLCAnXFxcXCcpO1xuICAgICAgICBpZiAoKHRyaW1tZWRVcmwubGVuZ3RoIC0gcnRyaW1TbGFzaC5sZW5ndGgpICUgMiA9PT0gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmluZCBjbG9zaW5nIHBhcmVudGhlc2lzXG4gICAgICAgIGNvbnN0IGxhc3RQYXJlbkluZGV4ID0gZmluZENsb3NpbmdCcmFja2V0KGNhcFsyXSwgJygpJyk7XG4gICAgICAgIGlmIChsYXN0UGFyZW5JbmRleCA+IC0xKSB7XG4gICAgICAgICAgY29uc3Qgc3RhcnQgPSBjYXBbMF0uaW5kZXhPZignIScpID09PSAwID8gNSA6IDQ7XG4gICAgICAgICAgY29uc3QgbGlua0xlbiA9IHN0YXJ0ICsgY2FwWzFdLmxlbmd0aCArIGxhc3RQYXJlbkluZGV4O1xuICAgICAgICAgIGNhcFsyXSA9IGNhcFsyXS5zdWJzdHJpbmcoMCwgbGFzdFBhcmVuSW5kZXgpO1xuICAgICAgICAgIGNhcFswXSA9IGNhcFswXS5zdWJzdHJpbmcoMCwgbGlua0xlbikudHJpbSgpO1xuICAgICAgICAgIGNhcFszXSA9ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgaHJlZiA9IGNhcFsyXTtcbiAgICAgIGxldCB0aXRsZSA9ICcnO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZWRhbnRpYykge1xuICAgICAgICAvLyBzcGxpdCBwZWRhbnRpYyBocmVmIGFuZCB0aXRsZVxuICAgICAgICBjb25zdCBsaW5rID0gL14oW14nXCJdKlteXFxzXSlcXHMrKFsnXCJdKSguKilcXDIvLmV4ZWMoaHJlZik7XG5cbiAgICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgICBocmVmID0gbGlua1sxXTtcbiAgICAgICAgICB0aXRsZSA9IGxpbmtbM107XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpdGxlID0gY2FwWzNdID8gY2FwWzNdLnNsaWNlKDEsIC0xKSA6ICcnO1xuICAgICAgfVxuXG4gICAgICBocmVmID0gaHJlZi50cmltKCk7XG4gICAgICBpZiAoL148Ly50ZXN0KGhyZWYpKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMgJiYgISgvPiQvLnRlc3QodHJpbW1lZFVybCkpKSB7XG4gICAgICAgICAgLy8gcGVkYW50aWMgYWxsb3dzIHN0YXJ0aW5nIGFuZ2xlIGJyYWNrZXQgd2l0aG91dCBlbmRpbmcgYW5nbGUgYnJhY2tldFxuICAgICAgICAgIGhyZWYgPSBocmVmLnNsaWNlKDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhyZWYgPSBocmVmLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dExpbmsoY2FwLCB7XG4gICAgICAgIGhyZWY6IGhyZWYgPyBocmVmLnJlcGxhY2UodGhpcy5ydWxlcy5pbmxpbmUuX2VzY2FwZXMsICckMScpIDogaHJlZixcbiAgICAgICAgdGl0bGU6IHRpdGxlID8gdGl0bGUucmVwbGFjZSh0aGlzLnJ1bGVzLmlubGluZS5fZXNjYXBlcywgJyQxJykgOiB0aXRsZVxuICAgICAgfSwgY2FwWzBdLCB0aGlzLmxleGVyKTtcbiAgICB9XG4gIH1cblxuICByZWZsaW5rKHNyYywgbGlua3MpIHtcbiAgICBsZXQgY2FwO1xuICAgIGlmICgoY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUucmVmbGluay5leGVjKHNyYykpXG4gICAgICAgIHx8IChjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS5ub2xpbmsuZXhlYyhzcmMpKSkge1xuICAgICAgbGV0IGxpbmsgPSAoY2FwWzJdIHx8IGNhcFsxXSkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgbGluayA9IGxpbmtzW2xpbmsudG9Mb3dlckNhc2UoKV07XG4gICAgICBpZiAoIWxpbmspIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGNhcFswXS5jaGFyQXQoMCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIHJhdzogdGV4dCxcbiAgICAgICAgICB0ZXh0XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0TGluayhjYXAsIGxpbmssIGNhcFswXSwgdGhpcy5sZXhlcik7XG4gICAgfVxuICB9XG5cbiAgZW1TdHJvbmcoc3JjLCBtYXNrZWRTcmMsIHByZXZDaGFyID0gJycpIHtcbiAgICBsZXQgbWF0Y2ggPSB0aGlzLnJ1bGVzLmlubGluZS5lbVN0cm9uZy5sRGVsaW0uZXhlYyhzcmMpO1xuICAgIGlmICghbWF0Y2gpIHJldHVybjtcblxuICAgIC8vIF8gY2FuJ3QgYmUgYmV0d2VlbiB0d28gYWxwaGFudW1lcmljcy4gXFxwe0x9XFxwe059IGluY2x1ZGVzIG5vbi1lbmdsaXNoIGFscGhhYmV0L251bWJlcnMgYXMgd2VsbFxuICAgIGlmIChtYXRjaFszXSAmJiBwcmV2Q2hhci5tYXRjaCgvW1xccHtMfVxccHtOfV0vdSkpIHJldHVybjtcblxuICAgIGNvbnN0IG5leHRDaGFyID0gbWF0Y2hbMV0gfHwgbWF0Y2hbMl0gfHwgJyc7XG5cbiAgICBpZiAoIW5leHRDaGFyIHx8IChuZXh0Q2hhciAmJiAocHJldkNoYXIgPT09ICcnIHx8IHRoaXMucnVsZXMuaW5saW5lLnB1bmN0dWF0aW9uLmV4ZWMocHJldkNoYXIpKSkpIHtcbiAgICAgIGNvbnN0IGxMZW5ndGggPSBtYXRjaFswXS5sZW5ndGggLSAxO1xuICAgICAgbGV0IHJEZWxpbSwgckxlbmd0aCwgZGVsaW1Ub3RhbCA9IGxMZW5ndGgsIG1pZERlbGltVG90YWwgPSAwO1xuXG4gICAgICBjb25zdCBlbmRSZWcgPSBtYXRjaFswXVswXSA9PT0gJyonID8gdGhpcy5ydWxlcy5pbmxpbmUuZW1TdHJvbmcuckRlbGltQXN0IDogdGhpcy5ydWxlcy5pbmxpbmUuZW1TdHJvbmcuckRlbGltVW5kO1xuICAgICAgZW5kUmVnLmxhc3RJbmRleCA9IDA7XG5cbiAgICAgIC8vIENsaXAgbWFza2VkU3JjIHRvIHNhbWUgc2VjdGlvbiBvZiBzdHJpbmcgYXMgc3JjIChtb3ZlIHRvIGxleGVyPylcbiAgICAgIG1hc2tlZFNyYyA9IG1hc2tlZFNyYy5zbGljZSgtMSAqIHNyYy5sZW5ndGggKyBsTGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKChtYXRjaCA9IGVuZFJlZy5leGVjKG1hc2tlZFNyYykpICE9IG51bGwpIHtcbiAgICAgICAgckRlbGltID0gbWF0Y2hbMV0gfHwgbWF0Y2hbMl0gfHwgbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgbWF0Y2hbNl07XG5cbiAgICAgICAgaWYgKCFyRGVsaW0pIGNvbnRpbnVlOyAvLyBza2lwIHNpbmdsZSAqIGluIF9fYWJjKmFiY19fXG5cbiAgICAgICAgckxlbmd0aCA9IHJEZWxpbS5sZW5ndGg7XG5cbiAgICAgICAgaWYgKG1hdGNoWzNdIHx8IG1hdGNoWzRdKSB7IC8vIGZvdW5kIGFub3RoZXIgTGVmdCBEZWxpbVxuICAgICAgICAgIGRlbGltVG90YWwgKz0gckxlbmd0aDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIGlmIChtYXRjaFs1XSB8fCBtYXRjaFs2XSkgeyAvLyBlaXRoZXIgTGVmdCBvciBSaWdodCBEZWxpbVxuICAgICAgICAgIGlmIChsTGVuZ3RoICUgMyAmJiAhKChsTGVuZ3RoICsgckxlbmd0aCkgJSAzKSkge1xuICAgICAgICAgICAgbWlkRGVsaW1Ub3RhbCArPSByTGVuZ3RoO1xuICAgICAgICAgICAgY29udGludWU7IC8vIENvbW1vbk1hcmsgRW1waGFzaXMgUnVsZXMgOS0xMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGltVG90YWwgLT0gckxlbmd0aDtcblxuICAgICAgICBpZiAoZGVsaW1Ub3RhbCA+IDApIGNvbnRpbnVlOyAvLyBIYXZlbid0IGZvdW5kIGVub3VnaCBjbG9zaW5nIGRlbGltaXRlcnNcblxuICAgICAgICAvLyBSZW1vdmUgZXh0cmEgY2hhcmFjdGVycy4gKmEqKiogLT4gKmEqXG4gICAgICAgIHJMZW5ndGggPSBNYXRoLm1pbihyTGVuZ3RoLCByTGVuZ3RoICsgZGVsaW1Ub3RhbCArIG1pZERlbGltVG90YWwpO1xuXG4gICAgICAgIGNvbnN0IHJhdyA9IHNyYy5zbGljZSgwLCBsTGVuZ3RoICsgbWF0Y2guaW5kZXggKyAobWF0Y2hbMF0ubGVuZ3RoIC0gckRlbGltLmxlbmd0aCkgKyByTGVuZ3RoKTtcblxuICAgICAgICAvLyBDcmVhdGUgYGVtYCBpZiBzbWFsbGVzdCBkZWxpbWl0ZXIgaGFzIG9kZCBjaGFyIGNvdW50LiAqYSoqKlxuICAgICAgICBpZiAoTWF0aC5taW4obExlbmd0aCwgckxlbmd0aCkgJSAyKSB7XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHJhdy5zbGljZSgxLCAtMSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdlbScsXG4gICAgICAgICAgICByYXcsXG4gICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZVRva2Vucyh0ZXh0KVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgJ3N0cm9uZycgaWYgc21hbGxlc3QgZGVsaW1pdGVyIGhhcyBldmVuIGNoYXIgY291bnQuICoqYSoqKlxuICAgICAgICBjb25zdCB0ZXh0ID0gcmF3LnNsaWNlKDIsIC0yKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiAnc3Ryb25nJyxcbiAgICAgICAgICByYXcsXG4gICAgICAgICAgdGV4dCxcbiAgICAgICAgICB0b2tlbnM6IHRoaXMubGV4ZXIuaW5saW5lVG9rZW5zKHRleHQpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29kZXNwYW4oc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUuY29kZS5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgbGV0IHRleHQgPSBjYXBbMl0ucmVwbGFjZSgvXFxuL2csICcgJyk7XG4gICAgICBjb25zdCBoYXNOb25TcGFjZUNoYXJzID0gL1teIF0vLnRlc3QodGV4dCk7XG4gICAgICBjb25zdCBoYXNTcGFjZUNoYXJzT25Cb3RoRW5kcyA9IC9eIC8udGVzdCh0ZXh0KSAmJiAvICQvLnRlc3QodGV4dCk7XG4gICAgICBpZiAoaGFzTm9uU3BhY2VDaGFycyAmJiBoYXNTcGFjZUNoYXJzT25Cb3RoRW5kcykge1xuICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMSwgdGV4dC5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIHRleHQgPSBlc2NhcGUodGV4dCwgdHJ1ZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29kZXNwYW4nLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdGV4dFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBicihzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS5ici5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2JyJyxcbiAgICAgICAgcmF3OiBjYXBbMF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgZGVsKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLmRlbC5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2RlbCcsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0ZXh0OiBjYXBbMl0sXG4gICAgICAgIHRva2VuczogdGhpcy5sZXhlci5pbmxpbmVUb2tlbnMoY2FwWzJdKVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhdXRvbGluayhzcmMsIG1hbmdsZSkge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLmF1dG9saW5rLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBsZXQgdGV4dCwgaHJlZjtcbiAgICAgIGlmIChjYXBbMl0gPT09ICdAJykge1xuICAgICAgICB0ZXh0ID0gZXNjYXBlKHRoaXMub3B0aW9ucy5tYW5nbGUgPyBtYW5nbGUoY2FwWzFdKSA6IGNhcFsxXSk7XG4gICAgICAgIGhyZWYgPSAnbWFpbHRvOicgKyB0ZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGV4dCA9IGVzY2FwZShjYXBbMV0pO1xuICAgICAgICBocmVmID0gdGV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgaHJlZixcbiAgICAgICAgdG9rZW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcmF3OiB0ZXh0LFxuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICB1cmwoc3JjLCBtYW5nbGUpIHtcbiAgICBsZXQgY2FwO1xuICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS51cmwuZXhlYyhzcmMpKSB7XG4gICAgICBsZXQgdGV4dCwgaHJlZjtcbiAgICAgIGlmIChjYXBbMl0gPT09ICdAJykge1xuICAgICAgICB0ZXh0ID0gZXNjYXBlKHRoaXMub3B0aW9ucy5tYW5nbGUgPyBtYW5nbGUoY2FwWzBdKSA6IGNhcFswXSk7XG4gICAgICAgIGhyZWYgPSAnbWFpbHRvOicgKyB0ZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZG8gZXh0ZW5kZWQgYXV0b2xpbmsgcGF0aCB2YWxpZGF0aW9uXG4gICAgICAgIGxldCBwcmV2Q2FwWmVybztcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHByZXZDYXBaZXJvID0gY2FwWzBdO1xuICAgICAgICAgIGNhcFswXSA9IHRoaXMucnVsZXMuaW5saW5lLl9iYWNrcGVkYWwuZXhlYyhjYXBbMF0pWzBdO1xuICAgICAgICB9IHdoaWxlIChwcmV2Q2FwWmVybyAhPT0gY2FwWzBdKTtcbiAgICAgICAgdGV4dCA9IGVzY2FwZShjYXBbMF0pO1xuICAgICAgICBpZiAoY2FwWzFdID09PSAnd3d3LicpIHtcbiAgICAgICAgICBocmVmID0gJ2h0dHA6Ly8nICsgY2FwWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhyZWYgPSBjYXBbMF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdsaW5rJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRleHQsXG4gICAgICAgIGhyZWYsXG4gICAgICAgIHRva2VuczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHJhdzogdGV4dCxcbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgaW5saW5lVGV4dChzcmMsIHNtYXJ0eXBhbnRzKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUudGV4dC5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgbGV0IHRleHQ7XG4gICAgICBpZiAodGhpcy5sZXhlci5zdGF0ZS5pblJhd0Jsb2NrKSB7XG4gICAgICAgIHRleHQgPSB0aGlzLm9wdGlvbnMuc2FuaXRpemUgPyAodGhpcy5vcHRpb25zLnNhbml0aXplciA/IHRoaXMub3B0aW9ucy5zYW5pdGl6ZXIoY2FwWzBdKSA6IGVzY2FwZShjYXBbMF0pKSA6IGNhcFswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRleHQgPSBlc2NhcGUodGhpcy5vcHRpb25zLnNtYXJ0eXBhbnRzID8gc21hcnR5cGFudHMoY2FwWzBdKSA6IGNhcFswXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0ZXh0XG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEJsb2NrLUxldmVsIEdyYW1tYXJcbiAqL1xuY29uc3QgYmxvY2sgPSB7XG4gIG5ld2xpbmU6IC9eKD86ICooPzpcXG58JCkpKy8sXG4gIGNvZGU6IC9eKCB7NH1bXlxcbl0rKD86XFxuKD86ICooPzpcXG58JCkpKik/KSsvLFxuICBmZW5jZXM6IC9eIHswLDN9KGB7Myx9KD89W15gXFxuXSooPzpcXG58JCkpfH57Myx9KShbXlxcbl0qKSg/OlxcbnwkKSg/OnwoW1xcc1xcU10qPykoPzpcXG58JCkpKD86IHswLDN9XFwxW35gXSogKig/PVxcbnwkKXwkKS8sXG4gIGhyOiAvXiB7MCwzfSgoPzotW1xcdCBdKil7Myx9fCg/Ol9bIFxcdF0qKXszLH18KD86XFwqWyBcXHRdKil7Myx9KSg/Olxcbit8JCkvLFxuICBoZWFkaW5nOiAvXiB7MCwzfSgjezEsNn0pKD89XFxzfCQpKC4qKSg/Olxcbit8JCkvLFxuICBibG9ja3F1b3RlOiAvXiggezAsM30+ID8ocGFyYWdyYXBofFteXFxuXSopKD86XFxufCQpKSsvLFxuICBsaXN0OiAvXiggezAsM31idWxsKShbIFxcdF1bXlxcbl0rPyk/KD86XFxufCQpLyxcbiAgaHRtbDogJ14gezAsM30oPzonIC8vIG9wdGlvbmFsIGluZGVudGF0aW9uXG4gICAgKyAnPChzY3JpcHR8cHJlfHN0eWxlfHRleHRhcmVhKVtcXFxccz5dW1xcXFxzXFxcXFNdKj8oPzo8L1xcXFwxPlteXFxcXG5dKlxcXFxuK3wkKScgLy8gKDEpXG4gICAgKyAnfGNvbW1lbnRbXlxcXFxuXSooXFxcXG4rfCQpJyAvLyAoMilcbiAgICArICd8PFxcXFw/W1xcXFxzXFxcXFNdKj8oPzpcXFxcPz5cXFxcbip8JCknIC8vICgzKVxuICAgICsgJ3w8IVtBLVpdW1xcXFxzXFxcXFNdKj8oPzo+XFxcXG4qfCQpJyAvLyAoNClcbiAgICArICd8PCFcXFxcW0NEQVRBXFxcXFtbXFxcXHNcXFxcU10qPyg/OlxcXFxdXFxcXF0+XFxcXG4qfCQpJyAvLyAoNSlcbiAgICArICd8PC8/KHRhZykoPzogK3xcXFxcbnwvPz4pW1xcXFxzXFxcXFNdKj8oPzooPzpcXFxcbiAqKStcXFxcbnwkKScgLy8gKDYpXG4gICAgKyAnfDwoPyFzY3JpcHR8cHJlfHN0eWxlfHRleHRhcmVhKShbYS16XVtcXFxcdy1dKikoPzphdHRyaWJ1dGUpKj8gKi8/Pig/PVsgXFxcXHRdKig/OlxcXFxufCQpKVtcXFxcc1xcXFxTXSo/KD86KD86XFxcXG4gKikrXFxcXG58JCknIC8vICg3KSBvcGVuIHRhZ1xuICAgICsgJ3w8Lyg/IXNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWEpW2Etel1bXFxcXHctXSpcXFxccyo+KD89WyBcXFxcdF0qKD86XFxcXG58JCkpW1xcXFxzXFxcXFNdKj8oPzooPzpcXFxcbiAqKStcXFxcbnwkKScgLy8gKDcpIGNsb3NpbmcgdGFnXG4gICAgKyAnKScsXG4gIGRlZjogL14gezAsM31cXFsobGFiZWwpXFxdOiAqKD86XFxuICopPyhbXjxcXHNdW15cXHNdKnw8Lio/PikoPzooPzogKyg/OlxcbiAqKT98ICpcXG4gKikodGl0bGUpKT8gKig/Olxcbit8JCkvLFxuICB0YWJsZTogbm9vcFRlc3QsXG4gIGxoZWFkaW5nOiAvXigoPzoufFxcbig/IVxcbikpKz8pXFxuIHswLDN9KD0rfC0rKSAqKD86XFxuK3wkKS8sXG4gIC8vIHJlZ2V4IHRlbXBsYXRlLCBwbGFjZWhvbGRlcnMgd2lsbCBiZSByZXBsYWNlZCBhY2NvcmRpbmcgdG8gZGlmZmVyZW50IHBhcmFncmFwaFxuICAvLyBpbnRlcnJ1cHRpb24gcnVsZXMgb2YgY29tbW9ubWFyayBhbmQgdGhlIG9yaWdpbmFsIG1hcmtkb3duIHNwZWM6XG4gIF9wYXJhZ3JhcGg6IC9eKFteXFxuXSsoPzpcXG4oPyFocnxoZWFkaW5nfGxoZWFkaW5nfGJsb2NrcXVvdGV8ZmVuY2VzfGxpc3R8aHRtbHx0YWJsZXwgK1xcbilbXlxcbl0rKSopLyxcbiAgdGV4dDogL15bXlxcbl0rL1xufTtcblxuYmxvY2suX2xhYmVsID0gLyg/IVxccypcXF0pKD86XFxcXC58W15cXFtcXF1cXFxcXSkrLztcbmJsb2NrLl90aXRsZSA9IC8oPzpcIig/OlxcXFxcIj98W15cIlxcXFxdKSpcInwnW14nXFxuXSooPzpcXG5bXidcXG5dKykqXFxuPyd8XFwoW14oKV0qXFwpKS87XG5ibG9jay5kZWYgPSBlZGl0KGJsb2NrLmRlZilcbiAgLnJlcGxhY2UoJ2xhYmVsJywgYmxvY2suX2xhYmVsKVxuICAucmVwbGFjZSgndGl0bGUnLCBibG9jay5fdGl0bGUpXG4gIC5nZXRSZWdleCgpO1xuXG5ibG9jay5idWxsZXQgPSAvKD86WyorLV18XFxkezEsOX1bLildKS87XG5ibG9jay5saXN0SXRlbVN0YXJ0ID0gZWRpdCgvXiggKikoYnVsbCkgKi8pXG4gIC5yZXBsYWNlKCdidWxsJywgYmxvY2suYnVsbGV0KVxuICAuZ2V0UmVnZXgoKTtcblxuYmxvY2subGlzdCA9IGVkaXQoYmxvY2subGlzdClcbiAgLnJlcGxhY2UoL2J1bGwvZywgYmxvY2suYnVsbGV0KVxuICAucmVwbGFjZSgnaHInLCAnXFxcXG4rKD89XFxcXDE/KD86KD86LSAqKXszLH18KD86XyAqKXszLH18KD86XFxcXCogKil7Myx9KSg/OlxcXFxuK3wkKSknKVxuICAucmVwbGFjZSgnZGVmJywgJ1xcXFxuKyg/PScgKyBibG9jay5kZWYuc291cmNlICsgJyknKVxuICAuZ2V0UmVnZXgoKTtcblxuYmxvY2suX3RhZyA9ICdhZGRyZXNzfGFydGljbGV8YXNpZGV8YmFzZXxiYXNlZm9udHxibG9ja3F1b3RlfGJvZHl8Y2FwdGlvbidcbiAgKyAnfGNlbnRlcnxjb2x8Y29sZ3JvdXB8ZGR8ZGV0YWlsc3xkaWFsb2d8ZGlyfGRpdnxkbHxkdHxmaWVsZHNldHxmaWdjYXB0aW9uJ1xuICArICd8ZmlndXJlfGZvb3Rlcnxmb3JtfGZyYW1lfGZyYW1lc2V0fGhbMS02XXxoZWFkfGhlYWRlcnxocnxodG1sfGlmcmFtZSdcbiAgKyAnfGxlZ2VuZHxsaXxsaW5rfG1haW58bWVudXxtZW51aXRlbXxtZXRhfG5hdnxub2ZyYW1lc3xvbHxvcHRncm91cHxvcHRpb24nXG4gICsgJ3xwfHBhcmFtfHNlY3Rpb258c291cmNlfHN1bW1hcnl8dGFibGV8dGJvZHl8dGR8dGZvb3R8dGh8dGhlYWR8dGl0bGV8dHInXG4gICsgJ3x0cmFja3x1bCc7XG5ibG9jay5fY29tbWVudCA9IC88IS0tKD8hLT8+KVtcXHNcXFNdKj8oPzotLT58JCkvO1xuYmxvY2suaHRtbCA9IGVkaXQoYmxvY2suaHRtbCwgJ2knKVxuICAucmVwbGFjZSgnY29tbWVudCcsIGJsb2NrLl9jb21tZW50KVxuICAucmVwbGFjZSgndGFnJywgYmxvY2suX3RhZylcbiAgLnJlcGxhY2UoJ2F0dHJpYnV0ZScsIC8gK1thLXpBLVo6X11bXFx3LjotXSooPzogKj0gKlwiW15cIlxcbl0qXCJ8ICo9IConW14nXFxuXSonfCAqPSAqW15cXHNcIic9PD5gXSspPy8pXG4gIC5nZXRSZWdleCgpO1xuXG5ibG9jay5wYXJhZ3JhcGggPSBlZGl0KGJsb2NrLl9wYXJhZ3JhcGgpXG4gIC5yZXBsYWNlKCdocicsIGJsb2NrLmhyKVxuICAucmVwbGFjZSgnaGVhZGluZycsICcgezAsM30jezEsNn0gJylcbiAgLnJlcGxhY2UoJ3xsaGVhZGluZycsICcnKSAvLyBzZXRleCBoZWFkaW5ncyBkb24ndCBpbnRlcnJ1cHQgY29tbW9ubWFyayBwYXJhZ3JhcGhzXG4gIC5yZXBsYWNlKCd8dGFibGUnLCAnJylcbiAgLnJlcGxhY2UoJ2Jsb2NrcXVvdGUnLCAnIHswLDN9PicpXG4gIC5yZXBsYWNlKCdmZW5jZXMnLCAnIHswLDN9KD86YHszLH0oPz1bXmBcXFxcbl0qXFxcXG4pfH57Myx9KVteXFxcXG5dKlxcXFxuJylcbiAgLnJlcGxhY2UoJ2xpc3QnLCAnIHswLDN9KD86WyorLV18MVsuKV0pICcpIC8vIG9ubHkgbGlzdHMgc3RhcnRpbmcgZnJvbSAxIGNhbiBpbnRlcnJ1cHRcbiAgLnJlcGxhY2UoJ2h0bWwnLCAnPC8/KD86dGFnKSg/OiArfFxcXFxufC8/Pil8PCg/OnNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWF8IS0tKScpXG4gIC5yZXBsYWNlKCd0YWcnLCBibG9jay5fdGFnKSAvLyBwYXJzIGNhbiBiZSBpbnRlcnJ1cHRlZCBieSB0eXBlICg2KSBodG1sIGJsb2Nrc1xuICAuZ2V0UmVnZXgoKTtcblxuYmxvY2suYmxvY2txdW90ZSA9IGVkaXQoYmxvY2suYmxvY2txdW90ZSlcbiAgLnJlcGxhY2UoJ3BhcmFncmFwaCcsIGJsb2NrLnBhcmFncmFwaClcbiAgLmdldFJlZ2V4KCk7XG5cbi8qKlxuICogTm9ybWFsIEJsb2NrIEdyYW1tYXJcbiAqL1xuXG5ibG9jay5ub3JtYWwgPSB7IC4uLmJsb2NrIH07XG5cbi8qKlxuICogR0ZNIEJsb2NrIEdyYW1tYXJcbiAqL1xuXG5ibG9jay5nZm0gPSB7XG4gIC4uLmJsb2NrLm5vcm1hbCxcbiAgdGFibGU6ICdeICooW15cXFxcbiBdLipcXFxcfC4qKVxcXFxuJyAvLyBIZWFkZXJcbiAgICArICcgezAsM30oPzpcXFxcfCAqKT8oOj8tKzo/ICooPzpcXFxcfCAqOj8tKzo/ICopKikoPzpcXFxcfCAqKT8nIC8vIEFsaWduXG4gICAgKyAnKD86XFxcXG4oKD86KD8hICpcXFxcbnxocnxoZWFkaW5nfGJsb2NrcXVvdGV8Y29kZXxmZW5jZXN8bGlzdHxodG1sKS4qKD86XFxcXG58JCkpKilcXFxcbip8JCknIC8vIENlbGxzXG59O1xuXG5ibG9jay5nZm0udGFibGUgPSBlZGl0KGJsb2NrLmdmbS50YWJsZSlcbiAgLnJlcGxhY2UoJ2hyJywgYmxvY2suaHIpXG4gIC5yZXBsYWNlKCdoZWFkaW5nJywgJyB7MCwzfSN7MSw2fSAnKVxuICAucmVwbGFjZSgnYmxvY2txdW90ZScsICcgezAsM30+JylcbiAgLnJlcGxhY2UoJ2NvZGUnLCAnIHs0fVteXFxcXG5dJylcbiAgLnJlcGxhY2UoJ2ZlbmNlcycsICcgezAsM30oPzpgezMsfSg/PVteYFxcXFxuXSpcXFxcbil8fnszLH0pW15cXFxcbl0qXFxcXG4nKVxuICAucmVwbGFjZSgnbGlzdCcsICcgezAsM30oPzpbKistXXwxWy4pXSkgJykgLy8gb25seSBsaXN0cyBzdGFydGluZyBmcm9tIDEgY2FuIGludGVycnVwdFxuICAucmVwbGFjZSgnaHRtbCcsICc8Lz8oPzp0YWcpKD86ICt8XFxcXG58Lz8+KXw8KD86c2NyaXB0fHByZXxzdHlsZXx0ZXh0YXJlYXwhLS0pJylcbiAgLnJlcGxhY2UoJ3RhZycsIGJsb2NrLl90YWcpIC8vIHRhYmxlcyBjYW4gYmUgaW50ZXJydXB0ZWQgYnkgdHlwZSAoNikgaHRtbCBibG9ja3NcbiAgLmdldFJlZ2V4KCk7XG5cbmJsb2NrLmdmbS5wYXJhZ3JhcGggPSBlZGl0KGJsb2NrLl9wYXJhZ3JhcGgpXG4gIC5yZXBsYWNlKCdocicsIGJsb2NrLmhyKVxuICAucmVwbGFjZSgnaGVhZGluZycsICcgezAsM30jezEsNn0gJylcbiAgLnJlcGxhY2UoJ3xsaGVhZGluZycsICcnKSAvLyBzZXRleCBoZWFkaW5ncyBkb24ndCBpbnRlcnJ1cHQgY29tbW9ubWFyayBwYXJhZ3JhcGhzXG4gIC5yZXBsYWNlKCd0YWJsZScsIGJsb2NrLmdmbS50YWJsZSkgLy8gaW50ZXJydXB0IHBhcmFncmFwaHMgd2l0aCB0YWJsZVxuICAucmVwbGFjZSgnYmxvY2txdW90ZScsICcgezAsM30+JylcbiAgLnJlcGxhY2UoJ2ZlbmNlcycsICcgezAsM30oPzpgezMsfSg/PVteYFxcXFxuXSpcXFxcbil8fnszLH0pW15cXFxcbl0qXFxcXG4nKVxuICAucmVwbGFjZSgnbGlzdCcsICcgezAsM30oPzpbKistXXwxWy4pXSkgJykgLy8gb25seSBsaXN0cyBzdGFydGluZyBmcm9tIDEgY2FuIGludGVycnVwdFxuICAucmVwbGFjZSgnaHRtbCcsICc8Lz8oPzp0YWcpKD86ICt8XFxcXG58Lz8+KXw8KD86c2NyaXB0fHByZXxzdHlsZXx0ZXh0YXJlYXwhLS0pJylcbiAgLnJlcGxhY2UoJ3RhZycsIGJsb2NrLl90YWcpIC8vIHBhcnMgY2FuIGJlIGludGVycnVwdGVkIGJ5IHR5cGUgKDYpIGh0bWwgYmxvY2tzXG4gIC5nZXRSZWdleCgpO1xuLyoqXG4gKiBQZWRhbnRpYyBncmFtbWFyIChvcmlnaW5hbCBKb2huIEdydWJlcidzIGxvb3NlIG1hcmtkb3duIHNwZWNpZmljYXRpb24pXG4gKi9cblxuYmxvY2sucGVkYW50aWMgPSB7XG4gIC4uLmJsb2NrLm5vcm1hbCxcbiAgaHRtbDogZWRpdChcbiAgICAnXiAqKD86Y29tbWVudCAqKD86XFxcXG58XFxcXHMqJCknXG4gICAgKyAnfDwodGFnKVtcXFxcc1xcXFxTXSs/PC9cXFxcMT4gKig/OlxcXFxuezIsfXxcXFxccyokKScgLy8gY2xvc2VkIHRhZ1xuICAgICsgJ3w8dGFnKD86XCJbXlwiXSpcInxcXCdbXlxcJ10qXFwnfFxcXFxzW15cXCdcIi8+XFxcXHNdKikqPy8/PiAqKD86XFxcXG57Mix9fFxcXFxzKiQpKScpXG4gICAgLnJlcGxhY2UoJ2NvbW1lbnQnLCBibG9jay5fY29tbWVudClcbiAgICAucmVwbGFjZSgvdGFnL2csICcoPyEoPzonXG4gICAgICArICdhfGVtfHN0cm9uZ3xzbWFsbHxzfGNpdGV8cXxkZm58YWJicnxkYXRhfHRpbWV8Y29kZXx2YXJ8c2FtcHxrYmR8c3ViJ1xuICAgICAgKyAnfHN1cHxpfGJ8dXxtYXJrfHJ1Ynl8cnR8cnB8YmRpfGJkb3xzcGFufGJyfHdicnxpbnN8ZGVsfGltZyknXG4gICAgICArICdcXFxcYilcXFxcdysoPyE6fFteXFxcXHdcXFxcc0BdKkApXFxcXGInKVxuICAgIC5nZXRSZWdleCgpLFxuICBkZWY6IC9eICpcXFsoW15cXF1dKylcXF06ICo8PyhbXlxccz5dKyk+Pyg/OiArKFtcIihdW15cXG5dK1tcIildKSk/ICooPzpcXG4rfCQpLyxcbiAgaGVhZGluZzogL14oI3sxLDZ9KSguKikoPzpcXG4rfCQpLyxcbiAgZmVuY2VzOiBub29wVGVzdCwgLy8gZmVuY2VzIG5vdCBzdXBwb3J0ZWRcbiAgbGhlYWRpbmc6IC9eKC4rPylcXG4gezAsM30oPSt8LSspICooPzpcXG4rfCQpLyxcbiAgcGFyYWdyYXBoOiBlZGl0KGJsb2NrLm5vcm1hbC5fcGFyYWdyYXBoKVxuICAgIC5yZXBsYWNlKCdocicsIGJsb2NrLmhyKVxuICAgIC5yZXBsYWNlKCdoZWFkaW5nJywgJyAqI3sxLDZ9ICpbXlxcbl0nKVxuICAgIC5yZXBsYWNlKCdsaGVhZGluZycsIGJsb2NrLmxoZWFkaW5nKVxuICAgIC5yZXBsYWNlKCdibG9ja3F1b3RlJywgJyB7MCwzfT4nKVxuICAgIC5yZXBsYWNlKCd8ZmVuY2VzJywgJycpXG4gICAgLnJlcGxhY2UoJ3xsaXN0JywgJycpXG4gICAgLnJlcGxhY2UoJ3xodG1sJywgJycpXG4gICAgLmdldFJlZ2V4KClcbn07XG5cbi8qKlxuICogSW5saW5lLUxldmVsIEdyYW1tYXJcbiAqL1xuY29uc3QgaW5saW5lID0ge1xuICBlc2NhcGU6IC9eXFxcXChbIVwiIyQlJicoKSorLFxcLS4vOjs8PT4/QFxcW1xcXVxcXFxeX2B7fH1+XSkvLFxuICBhdXRvbGluazogL148KHNjaGVtZTpbXlxcc1xceDAwLVxceDFmPD5dKnxlbWFpbCk+LyxcbiAgdXJsOiBub29wVGVzdCxcbiAgdGFnOiAnXmNvbW1lbnQnXG4gICAgKyAnfF48L1thLXpBLVpdW1xcXFx3Oi1dKlxcXFxzKj4nIC8vIHNlbGYtY2xvc2luZyB0YWdcbiAgICArICd8XjxbYS16QS1aXVtcXFxcdy1dKig/OmF0dHJpYnV0ZSkqP1xcXFxzKi8/PicgLy8gb3BlbiB0YWdcbiAgICArICd8XjxcXFxcP1tcXFxcc1xcXFxTXSo/XFxcXD8+JyAvLyBwcm9jZXNzaW5nIGluc3RydWN0aW9uLCBlLmcuIDw/cGhwID8+XG4gICAgKyAnfF48IVthLXpBLVpdK1xcXFxzW1xcXFxzXFxcXFNdKj8+JyAvLyBkZWNsYXJhdGlvbiwgZS5nLiA8IURPQ1RZUEUgaHRtbD5cbiAgICArICd8XjwhXFxcXFtDREFUQVxcXFxbW1xcXFxzXFxcXFNdKj9cXFxcXVxcXFxdPicsIC8vIENEQVRBIHNlY3Rpb25cbiAgbGluazogL14hP1xcWyhsYWJlbClcXF1cXChcXHMqKGhyZWYpKD86XFxzKyh0aXRsZSkpP1xccypcXCkvLFxuICByZWZsaW5rOiAvXiE/XFxbKGxhYmVsKVxcXVxcWyhyZWYpXFxdLyxcbiAgbm9saW5rOiAvXiE/XFxbKHJlZilcXF0oPzpcXFtcXF0pPy8sXG4gIHJlZmxpbmtTZWFyY2g6ICdyZWZsaW5rfG5vbGluayg/IVxcXFwoKScsXG4gIGVtU3Ryb25nOiB7XG4gICAgbERlbGltOiAvXig/OlxcKisoPzooW3B1bmN0X10pfFteXFxzKl0pKXxeXysoPzooW3B1bmN0Kl0pfChbXlxcc19dKSkvLFxuICAgIC8vICAgICAgICAoMSkgYW5kICgyKSBjYW4gb25seSBiZSBhIFJpZ2h0IERlbGltaXRlci4gKDMpIGFuZCAoNCkgY2FuIG9ubHkgYmUgTGVmdC4gICg1KSBhbmQgKDYpIGNhbiBiZSBlaXRoZXIgTGVmdCBvciBSaWdodC5cbiAgICAvLyAgICAgICAgICAoKSBTa2lwIG9ycGhhbiBpbnNpZGUgc3Ryb25nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKSBDb25zdW1lIHRvIGRlbGltICAgICAoMSkgIyoqKiAgICAgICAgICAgICAgICAoMikgYSoqKiMsIGEqKiogICAgICAgICAgICAgICAgICAgICAgICAgICAgICgzKSAjKioqYSwgKioqYSAgICAgICAgICAgICAgICAgKDQpICoqKiMgICAgICAgICAgICAgICg1KSAjKioqIyAgICAgICAgICAgICAgICAgKDYpIGEqKiphXG4gICAgckRlbGltQXN0OiAvXig/OlteXypcXFxcXXxcXFxcLikqP1xcX1xcXyg/OlteXypcXFxcXXxcXFxcLikqP1xcKig/OlteXypcXFxcXXxcXFxcLikqPyg/PVxcX1xcXyl8KD86W14qXFxcXF18XFxcXC4pKyg/PVteKl0pfFtwdW5jdF9dKFxcKispKD89W1xcc118JCl8KD86W15wdW5jdCpfXFxzXFxcXF18XFxcXC4pKFxcKispKD89W3B1bmN0X1xcc118JCl8W3B1bmN0X1xcc10oXFwqKykoPz1bXnB1bmN0Kl9cXHNdKXxbXFxzXShcXCorKSg/PVtwdW5jdF9dKXxbcHVuY3RfXShcXCorKSg/PVtwdW5jdF9dKXwoPzpbXnB1bmN0Kl9cXHNcXFxcXXxcXFxcLikoXFwqKykoPz1bXnB1bmN0Kl9cXHNdKS8sXG4gICAgckRlbGltVW5kOiAvXig/OlteXypcXFxcXXxcXFxcLikqP1xcKlxcKig/OlteXypcXFxcXXxcXFxcLikqP1xcXyg/OlteXypcXFxcXXxcXFxcLikqPyg/PVxcKlxcKil8KD86W15fXFxcXF18XFxcXC4pKyg/PVteX10pfFtwdW5jdCpdKFxcXyspKD89W1xcc118JCl8KD86W15wdW5jdCpfXFxzXFxcXF18XFxcXC4pKFxcXyspKD89W3B1bmN0Klxcc118JCl8W3B1bmN0Klxcc10oXFxfKykoPz1bXnB1bmN0Kl9cXHNdKXxbXFxzXShcXF8rKSg/PVtwdW5jdCpdKXxbcHVuY3QqXShcXF8rKSg/PVtwdW5jdCpdKS8gLy8gXi0gTm90IGFsbG93ZWQgZm9yIF9cbiAgfSxcbiAgY29kZTogL14oYCspKFteYF18W15gXVtcXHNcXFNdKj9bXmBdKVxcMSg/IWApLyxcbiAgYnI6IC9eKCB7Mix9fFxcXFwpXFxuKD8hXFxzKiQpLyxcbiAgZGVsOiBub29wVGVzdCxcbiAgdGV4dDogL14oYCt8W15gXSkoPzooPz0gezIsfVxcbil8W1xcc1xcU10qPyg/Oig/PVtcXFxcPCFcXFtgKl9dfFxcYl98JCl8W14gXSg/PSB7Mix9XFxuKSkpLyxcbiAgcHVuY3R1YXRpb246IC9eKFtcXHNwdW5jdHVhdGlvbl0pL1xufTtcblxuLy8gbGlzdCBvZiBwdW5jdHVhdGlvbiBtYXJrcyBmcm9tIENvbW1vbk1hcmsgc3BlY1xuLy8gd2l0aG91dCAqIGFuZCBfIHRvIGhhbmRsZSB0aGUgZGlmZmVyZW50IGVtcGhhc2lzIG1hcmtlcnMgKiBhbmQgX1xuaW5saW5lLl9wdW5jdHVhdGlvbiA9ICchXCIjJCUmXFwnKCkrXFxcXC0uLC86Ozw9Pj9AXFxcXFtcXFxcXWBee3x9fic7XG5pbmxpbmUucHVuY3R1YXRpb24gPSBlZGl0KGlubGluZS5wdW5jdHVhdGlvbikucmVwbGFjZSgvcHVuY3R1YXRpb24vZywgaW5saW5lLl9wdW5jdHVhdGlvbikuZ2V0UmVnZXgoKTtcblxuLy8gc2VxdWVuY2VzIGVtIHNob3VsZCBza2lwIG92ZXIgW3RpdGxlXShsaW5rKSwgYGNvZGVgLCA8aHRtbD5cbmlubGluZS5ibG9ja1NraXAgPSAvXFxbW15cXF1dKj9cXF1cXChbXlxcKV0qP1xcKXxgW15gXSo/YHw8W14+XSo/Pi9nO1xuLy8gbG9va2JlaGluZCBpcyBub3QgYXZhaWxhYmxlIG9uIFNhZmFyaSBhcyBvZiB2ZXJzaW9uIDE2XG4vLyBpbmxpbmUuZXNjYXBlZEVtU3QgPSAvKD88PSg/Ol58W15cXFxcKSg/OlxcXFxbXl0pKilcXFxcWypfXS9nO1xuaW5saW5lLmVzY2FwZWRFbVN0ID0gLyg/Ol58W15cXFxcXSkoPzpcXFxcXFxcXCkqXFxcXFsqX10vZztcblxuaW5saW5lLl9jb21tZW50ID0gZWRpdChibG9jay5fY29tbWVudCkucmVwbGFjZSgnKD86LS0+fCQpJywgJy0tPicpLmdldFJlZ2V4KCk7XG5cbmlubGluZS5lbVN0cm9uZy5sRGVsaW0gPSBlZGl0KGlubGluZS5lbVN0cm9uZy5sRGVsaW0pXG4gIC5yZXBsYWNlKC9wdW5jdC9nLCBpbmxpbmUuX3B1bmN0dWF0aW9uKVxuICAuZ2V0UmVnZXgoKTtcblxuaW5saW5lLmVtU3Ryb25nLnJEZWxpbUFzdCA9IGVkaXQoaW5saW5lLmVtU3Ryb25nLnJEZWxpbUFzdCwgJ2cnKVxuICAucmVwbGFjZSgvcHVuY3QvZywgaW5saW5lLl9wdW5jdHVhdGlvbilcbiAgLmdldFJlZ2V4KCk7XG5cbmlubGluZS5lbVN0cm9uZy5yRGVsaW1VbmQgPSBlZGl0KGlubGluZS5lbVN0cm9uZy5yRGVsaW1VbmQsICdnJylcbiAgLnJlcGxhY2UoL3B1bmN0L2csIGlubGluZS5fcHVuY3R1YXRpb24pXG4gIC5nZXRSZWdleCgpO1xuXG5pbmxpbmUuX2VzY2FwZXMgPSAvXFxcXChbIVwiIyQlJicoKSorLFxcLS4vOjs8PT4/QFxcW1xcXVxcXFxeX2B7fH1+XSkvZztcblxuaW5saW5lLl9zY2hlbWUgPSAvW2EtekEtWl1bYS16QS1aMC05Ky4tXXsxLDMxfS87XG5pbmxpbmUuX2VtYWlsID0gL1thLXpBLVowLTkuISMkJSYnKisvPT9eX2B7fH1+LV0rKEApW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSsoPyFbLV9dKS87XG5pbmxpbmUuYXV0b2xpbmsgPSBlZGl0KGlubGluZS5hdXRvbGluaylcbiAgLnJlcGxhY2UoJ3NjaGVtZScsIGlubGluZS5fc2NoZW1lKVxuICAucmVwbGFjZSgnZW1haWwnLCBpbmxpbmUuX2VtYWlsKVxuICAuZ2V0UmVnZXgoKTtcblxuaW5saW5lLl9hdHRyaWJ1dGUgPSAvXFxzK1thLXpBLVo6X11bXFx3LjotXSooPzpcXHMqPVxccypcIlteXCJdKlwifFxccyo9XFxzKidbXiddKid8XFxzKj1cXHMqW15cXHNcIic9PD5gXSspPy87XG5cbmlubGluZS50YWcgPSBlZGl0KGlubGluZS50YWcpXG4gIC5yZXBsYWNlKCdjb21tZW50JywgaW5saW5lLl9jb21tZW50KVxuICAucmVwbGFjZSgnYXR0cmlidXRlJywgaW5saW5lLl9hdHRyaWJ1dGUpXG4gIC5nZXRSZWdleCgpO1xuXG5pbmxpbmUuX2xhYmVsID0gLyg/OlxcWyg/OlxcXFwufFteXFxbXFxdXFxcXF0pKlxcXXxcXFxcLnxgW15gXSpgfFteXFxbXFxdXFxcXGBdKSo/LztcbmlubGluZS5faHJlZiA9IC88KD86XFxcXC58W15cXG48PlxcXFxdKSs+fFteXFxzXFx4MDAtXFx4MWZdKi87XG5pbmxpbmUuX3RpdGxlID0gL1wiKD86XFxcXFwiP3xbXlwiXFxcXF0pKlwifCcoPzpcXFxcJz98W14nXFxcXF0pKid8XFwoKD86XFxcXFxcKT98W14pXFxcXF0pKlxcKS87XG5cbmlubGluZS5saW5rID0gZWRpdChpbmxpbmUubGluaylcbiAgLnJlcGxhY2UoJ2xhYmVsJywgaW5saW5lLl9sYWJlbClcbiAgLnJlcGxhY2UoJ2hyZWYnLCBpbmxpbmUuX2hyZWYpXG4gIC5yZXBsYWNlKCd0aXRsZScsIGlubGluZS5fdGl0bGUpXG4gIC5nZXRSZWdleCgpO1xuXG5pbmxpbmUucmVmbGluayA9IGVkaXQoaW5saW5lLnJlZmxpbmspXG4gIC5yZXBsYWNlKCdsYWJlbCcsIGlubGluZS5fbGFiZWwpXG4gIC5yZXBsYWNlKCdyZWYnLCBibG9jay5fbGFiZWwpXG4gIC5nZXRSZWdleCgpO1xuXG5pbmxpbmUubm9saW5rID0gZWRpdChpbmxpbmUubm9saW5rKVxuICAucmVwbGFjZSgncmVmJywgYmxvY2suX2xhYmVsKVxuICAuZ2V0UmVnZXgoKTtcblxuaW5saW5lLnJlZmxpbmtTZWFyY2ggPSBlZGl0KGlubGluZS5yZWZsaW5rU2VhcmNoLCAnZycpXG4gIC5yZXBsYWNlKCdyZWZsaW5rJywgaW5saW5lLnJlZmxpbmspXG4gIC5yZXBsYWNlKCdub2xpbmsnLCBpbmxpbmUubm9saW5rKVxuICAuZ2V0UmVnZXgoKTtcblxuLyoqXG4gKiBOb3JtYWwgSW5saW5lIEdyYW1tYXJcbiAqL1xuXG5pbmxpbmUubm9ybWFsID0geyAuLi5pbmxpbmUgfTtcblxuLyoqXG4gKiBQZWRhbnRpYyBJbmxpbmUgR3JhbW1hclxuICovXG5cbmlubGluZS5wZWRhbnRpYyA9IHtcbiAgLi4uaW5saW5lLm5vcm1hbCxcbiAgc3Ryb25nOiB7XG4gICAgc3RhcnQ6IC9eX198XFwqXFwqLyxcbiAgICBtaWRkbGU6IC9eX18oPz1cXFMpKFtcXHNcXFNdKj9cXFMpX18oPyFfKXxeXFwqXFwqKD89XFxTKShbXFxzXFxTXSo/XFxTKVxcKlxcKig/IVxcKikvLFxuICAgIGVuZEFzdDogL1xcKlxcKig/IVxcKikvZyxcbiAgICBlbmRVbmQ6IC9fXyg/IV8pL2dcbiAgfSxcbiAgZW06IHtcbiAgICBzdGFydDogL15ffFxcKi8sXG4gICAgbWlkZGxlOiAvXigpXFwqKD89XFxTKShbXFxzXFxTXSo/XFxTKVxcKig/IVxcKil8Xl8oPz1cXFMpKFtcXHNcXFNdKj9cXFMpXyg/IV8pLyxcbiAgICBlbmRBc3Q6IC9cXCooPyFcXCopL2csXG4gICAgZW5kVW5kOiAvXyg/IV8pL2dcbiAgfSxcbiAgbGluazogZWRpdCgvXiE/XFxbKGxhYmVsKVxcXVxcKCguKj8pXFwpLylcbiAgICAucmVwbGFjZSgnbGFiZWwnLCBpbmxpbmUuX2xhYmVsKVxuICAgIC5nZXRSZWdleCgpLFxuICByZWZsaW5rOiBlZGl0KC9eIT9cXFsobGFiZWwpXFxdXFxzKlxcWyhbXlxcXV0qKVxcXS8pXG4gICAgLnJlcGxhY2UoJ2xhYmVsJywgaW5saW5lLl9sYWJlbClcbiAgICAuZ2V0UmVnZXgoKVxufTtcblxuLyoqXG4gKiBHRk0gSW5saW5lIEdyYW1tYXJcbiAqL1xuXG5pbmxpbmUuZ2ZtID0ge1xuICAuLi5pbmxpbmUubm9ybWFsLFxuICBlc2NhcGU6IGVkaXQoaW5saW5lLmVzY2FwZSkucmVwbGFjZSgnXSknLCAnfnxdKScpLmdldFJlZ2V4KCksXG4gIF9leHRlbmRlZF9lbWFpbDogL1tBLVphLXowLTkuXystXSsoQClbYS16QS1aMC05LV9dKyg/OlxcLlthLXpBLVowLTktX10qW2EtekEtWjAtOV0pKyg/IVstX10pLyxcbiAgdXJsOiAvXigoPzpmdHB8aHR0cHM/KTpcXC9cXC98d3d3XFwuKSg/OlthLXpBLVowLTlcXC1dK1xcLj8pK1teXFxzPF0qfF5lbWFpbC8sXG4gIF9iYWNrcGVkYWw6IC8oPzpbXj8hLiw6OypfJ1wifigpJl0rfFxcKFteKV0qXFwpfCYoPyFbYS16QS1aMC05XSs7JCl8Wz8hLiw6OypfJ1wifildKyg/ISQpKSsvLFxuICBkZWw6IC9eKH5+PykoPz1bXlxcc35dKShbXFxzXFxTXSo/W15cXHN+XSlcXDEoPz1bXn5dfCQpLyxcbiAgdGV4dDogL14oW2B+XSt8W15gfl0pKD86KD89IHsyLH1cXG4pfCg/PVthLXpBLVowLTkuISMkJSYnKitcXC89P19ge1xcfH1+LV0rQCl8W1xcc1xcU10qPyg/Oig/PVtcXFxcPCFcXFtgKn5fXXxcXGJffGh0dHBzPzpcXC9cXC98ZnRwOlxcL1xcL3x3d3dcXC58JCl8W14gXSg/PSB7Mix9XFxuKXxbXmEtekEtWjAtOS4hIyQlJicqK1xcLz0/X2B7XFx8fX4tXSg/PVthLXpBLVowLTkuISMkJSYnKitcXC89P19ge1xcfH1+LV0rQCkpKS9cbn07XG5cbmlubGluZS5nZm0udXJsID0gZWRpdChpbmxpbmUuZ2ZtLnVybCwgJ2knKVxuICAucmVwbGFjZSgnZW1haWwnLCBpbmxpbmUuZ2ZtLl9leHRlbmRlZF9lbWFpbClcbiAgLmdldFJlZ2V4KCk7XG4vKipcbiAqIEdGTSArIExpbmUgQnJlYWtzIElubGluZSBHcmFtbWFyXG4gKi9cblxuaW5saW5lLmJyZWFrcyA9IHtcbiAgLi4uaW5saW5lLmdmbSxcbiAgYnI6IGVkaXQoaW5saW5lLmJyKS5yZXBsYWNlKCd7Mix9JywgJyonKS5nZXRSZWdleCgpLFxuICB0ZXh0OiBlZGl0KGlubGluZS5nZm0udGV4dClcbiAgICAucmVwbGFjZSgnXFxcXGJfJywgJ1xcXFxiX3wgezIsfVxcXFxuJylcbiAgICAucmVwbGFjZSgvXFx7MixcXH0vZywgJyonKVxuICAgIC5nZXRSZWdleCgpXG59O1xuXG4vKipcbiAqIHNtYXJ0eXBhbnRzIHRleHQgcmVwbGFjZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKi9cbmZ1bmN0aW9uIHNtYXJ0eXBhbnRzKHRleHQpIHtcbiAgcmV0dXJuIHRleHRcbiAgICAvLyBlbS1kYXNoZXNcbiAgICAucmVwbGFjZSgvLS0tL2csICdcXHUyMDE0JylcbiAgICAvLyBlbi1kYXNoZXNcbiAgICAucmVwbGFjZSgvLS0vZywgJ1xcdTIwMTMnKVxuICAgIC8vIG9wZW5pbmcgc2luZ2xlc1xuICAgIC5yZXBsYWNlKC8oXnxbLVxcdTIwMTQvKFxcW3tcIlxcc10pJy9nLCAnJDFcXHUyMDE4JylcbiAgICAvLyBjbG9zaW5nIHNpbmdsZXMgJiBhcG9zdHJvcGhlc1xuICAgIC5yZXBsYWNlKC8nL2csICdcXHUyMDE5JylcbiAgICAvLyBvcGVuaW5nIGRvdWJsZXNcbiAgICAucmVwbGFjZSgvKF58Wy1cXHUyMDE0LyhcXFt7XFx1MjAxOFxcc10pXCIvZywgJyQxXFx1MjAxYycpXG4gICAgLy8gY2xvc2luZyBkb3VibGVzXG4gICAgLnJlcGxhY2UoL1wiL2csICdcXHUyMDFkJylcbiAgICAvLyBlbGxpcHNlc1xuICAgIC5yZXBsYWNlKC9cXC57M30vZywgJ1xcdTIwMjYnKTtcbn1cblxuLyoqXG4gKiBtYW5nbGUgZW1haWwgYWRkcmVzc2VzXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICovXG5mdW5jdGlvbiBtYW5nbGUodGV4dCkge1xuICBsZXQgb3V0ID0gJycsXG4gICAgaSxcbiAgICBjaDtcblxuICBjb25zdCBsID0gdGV4dC5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBjaCA9IHRleHQuY2hhckNvZGVBdChpKTtcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgY2ggPSAneCcgKyBjaC50b1N0cmluZygxNik7XG4gICAgfVxuICAgIG91dCArPSAnJiMnICsgY2ggKyAnOyc7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIEJsb2NrIExleGVyXG4gKi9cbmNsYXNzIExleGVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMudG9rZW5zID0gW107XG4gICAgdGhpcy50b2tlbnMubGlua3MgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHM7XG4gICAgdGhpcy5vcHRpb25zLnRva2VuaXplciA9IHRoaXMub3B0aW9ucy50b2tlbml6ZXIgfHwgbmV3IFRva2VuaXplcigpO1xuICAgIHRoaXMudG9rZW5pemVyID0gdGhpcy5vcHRpb25zLnRva2VuaXplcjtcbiAgICB0aGlzLnRva2VuaXplci5vcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIHRoaXMudG9rZW5pemVyLmxleGVyID0gdGhpcztcbiAgICB0aGlzLmlubGluZVF1ZXVlID0gW107XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGluTGluazogZmFsc2UsXG4gICAgICBpblJhd0Jsb2NrOiBmYWxzZSxcbiAgICAgIHRvcDogdHJ1ZVxuICAgIH07XG5cbiAgICBjb25zdCBydWxlcyA9IHtcbiAgICAgIGJsb2NrOiBibG9jay5ub3JtYWwsXG4gICAgICBpbmxpbmU6IGlubGluZS5ub3JtYWxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5wZWRhbnRpYykge1xuICAgICAgcnVsZXMuYmxvY2sgPSBibG9jay5wZWRhbnRpYztcbiAgICAgIHJ1bGVzLmlubGluZSA9IGlubGluZS5wZWRhbnRpYztcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5nZm0pIHtcbiAgICAgIHJ1bGVzLmJsb2NrID0gYmxvY2suZ2ZtO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5icmVha3MpIHtcbiAgICAgICAgcnVsZXMuaW5saW5lID0gaW5saW5lLmJyZWFrcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJ1bGVzLmlubGluZSA9IGlubGluZS5nZm07XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudG9rZW5pemVyLnJ1bGVzID0gcnVsZXM7XG4gIH1cblxuICAvKipcbiAgICogRXhwb3NlIFJ1bGVzXG4gICAqL1xuICBzdGF0aWMgZ2V0IHJ1bGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBibG9jayxcbiAgICAgIGlubGluZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3RhdGljIExleCBNZXRob2RcbiAgICovXG4gIHN0YXRpYyBsZXgoc3JjLCBvcHRpb25zKSB7XG4gICAgY29uc3QgbGV4ZXIgPSBuZXcgTGV4ZXIob3B0aW9ucyk7XG4gICAgcmV0dXJuIGxleGVyLmxleChzcmMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBMZXggSW5saW5lIE1ldGhvZFxuICAgKi9cbiAgc3RhdGljIGxleElubGluZShzcmMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBsZXhlciA9IG5ldyBMZXhlcihvcHRpb25zKTtcbiAgICByZXR1cm4gbGV4ZXIuaW5saW5lVG9rZW5zKHNyYyk7XG4gIH1cblxuICAvKipcbiAgICogUHJlcHJvY2Vzc2luZ1xuICAgKi9cbiAgbGV4KHNyYykge1xuICAgIHNyYyA9IHNyY1xuICAgICAgLnJlcGxhY2UoL1xcclxcbnxcXHIvZywgJ1xcbicpO1xuXG4gICAgdGhpcy5ibG9ja1Rva2VucyhzcmMsIHRoaXMudG9rZW5zKTtcblxuICAgIGxldCBuZXh0O1xuICAgIHdoaWxlIChuZXh0ID0gdGhpcy5pbmxpbmVRdWV1ZS5zaGlmdCgpKSB7XG4gICAgICB0aGlzLmlubGluZVRva2VucyhuZXh0LnNyYywgbmV4dC50b2tlbnMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRva2VucztcbiAgfVxuXG4gIC8qKlxuICAgKiBMZXhpbmdcbiAgICovXG4gIGJsb2NrVG9rZW5zKHNyYywgdG9rZW5zID0gW10pIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljKSB7XG4gICAgICBzcmMgPSBzcmMucmVwbGFjZSgvXFx0L2csICcgICAgJykucmVwbGFjZSgvXiArJC9nbSwgJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcmMgPSBzcmMucmVwbGFjZSgvXiggKikoXFx0KykvZ20sIChfLCBsZWFkaW5nLCB0YWJzKSA9PiB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nICsgJyAgICAnLnJlcGVhdCh0YWJzLmxlbmd0aCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgdG9rZW4sIGxhc3RUb2tlbiwgY3V0U3JjLCBsYXN0UGFyYWdyYXBoQ2xpcHBlZDtcblxuICAgIHdoaWxlIChzcmMpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9uc1xuICAgICAgICAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5ibG9ja1xuICAgICAgICAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5ibG9jay5zb21lKChleHRUb2tlbml6ZXIpID0+IHtcbiAgICAgICAgICBpZiAodG9rZW4gPSBleHRUb2tlbml6ZXIuY2FsbCh7IGxleGVyOiB0aGlzIH0sIHNyYywgdG9rZW5zKSkge1xuICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBuZXdsaW5lXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5zcGFjZShzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIGlmICh0b2tlbi5yYXcubGVuZ3RoID09PSAxICYmIHRva2Vucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gaWYgdGhlcmUncyBhIHNpbmdsZSBcXG4gYXMgYSBzcGFjZXIsIGl0J3MgdGVybWluYXRpbmcgdGhlIGxhc3QgbGluZSxcbiAgICAgICAgICAvLyBzbyBtb3ZlIGl0IHRoZXJlIHNvIHRoYXQgd2UgZG9uJ3QgZ2V0IHVuZWNlc3NhcnkgcGFyYWdyYXBoIHRhZ3NcbiAgICAgICAgICB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdLnJhdyArPSAnXFxuJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGNvZGVcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmNvZGUoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdO1xuICAgICAgICAvLyBBbiBpbmRlbnRlZCBjb2RlIGJsb2NrIGNhbm5vdCBpbnRlcnJ1cHQgYSBwYXJhZ3JhcGguXG4gICAgICAgIGlmIChsYXN0VG9rZW4gJiYgKGxhc3RUb2tlbi50eXBlID09PSAncGFyYWdyYXBoJyB8fCBsYXN0VG9rZW4udHlwZSA9PT0gJ3RleHQnKSkge1xuICAgICAgICAgIGxhc3RUb2tlbi5yYXcgKz0gJ1xcbicgKyB0b2tlbi5yYXc7XG4gICAgICAgICAgbGFzdFRva2VuLnRleHQgKz0gJ1xcbicgKyB0b2tlbi50ZXh0O1xuICAgICAgICAgIHRoaXMuaW5saW5lUXVldWVbdGhpcy5pbmxpbmVRdWV1ZS5sZW5ndGggLSAxXS5zcmMgPSBsYXN0VG9rZW4udGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGZlbmNlc1xuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuZmVuY2VzKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gaGVhZGluZ1xuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuaGVhZGluZyhzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGhyXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5ocihzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGJsb2NrcXVvdGVcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmJsb2NrcXVvdGUoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBsaXN0XG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5saXN0KHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gaHRtbFxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuaHRtbChzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGRlZlxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuZGVmKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgbGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RUb2tlbiAmJiAobGFzdFRva2VuLnR5cGUgPT09ICdwYXJhZ3JhcGgnIHx8IGxhc3RUb2tlbi50eXBlID09PSAndGV4dCcpKSB7XG4gICAgICAgICAgbGFzdFRva2VuLnJhdyArPSAnXFxuJyArIHRva2VuLnJhdztcbiAgICAgICAgICBsYXN0VG9rZW4udGV4dCArPSAnXFxuJyArIHRva2VuLnJhdztcbiAgICAgICAgICB0aGlzLmlubGluZVF1ZXVlW3RoaXMuaW5saW5lUXVldWUubGVuZ3RoIC0gMV0uc3JjID0gbGFzdFRva2VuLnRleHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMudG9rZW5zLmxpbmtzW3Rva2VuLnRhZ10pIHtcbiAgICAgICAgICB0aGlzLnRva2Vucy5saW5rc1t0b2tlbi50YWddID0ge1xuICAgICAgICAgICAgaHJlZjogdG9rZW4uaHJlZixcbiAgICAgICAgICAgIHRpdGxlOiB0b2tlbi50aXRsZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHRhYmxlIChnZm0pXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci50YWJsZShzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGxoZWFkaW5nXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5saGVhZGluZyhzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHRvcC1sZXZlbCBwYXJhZ3JhcGhcbiAgICAgIC8vIHByZXZlbnQgcGFyYWdyYXBoIGNvbnN1bWluZyBleHRlbnNpb25zIGJ5IGNsaXBwaW5nICdzcmMnIHRvIGV4dGVuc2lvbiBzdGFydFxuICAgICAgY3V0U3JjID0gc3JjO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHRlbnNpb25zICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnN0YXJ0QmxvY2spIHtcbiAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSBJbmZpbml0eTtcbiAgICAgICAgY29uc3QgdGVtcFNyYyA9IHNyYy5zbGljZSgxKTtcbiAgICAgICAgbGV0IHRlbXBTdGFydDtcbiAgICAgICAgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuc3RhcnRCbG9jay5mb3JFYWNoKGZ1bmN0aW9uKGdldFN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICB0ZW1wU3RhcnQgPSBnZXRTdGFydEluZGV4LmNhbGwoeyBsZXhlcjogdGhpcyB9LCB0ZW1wU3JjKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRlbXBTdGFydCA9PT0gJ251bWJlcicgJiYgdGVtcFN0YXJ0ID49IDApIHsgc3RhcnRJbmRleCA9IE1hdGgubWluKHN0YXJ0SW5kZXgsIHRlbXBTdGFydCk7IH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzdGFydEluZGV4IDwgSW5maW5pdHkgJiYgc3RhcnRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgY3V0U3JjID0gc3JjLnN1YnN0cmluZygwLCBzdGFydEluZGV4ICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0YXRlLnRvcCAmJiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5wYXJhZ3JhcGgoY3V0U3JjKSkpIHtcbiAgICAgICAgbGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RQYXJhZ3JhcGhDbGlwcGVkICYmIGxhc3RUb2tlbi50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgICAgICAgIGxhc3RUb2tlbi5yYXcgKz0gJ1xcbicgKyB0b2tlbi5yYXc7XG4gICAgICAgICAgbGFzdFRva2VuLnRleHQgKz0gJ1xcbicgKyB0b2tlbi50ZXh0O1xuICAgICAgICAgIHRoaXMuaW5saW5lUXVldWUucG9wKCk7XG4gICAgICAgICAgdGhpcy5pbmxpbmVRdWV1ZVt0aGlzLmlubGluZVF1ZXVlLmxlbmd0aCAtIDFdLnNyYyA9IGxhc3RUb2tlbi50ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0UGFyYWdyYXBoQ2xpcHBlZCA9IChjdXRTcmMubGVuZ3RoICE9PSBzcmMubGVuZ3RoKTtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHRleHRcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLnRleHQoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdFRva2VuICYmIGxhc3RUb2tlbi50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICBsYXN0VG9rZW4ucmF3ICs9ICdcXG4nICsgdG9rZW4ucmF3O1xuICAgICAgICAgIGxhc3RUb2tlbi50ZXh0ICs9ICdcXG4nICsgdG9rZW4udGV4dDtcbiAgICAgICAgICB0aGlzLmlubGluZVF1ZXVlLnBvcCgpO1xuICAgICAgICAgIHRoaXMuaW5saW5lUXVldWVbdGhpcy5pbmxpbmVRdWV1ZS5sZW5ndGggLSAxXS5zcmMgPSBsYXN0VG9rZW4udGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgY29uc3QgZXJyTXNnID0gJ0luZmluaXRlIGxvb3Agb24gYnl0ZTogJyArIHNyYy5jaGFyQ29kZUF0KDApO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyTXNnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyTXNnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc3RhdGUudG9wID0gdHJ1ZTtcbiAgICByZXR1cm4gdG9rZW5zO1xuICB9XG5cbiAgaW5saW5lKHNyYywgdG9rZW5zID0gW10pIHtcbiAgICB0aGlzLmlubGluZVF1ZXVlLnB1c2goeyBzcmMsIHRva2VucyB9KTtcbiAgICByZXR1cm4gdG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIExleGluZy9Db21waWxpbmdcbiAgICovXG4gIGlubGluZVRva2VucyhzcmMsIHRva2VucyA9IFtdKSB7XG4gICAgbGV0IHRva2VuLCBsYXN0VG9rZW4sIGN1dFNyYztcblxuICAgIC8vIFN0cmluZyB3aXRoIGxpbmtzIG1hc2tlZCB0byBhdm9pZCBpbnRlcmZlcmVuY2Ugd2l0aCBlbSBhbmQgc3Ryb25nXG4gICAgbGV0IG1hc2tlZFNyYyA9IHNyYztcbiAgICBsZXQgbWF0Y2g7XG4gICAgbGV0IGtlZXBQcmV2Q2hhciwgcHJldkNoYXI7XG5cbiAgICAvLyBNYXNrIG91dCByZWZsaW5rc1xuICAgIGlmICh0aGlzLnRva2Vucy5saW5rcykge1xuICAgICAgY29uc3QgbGlua3MgPSBPYmplY3Qua2V5cyh0aGlzLnRva2Vucy5saW5rcyk7XG4gICAgICBpZiAobGlua3MubGVuZ3RoID4gMCkge1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gdGhpcy50b2tlbml6ZXIucnVsZXMuaW5saW5lLnJlZmxpbmtTZWFyY2guZXhlYyhtYXNrZWRTcmMpKSAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKGxpbmtzLmluY2x1ZGVzKG1hdGNoWzBdLnNsaWNlKG1hdGNoWzBdLmxhc3RJbmRleE9mKCdbJykgKyAxLCAtMSkpKSB7XG4gICAgICAgICAgICBtYXNrZWRTcmMgPSBtYXNrZWRTcmMuc2xpY2UoMCwgbWF0Y2guaW5kZXgpICsgJ1snICsgcmVwZWF0U3RyaW5nKCdhJywgbWF0Y2hbMF0ubGVuZ3RoIC0gMikgKyAnXScgKyBtYXNrZWRTcmMuc2xpY2UodGhpcy50b2tlbml6ZXIucnVsZXMuaW5saW5lLnJlZmxpbmtTZWFyY2gubGFzdEluZGV4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gTWFzayBvdXQgb3RoZXIgYmxvY2tzXG4gICAgd2hpbGUgKChtYXRjaCA9IHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5ibG9ja1NraXAuZXhlYyhtYXNrZWRTcmMpKSAhPSBudWxsKSB7XG4gICAgICBtYXNrZWRTcmMgPSBtYXNrZWRTcmMuc2xpY2UoMCwgbWF0Y2guaW5kZXgpICsgJ1snICsgcmVwZWF0U3RyaW5nKCdhJywgbWF0Y2hbMF0ubGVuZ3RoIC0gMikgKyAnXScgKyBtYXNrZWRTcmMuc2xpY2UodGhpcy50b2tlbml6ZXIucnVsZXMuaW5saW5lLmJsb2NrU2tpcC5sYXN0SW5kZXgpO1xuICAgIH1cblxuICAgIC8vIE1hc2sgb3V0IGVzY2FwZWQgZW0gJiBzdHJvbmcgZGVsaW1pdGVyc1xuICAgIHdoaWxlICgobWF0Y2ggPSB0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUuZXNjYXBlZEVtU3QuZXhlYyhtYXNrZWRTcmMpKSAhPSBudWxsKSB7XG4gICAgICBtYXNrZWRTcmMgPSBtYXNrZWRTcmMuc2xpY2UoMCwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGggLSAyKSArICcrKycgKyBtYXNrZWRTcmMuc2xpY2UodGhpcy50b2tlbml6ZXIucnVsZXMuaW5saW5lLmVzY2FwZWRFbVN0Lmxhc3RJbmRleCk7XG4gICAgICB0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUuZXNjYXBlZEVtU3QubGFzdEluZGV4LS07XG4gICAgfVxuXG4gICAgd2hpbGUgKHNyYykge1xuICAgICAgaWYgKCFrZWVwUHJldkNoYXIpIHtcbiAgICAgICAgcHJldkNoYXIgPSAnJztcbiAgICAgIH1cbiAgICAgIGtlZXBQcmV2Q2hhciA9IGZhbHNlO1xuXG4gICAgICAvLyBleHRlbnNpb25zXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4dGVuc2lvbnNcbiAgICAgICAgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuaW5saW5lXG4gICAgICAgICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLmlubGluZS5zb21lKChleHRUb2tlbml6ZXIpID0+IHtcbiAgICAgICAgICBpZiAodG9rZW4gPSBleHRUb2tlbml6ZXIuY2FsbCh7IGxleGVyOiB0aGlzIH0sIHNyYywgdG9rZW5zKSkge1xuICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBlc2NhcGVcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmVzY2FwZShzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHRhZ1xuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIudGFnKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgbGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RUb2tlbiAmJiB0b2tlbi50eXBlID09PSAndGV4dCcgJiYgbGFzdFRva2VuLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIGxhc3RUb2tlbi5yYXcgKz0gdG9rZW4ucmF3O1xuICAgICAgICAgIGxhc3RUb2tlbi50ZXh0ICs9IHRva2VuLnRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBsaW5rXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5saW5rKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gcmVmbGluaywgbm9saW5rXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5yZWZsaW5rKHNyYywgdGhpcy50b2tlbnMubGlua3MpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIGxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0VG9rZW4gJiYgdG9rZW4udHlwZSA9PT0gJ3RleHQnICYmIGxhc3RUb2tlbi50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICBsYXN0VG9rZW4ucmF3ICs9IHRva2VuLnJhdztcbiAgICAgICAgICBsYXN0VG9rZW4udGV4dCArPSB0b2tlbi50ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZW0gJiBzdHJvbmdcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmVtU3Ryb25nKHNyYywgbWFza2VkU3JjLCBwcmV2Q2hhcikpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gY29kZVxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuY29kZXNwYW4oc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBiclxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuYnIoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWwgKGdmbSlcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmRlbChzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGF1dG9saW5rXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5hdXRvbGluayhzcmMsIG1hbmdsZSkpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gdXJsIChnZm0pXG4gICAgICBpZiAoIXRoaXMuc3RhdGUuaW5MaW5rICYmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLnVybChzcmMsIG1hbmdsZSkpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHRleHRcbiAgICAgIC8vIHByZXZlbnQgaW5saW5lVGV4dCBjb25zdW1pbmcgZXh0ZW5zaW9ucyBieSBjbGlwcGluZyAnc3JjJyB0byBleHRlbnNpb24gc3RhcnRcbiAgICAgIGN1dFNyYyA9IHNyYztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5zdGFydElubGluZSkge1xuICAgICAgICBsZXQgc3RhcnRJbmRleCA9IEluZmluaXR5O1xuICAgICAgICBjb25zdCB0ZW1wU3JjID0gc3JjLnNsaWNlKDEpO1xuICAgICAgICBsZXQgdGVtcFN0YXJ0O1xuICAgICAgICB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5zdGFydElubGluZS5mb3JFYWNoKGZ1bmN0aW9uKGdldFN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICB0ZW1wU3RhcnQgPSBnZXRTdGFydEluZGV4LmNhbGwoeyBsZXhlcjogdGhpcyB9LCB0ZW1wU3JjKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRlbXBTdGFydCA9PT0gJ251bWJlcicgJiYgdGVtcFN0YXJ0ID49IDApIHsgc3RhcnRJbmRleCA9IE1hdGgubWluKHN0YXJ0SW5kZXgsIHRlbXBTdGFydCk7IH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzdGFydEluZGV4IDwgSW5maW5pdHkgJiYgc3RhcnRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgY3V0U3JjID0gc3JjLnN1YnN0cmluZygwLCBzdGFydEluZGV4ICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmlubGluZVRleHQoY3V0U3JjLCBzbWFydHlwYW50cykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgaWYgKHRva2VuLnJhdy5zbGljZSgtMSkgIT09ICdfJykgeyAvLyBUcmFjayBwcmV2Q2hhciBiZWZvcmUgc3RyaW5nIG9mIF9fX18gc3RhcnRlZFxuICAgICAgICAgIHByZXZDaGFyID0gdG9rZW4ucmF3LnNsaWNlKC0xKTtcbiAgICAgICAgfVxuICAgICAgICBrZWVwUHJldkNoYXIgPSB0cnVlO1xuICAgICAgICBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdFRva2VuICYmIGxhc3RUb2tlbi50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICBsYXN0VG9rZW4ucmF3ICs9IHRva2VuLnJhdztcbiAgICAgICAgICBsYXN0VG9rZW4udGV4dCArPSB0b2tlbi50ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNyYykge1xuICAgICAgICBjb25zdCBlcnJNc2cgPSAnSW5maW5pdGUgbG9vcCBvbiBieXRlOiAnICsgc3JjLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJNc2cpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJNc2cpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VucztcbiAgfVxufVxuXG4vKipcbiAqIFJlbmRlcmVyXG4gKi9cbmNsYXNzIFJlbmRlcmVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHM7XG4gIH1cblxuICBjb2RlKGNvZGUsIGluZm9zdHJpbmcsIGVzY2FwZWQpIHtcbiAgICBjb25zdCBsYW5nID0gKGluZm9zdHJpbmcgfHwgJycpLm1hdGNoKC9cXFMqLylbMF07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5oaWdobGlnaHQpIHtcbiAgICAgIGNvbnN0IG91dCA9IHRoaXMub3B0aW9ucy5oaWdobGlnaHQoY29kZSwgbGFuZyk7XG4gICAgICBpZiAob3V0ICE9IG51bGwgJiYgb3V0ICE9PSBjb2RlKSB7XG4gICAgICAgIGVzY2FwZWQgPSB0cnVlO1xuICAgICAgICBjb2RlID0gb3V0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL1xcbiQvLCAnJykgKyAnXFxuJztcblxuICAgIGlmICghbGFuZykge1xuICAgICAgcmV0dXJuICc8cHJlPjxjb2RlPidcbiAgICAgICAgKyAoZXNjYXBlZCA/IGNvZGUgOiBlc2NhcGUoY29kZSwgdHJ1ZSkpXG4gICAgICAgICsgJzwvY29kZT48L3ByZT5cXG4nO1xuICAgIH1cblxuICAgIHJldHVybiAnPHByZT48Y29kZSBjbGFzcz1cIidcbiAgICAgICsgdGhpcy5vcHRpb25zLmxhbmdQcmVmaXhcbiAgICAgICsgZXNjYXBlKGxhbmcpXG4gICAgICArICdcIj4nXG4gICAgICArIChlc2NhcGVkID8gY29kZSA6IGVzY2FwZShjb2RlLCB0cnVlKSlcbiAgICAgICsgJzwvY29kZT48L3ByZT5cXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBxdW90ZVxuICAgKi9cbiAgYmxvY2txdW90ZShxdW90ZSkge1xuICAgIHJldHVybiBgPGJsb2NrcXVvdGU+XFxuJHtxdW90ZX08L2Jsb2NrcXVvdGU+XFxuYDtcbiAgfVxuXG4gIGh0bWwoaHRtbCkge1xuICAgIHJldHVybiBodG1sO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsZXZlbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmF3XG4gICAqIEBwYXJhbSB7YW55fSBzbHVnZ2VyXG4gICAqL1xuICBoZWFkaW5nKHRleHQsIGxldmVsLCByYXcsIHNsdWdnZXIpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmhlYWRlcklkcykge1xuICAgICAgY29uc3QgaWQgPSB0aGlzLm9wdGlvbnMuaGVhZGVyUHJlZml4ICsgc2x1Z2dlci5zbHVnKHJhdyk7XG4gICAgICByZXR1cm4gYDxoJHtsZXZlbH0gaWQ9XCIke2lkfVwiPiR7dGV4dH08L2gke2xldmVsfT5cXG5gO1xuICAgIH1cblxuICAgIC8vIGlnbm9yZSBJRHNcbiAgICByZXR1cm4gYDxoJHtsZXZlbH0+JHt0ZXh0fTwvaCR7bGV2ZWx9PlxcbmA7XG4gIH1cblxuICBocigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnhodG1sID8gJzxoci8+XFxuJyA6ICc8aHI+XFxuJztcbiAgfVxuXG4gIGxpc3QoYm9keSwgb3JkZXJlZCwgc3RhcnQpIHtcbiAgICBjb25zdCB0eXBlID0gb3JkZXJlZCA/ICdvbCcgOiAndWwnLFxuICAgICAgc3RhcnRhdHQgPSAob3JkZXJlZCAmJiBzdGFydCAhPT0gMSkgPyAoJyBzdGFydD1cIicgKyBzdGFydCArICdcIicpIDogJyc7XG4gICAgcmV0dXJuICc8JyArIHR5cGUgKyBzdGFydGF0dCArICc+XFxuJyArIGJvZHkgKyAnPC8nICsgdHlwZSArICc+XFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKi9cbiAgbGlzdGl0ZW0odGV4dCkge1xuICAgIHJldHVybiBgPGxpPiR7dGV4dH08L2xpPlxcbmA7XG4gIH1cblxuICBjaGVja2JveChjaGVja2VkKSB7XG4gICAgcmV0dXJuICc8aW5wdXQgJ1xuICAgICAgKyAoY2hlY2tlZCA/ICdjaGVja2VkPVwiXCIgJyA6ICcnKVxuICAgICAgKyAnZGlzYWJsZWQ9XCJcIiB0eXBlPVwiY2hlY2tib3hcIidcbiAgICAgICsgKHRoaXMub3B0aW9ucy54aHRtbCA/ICcgLycgOiAnJylcbiAgICAgICsgJz4gJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKi9cbiAgcGFyYWdyYXBoKHRleHQpIHtcbiAgICByZXR1cm4gYDxwPiR7dGV4dH08L3A+XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaGVhZGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBib2R5XG4gICAqL1xuICB0YWJsZShoZWFkZXIsIGJvZHkpIHtcbiAgICBpZiAoYm9keSkgYm9keSA9IGA8dGJvZHk+JHtib2R5fTwvdGJvZHk+YDtcblxuICAgIHJldHVybiAnPHRhYmxlPlxcbidcbiAgICAgICsgJzx0aGVhZD5cXG4nXG4gICAgICArIGhlYWRlclxuICAgICAgKyAnPC90aGVhZD5cXG4nXG4gICAgICArIGJvZHlcbiAgICAgICsgJzwvdGFibGU+XFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGVudFxuICAgKi9cbiAgdGFibGVyb3coY29udGVudCkge1xuICAgIHJldHVybiBgPHRyPlxcbiR7Y29udGVudH08L3RyPlxcbmA7XG4gIH1cblxuICB0YWJsZWNlbGwoY29udGVudCwgZmxhZ3MpIHtcbiAgICBjb25zdCB0eXBlID0gZmxhZ3MuaGVhZGVyID8gJ3RoJyA6ICd0ZCc7XG4gICAgY29uc3QgdGFnID0gZmxhZ3MuYWxpZ25cbiAgICAgID8gYDwke3R5cGV9IGFsaWduPVwiJHtmbGFncy5hbGlnbn1cIj5gXG4gICAgICA6IGA8JHt0eXBlfT5gO1xuICAgIHJldHVybiB0YWcgKyBjb250ZW50ICsgYDwvJHt0eXBlfT5cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIHNwYW4gbGV2ZWwgcmVuZGVyZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICovXG4gIHN0cm9uZyh0ZXh0KSB7XG4gICAgcmV0dXJuIGA8c3Ryb25nPiR7dGV4dH08L3N0cm9uZz5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqL1xuICBlbSh0ZXh0KSB7XG4gICAgcmV0dXJuIGA8ZW0+JHt0ZXh0fTwvZW0+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKi9cbiAgY29kZXNwYW4odGV4dCkge1xuICAgIHJldHVybiBgPGNvZGU+JHt0ZXh0fTwvY29kZT5gO1xuICB9XG5cbiAgYnIoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy54aHRtbCA/ICc8YnIvPicgOiAnPGJyPic7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICovXG4gIGRlbCh0ZXh0KSB7XG4gICAgcmV0dXJuIGA8ZGVsPiR7dGV4dH08L2RlbD5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBocmVmXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKi9cbiAgbGluayhocmVmLCB0aXRsZSwgdGV4dCkge1xuICAgIGhyZWYgPSBjbGVhblVybCh0aGlzLm9wdGlvbnMuc2FuaXRpemUsIHRoaXMub3B0aW9ucy5iYXNlVXJsLCBocmVmKTtcbiAgICBpZiAoaHJlZiA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICAgIGxldCBvdXQgPSAnPGEgaHJlZj1cIicgKyBocmVmICsgJ1wiJztcbiAgICBpZiAodGl0bGUpIHtcbiAgICAgIG91dCArPSAnIHRpdGxlPVwiJyArIHRpdGxlICsgJ1wiJztcbiAgICB9XG4gICAgb3V0ICs9ICc+JyArIHRleHQgKyAnPC9hPic7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaHJlZlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICovXG4gIGltYWdlKGhyZWYsIHRpdGxlLCB0ZXh0KSB7XG4gICAgaHJlZiA9IGNsZWFuVXJsKHRoaXMub3B0aW9ucy5zYW5pdGl6ZSwgdGhpcy5vcHRpb25zLmJhc2VVcmwsIGhyZWYpO1xuICAgIGlmIChocmVmID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG5cbiAgICBsZXQgb3V0ID0gYDxpbWcgc3JjPVwiJHtocmVmfVwiIGFsdD1cIiR7dGV4dH1cImA7XG4gICAgaWYgKHRpdGxlKSB7XG4gICAgICBvdXQgKz0gYCB0aXRsZT1cIiR7dGl0bGV9XCJgO1xuICAgIH1cbiAgICBvdXQgKz0gdGhpcy5vcHRpb25zLnhodG1sID8gJy8+JyA6ICc+JztcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgdGV4dCh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cbn1cblxuLyoqXG4gKiBUZXh0UmVuZGVyZXJcbiAqIHJldHVybnMgb25seSB0aGUgdGV4dHVhbCBwYXJ0IG9mIHRoZSB0b2tlblxuICovXG5jbGFzcyBUZXh0UmVuZGVyZXIge1xuICAvLyBubyBuZWVkIGZvciBibG9jayBsZXZlbCByZW5kZXJlcnNcbiAgc3Ryb25nKHRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGVtKHRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGNvZGVzcGFuKHRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGRlbCh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBodG1sKHRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIHRleHQodGV4dCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgbGluayhocmVmLCB0aXRsZSwgdGV4dCkge1xuICAgIHJldHVybiAnJyArIHRleHQ7XG4gIH1cblxuICBpbWFnZShocmVmLCB0aXRsZSwgdGV4dCkge1xuICAgIHJldHVybiAnJyArIHRleHQ7XG4gIH1cblxuICBicigpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuLyoqXG4gKiBTbHVnZ2VyIGdlbmVyYXRlcyBoZWFkZXIgaWRcbiAqL1xuY2xhc3MgU2x1Z2dlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc2VlbiA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnRyaW0oKVxuICAgICAgLy8gcmVtb3ZlIGh0bWwgdGFnc1xuICAgICAgLnJlcGxhY2UoLzxbIVxcL2Etel0uKj8+L2lnLCAnJylcbiAgICAgIC8vIHJlbW92ZSB1bndhbnRlZCBjaGFyc1xuICAgICAgLnJlcGxhY2UoL1tcXHUyMDAwLVxcdTIwNkZcXHUyRTAwLVxcdTJFN0ZcXFxcJyFcIiMkJSYoKSorLC4vOjs8PT4/QFtcXF1eYHt8fX5dL2csICcnKVxuICAgICAgLnJlcGxhY2UoL1xccy9nLCAnLScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBuZXh0IHNhZmUgKHVuaXF1ZSkgc2x1ZyB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbmFsU2x1Z1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzRHJ5UnVuXG4gICAqL1xuICBnZXROZXh0U2FmZVNsdWcob3JpZ2luYWxTbHVnLCBpc0RyeVJ1bikge1xuICAgIGxldCBzbHVnID0gb3JpZ2luYWxTbHVnO1xuICAgIGxldCBvY2N1cmVuY2VBY2N1bXVsYXRvciA9IDA7XG4gICAgaWYgKHRoaXMuc2Vlbi5oYXNPd25Qcm9wZXJ0eShzbHVnKSkge1xuICAgICAgb2NjdXJlbmNlQWNjdW11bGF0b3IgPSB0aGlzLnNlZW5bb3JpZ2luYWxTbHVnXTtcbiAgICAgIGRvIHtcbiAgICAgICAgb2NjdXJlbmNlQWNjdW11bGF0b3IrKztcbiAgICAgICAgc2x1ZyA9IG9yaWdpbmFsU2x1ZyArICctJyArIG9jY3VyZW5jZUFjY3VtdWxhdG9yO1xuICAgICAgfSB3aGlsZSAodGhpcy5zZWVuLmhhc093blByb3BlcnR5KHNsdWcpKTtcbiAgICB9XG4gICAgaWYgKCFpc0RyeVJ1bikge1xuICAgICAgdGhpcy5zZWVuW29yaWdpbmFsU2x1Z10gPSBvY2N1cmVuY2VBY2N1bXVsYXRvcjtcbiAgICAgIHRoaXMuc2VlbltzbHVnXSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBzbHVnO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgc3RyaW5nIHRvIHVuaXF1ZSBpZFxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZHJ5cnVuXSBHZW5lcmF0ZXMgdGhlIG5leHQgdW5pcXVlIHNsdWcgd2l0aG91dFxuICAgKiB1cGRhdGluZyB0aGUgaW50ZXJuYWwgYWNjdW11bGF0b3IuXG4gICAqL1xuICBzbHVnKHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBzbHVnID0gdGhpcy5zZXJpYWxpemUodmFsdWUpO1xuICAgIHJldHVybiB0aGlzLmdldE5leHRTYWZlU2x1ZyhzbHVnLCBvcHRpb25zLmRyeXJ1bik7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzaW5nICYgQ29tcGlsaW5nXG4gKi9cbmNsYXNzIFBhcnNlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzO1xuICAgIHRoaXMub3B0aW9ucy5yZW5kZXJlciA9IHRoaXMub3B0aW9ucy5yZW5kZXJlciB8fCBuZXcgUmVuZGVyZXIoKTtcbiAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5vcHRpb25zLnJlbmRlcmVyO1xuICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICB0aGlzLnRleHRSZW5kZXJlciA9IG5ldyBUZXh0UmVuZGVyZXIoKTtcbiAgICB0aGlzLnNsdWdnZXIgPSBuZXcgU2x1Z2dlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBQYXJzZSBNZXRob2RcbiAgICovXG4gIHN0YXRpYyBwYXJzZSh0b2tlbnMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgUGFyc2VyKG9wdGlvbnMpO1xuICAgIHJldHVybiBwYXJzZXIucGFyc2UodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUGFyc2UgSW5saW5lIE1ldGhvZFxuICAgKi9cbiAgc3RhdGljIHBhcnNlSW5saW5lKHRva2Vucywgb3B0aW9ucykge1xuICAgIGNvbnN0IHBhcnNlciA9IG5ldyBQYXJzZXIob3B0aW9ucyk7XG4gICAgcmV0dXJuIHBhcnNlci5wYXJzZUlubGluZSh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIExvb3BcbiAgICovXG4gIHBhcnNlKHRva2VucywgdG9wID0gdHJ1ZSkge1xuICAgIGxldCBvdXQgPSAnJyxcbiAgICAgIGksXG4gICAgICBqLFxuICAgICAgayxcbiAgICAgIGwyLFxuICAgICAgbDMsXG4gICAgICByb3csXG4gICAgICBjZWxsLFxuICAgICAgaGVhZGVyLFxuICAgICAgYm9keSxcbiAgICAgIHRva2VuLFxuICAgICAgb3JkZXJlZCxcbiAgICAgIHN0YXJ0LFxuICAgICAgbG9vc2UsXG4gICAgICBpdGVtQm9keSxcbiAgICAgIGl0ZW0sXG4gICAgICBjaGVja2VkLFxuICAgICAgdGFzayxcbiAgICAgIGNoZWNrYm94LFxuICAgICAgcmV0O1xuXG4gICAgY29uc3QgbCA9IHRva2Vucy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cbiAgICAgIC8vIFJ1biBhbnkgcmVuZGVyZXIgZXh0ZW5zaW9uc1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHRlbnNpb25zICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnJlbmRlcmVycyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5yZW5kZXJlcnNbdG9rZW4udHlwZV0pIHtcbiAgICAgICAgcmV0ID0gdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMucmVuZGVyZXJzW3Rva2VuLnR5cGVdLmNhbGwoeyBwYXJzZXI6IHRoaXMgfSwgdG9rZW4pO1xuICAgICAgICBpZiAocmV0ICE9PSBmYWxzZSB8fCAhWydzcGFjZScsICdocicsICdoZWFkaW5nJywgJ2NvZGUnLCAndGFibGUnLCAnYmxvY2txdW90ZScsICdsaXN0JywgJ2h0bWwnLCAncGFyYWdyYXBoJywgJ3RleHQnXS5pbmNsdWRlcyh0b2tlbi50eXBlKSkge1xuICAgICAgICAgIG91dCArPSByZXQgfHwgJyc7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3dpdGNoICh0b2tlbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3NwYWNlJzoge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2hyJzoge1xuICAgICAgICAgIG91dCArPSB0aGlzLnJlbmRlcmVyLmhyKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnaGVhZGluZyc6IHtcbiAgICAgICAgICBvdXQgKz0gdGhpcy5yZW5kZXJlci5oZWFkaW5nKFxuICAgICAgICAgICAgdGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMpLFxuICAgICAgICAgICAgdG9rZW4uZGVwdGgsXG4gICAgICAgICAgICB1bmVzY2FwZSh0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucywgdGhpcy50ZXh0UmVuZGVyZXIpKSxcbiAgICAgICAgICAgIHRoaXMuc2x1Z2dlcik7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnY29kZSc6IHtcbiAgICAgICAgICBvdXQgKz0gdGhpcy5yZW5kZXJlci5jb2RlKHRva2VuLnRleHQsXG4gICAgICAgICAgICB0b2tlbi5sYW5nLFxuICAgICAgICAgICAgdG9rZW4uZXNjYXBlZCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAndGFibGUnOiB7XG4gICAgICAgICAgaGVhZGVyID0gJyc7XG5cbiAgICAgICAgICAvLyBoZWFkZXJcbiAgICAgICAgICBjZWxsID0gJyc7XG4gICAgICAgICAgbDIgPSB0b2tlbi5oZWFkZXIubGVuZ3RoO1xuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsMjsgaisrKSB7XG4gICAgICAgICAgICBjZWxsICs9IHRoaXMucmVuZGVyZXIudGFibGVjZWxsKFxuICAgICAgICAgICAgICB0aGlzLnBhcnNlSW5saW5lKHRva2VuLmhlYWRlcltqXS50b2tlbnMpLFxuICAgICAgICAgICAgICB7IGhlYWRlcjogdHJ1ZSwgYWxpZ246IHRva2VuLmFsaWduW2pdIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhlYWRlciArPSB0aGlzLnJlbmRlcmVyLnRhYmxlcm93KGNlbGwpO1xuXG4gICAgICAgICAgYm9keSA9ICcnO1xuICAgICAgICAgIGwyID0gdG9rZW4ucm93cy5sZW5ndGg7XG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IGwyOyBqKyspIHtcbiAgICAgICAgICAgIHJvdyA9IHRva2VuLnJvd3Nbal07XG5cbiAgICAgICAgICAgIGNlbGwgPSAnJztcbiAgICAgICAgICAgIGwzID0gcm93Lmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBsMzsgaysrKSB7XG4gICAgICAgICAgICAgIGNlbGwgKz0gdGhpcy5yZW5kZXJlci50YWJsZWNlbGwoXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZUlubGluZShyb3dba10udG9rZW5zKSxcbiAgICAgICAgICAgICAgICB7IGhlYWRlcjogZmFsc2UsIGFsaWduOiB0b2tlbi5hbGlnbltrXSB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJvZHkgKz0gdGhpcy5yZW5kZXJlci50YWJsZXJvdyhjZWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3V0ICs9IHRoaXMucmVuZGVyZXIudGFibGUoaGVhZGVyLCBib2R5KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdibG9ja3F1b3RlJzoge1xuICAgICAgICAgIGJvZHkgPSB0aGlzLnBhcnNlKHRva2VuLnRva2Vucyk7XG4gICAgICAgICAgb3V0ICs9IHRoaXMucmVuZGVyZXIuYmxvY2txdW90ZShib2R5KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdsaXN0Jzoge1xuICAgICAgICAgIG9yZGVyZWQgPSB0b2tlbi5vcmRlcmVkO1xuICAgICAgICAgIHN0YXJ0ID0gdG9rZW4uc3RhcnQ7XG4gICAgICAgICAgbG9vc2UgPSB0b2tlbi5sb29zZTtcbiAgICAgICAgICBsMiA9IHRva2VuLml0ZW1zLmxlbmd0aDtcblxuICAgICAgICAgIGJvZHkgPSAnJztcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbDI7IGorKykge1xuICAgICAgICAgICAgaXRlbSA9IHRva2VuLml0ZW1zW2pdO1xuICAgICAgICAgICAgY2hlY2tlZCA9IGl0ZW0uY2hlY2tlZDtcbiAgICAgICAgICAgIHRhc2sgPSBpdGVtLnRhc2s7XG5cbiAgICAgICAgICAgIGl0ZW1Cb2R5ID0gJyc7XG4gICAgICAgICAgICBpZiAoaXRlbS50YXNrKSB7XG4gICAgICAgICAgICAgIGNoZWNrYm94ID0gdGhpcy5yZW5kZXJlci5jaGVja2JveChjaGVja2VkKTtcbiAgICAgICAgICAgICAgaWYgKGxvb3NlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udG9rZW5zLmxlbmd0aCA+IDAgJiYgaXRlbS50b2tlbnNbMF0udHlwZSA9PT0gJ3BhcmFncmFwaCcpIHtcbiAgICAgICAgICAgICAgICAgIGl0ZW0udG9rZW5zWzBdLnRleHQgPSBjaGVja2JveCArICcgJyArIGl0ZW0udG9rZW5zWzBdLnRleHQ7XG4gICAgICAgICAgICAgICAgICBpZiAoaXRlbS50b2tlbnNbMF0udG9rZW5zICYmIGl0ZW0udG9rZW5zWzBdLnRva2Vucy5sZW5ndGggPiAwICYmIGl0ZW0udG9rZW5zWzBdLnRva2Vuc1swXS50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50b2tlbnNbMF0udG9rZW5zWzBdLnRleHQgPSBjaGVja2JveCArICcgJyArIGl0ZW0udG9rZW5zWzBdLnRva2Vuc1swXS50ZXh0O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBpdGVtLnRva2Vucy51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjaGVja2JveFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW1Cb2R5ICs9IGNoZWNrYm94O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGl0ZW1Cb2R5ICs9IHRoaXMucGFyc2UoaXRlbS50b2tlbnMsIGxvb3NlKTtcbiAgICAgICAgICAgIGJvZHkgKz0gdGhpcy5yZW5kZXJlci5saXN0aXRlbShpdGVtQm9keSwgdGFzaywgY2hlY2tlZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb3V0ICs9IHRoaXMucmVuZGVyZXIubGlzdChib2R5LCBvcmRlcmVkLCBzdGFydCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnaHRtbCc6IHtcbiAgICAgICAgICAvLyBUT0RPIHBhcnNlIGlubGluZSBjb250ZW50IGlmIHBhcmFtZXRlciBtYXJrZG93bj0xXG4gICAgICAgICAgb3V0ICs9IHRoaXMucmVuZGVyZXIuaHRtbCh0b2tlbi50ZXh0KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdwYXJhZ3JhcGgnOiB7XG4gICAgICAgICAgb3V0ICs9IHRoaXMucmVuZGVyZXIucGFyYWdyYXBoKHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAndGV4dCc6IHtcbiAgICAgICAgICBib2R5ID0gdG9rZW4udG9rZW5zID8gdGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMpIDogdG9rZW4udGV4dDtcbiAgICAgICAgICB3aGlsZSAoaSArIDEgPCBsICYmIHRva2Vuc1tpICsgMV0udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICB0b2tlbiA9IHRva2Vuc1srK2ldO1xuICAgICAgICAgICAgYm9keSArPSAnXFxuJyArICh0b2tlbi50b2tlbnMgPyB0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucykgOiB0b2tlbi50ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3V0ICs9IHRvcCA/IHRoaXMucmVuZGVyZXIucGFyYWdyYXBoKGJvZHkpIDogYm9keTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBjb25zdCBlcnJNc2cgPSAnVG9rZW4gd2l0aCBcIicgKyB0b2tlbi50eXBlICsgJ1wiIHR5cGUgd2FzIG5vdCBmb3VuZC4nO1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVyck1zZyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJNc2cpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgSW5saW5lIFRva2Vuc1xuICAgKi9cbiAgcGFyc2VJbmxpbmUodG9rZW5zLCByZW5kZXJlcikge1xuICAgIHJlbmRlcmVyID0gcmVuZGVyZXIgfHwgdGhpcy5yZW5kZXJlcjtcbiAgICBsZXQgb3V0ID0gJycsXG4gICAgICBpLFxuICAgICAgdG9rZW4sXG4gICAgICByZXQ7XG5cbiAgICBjb25zdCBsID0gdG9rZW5zLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblxuICAgICAgLy8gUnVuIGFueSByZW5kZXJlciBleHRlbnNpb25zXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMucmVuZGVyZXJzICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnJlbmRlcmVyc1t0b2tlbi50eXBlXSkge1xuICAgICAgICByZXQgPSB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5yZW5kZXJlcnNbdG9rZW4udHlwZV0uY2FsbCh7IHBhcnNlcjogdGhpcyB9LCB0b2tlbik7XG4gICAgICAgIGlmIChyZXQgIT09IGZhbHNlIHx8ICFbJ2VzY2FwZScsICdodG1sJywgJ2xpbmsnLCAnaW1hZ2UnLCAnc3Ryb25nJywgJ2VtJywgJ2NvZGVzcGFuJywgJ2JyJywgJ2RlbCcsICd0ZXh0J10uaW5jbHVkZXModG9rZW4udHlwZSkpIHtcbiAgICAgICAgICBvdXQgKz0gcmV0IHx8ICcnO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgICAgICBjYXNlICdlc2NhcGUnOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLnRleHQodG9rZW4udGV4dCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnaHRtbCc6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIuaHRtbCh0b2tlbi50ZXh0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdsaW5rJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci5saW5rKHRva2VuLmhyZWYsIHRva2VuLnRpdGxlLCB0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucywgcmVuZGVyZXIpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdpbWFnZSc6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIuaW1hZ2UodG9rZW4uaHJlZiwgdG9rZW4udGl0bGUsIHRva2VuLnRleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3N0cm9uZyc6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIuc3Ryb25nKHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zLCByZW5kZXJlcikpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2VtJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci5lbSh0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucywgcmVuZGVyZXIpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdjb2Rlc3Bhbic6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIuY29kZXNwYW4odG9rZW4udGV4dCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnYnInOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLmJyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnZGVsJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci5kZWwodGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMsIHJlbmRlcmVyKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAndGV4dCc6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIudGV4dCh0b2tlbi50ZXh0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgY29uc3QgZXJyTXNnID0gJ1Rva2VuIHdpdGggXCInICsgdG9rZW4udHlwZSArICdcIiB0eXBlIHdhcyBub3QgZm91bmQuJztcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJNc2cpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyTXNnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbiAgfVxufVxuXG5jbGFzcyBIb29rcyB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzO1xuICB9XG5cbiAgc3RhdGljIHBhc3NUaHJvdWdoSG9va3MgPSBuZXcgU2V0KFtcbiAgICAncHJlcHJvY2VzcycsXG4gICAgJ3Bvc3Rwcm9jZXNzJ1xuICBdKTtcblxuICAvKipcbiAgICogUHJvY2VzcyBtYXJrZG93biBiZWZvcmUgbWFya2VkXG4gICAqL1xuICBwcmVwcm9jZXNzKG1hcmtkb3duKSB7XG4gICAgcmV0dXJuIG1hcmtkb3duO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgSFRNTCBhZnRlciBtYXJrZWQgaXMgZmluaXNoZWRcbiAgICovXG4gIHBvc3Rwcm9jZXNzKGh0bWwpIHtcbiAgICByZXR1cm4gaHRtbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBvbkVycm9yKHNpbGVudCwgYXN5bmMsIGNhbGxiYWNrKSB7XG4gIHJldHVybiAoZSkgPT4ge1xuICAgIGUubWVzc2FnZSArPSAnXFxuUGxlYXNlIHJlcG9ydCB0aGlzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJrZWRqcy9tYXJrZWQuJztcblxuICAgIGlmIChzaWxlbnQpIHtcbiAgICAgIGNvbnN0IG1zZyA9ICc8cD5BbiBlcnJvciBvY2N1cnJlZDo8L3A+PHByZT4nXG4gICAgICAgICsgZXNjYXBlKGUubWVzc2FnZSArICcnLCB0cnVlKVxuICAgICAgICArICc8L3ByZT4nO1xuICAgICAgaWYgKGFzeW5jKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobXNnKTtcbiAgICAgIH1cbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayhudWxsLCBtc2cpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gbXNnO1xuICAgIH1cblxuICAgIGlmIChhc3luYykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgIH1cbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aHJvdyBlO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZU1hcmtkb3duKGxleGVyLCBwYXJzZXIpIHtcbiAgcmV0dXJuIChzcmMsIG9wdCwgY2FsbGJhY2spID0+IHtcbiAgICBpZiAodHlwZW9mIG9wdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBvcHQ7XG4gICAgICBvcHQgPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IG9yaWdPcHQgPSB7IC4uLm9wdCB9O1xuICAgIG9wdCA9IHsgLi4ubWFya2VkLmRlZmF1bHRzLCAuLi5vcmlnT3B0IH07XG4gICAgY29uc3QgdGhyb3dFcnJvciA9IG9uRXJyb3Iob3B0LnNpbGVudCwgb3B0LmFzeW5jLCBjYWxsYmFjayk7XG5cbiAgICAvLyB0aHJvdyBlcnJvciBpbiBjYXNlIG9mIG5vbiBzdHJpbmcgaW5wdXRcbiAgICBpZiAodHlwZW9mIHNyYyA9PT0gJ3VuZGVmaW5lZCcgfHwgc3JjID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dFcnJvcihuZXcgRXJyb3IoJ21hcmtlZCgpOiBpbnB1dCBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkIG9yIG51bGwnKSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IobmV3IEVycm9yKCdtYXJrZWQoKTogaW5wdXQgcGFyYW1ldGVyIGlzIG9mIHR5cGUgJ1xuICAgICAgICArIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpICsgJywgc3RyaW5nIGV4cGVjdGVkJykpO1xuICAgIH1cblxuICAgIGNoZWNrU2FuaXRpemVEZXByZWNhdGlvbihvcHQpO1xuXG4gICAgaWYgKG9wdC5ob29rcykge1xuICAgICAgb3B0Lmhvb2tzLm9wdGlvbnMgPSBvcHQ7XG4gICAgfVxuXG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjb25zdCBoaWdobGlnaHQgPSBvcHQuaGlnaGxpZ2h0O1xuICAgICAgbGV0IHRva2VucztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKG9wdC5ob29rcykge1xuICAgICAgICAgIHNyYyA9IG9wdC5ob29rcy5wcmVwcm9jZXNzKHNyYyk7XG4gICAgICAgIH1cbiAgICAgICAgdG9rZW5zID0gbGV4ZXIoc3JjLCBvcHQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdGhyb3dFcnJvcihlKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZG9uZSA9IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBsZXQgb3V0O1xuXG4gICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChvcHQud2Fsa1Rva2Vucykge1xuICAgICAgICAgICAgICBtYXJrZWQud2Fsa1Rva2Vucyh0b2tlbnMsIG9wdC53YWxrVG9rZW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dCA9IHBhcnNlcih0b2tlbnMsIG9wdCk7XG4gICAgICAgICAgICBpZiAob3B0Lmhvb2tzKSB7XG4gICAgICAgICAgICAgIG91dCA9IG9wdC5ob29rcy5wb3N0cHJvY2VzcyhvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVyciA9IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgb3B0LmhpZ2hsaWdodCA9IGhpZ2hsaWdodDtcblxuICAgICAgICByZXR1cm4gZXJyXG4gICAgICAgICAgPyB0aHJvd0Vycm9yKGVycilcbiAgICAgICAgICA6IGNhbGxiYWNrKG51bGwsIG91dCk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoIWhpZ2hsaWdodCB8fCBoaWdobGlnaHQubGVuZ3RoIDwgMykge1xuICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgfVxuXG4gICAgICBkZWxldGUgb3B0LmhpZ2hsaWdodDtcblxuICAgICAgaWYgKCF0b2tlbnMubGVuZ3RoKSByZXR1cm4gZG9uZSgpO1xuXG4gICAgICBsZXQgcGVuZGluZyA9IDA7XG4gICAgICBtYXJrZWQud2Fsa1Rva2Vucyh0b2tlbnMsIGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbi50eXBlID09PSAnY29kZScpIHtcbiAgICAgICAgICBwZW5kaW5nKys7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBoaWdobGlnaHQodG9rZW4udGV4dCwgdG9rZW4ubGFuZywgZnVuY3Rpb24oZXJyLCBjb2RlKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9uZShlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjb2RlICE9IG51bGwgJiYgY29kZSAhPT0gdG9rZW4udGV4dCkge1xuICAgICAgICAgICAgICAgIHRva2VuLnRleHQgPSBjb2RlO1xuICAgICAgICAgICAgICAgIHRva2VuLmVzY2FwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcGVuZGluZy0tO1xuICAgICAgICAgICAgICBpZiAocGVuZGluZyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAocGVuZGluZyA9PT0gMCkge1xuICAgICAgICBkb25lKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob3B0LmFzeW5jKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9wdC5ob29rcyA/IG9wdC5ob29rcy5wcmVwcm9jZXNzKHNyYykgOiBzcmMpXG4gICAgICAgIC50aGVuKHNyYyA9PiBsZXhlcihzcmMsIG9wdCkpXG4gICAgICAgIC50aGVuKHRva2VucyA9PiBvcHQud2Fsa1Rva2VucyA/IFByb21pc2UuYWxsKG1hcmtlZC53YWxrVG9rZW5zKHRva2Vucywgb3B0LndhbGtUb2tlbnMpKS50aGVuKCgpID0+IHRva2VucykgOiB0b2tlbnMpXG4gICAgICAgIC50aGVuKHRva2VucyA9PiBwYXJzZXIodG9rZW5zLCBvcHQpKVxuICAgICAgICAudGhlbihodG1sID0+IG9wdC5ob29rcyA/IG9wdC5ob29rcy5wb3N0cHJvY2VzcyhodG1sKSA6IGh0bWwpXG4gICAgICAgIC5jYXRjaCh0aHJvd0Vycm9yKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKG9wdC5ob29rcykge1xuICAgICAgICBzcmMgPSBvcHQuaG9va3MucHJlcHJvY2VzcyhzcmMpO1xuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW5zID0gbGV4ZXIoc3JjLCBvcHQpO1xuICAgICAgaWYgKG9wdC53YWxrVG9rZW5zKSB7XG4gICAgICAgIG1hcmtlZC53YWxrVG9rZW5zKHRva2Vucywgb3B0LndhbGtUb2tlbnMpO1xuICAgICAgfVxuICAgICAgbGV0IGh0bWwgPSBwYXJzZXIodG9rZW5zLCBvcHQpO1xuICAgICAgaWYgKG9wdC5ob29rcykge1xuICAgICAgICBodG1sID0gb3B0Lmhvb2tzLnBvc3Rwcm9jZXNzKGh0bWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IoZSk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIE1hcmtlZFxuICovXG5mdW5jdGlvbiBtYXJrZWQoc3JjLCBvcHQsIGNhbGxiYWNrKSB7XG4gIHJldHVybiBwYXJzZU1hcmtkb3duKExleGVyLmxleCwgUGFyc2VyLnBhcnNlKShzcmMsIG9wdCwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqIE9wdGlvbnNcbiAqL1xuXG5tYXJrZWQub3B0aW9ucyA9XG5tYXJrZWQuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdCkge1xuICBtYXJrZWQuZGVmYXVsdHMgPSB7IC4uLm1hcmtlZC5kZWZhdWx0cywgLi4ub3B0IH07XG4gIGNoYW5nZURlZmF1bHRzKG1hcmtlZC5kZWZhdWx0cyk7XG4gIHJldHVybiBtYXJrZWQ7XG59O1xuXG5tYXJrZWQuZ2V0RGVmYXVsdHMgPSBnZXREZWZhdWx0cztcblxubWFya2VkLmRlZmF1bHRzID0gZGVmYXVsdHM7XG5cbi8qKlxuICogVXNlIEV4dGVuc2lvblxuICovXG5cbm1hcmtlZC51c2UgPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gIGNvbnN0IGV4dGVuc2lvbnMgPSBtYXJrZWQuZGVmYXVsdHMuZXh0ZW5zaW9ucyB8fCB7IHJlbmRlcmVyczoge30sIGNoaWxkVG9rZW5zOiB7fSB9O1xuXG4gIGFyZ3MuZm9yRWFjaCgocGFjaykgPT4ge1xuICAgIC8vIGNvcHkgb3B0aW9ucyB0byBuZXcgb2JqZWN0XG4gICAgY29uc3Qgb3B0cyA9IHsgLi4ucGFjayB9O1xuXG4gICAgLy8gc2V0IGFzeW5jIHRvIHRydWUgaWYgaXQgd2FzIHNldCB0byB0cnVlIGJlZm9yZVxuICAgIG9wdHMuYXN5bmMgPSBtYXJrZWQuZGVmYXVsdHMuYXN5bmMgfHwgb3B0cy5hc3luYyB8fCBmYWxzZTtcblxuICAgIC8vID09LS0gUGFyc2UgXCJhZGRvblwiIGV4dGVuc2lvbnMgLS09PSAvL1xuICAgIGlmIChwYWNrLmV4dGVuc2lvbnMpIHtcbiAgICAgIHBhY2suZXh0ZW5zaW9ucy5mb3JFYWNoKChleHQpID0+IHtcbiAgICAgICAgaWYgKCFleHQubmFtZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXh0ZW5zaW9uIG5hbWUgcmVxdWlyZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0LnJlbmRlcmVyKSB7IC8vIFJlbmRlcmVyIGV4dGVuc2lvbnNcbiAgICAgICAgICBjb25zdCBwcmV2UmVuZGVyZXIgPSBleHRlbnNpb25zLnJlbmRlcmVyc1tleHQubmFtZV07XG4gICAgICAgICAgaWYgKHByZXZSZW5kZXJlcikge1xuICAgICAgICAgICAgLy8gUmVwbGFjZSBleHRlbnNpb24gd2l0aCBmdW5jIHRvIHJ1biBuZXcgZXh0ZW5zaW9uIGJ1dCBmYWxsIGJhY2sgaWYgZmFsc2VcbiAgICAgICAgICAgIGV4dGVuc2lvbnMucmVuZGVyZXJzW2V4dC5uYW1lXSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgbGV0IHJldCA9IGV4dC5yZW5kZXJlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXQgPSBwcmV2UmVuZGVyZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVuc2lvbnMucmVuZGVyZXJzW2V4dC5uYW1lXSA9IGV4dC5yZW5kZXJlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dC50b2tlbml6ZXIpIHsgLy8gVG9rZW5pemVyIEV4dGVuc2lvbnNcbiAgICAgICAgICBpZiAoIWV4dC5sZXZlbCB8fCAoZXh0LmxldmVsICE9PSAnYmxvY2snICYmIGV4dC5sZXZlbCAhPT0gJ2lubGluZScpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJleHRlbnNpb24gbGV2ZWwgbXVzdCBiZSAnYmxvY2snIG9yICdpbmxpbmUnXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZXh0ZW5zaW9uc1tleHQubGV2ZWxdKSB7XG4gICAgICAgICAgICBleHRlbnNpb25zW2V4dC5sZXZlbF0udW5zaGlmdChleHQudG9rZW5pemVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXh0ZW5zaW9uc1tleHQubGV2ZWxdID0gW2V4dC50b2tlbml6ZXJdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZXh0LnN0YXJ0KSB7IC8vIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciBzdGFydCBvZiB0b2tlblxuICAgICAgICAgICAgaWYgKGV4dC5sZXZlbCA9PT0gJ2Jsb2NrJykge1xuICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9ucy5zdGFydEJsb2NrKSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9ucy5zdGFydEJsb2NrLnB1c2goZXh0LnN0YXJ0KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zLnN0YXJ0QmxvY2sgPSBbZXh0LnN0YXJ0XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChleHQubGV2ZWwgPT09ICdpbmxpbmUnKSB7XG4gICAgICAgICAgICAgIGlmIChleHRlbnNpb25zLnN0YXJ0SW5saW5lKSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9ucy5zdGFydElubGluZS5wdXNoKGV4dC5zdGFydCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9ucy5zdGFydElubGluZSA9IFtleHQuc3RhcnRdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChleHQuY2hpbGRUb2tlbnMpIHsgLy8gQ2hpbGQgdG9rZW5zIHRvIGJlIHZpc2l0ZWQgYnkgd2Fsa1Rva2Vuc1xuICAgICAgICAgIGV4dGVuc2lvbnMuY2hpbGRUb2tlbnNbZXh0Lm5hbWVdID0gZXh0LmNoaWxkVG9rZW5zO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG9wdHMuZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnM7XG4gICAgfVxuXG4gICAgLy8gPT0tLSBQYXJzZSBcIm92ZXJ3cml0ZVwiIGV4dGVuc2lvbnMgLS09PSAvL1xuICAgIGlmIChwYWNrLnJlbmRlcmVyKSB7XG4gICAgICBjb25zdCByZW5kZXJlciA9IG1hcmtlZC5kZWZhdWx0cy5yZW5kZXJlciB8fCBuZXcgUmVuZGVyZXIoKTtcbiAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBwYWNrLnJlbmRlcmVyKSB7XG4gICAgICAgIGNvbnN0IHByZXZSZW5kZXJlciA9IHJlbmRlcmVyW3Byb3BdO1xuICAgICAgICAvLyBSZXBsYWNlIHJlbmRlcmVyIHdpdGggZnVuYyB0byBydW4gZXh0ZW5zaW9uLCBidXQgZmFsbCBiYWNrIGlmIGZhbHNlXG4gICAgICAgIHJlbmRlcmVyW3Byb3BdID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICBsZXQgcmV0ID0gcGFjay5yZW5kZXJlcltwcm9wXS5hcHBseShyZW5kZXJlciwgYXJncyk7XG4gICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldCA9IHByZXZSZW5kZXJlci5hcHBseShyZW5kZXJlciwgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBvcHRzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgfVxuICAgIGlmIChwYWNrLnRva2VuaXplcikge1xuICAgICAgY29uc3QgdG9rZW5pemVyID0gbWFya2VkLmRlZmF1bHRzLnRva2VuaXplciB8fCBuZXcgVG9rZW5pemVyKCk7XG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gcGFjay50b2tlbml6ZXIpIHtcbiAgICAgICAgY29uc3QgcHJldlRva2VuaXplciA9IHRva2VuaXplcltwcm9wXTtcbiAgICAgICAgLy8gUmVwbGFjZSB0b2tlbml6ZXIgd2l0aCBmdW5jIHRvIHJ1biBleHRlbnNpb24sIGJ1dCBmYWxsIGJhY2sgaWYgZmFsc2VcbiAgICAgICAgdG9rZW5pemVyW3Byb3BdID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICBsZXQgcmV0ID0gcGFjay50b2tlbml6ZXJbcHJvcF0uYXBwbHkodG9rZW5pemVyLCBhcmdzKTtcbiAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0ID0gcHJldlRva2VuaXplci5hcHBseSh0b2tlbml6ZXIsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgb3B0cy50b2tlbml6ZXIgPSB0b2tlbml6ZXI7XG4gICAgfVxuXG4gICAgLy8gPT0tLSBQYXJzZSBIb29rcyBleHRlbnNpb25zIC0tPT0gLy9cbiAgICBpZiAocGFjay5ob29rcykge1xuICAgICAgY29uc3QgaG9va3MgPSBtYXJrZWQuZGVmYXVsdHMuaG9va3MgfHwgbmV3IEhvb2tzKCk7XG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gcGFjay5ob29rcykge1xuICAgICAgICBjb25zdCBwcmV2SG9vayA9IGhvb2tzW3Byb3BdO1xuICAgICAgICBpZiAoSG9va3MucGFzc1Rocm91Z2hIb29rcy5oYXMocHJvcCkpIHtcbiAgICAgICAgICBob29rc1twcm9wXSA9IChhcmcpID0+IHtcbiAgICAgICAgICAgIGlmIChtYXJrZWQuZGVmYXVsdHMuYXN5bmMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwYWNrLmhvb2tzW3Byb3BdLmNhbGwoaG9va3MsIGFyZykpLnRoZW4ocmV0ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldkhvb2suY2FsbChob29rcywgcmV0KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHBhY2suaG9va3NbcHJvcF0uY2FsbChob29rcywgYXJnKTtcbiAgICAgICAgICAgIHJldHVybiBwcmV2SG9vay5jYWxsKGhvb2tzLCByZXQpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaG9va3NbcHJvcF0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgbGV0IHJldCA9IHBhY2suaG9va3NbcHJvcF0uYXBwbHkoaG9va3MsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcmV0ID0gcHJldkhvb2suYXBwbHkoaG9va3MsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvcHRzLmhvb2tzID0gaG9va3M7XG4gICAgfVxuXG4gICAgLy8gPT0tLSBQYXJzZSBXYWxrVG9rZW5zIGV4dGVuc2lvbnMgLS09PSAvL1xuICAgIGlmIChwYWNrLndhbGtUb2tlbnMpIHtcbiAgICAgIGNvbnN0IHdhbGtUb2tlbnMgPSBtYXJrZWQuZGVmYXVsdHMud2Fsa1Rva2VucztcbiAgICAgIG9wdHMud2Fsa1Rva2VucyA9IGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgdmFsdWVzLnB1c2gocGFjay53YWxrVG9rZW5zLmNhbGwodGhpcywgdG9rZW4pKTtcbiAgICAgICAgaWYgKHdhbGtUb2tlbnMpIHtcbiAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuY29uY2F0KHdhbGtUb2tlbnMuY2FsbCh0aGlzLCB0b2tlbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICB9O1xuICAgIH1cblxuICAgIG1hcmtlZC5zZXRPcHRpb25zKG9wdHMpO1xuICB9KTtcbn07XG5cbi8qKlxuICogUnVuIGNhbGxiYWNrIGZvciBldmVyeSB0b2tlblxuICovXG5cbm1hcmtlZC53YWxrVG9rZW5zID0gZnVuY3Rpb24odG9rZW5zLCBjYWxsYmFjaykge1xuICBsZXQgdmFsdWVzID0gW107XG4gIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgdmFsdWVzID0gdmFsdWVzLmNvbmNhdChjYWxsYmFjay5jYWxsKG1hcmtlZCwgdG9rZW4pKTtcbiAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3RhYmxlJzoge1xuICAgICAgICBmb3IgKGNvbnN0IGNlbGwgb2YgdG9rZW4uaGVhZGVyKSB7XG4gICAgICAgICAgdmFsdWVzID0gdmFsdWVzLmNvbmNhdChtYXJrZWQud2Fsa1Rva2VucyhjZWxsLnRva2VucywgY2FsbGJhY2spKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiB0b2tlbi5yb3dzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIHJvdykge1xuICAgICAgICAgICAgdmFsdWVzID0gdmFsdWVzLmNvbmNhdChtYXJrZWQud2Fsa1Rva2VucyhjZWxsLnRva2VucywgY2FsbGJhY2spKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdsaXN0Jzoge1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuY29uY2F0KG1hcmtlZC53YWxrVG9rZW5zKHRva2VuLml0ZW1zLCBjYWxsYmFjaykpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgaWYgKG1hcmtlZC5kZWZhdWx0cy5leHRlbnNpb25zICYmIG1hcmtlZC5kZWZhdWx0cy5leHRlbnNpb25zLmNoaWxkVG9rZW5zICYmIG1hcmtlZC5kZWZhdWx0cy5leHRlbnNpb25zLmNoaWxkVG9rZW5zW3Rva2VuLnR5cGVdKSB7IC8vIFdhbGsgYW55IGV4dGVuc2lvbnNcbiAgICAgICAgICBtYXJrZWQuZGVmYXVsdHMuZXh0ZW5zaW9ucy5jaGlsZFRva2Vuc1t0b2tlbi50eXBlXS5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkVG9rZW5zKSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuY29uY2F0KG1hcmtlZC53YWxrVG9rZW5zKHRva2VuW2NoaWxkVG9rZW5zXSwgY2FsbGJhY2spKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlbi50b2tlbnMpIHtcbiAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuY29uY2F0KG1hcmtlZC53YWxrVG9rZW5zKHRva2VuLnRva2VucywgY2FsbGJhY2spKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsdWVzO1xufTtcblxuLyoqXG4gKiBQYXJzZSBJbmxpbmVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmNcbiAqL1xubWFya2VkLnBhcnNlSW5saW5lID0gcGFyc2VNYXJrZG93bihMZXhlci5sZXhJbmxpbmUsIFBhcnNlci5wYXJzZUlubGluZSk7XG5cbi8qKlxuICogRXhwb3NlXG4gKi9cbm1hcmtlZC5QYXJzZXIgPSBQYXJzZXI7XG5tYXJrZWQucGFyc2VyID0gUGFyc2VyLnBhcnNlO1xubWFya2VkLlJlbmRlcmVyID0gUmVuZGVyZXI7XG5tYXJrZWQuVGV4dFJlbmRlcmVyID0gVGV4dFJlbmRlcmVyO1xubWFya2VkLkxleGVyID0gTGV4ZXI7XG5tYXJrZWQubGV4ZXIgPSBMZXhlci5sZXg7XG5tYXJrZWQuVG9rZW5pemVyID0gVG9rZW5pemVyO1xubWFya2VkLlNsdWdnZXIgPSBTbHVnZ2VyO1xubWFya2VkLkhvb2tzID0gSG9va3M7XG5tYXJrZWQucGFyc2UgPSBtYXJrZWQ7XG5cbmNvbnN0IG9wdGlvbnMgPSBtYXJrZWQub3B0aW9ucztcbmNvbnN0IHNldE9wdGlvbnMgPSBtYXJrZWQuc2V0T3B0aW9ucztcbmNvbnN0IHVzZSA9IG1hcmtlZC51c2U7XG5jb25zdCB3YWxrVG9rZW5zID0gbWFya2VkLndhbGtUb2tlbnM7XG5jb25zdCBwYXJzZUlubGluZSA9IG1hcmtlZC5wYXJzZUlubGluZTtcbmNvbnN0IHBhcnNlID0gbWFya2VkO1xuY29uc3QgcGFyc2VyID0gUGFyc2VyLnBhcnNlO1xuY29uc3QgbGV4ZXIgPSBMZXhlci5sZXg7XG5cbmV4cG9ydCB7IEhvb2tzLCBMZXhlciwgUGFyc2VyLCBSZW5kZXJlciwgU2x1Z2dlciwgVGV4dFJlbmRlcmVyLCBUb2tlbml6ZXIsIGRlZmF1bHRzLCBnZXREZWZhdWx0cywgbGV4ZXIsIG1hcmtlZCwgb3B0aW9ucywgcGFyc2UsIHBhcnNlSW5saW5lLCBwYXJzZXIsIHNldE9wdGlvbnMsIHVzZSwgd2Fsa1Rva2VucyB9O1xuIiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEJNT1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHsgY29sb3JUb0hleCB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBBTlRIUk9QSUNfTU9ERUxTLCBPUEVOQUlfTU9ERUxTLCBhZGRNZXNzYWdlLCBmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTiwgZ2V0QWN0aXZlRmlsZUNvbnRlbnQsIHJlbW92ZU1lc3NhZ2VUaHJlYWQgfSBmcm9tIFwiLi92aWV3XCI7XG5pbXBvcnQgQk1PR1BUIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBmZXRjaE9wZW5BSUFQSVRpdGxlIH0gZnJvbSAnLi9tb2RlbHMnO1xuXG50eXBlIE1vZGVsT2JqZWN0ID0ge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59O1xuXG4vLyBDb21tYW5kc1xuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVDb21tYW5kKGlucHV0OiBzdHJpbmcsIHNldHRpbmdzOiBCTU9TZXR0aW5ncywgcGx1Z2luOiBCTU9HUFQpIHtcbiAgY29uc3QgY29tbWFuZCA9IGlucHV0LnNwbGl0KCcgJylbMF07IC8vIEdldCB0aGUgZmlyc3Qgd29yZCBmcm9tIHRoZSBpbnB1dFxuICBcbiAgc3dpdGNoIChjb21tYW5kKSB7XG4gICAgICBjYXNlICcvY29tbWFuZHMnOlxuICAgICAgY2FzZSAnL2hlbHAnOlxuICAgICAgICAgIGNvbW1hbmRIZWxwKHNldHRpbmdzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9pbnNwZWN0JzpcbiAgICAgIGNhc2UgJy9zZXR0aW5ncyc6XG4gICAgICAgICAgY29tbWFuZEluc3BlY3Qoc2V0dGluZ3MpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL21vZGVsJzpcbiAgICAgICAgICByZXR1cm4gY29tbWFuZE1vZGVsKGlucHV0LCBzZXR0aW5ncywgcGx1Z2luKTtcbiAgICAgIGNhc2UgJy9yZWZlcmVuY2UnOlxuICAgICAgY2FzZSAnL3JlZic6XG4gICAgICAgICAgY29tbWFuZFJlZmVyZW5jZShpbnB1dCwgc2V0dGluZ3MsIHBsdWdpbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvdGVtcCc6XG4gICAgICAgICAgY29tbWFuZFRlbXBlcmF0dXJlKGlucHV0LCBzZXR0aW5ncywgcGx1Z2luKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9tYXh0b2tlbnMnOlxuICAgICAgICAgIGNvbW1hbmRNYXhUb2tlbnMoaW5wdXQsIHNldHRpbmdzLCBwbHVnaW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL3N5c3RlbSc6XG4gICAgICAgICAgY29tbWFuZFN5c3RlbShpbnB1dCwgc2V0dGluZ3MsIHBsdWdpbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvYXBwZW5kJzpcbiAgICAgICAgICBjb21tYW5kQXBwZW5kKHNldHRpbmdzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9zYXZlJzpcbiAgICAgICAgICBjb21tYW5kU2F2ZShzZXR0aW5ncyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvY2xlYXInOlxuICAgICAgY2FzZSAnL2MnOlxuICAgICAgICAgIHJlbW92ZU1lc3NhZ2VUaHJlYWQoMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbW1hbmRGYWxzZShzZXR0aW5ncywgcGx1Z2luKTtcbiAgfVxufVxuXG5cbi8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhbmQgYXBwZW5kIGEgYm90IG1lc3NhZ2VcbmZ1bmN0aW9uIGNyZWF0ZUJvdE1lc3NhZ2UoY3VycmVudFNldHRpbmdzOiBCTU9TZXR0aW5ncyk6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVzc2FnZUNvbnRhaW5lclwiKTtcbiAgY29uc3QgYm90TWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGJvdE1lc3NhZ2UuY2xhc3NMaXN0LmFkZChcImJvdE1lc3NhZ2VcIik7XG4gIGJvdE1lc3NhZ2Uuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JUb0hleChcbiAgICBjdXJyZW50U2V0dGluZ3MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciB8fFxuICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKERFRkFVTFRfU0VUVElOR1MuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvcikudHJpbSgpXG4gICk7XG4gIG1lc3NhZ2VDb250YWluZXI/LmFwcGVuZENoaWxkKGJvdE1lc3NhZ2UpO1xuXG4gIGNvbnN0IGJvdE5hbWVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIGJvdE5hbWVTcGFuLnRleHRDb250ZW50ID1cbiAgICBjdXJyZW50U2V0dGluZ3MuY2hhdGJvdE5hbWUgfHwgREVGQVVMVF9TRVRUSU5HUy5jaGF0Ym90TmFtZTtcbiAgLy8gYm90TmFtZVNwYW4uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjaGF0Ym90TmFtZVwiKTtcbiAgYm90TmFtZVNwYW4uY2xhc3NOYW1lID0gXCJjaGF0Ym90TmFtZVwiO1xuICBib3RNZXNzYWdlLmFwcGVuZENoaWxkKGJvdE5hbWVTcGFuKTtcblxuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBtZXNzYWdlQmxvY2suY2xhc3NMaXN0LmFkZChcIm1lc3NhZ2VCbG9ja1wiKTtcbiAgYm90TWVzc2FnZS5hcHBlbmRDaGlsZChtZXNzYWdlQmxvY2spO1xuXG4gIHJldHVybiBtZXNzYWdlQmxvY2s7XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgdGhlIG1lc3NhZ2UgaW4gdGhlIENoYXRib3RcbmZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VCbG9jazogSFRNTERpdkVsZW1lbnQsIG1lc3NhZ2VIdG1sOiBzdHJpbmcsIGN1cnJlbnRTZXR0aW5nczogQk1PU2V0dGluZ3MpIHtcbiAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVzc2FnZUNvbnRhaW5lclwiKTtcblxuICBpZiAobWVzc2FnZUNvbnRhaW5lcikge1xuICAgIGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLmJvdE1lc3NhZ2VcIik7XG4gICAgY29uc3QgbGFzdEJvdE1lc3NhZ2UgPSBib3RNZXNzYWdlc1tib3RNZXNzYWdlcy5sZW5ndGggLSAxXTtcblxuICAgIGNvbnN0IG1lc3NhZ2VCbG9jazIgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKFwiLm1lc3NhZ2VCbG9ja1wiKTtcblxuICAgIGlmIChtZXNzYWdlQmxvY2syKSB7XG4gICAgICBtZXNzYWdlQmxvY2syLmlubmVySFRNTCA9IG1lc3NhZ2VIdG1sO1xuICAgICAgYWRkTWVzc2FnZShtZXNzYWdlQmxvY2suaW5uZXJIVE1MLCAnYm90TWVzc2FnZScsIGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgICAgIGxhc3RCb3RNZXNzYWdlLmFwcGVuZENoaWxkKG1lc3NhZ2VCbG9jazIpO1xuICAgICAgbGFzdEJvdE1lc3NhZ2Uuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZEZhbHNlKGN1cnJlbnRTZXR0aW5nczogQk1PU2V0dGluZ3MsIHBsdWdpbjogQk1PR1BUKSB7XG4gIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGNyZWF0ZUJvdE1lc3NhZ2UoY3VycmVudFNldHRpbmdzKTtcblxuICBjb25zdCBmb3JtYXR0ZWRTZXR0aW5ncyA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJmb3JtYXR0ZWRTZXR0aW5nc1wiPlxuICAgICAgICAgIDxwPjxzdHJvbmc+Q29tbWFuZCBub3QgcmVjb2duaXplZC48L3N0cm9uZz48L3A+XG4gICAgICA8L2Rpdj5cbiAgYDtcblxuICBkaXNwbGF5TWVzc2FnZShtZXNzYWdlQmxvY2ssIGZvcm1hdHRlZFNldHRpbmdzLCBjdXJyZW50U2V0dGluZ3MpO1xuICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gIC8vIG5ldyBOb3RpY2UoXCJJbnZhbGlkIGNvbW1hbmQuXCIpO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09IENPTU1BTkQgRlVOQ1RJT05TID09PT09PT09PT09PT09PT09PT1cblxuLy8gYC9oZWxwYCBmb3IgaGVscCBjb21tYW5kc1xuZXhwb3J0IGZ1bmN0aW9uIGNvbW1hbmRIZWxwKGN1cnJlbnRTZXR0aW5nczogQk1PU2V0dGluZ3MpIHtcbiAgY29uc3QgbWVzc2FnZUJsb2NrID0gY3JlYXRlQm90TWVzc2FnZShjdXJyZW50U2V0dGluZ3MpO1xuXG4gIGNvbnN0IGZvcm1hdHRlZFNldHRpbmdzID0gYFxuICAgIDxkaXYgY2xhc3M9XCJmb3JtYXR0ZWRTZXR0aW5nc1wiPlxuICAgICAgPGgyPkNvbW1hbmRzPC9oMj5cbiAgICAgIDxwPjxjb2RlPi9pbnNwZWN0PC9jb2RlPiAtIFNob3cgc3lzdGVtIHNldHRpbmcuPC9wPlxuICAgICAgPHA+PGNvZGU+L21vZGVsIFwiW01PREVMLU5BTUVdXCIgb3IgW1ZBTFVFXTwvY29kZT4gLSBDaGFuZ2UgbW9kZWwuPC9wPlxuICAgICAgPHA+PGNvZGU+L3N5c3RlbSBcIltQUk9NUFRdXCI8L2NvZGU+IC0gQ2hhbmdlIHN5c3RlbSBzZXR0aW5nLjwvcD5cbiAgICAgIDxwPjxjb2RlPi9tYXh0b2tlbnMgW1ZBTFVFXTwvY29kZT4gLSBTZXQgbWF4IHRva2Vucy48L3A+XG4gICAgICA8cD48Y29kZT4vdGVtcCBbVkFMVUVdPC9jb2RlPiAtIENoYW5nZSB0ZW1wZXJhdHVyZSByYW5nZSAwIGZyb20gdG8gMS48L3A+XG4gICAgICA8cD48Y29kZT4vcmVmIG9uIHwgb2ZmPC9jb2RlPiAtIFR1cm4gb24gb3Igb2ZmIFwicmVmZXJlbmNlIGN1cnJlbnQgbm90ZVwiLjwvcD5cbiAgICAgIDxwPjxjb2RlPi9hcHBlbmQ8L2NvZGU+IC0gQXBwZW5kIGN1cnJlbnQgY2hhdCBoaXN0b3J5IHRvIGN1cnJlbnQgYWN0aXZlIG5vdGUuPC9wPlxuICAgICAgPHA+PGNvZGU+L3NhdmU8L2NvZGU+IC0gU2F2ZSBjdXJyZW50IGNoYXQgaGlzdG9yeSB0byBhIG5vdGUuPC9wPlxuICAgICAgPHA+PGNvZGU+L2NsZWFyPC9jb2RlPiBvciA8Y29kZT4vYzwvY29kZT4gLSBDbGVhciBjaGF0IGhpc3RvcnkuPC9wPlxuICAgIDwvZGl2PlxuICBgO1xuXG4gIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VCbG9jaywgZm9ybWF0dGVkU2V0dGluZ3MsIGN1cnJlbnRTZXR0aW5ncyk7XG59XG5cbi8vIGAvaW5zcGVjdGAgdG8gaW5zcGVjdCBzZXR0aW5nc1xuZXhwb3J0IGZ1bmN0aW9uIGNvbW1hbmRJbnNwZWN0KGN1cnJlbnRTZXR0aW5nczogQk1PU2V0dGluZ3MpIHtcbiAgY29uc3QgbWVzc2FnZUJsb2NrID0gY3JlYXRlQm90TWVzc2FnZShjdXJyZW50U2V0dGluZ3MpO1xuICBcbiAgY29uc3QgZm9ybWF0dGVkU2V0dGluZ3MgPSBgXG4gICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICA8aDI+SW5zcGVjdDwvaDI+XG4gICAgICA8cD48c3Ryb25nPk1PREVMOjwvc3Ryb25nPiAke2N1cnJlbnRTZXR0aW5ncy5tb2RlbH08L3A+XG4gICAgICA8cD48c3Ryb25nPlNZU1RFTTo8L3N0cm9uZz4gXCIke2N1cnJlbnRTZXR0aW5ncy5zeXN0ZW1fcm9sZX1cIjwvcD5cbiAgICAgIDxwPjxzdHJvbmc+TUFYIFRPS0VOUzo8L3N0cm9uZz4gXCIke2N1cnJlbnRTZXR0aW5ncy5tYXhfdG9rZW5zfVwiPC9wPlxuICAgICAgPHA+PHN0cm9uZz5URU1QRVJBVFVSRTo8L3N0cm9uZz4gJHtjdXJyZW50U2V0dGluZ3MudGVtcGVyYXR1cmV9PC9wPlxuICAgICAgPHA+PHN0cm9uZz5SRUZFUkVOQ0UgQ1VSUkVOVCBOT1RFOjwvc3Ryb25nPiAke2N1cnJlbnRTZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZX08L3A+XG4gICAgICA8cD48c3Ryb25nPlVTRVJOQU1FOjwvc3Ryb25nPiAke2N1cnJlbnRTZXR0aW5ncy51c2VyTmFtZX08L3A+XG4gICAgICA8cD48c3Ryb25nPkNIQVRCT1QgTkFNRTo8L3N0cm9uZz4gJHtjdXJyZW50U2V0dGluZ3MuY2hhdGJvdE5hbWV9PC9wPlxuICAgICAgPHA+PHN0cm9uZz5VU0VSIEJBQ0tHUk9VTkQgQ09MT1I6PC9zdHJvbmc+IFwiJHtjdXJyZW50U2V0dGluZ3MudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3J9XCI8L3A+XG4gICAgICA8cD48c3Ryb25nPkJPVCBCQUNLR1JPVU5EIENPTE9SOjwvc3Ryb25nPiBcIiR7Y3VycmVudFNldHRpbmdzLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3J9XCI8L3A+XG4gICAgICA8cD48c3Ryb25nPlJFU1QgQVBJIFVSTDo8L3N0cm9uZz4gXCIke2N1cnJlbnRTZXR0aW5ncy5yZXN0QVBJVXJsfVwiPC9wPlxuICAgIDwvZGl2PlxuICBgO1xuXG4gIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VCbG9jaywgZm9ybWF0dGVkU2V0dGluZ3MsIGN1cnJlbnRTZXR0aW5ncyk7XG59XG5cbi8vIGAvbW9kZWwgXCJbVkFMVUVdXCJgIHRvIGNoYW5nZSBtb2RlbC5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21tYW5kTW9kZWwoaW5wdXQ6IHN0cmluZywgY3VycmVudFNldHRpbmdzOiBCTU9TZXR0aW5ncywgcGx1Z2luOiBCTU9HUFQpIHtcbiAgY29uc3QgbWVzc2FnZUJsb2NrID0gY3JlYXRlQm90TWVzc2FnZShjdXJyZW50U2V0dGluZ3MpO1xuXG4gIC8vIENoZWNrIGlmIHRoZSB1c2VyIGhhcyBub3Qgc3BlY2lmaWVkIGEgbW9kZWwgYWZ0ZXIgdGhlIFwiL21vZGVsXCIgY29tbWFuZFxuICBpZiAoIWlucHV0LnNwbGl0KCcgJylbMV0pIHtcbiAgICBjb25zdCBtZXNzYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIj48cD48c3Ryb25nPlBsZWFzZSBzZWxlY3QgYSBtb2RlbC48L3N0cm9uZz48L3A+PC9kaXY+YDtcbiAgICBkaXNwbGF5TWVzc2FnZShtZXNzYWdlQmxvY2ssIG1lc3NhZ2VIdG1sLCBjdXJyZW50U2V0dGluZ3MpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbnB1dC5zcGxpdCgnICcpWzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBpbnB1dE1vZGVsID0gaW5wdXQuc3BsaXQoJyAnKVsxXS5yZXBsYWNlKC9eXCIoLiopXCIkLywgJyQxJyk7XG5cbiAgICBjb25zdCBhbnRocm9waWNLZXlNb2RlbHMgPSBjcmVhdGVNb2RlbE9iamVjdChBTlRIUk9QSUNfTU9ERUxTKTtcbiAgICBjb25zdCBvcGVuQUlLZXlNb2RlbHMgPSBjcmVhdGVNb2RlbE9iamVjdChPUEVOQUlfTU9ERUxTKTtcblxuICAgIGxldCBtZXNzYWdlSHRtbCA9IFwiXCI7XG5cbiAgICBpZiAoY3VycmVudFNldHRpbmdzLmFwaUtleS5zdGFydHNXaXRoKFwic2stYW50XCIpKSB7XG4gICAgICBpZiAoYW50aHJvcGljS2V5TW9kZWxzW2lucHV0TW9kZWwgYXMga2V5b2YgdHlwZW9mIGFudGhyb3BpY0tleU1vZGVsc10gfHwgW1wiY2xhdWRlLWluc3RhbnQtMS4yXCIsIFwiY2xhdWRlLTIuMFwiXS5pbmNsdWRlcyhpbnB1dE1vZGVsIGFzIHN0cmluZykpIHtcbiAgICAgICAgY3VycmVudFNldHRpbmdzLm1vZGVsID0gYW50aHJvcGljS2V5TW9kZWxzW2lucHV0TW9kZWwgYXMga2V5b2YgdHlwZW9mIGFudGhyb3BpY0tleU1vZGVsc10gPz8gaW5wdXRNb2RlbDtcbiAgICAgICAgbWVzc2FnZUh0bWwgPSBgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+PHA+PHN0cm9uZz5VcGRhdGVkIE1vZGVsIHRvICR7Y3VycmVudFNldHRpbmdzLm1vZGVsfTwvc3Ryb25nPjwvcD48L2Rpdj5gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZUh0bWwgPSBgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+PHA+PHN0cm9uZz5Nb2RlbCAnJHtpbnB1dE1vZGVsfScgZG9lcyBub3QgZXhpc3QgZm9yIHRoaXMgQVBJIGtleS48L3N0cm9uZz48L3A+PC9kaXY+YDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZXR0aW5ncy5hcGlLZXkuc3RhcnRzV2l0aChcInNrLVwiKSkge1xuICAgICAgaWYgKG9wZW5BSUtleU1vZGVsc1tpbnB1dE1vZGVsIGFzIGtleW9mIHR5cGVvZiBvcGVuQUlLZXlNb2RlbHNdIHx8IFtcImdwdC0zLjUtdHVyYm9cIiwgXCJncHQtMy41LXR1cmJvLTExMDZcIiwgXCJncHQtMy41LXR1cmJvLTE2ay0wNjEzXCIsIFwiZ3B0LTRcIiwgXCJncHQtNC0xMTA2LXByZXZpZXdcIl0uaW5jbHVkZXMoaW5wdXRNb2RlbCkpIHtcbiAgICAgICAgY3VycmVudFNldHRpbmdzLm1vZGVsID0gb3BlbkFJS2V5TW9kZWxzW2lucHV0TW9kZWwgYXMga2V5b2YgdHlwZW9mIG9wZW5BSUtleU1vZGVsc10gfHwgaW5wdXRNb2RlbDtcbiAgICAgICAgbWVzc2FnZUh0bWwgPSBgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+PHA+PHN0cm9uZz5VcGRhdGVkIE1vZGVsIHRvICR7Y3VycmVudFNldHRpbmdzLm1vZGVsfTwvc3Ryb25nPjwvcD48L2Rpdj5gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZUh0bWwgPSBgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+PHA+PHN0cm9uZz5Nb2RlbCAnJHtpbnB1dE1vZGVsfScgZG9lcyBub3QgZXhpc3QgZm9yIHRoaXMgQVBJIGtleS48L3N0cm9uZz48L3A+PC9kaXY+YDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZUh0bWwgPSBgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+PHA+PHN0cm9uZz5JbnZhbGlkIEFQSSBrZXkuPC9zdHJvbmc+PC9wPjwvZGl2PmA7XG4gICAgfVxuXG4gICAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrLCBtZXNzYWdlSHRtbCwgY3VycmVudFNldHRpbmdzKTtcbiAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRTZXR0aW5ncztcbiAgfVxufVxuXG4vLyBgL3JlZmAgdG8gdHVybiBvbi9vZmYgcmVmZXJlbmNlQ3VycmVudE5vdGUuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZFJlZmVyZW5jZShpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgbGV0IGZvcm1hdHRlZFNldHRpbmdzID0gJyc7XG4gIGNvbnN0IHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWZlcmVuY2VDdXJyZW50Tm90ZScpO1xuICBjb25zdCBpbnB1dFZhbHVlID0gaW5wdXQuc3BsaXQoJyAnKVsxXT8udG9Mb3dlckNhc2UoKTtcblxuICBpZiAoaW5wdXRWYWx1ZSA9PT0gXCJ0cnVlXCIgfHwgaW5wdXRWYWx1ZSA9PT0gXCJvblwiKSB7XG4gICAgICBjdXJyZW50U2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUgPSB0cnVlO1xuICAgICAgaWYgKHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCkge1xuICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIH1cbiAgICAgIGZvcm1hdHRlZFNldHRpbmdzICs9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIj5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+UmVmZXJlbmNlIHVwZGF0ZWQ6IG9uPC9zdHJvbmc+PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgfSBlbHNlIGlmIChpbnB1dFZhbHVlID09PSBcImZhbHNlXCIgfHwgaW5wdXRWYWx1ZSA9PT0gXCJvZmZcIikge1xuICAgICAgY3VycmVudFNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlID0gZmFsc2U7XG4gICAgICBpZiAocmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50KSB7XG4gICAgICAgICAgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgICBmb3JtYXR0ZWRTZXR0aW5ncyArPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgICA8cD48c3Ryb25nPlJlZmVyZW5jZSB1cGRhdGVkOiBvZmY8L3N0cm9uZz48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICB9IGVsc2Uge1xuICAgIGZvcm1hdHRlZFNldHRpbmdzICs9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgPHA+PHN0cm9uZz5JbnZhbGlkIGNvbW1hbmQuPC9zdHJvbmc+PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrLCBmb3JtYXR0ZWRTZXR0aW5ncywgY3VycmVudFNldHRpbmdzKTtcbiAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xufVxuXG4vLyBgL3RlbXAgXCJWQUxVRVwiYCB0byBjaGFuZ2UgdGhlIHRlbXBlcmF0dXJlLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbW1hbmRUZW1wZXJhdHVyZShpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgY29uc3QgaW5wdXRWYWx1ZSA9IGlucHV0LnNwbGl0KCcgJylbMV07XG4gIGNvbnN0IGZsb2F0VmFsdWUgPSBwYXJzZUZsb2F0KGlucHV0VmFsdWUpO1xuICBsZXQgdGVtcGVyYXR1cmVTZXR0aW5nTWVzc2FnZTogc3RyaW5nO1xuXG4gIGlmIChjdXJyZW50U2V0dGluZ3MgJiYgIWlzTmFOKGZsb2F0VmFsdWUpICYmIGZsb2F0VmFsdWUgPj0gMC4wMCAmJiBmbG9hdFZhbHVlIDw9IDEuMDApIHtcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy50ZW1wZXJhdHVyZSA9IHBhcnNlRmxvYXQoKE1hdGgucm91bmQoZmxvYXRWYWx1ZSAvIDAuMDUpICogMC4wNSkudG9GaXhlZCgyKSk7XG4gICAgICB0ZW1wZXJhdHVyZVNldHRpbmdNZXNzYWdlID0gYCR7Y3VycmVudFNldHRpbmdzLnRlbXBlcmF0dXJlfWA7XG4gIH0gZWxzZSB7XG4gICAgICB0ZW1wZXJhdHVyZVNldHRpbmdNZXNzYWdlID0gXCJJbnZhbGlkLlwiO1xuICB9XG5cbiAgY29uc3QgZm9ybWF0dGVkU2V0dGluZ3MgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIj5cbiAgICAgICAgPHA+PHN0cm9uZz5UZW1wZXJhdHVyZSB1cGRhdGVkOiAke3RlbXBlcmF0dXJlU2V0dGluZ01lc3NhZ2V9PC9zdHJvbmc+PC9wPlxuICAgICAgPC9kaXY+XG4gIGA7XG5cbiAgZGlzcGxheU1lc3NhZ2UobWVzc2FnZUJsb2NrLCBmb3JtYXR0ZWRTZXR0aW5ncywgY3VycmVudFNldHRpbmdzKTtcbiAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xufVxuXG4vLyBgL21heHRva2Vuc2AgdG8gY2hhbmdlIG1heF90b2tlbnMuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZE1heFRva2VucyhpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgbGV0IGZvcm1hdHRlZFNldHRpbmdzID0gJyc7XG4gIGNvbnN0IG1heFRva2Vuc1ZhbHVlID0gaW5wdXQuc3BsaXQoJyAnKVsxXTtcbiAgbGV0IG1heFRva2Vuc1NldHRpbmdNZXNzYWdlOiBzdHJpbmc7XG5cbiAgaWYgKG1heFRva2Vuc1ZhbHVlICE9PSB1bmRlZmluZWQgJiYgbWF4VG9rZW5zVmFsdWUgIT09ICcnKSB7XG4gICAgICBjb25zdCBpbnB1dFZhbHVlID0gcGFyc2VJbnQobWF4VG9rZW5zVmFsdWUpO1xuICBcbiAgICAgIGlmICghaXNOYU4oaW5wdXRWYWx1ZSkgJiYgaW5wdXRWYWx1ZSA+PSAwKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIG1heF90b2tlbnMgd2l0aCB0aGUgdmFsaWQgaW50ZWdlciB2YWx1ZVxuICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncy5tYXhfdG9rZW5zID0gaW5wdXRWYWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgIG1heFRva2Vuc1NldHRpbmdNZXNzYWdlID0gYE1heCB0b2tlbnMgdXBkYXRlZDogJHtpbnB1dFZhbHVlfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElucHV0IGlzIG5vdCBhIHZhbGlkIGludGVnZXJcbiAgICAgICAgICBtYXhUb2tlbnNTZXR0aW5nTWVzc2FnZSA9IFwiTWF4IHRva2VucyB1cGRhdGU6IGludmFsaWRcIjtcbiAgICAgIH1cbiAgfSBlbHNlIHtcbiAgICAgIC8vIENsZWFyIG1heF90b2tlbnMgYW5kIGluZm9ybSB0aGUgdXNlclxuICAgICAgY3VycmVudFNldHRpbmdzLm1heF90b2tlbnMgPSBcIlwiO1xuICAgICAgbWF4VG9rZW5zU2V0dGluZ01lc3NhZ2UgPSBcIk1heCB0b2tlbnMgY2xlYXJlZC5cIjtcbiAgfVxuICBcbiAgZm9ybWF0dGVkU2V0dGluZ3MgKz0gYFxuICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgPHA+PHN0cm9uZz4ke21heFRva2Vuc1NldHRpbmdNZXNzYWdlfTwvc3Ryb25nPjwvcD5cbiAgICAgIDwvZGl2PlxuICBgO1xuXG4gIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VCbG9jaywgZm9ybWF0dGVkU2V0dGluZ3MsIGN1cnJlbnRTZXR0aW5ncyk7XG4gIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbn1cblxuLy8gYC9zeXN0ZW0gXCJbVkFMVUVdXCJgIHRvIGNoYW5nZSBzeXN0ZW0gcHJvbXB0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZFN5c3RlbShpbnB1dDogc3RyaW5nLCBjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBtZXNzYWdlQmxvY2sgPSBjcmVhdGVCb3RNZXNzYWdlKGN1cnJlbnRTZXR0aW5ncyk7XG5cbiAgbGV0IGZvcm1hdHRlZFNldHRpbmdzID0gJyc7XG4gIGNvbnN0IHN5c3RlbVByb21wdFZhbHVlID0gaW5wdXQubWF0Y2goL1wiKFteXCJdKylcIi8pO1xuXG4gIGlmIChzeXN0ZW1Qcm9tcHRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgaWYgKHN5c3RlbVByb21wdFZhbHVlWzFdKSB7XG4gICAgICAgICAgY3VycmVudFNldHRpbmdzLnN5c3RlbV9yb2xlID0gc3lzdGVtUHJvbXB0VmFsdWVbMV07XG4gICAgICAgICAgZm9ybWF0dGVkU2V0dGluZ3MgKz0gYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybWF0dGVkU2V0dGluZ3NcIj5cbiAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+U3lzdGVtIHVwZGF0ZWQ6IFwiJHtzeXN0ZW1Qcm9tcHRWYWx1ZVsxXX1cIjwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYDtcbiAgICAgIH1cbiAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy5zeXN0ZW1fcm9sZSA9IFwiXCI7XG4gICAgICBmb3JtYXR0ZWRTZXR0aW5ncyArPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1hdHRlZFNldHRpbmdzXCI+XG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+U3lzdGVtIGNsZWFyZWQuPC9zdHJvbmc+PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgfVxuXG4gIGRpc3BsYXlNZXNzYWdlKG1lc3NhZ2VCbG9jaywgZm9ybWF0dGVkU2V0dGluZ3MsIGN1cnJlbnRTZXR0aW5ncyk7XG4gIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbW1hbmRBcHBlbmQoY3VycmVudFNldHRpbmdzOiBCTU9TZXR0aW5ncykge1xuICBsZXQgbWFya2Rvd25Db250ZW50ID0gJyc7XG5cbiAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXG4gIGlmIChhY3RpdmVGaWxlPy5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICBjb25zdCBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblxuICAgIC8vIFJldHJpZXZlIHVzZXIgYW5kIGNoYXRib3QgbmFtZXNcbiAgICBjb25zdCB1c2VyTmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudXNlck5hbWUnKSBhcyBOb2RlTGlzdE9mPEhUTUxIZWFkaW5nRWxlbWVudD47XG5cbiAgICBsZXQgdXNlck5hbWVUZXh0ID0gJ1VTRVInO1xuICAgIGlmICh1c2VyTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB1c2VyTmFtZU5vZGUgPSB1c2VyTmFtZXNbMF07XG4gICAgICAgIEFycmF5LmZyb20odXNlck5hbWVOb2RlLmNoaWxkTm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGlzIGEgdGV4dCBub2RlIGFuZCBpdHMgdGV4dENvbnRlbnQgaXMgbm90IG51bGxcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBub2RlLnRleHRDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgdXNlck5hbWVUZXh0ID0gbm9kZS50ZXh0Q29udGVudC50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY29uc3QgY2hhdGJvdE5hbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2NoYXRib3ROYW1lJykgYXMgTm9kZUxpc3RPZjxIVE1MSGVhZGluZ0VsZW1lbnQ+O1xuICAgIGNvbnN0IGNoYXRib3ROYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGF0Ym90TmFtZScpIGFzIE5vZGVMaXN0T2Y8SFRNTEhlYWRpbmdFbGVtZW50PjtcbiAgICBjb25zdCBjaGF0Ym90TmFtZVRleHQgPSBjaGF0Ym90TmFtZXMubGVuZ3RoID4gMCAmJiBjaGF0Ym90TmFtZXNbMF0udGV4dENvbnRlbnQgPyBjaGF0Ym90TmFtZXNbMF0udGV4dENvbnRlbnQudG9VcHBlckNhc2UoKSA6ICdBU1NJU1RBTlQnO1xuXG4gICAgLy8gQ2hlY2sgYW5kIHJlYWQgdGhlIEpTT04gZmlsZVxuICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTikpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpzb25Db250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBKU09OLnBhcnNlKGpzb25Db250ZW50KTtcblxuICAgICAgICAvLyBGaWx0ZXIgb3V0IG1lc3NhZ2VzIHN0YXJ0aW5nIHdpdGggJy8nLCBhbmQgdGhlIGFzc2lzdGFudCdzIHJlc3BvbnNlIGltbWVkaWF0ZWx5IGZvbGxvd2luZyBpdFxuICAgICAgICBsZXQgc2tpcE5leHQgPSBmYWxzZTtcbiAgICAgICAgbWFya2Rvd25Db250ZW50ICs9IG1lc3NhZ2VzXG4gICAgICAgICAgLmZpbHRlcigobWVzc2FnZTogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgfSwgaW5kZXg6IG51bWJlciwgYXJyYXk6IHN0cmluZyB8IGFueVtdKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2tpcE5leHQgJiYgbWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICBza2lwTmV4dCA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50LnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgICAgICAgICAvLyBDaGVjayBpZiBuZXh0IG1lc3NhZ2UgaXMgYWxzbyBmcm9tIHVzZXIgYW5kIHN0YXJ0cyB3aXRoICcvJ1xuICAgICAgICAgICAgICBza2lwTmV4dCA9IGluZGV4ICsgMSA8IGFycmF5Lmxlbmd0aCAmJiBhcnJheVtpbmRleCArIDFdLnJvbGUgPT09ICdhc3Npc3RhbnQnO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5tYXAoKG1lc3NhZ2U6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGxldCByb2xlVGV4dCA9IG1lc3NhZ2Uucm9sZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgcm9sZVRleHQgPSByb2xlVGV4dCA9PT0gJ1VTRVInID8gdXNlck5hbWVUZXh0IDogcm9sZVRleHQ7XG4gICAgICAgICAgICByb2xlVGV4dCA9IHJvbGVUZXh0ID09PSAnQVNTSVNUQU5UJyA/IGNoYXRib3ROYW1lVGV4dCA6IHJvbGVUZXh0O1xuICAgICAgICAgICAgcmV0dXJuIGAjIyMjIyMgJHtyb2xlVGV4dH1cXG4ke21lc3NhZ2UuY29udGVudH1cXG5gO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmpvaW4oJ1xcbicpO1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBtZXNzYWdlIGhpc3Rvcnk6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBleGlzdGluZ0NvbnRlbnQgKyAnXFxuJyArIG1hcmtkb3duQ29udGVudDtcblxuICAgIC8vIFNhdmUgdGhlIHVwZGF0ZWQgY29udGVudCBiYWNrIHRvIHRoZSBhY3RpdmUgZmlsZVxuICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuICAgIG5ldyBOb3RpY2UoXCJBcHBlbmRlZCBjb252ZXJzYXRpb24uXCIpO1xuICB9XG4gIGVsc2Uge1xuICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgbm90ZSB0byBhcHBlbmQgdG8uXCIpO1xuICB9XG59XG5cblxuLy8gYC9zYXZlYCB0byBzYXZlIGN1cnJlbnQgY2hhdCBoaXN0b3J5IHRvIGEgbm90ZS5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21tYW5kU2F2ZShjdXJyZW50U2V0dGluZ3M6IEJNT1NldHRpbmdzKSB7XG4gIGxldCBmb2xkZXJOYW1lID0gY3VycmVudFNldHRpbmdzLmNoYXRIaXN0b3J5UGF0aDtcbiAgY29uc3QgYmFzZUZpbGVOYW1lID0gJ0NoYXQgSGlzdG9yeSc7XG4gIGNvbnN0IGZpbGVFeHRlbnNpb24gPSAnLm1kJztcblxuICBpZiAoZm9sZGVyTmFtZSAmJiAhZm9sZGVyTmFtZS5lbmRzV2l0aCgnLycpKSB7XG4gICAgZm9sZGVyTmFtZSArPSAnLyc7XG4gIH1cblxuXG4gIFxuICAvLyBDcmVhdGUgYSBkYXRldGltZSBzdHJpbmcgdG8gYXBwZW5kIHRvIHRoZSBmaWxlIG5hbWVcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgZGF0ZVRpbWVTdGFtcCA9IG5vdy5nZXRGdWxsWWVhcigpICsgXCItXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICArIChub3cuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArIFwiLVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBub3cuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArIFwiIFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBub3cuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyBcIi1cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgbm93LmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyBcIi1cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgbm93LmdldFNlY29uZHMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG5cbiAgdHJ5IHtcbiAgICBsZXQgbWFya2Rvd25Db250ZW50ID0gJyc7XG4gICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTsgLy8gUmV0cmlldmUgYWxsIGZpbGVzIGZyb20gdGhlIHZhdWx0XG5cbiAgICAvLyBSZXRyaWV2ZSBtb2RlbCBuYW1lXG4gICAgY29uc3QgbW9kZWxOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RlbE5hbWUnKSBhcyBIVE1MSGVhZGluZ0VsZW1lbnQ7XG4gICAgbGV0IG1vZGVsTmFtZSA9ICdHUFQtMy41LVRVUkJPJzsgLy8gRGVmYXVsdCBtb2RlbCBuYW1lXG4gICAgaWYgKG1vZGVsTmFtZUVsZW1lbnQgJiYgbW9kZWxOYW1lRWxlbWVudC50ZXh0Q29udGVudCkge1xuICAgICAgICBtb2RlbE5hbWUgPSBtb2RlbE5hbWVFbGVtZW50LnRleHRDb250ZW50LnJlcGxhY2UoJ01vZGVsOiAnLCAnJykudG9VcHBlckNhc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBhbGxGaWxlcy5maW5kKGZpbGUgPT4gZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkgPT09IGN1cnJlbnRTZXR0aW5ncy50ZW1wbGF0ZUZpbGVQYXRoLnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgaWYgKHRlbXBsYXRlRmlsZSkge1xuICAgICAgbGV0IGZpbGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQodGVtcGxhdGVGaWxlKTtcbiAgXG4gICAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSBjb250ZW50IGhhcyBZQU1MIGZyb250IG1hdHRlclxuICAgICAgaWYgKC9eLS0tXFxzKltcXHNcXFNdKj8tLS0vLnRlc3QoZmlsZUNvbnRlbnQpKSB7XG4gICAgICAgICAgLy8gSW5zZXJ0IG1vZGVsIG5hbWUgaW50byBleGlzdGluZyBmcm9udCBtYXR0ZXJcbiAgICAgICAgICBmaWxlQ29udGVudCA9IGZpbGVDb250ZW50LnJlcGxhY2UoL14tLS0vLCBgLS0tXFxubW9kZWw6ICR7bW9kZWxOYW1lfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBQcmVwZW5kIG5ldyBmcm9udCBtYXR0ZXJcbiAgICAgICAgICBmaWxlQ29udGVudCA9IGAtLS1cbiAgbW9kZWw6ICR7bW9kZWxOYW1lfVxuLS0tXFxuYCArIGZpbGVDb250ZW50O1xuICAgICAgfVxuICAgICAgbWFya2Rvd25Db250ZW50ICs9IGZpbGVDb250ZW50O1xuICAgICAgLy8gY29uc29sZS5sb2coZmlsZUNvbnRlbnQpO1xuICB9IGVsc2Uge1xuICAgICAgLy8gWUFNTCBmcm9udCBtYXR0ZXJcbiAgICAgIG1hcmtkb3duQ29udGVudCArPSBcbiAgICAgIGAtLS1cbiAgbW9kZWw6ICR7bW9kZWxOYW1lfVxuLS0tXFxuYDtcbiAgfVxuXG4gICAgLy8gUmV0cmlldmUgdXNlciBhbmQgY2hhdGJvdCBuYW1lc1xuICAgIGNvbnN0IHVzZXJOYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51c2VyTmFtZScpIGFzIE5vZGVMaXN0T2Y8SFRNTEhlYWRpbmdFbGVtZW50PjtcblxuICAgIGxldCB1c2VyTmFtZVRleHQgPSAnVVNFUic7XG4gICAgaWYgKHVzZXJOYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVzZXJOYW1lTm9kZSA9IHVzZXJOYW1lc1swXTtcbiAgICAgICAgQXJyYXkuZnJvbSh1c2VyTmFtZU5vZGUuY2hpbGROb2RlcykuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG5vZGUgaXMgYSB0ZXh0IG5vZGUgYW5kIGl0cyB0ZXh0Q29udGVudCBpcyBub3QgbnVsbFxuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIG5vZGUudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB1c2VyTmFtZVRleHQgPSBub2RlLnRleHRDb250ZW50LnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBjb25zdCBjaGF0Ym90TmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjY2hhdGJvdE5hbWUnKSBhcyBOb2RlTGlzdE9mPEhUTUxIZWFkaW5nRWxlbWVudD47XG4gICAgY29uc3QgY2hhdGJvdE5hbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXRib3ROYW1lJykgYXMgTm9kZUxpc3RPZjxIVE1MSGVhZGluZ0VsZW1lbnQ+O1xuICAgIGNvbnN0IGNoYXRib3ROYW1lVGV4dCA9IGNoYXRib3ROYW1lcy5sZW5ndGggPiAwICYmIGNoYXRib3ROYW1lc1swXS50ZXh0Q29udGVudCA/IGNoYXRib3ROYW1lc1swXS50ZXh0Q29udGVudC50b1VwcGVyQ2FzZSgpIDogJ0FTU0lTVEFOVCc7XG5cbiAgICAvLyBDaGVjayBhbmQgcmVhZCB0aGUgSlNPTiBmaWxlXG4gICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QganNvbkNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04pO1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IEpTT04ucGFyc2UoanNvbkNvbnRlbnQpO1xuXG4gICAgICAgIC8vIEZpbHRlciBvdXQgbWVzc2FnZXMgc3RhcnRpbmcgd2l0aCAnLycsIGFuZCB0aGUgYXNzaXN0YW50J3MgcmVzcG9uc2UgaW1tZWRpYXRlbHkgZm9sbG93aW5nIGl0XG4gICAgICAgIGxldCBza2lwTmV4dCA9IGZhbHNlO1xuICAgICAgICBtYXJrZG93bkNvbnRlbnQgKz0gbWVzc2FnZXNcbiAgICAgICAgICAuZmlsdGVyKChtZXNzYWdlOiB7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyB9LCBpbmRleDogbnVtYmVyLCBhcnJheTogc3RyaW5nIHwgYW55W10pID0+IHtcbiAgICAgICAgICAgIGlmIChza2lwTmV4dCAmJiBtZXNzYWdlLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgICAgIHNraXBOZXh0ID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICAgIC8vIENoZWNrIGlmIG5leHQgbWVzc2FnZSBpcyBhbHNvIGZyb20gdXNlciBhbmQgc3RhcnRzIHdpdGggJy8nXG4gICAgICAgICAgICAgIHNraXBOZXh0ID0gaW5kZXggKyAxIDwgYXJyYXkubGVuZ3RoICYmIGFycmF5W2luZGV4ICsgMV0ucm9sZSA9PT0gJ2Fzc2lzdGFudCc7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLm1hcCgobWVzc2FnZTogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgbGV0IHJvbGVUZXh0ID0gbWVzc2FnZS5yb2xlLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICByb2xlVGV4dCA9IHJvbGVUZXh0ID09PSAnVVNFUicgPyB1c2VyTmFtZVRleHQgOiByb2xlVGV4dDtcbiAgICAgICAgICAgIHJvbGVUZXh0ID0gcm9sZVRleHQgPT09ICdBU1NJU1RBTlQnID8gY2hhdGJvdE5hbWVUZXh0IDogcm9sZVRleHQ7XG4gICAgICAgICAgICByZXR1cm4gYCMjIyMjIyAke3JvbGVUZXh0fVxcbiR7bWVzc2FnZS5jb250ZW50fVxcbmA7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuam9pbignXFxuJyk7XG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIG1lc3NhZ2UgaGlzdG9yeTpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHRoZSBmb2xkZXIgZXhpc3RzLCBjcmVhdGUgaXQgaWYgbm90XG4gICAgaWYgKCFhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXJOYW1lKSkge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlck5hbWUpO1xuICAgIH1cblxuICAgIGxldCBmaWxlTmFtZSA9ICcnO1xuXG4gICAgaWYgKGN1cnJlbnRTZXR0aW5ncy5hbGxvd1JlbmFtZU5vdGVUaXRsZSkge1xuICAgICAgbGV0IHJlZmVyZW5jZUN1cnJlbnROb3RlID0gJyc7XG4gICAgICBsZXQgdW5pcXVlTmFtZUZvdW5kID0gZmFsc2U7XG4gICAgICBsZXQgbW9kZWxSZW5hbWVUaXRsZTtcblxuICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cbiAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgaWYgKGN1cnJlbnRTZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZSkge1xuICAgICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZSA9IGF3YWl0IGdldEFjdGl2ZUZpbGVDb250ZW50KGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgYSBmaWxlIG5hbWUgYWxyZWFkeSBleGlzdHNcbiAgICAgIGNvbnN0IGZpbGVOYW1lRXhpc3RzID0gKG5hbWU6IHN0cmluZyB8IG51bGwpID0+IHtcbiAgICAgICAgICByZXR1cm4gYWxsRmlsZXMuc29tZSgoZmlsZSkgPT4gZmlsZS5wYXRoID09PSBmb2xkZXJOYW1lICsgbmFtZSArIGZpbGVFeHRlbnNpb24pO1xuICAgICAgfTtcbiAgICBcbiAgICAgIHdoaWxlICghdW5pcXVlTmFtZUZvdW5kKSB7XG4gICAgICAgICAgbW9kZWxSZW5hbWVUaXRsZSA9IGF3YWl0IGZldGNoT3BlbkFJQVBJVGl0bGUoY3VycmVudFNldHRpbmdzLCByZWZlcmVuY2VDdXJyZW50Tm90ZSArIG1hcmtkb3duQ29udGVudCk7XG4gICAgICBcbiAgICAgICAgICBpZiAoIWZpbGVOYW1lRXhpc3RzKG1vZGVsUmVuYW1lVGl0bGUpKSB7XG4gICAgICAgICAgICAgIHVuaXF1ZU5hbWVGb3VuZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmaWxlTmFtZSA9IGZvbGRlck5hbWUgKyBtb2RlbFJlbmFtZVRpdGxlICsgZmlsZUV4dGVuc2lvbjtcbiAgICAgIFxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGZpbGVOYW1lID0gZm9sZGVyTmFtZSArIGJhc2VGaWxlTmFtZSArICcgJyArIGRhdGVUaW1lU3RhbXAgKyBmaWxlRXh0ZW5zaW9uO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IG5vdGUgd2l0aCBmb3JtYXR0ZWQgTWFya2Rvd24gY29udGVudFxuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZU5hbWUsIG1hcmtkb3duQ29udGVudCk7XG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdOb3RlIGNyZWF0ZWQ6ICcgKyBmaWxlLnBhdGgpO1xuICAgICAgbmV3IE5vdGljZShcIlNhdmVkIGNvbnZlcnNhdGlvbi5cIik7XG5cbiAgICAgIC8vIE9wZW4gdGhlIG5ld2x5IGNyZWF0ZWQgbm90ZSBpbiBhIG5ldyBwYW5lXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGVOYW1lLCAnJywgdHJ1ZSwgeyBhY3RpdmU6IHRydWUgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgbm90ZTonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gY29udmVydCBhbiBhcnJheSBvZiBtb2RlbHMgaW50byBhbiBvYmplY3Qgd2l0aCBudW1lcmljIGtleXNcbmZ1bmN0aW9uIGNyZWF0ZU1vZGVsT2JqZWN0KG1vZGVsc0FycmF5OiBzdHJpbmdbXSk6IE1vZGVsT2JqZWN0IHtcbiAgY29uc3QgbW9kZWxPYmplY3Q6IE1vZGVsT2JqZWN0ID0ge307XG4gIG1vZGVsc0FycmF5LmZvckVhY2goKG1vZGVsLCBpbmRleCkgPT4ge1xuICAgIG1vZGVsT2JqZWN0WyhpbmRleCArIDEpLnRvU3RyaW5nKCldID0gbW9kZWw7XG4gIH0pO1xuICByZXR1cm4gbW9kZWxPYmplY3Q7XG59IiwgImltcG9ydCB7IHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEJNT1NldHRpbmdzIH0gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHsgYWRkTWVzc2FnZSwgYWRkUGFyYWdyYXBoQnJlYWtzLCBjb2RlQmxvY2tDb3B5QnV0dG9uLCBwcmlzbUhpZ2hsaWdodGluZyB9IGZyb20gXCIuL3ZpZXdcIjtcbmltcG9ydCB7IG1hcmtlZCB9IGZyb20gXCJtYXJrZWRcIjtcbmltcG9ydCBPcGVuQUkgZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0gfSBmcm9tIFwib3BlbmFpL3Jlc291cmNlcy9jaGF0XCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaE9wZW5BSUFQSShcbiAgICBzZXR0aW5nczogQk1PU2V0dGluZ3MsXG4gICAgcmVmZXJlbmNlQ3VycmVudE5vdGU6IHN0cmluZyxcbiAgICBtZXNzYWdlSGlzdG9yeUNvbnRlbnQ6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdID0gW10sXG4gICAgbWF4VG9rZW5zOiBzdHJpbmcsXG4gICAgdGVtcGVyYXR1cmU6IG51bWJlcikgXG4gICAge1xuICAgIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICAgICAgICBhcGlLZXk6IHNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgYmFzZVVSTDogc2V0dGluZ3Mub3BlbkFJQmFzZVVybCxcbiAgICAgICAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI6IHRydWUsIC8vIGFwaUtleSBpcyBzdG9yZWQgd2l0aGluIGRhdGEuanNvblxuICAgIH0pO1xuXG4gICAgY29uc3QgbWVzc2FnZUhpc3RvcnkgPSBtZXNzYWdlSGlzdG9yeUNvbnRlbnQubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgcm9sZTogaXRlbS5yb2xlLFxuICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQsXG4gICAgfSkpIGFzIENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtW107XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLm1vZGVsLFxuICAgICAgICAgICAgbWF4X3Rva2VuczogcGFyc2VJbnQobWF4VG9rZW5zKSxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogcmVmZXJlbmNlQ3VycmVudE5vdGUgKyBzZXR0aW5ncy5zeXN0ZW1fcm9sZSB9LFxuICAgICAgICAgICAgICAgIC4uLm1lc3NhZ2VIaXN0b3J5XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgbWVzc2FnZSA9ICcnO1xuXG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgcGFydCBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBwYXJ0LmNob2ljZXNbMF0/LmRlbHRhPy5jb250ZW50IHx8ICcnO1xuXG4gICAgICAgICAgICBtZXNzYWdlICs9IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZUNvbnRhaW5lckVsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChcIi5ib3RNZXNzYWdlXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RCb3RNZXNzYWdlID0gYm90TWVzc2FnZXNbYm90TWVzc2FnZXMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQmxvY2sgPSBsYXN0Qm90TWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZUJsb2NrJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSBtYXJrZWQobWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UsICdib3RNZXNzYWdlJywgc2V0dGluZ3MpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RCb3RNZXNzYWdlID0gYm90TWVzc2FnZXNbYm90TWVzc2FnZXMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGxhc3RCb3RNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQmxvY2snKTtcblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSBtYXJrZWQoZXJyb3IucmVzcG9uc2U/LmRhdGE/LmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZUJsb2NrLmlubmVySFRNTCwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvciB8fCBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaE9wZW5BSUFQSVRpdGxlKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgbWFya2Rvd25Db250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgICAgICAgYXBpS2V5OiBzZXR0aW5ncy5hcGlLZXksXG4gICAgICAgIGJhc2VVUkw6IHNldHRpbmdzLm9wZW5BSUJhc2VVcmwsXG4gICAgICAgIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlLCAvLyBhcGlLZXkgaXMgc3RvcmVkIHdpdGhpbiBkYXRhLmpzb25cbiAgICB9KTtcblxuICAgIGNvbnN0IHByb21wdCA9IGBCYXNlZCBvbiB0aGUgZm9sbG93aW5nIG1hcmtkb3duIGNvbnRlbnQsIGNyZWF0ZSBhIG5ldywgc3VpdGFibGUgdGl0bGUuXG4gICAgIFRoZSB0aXRsZSBzaG91bGQgbm90IGNvbnRhaW4gYW55IG9mIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVyczogYmFja3NsYXNoZXMsIGZvcndhcmQgc2xhc2hlcywgb3IgY29sb25zLlxuICAgICBBbHNvLCBwbGVhc2UgcHJvdmlkZSB0aGUgdGl0bGUgd2l0aG91dCB1c2luZyBxdW90YXRpb24gbWFya3M6XFxuXFxuYDtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNoYXRDb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgICAgIG1vZGVsOiBzZXR0aW5ncy5tb2RlbCxcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogcHJvbXB0ICsgbWFya2Rvd25Db250ZW50fSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCB0aXRsZSA9IGNoYXRDb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICAvLyBSZW1vdmUgYmFja3NsYXNoZXMsIGZvcndhcmQgc2xhc2hlcywgYW5kIGNvbG9uc1xuICAgICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvW1xcXFwvOl0vZywgJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRpdGxlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUlwiKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvciB8fCBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG59XG5cbi8vIFJlcXVlc3QgcmVzcG9uc2UgZnJvbSBBbnRocm9waWMgXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFVybEFudGhyb3BpY0FQSShcbiAgICB1cmw6IHN0cmluZyxcbiAgICBzZXR0aW5nczogQk1PU2V0dGluZ3MsXG4gICAgcmVmZXJlbmNlQ3VycmVudE5vdGU6IHN0cmluZyxcbiAgICBtZXNzYWdlSGlzdG9yeUNvbnRlbnQ6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdID0gW10sXG4gICAgbWF4VG9rZW5zOiBzdHJpbmcsXG4gICAgdGVtcGVyYXR1cmU6IG51bWJlcikgXG4gICAge1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAnYW50aHJvcGljLXZlcnNpb24nOiAnMjAyMy0wNi0wMScsXG4gICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ3gtYXBpLWtleSc6IHNldHRpbmdzLmFwaUtleSxcbiAgICB9O1xuICBcbiAgICBjb25zdCBtZXNzYWdlSGlzdG9yeVN0cmluZyA9IG1lc3NhZ2VIaXN0b3J5Q29udGVudC5tYXAoZW50cnkgPT4gZW50cnkuY29udGVudCkuam9pbignXFxuJyk7XG5cbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgbW9kZWw6IHNldHRpbmdzLm1vZGVsLFxuICAgICAgICBwcm9tcHQ6ICBgXFxuXFxuSHVtYW46ICR7cmVmZXJlbmNlQ3VycmVudE5vdGV9XFxuXFxuJHtzZXR0aW5ncy5zeXN0ZW1fcm9sZX1cXG5cXG4ke21lc3NhZ2VIaXN0b3J5U3RyaW5nfVxcblxcbkFzc2lzdGFudDpgLFxuICAgICAgICBtYXhfdG9rZW5zX3RvX3NhbXBsZTogcGFyc2VJbnQobWF4VG9rZW5zKSB8fCAxMDAwMDAsXG4gICAgICAgIHRlbXBlcmF0dXJlOiB0ZW1wZXJhdHVyZSxcbiAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgIH07XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmwsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgICB9KTtcbiAgXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VzID0gbWVzc2FnZUNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm90TWVzc2FnZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RCb3RNZXNzYWdlID0gYm90TWVzc2FnZXNbYm90TWVzc2FnZXMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGxhc3RCb3RNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQmxvY2snKTtcblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSAnTWF4IHRva2VucyBvdmVyZmxvdy4gUGxlYXNlIHJlZHVjZSBtYXhfdG9rZW5zIG9yIGNsZWFyIGNoYXQgbWVzc2FnZXMuIFdlIHJlY29tbWVuZCBjbGVhcmluZyBtYXhfdG9rZW5zIGZvciBiZXN0IHJlc3VsdHMuJztcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2VCbG9jay5pbm5lckhUTUwsICdib3RNZXNzYWdlJywgc2V0dGluZ3MpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gbGFzdEJvdE1lc3NhZ2UucXVlcnlTZWxlY3RvcihcIiNsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0VsLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ2VuZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnJlbW92ZUNoaWxkKGxvYWRpbmdFbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYWtpbmcgQVBJIHJlcXVlc3Q6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuXG4vLyBSZXF1ZXN0IHJlc3BvbnNlIGZyb20gc2VsZi1ob3N0ZWQgbW9kZWxzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFVybENoYXRDb21wbGV0aW9uKFxuICAgIHVybDogc3RyaW5nLCBcbiAgICBzZXR0aW5nczogeyBhcGlLZXk6IHN0cmluZzsgbW9kZWw6IHN0cmluZzsgc3lzdGVtX3JvbGU6IHN0cmluZzsgfSwgXG4gICAgcmVmZXJlbmNlQ3VycmVudE5vdGU6IHN0cmluZyxcbiAgICBtZXNzYWdlSGlzdG9yeUNvbnRlbnQ6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdID0gW10sXG4gICAgbWF4VG9rZW5zOiBzdHJpbmcsIFxuICAgIHRlbXBlcmF0dXJlOiBudW1iZXIpXG4gICAge1xuICAgICAgICBjb25zdCBtZXNzYWdlSGlzdG9yeSA9IG1lc3NhZ2VIaXN0b3J5Q29udGVudC5tYXAoKGl0ZW06IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IH0pID0+ICh7XG4gICAgICAgICAgICByb2xlOiBpdGVtLnJvbGUsXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQsXG4gICAgICAgIH0pKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCArICcvdjEvY2hhdC9jb21wbGV0aW9ucycsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzZXR0aW5ncy5hcGlLZXl9YFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiByZWZlcmVuY2VDdXJyZW50Tm90ZSArIHNldHRpbmdzLnN5c3RlbV9yb2xlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlSGlzdG9yeVxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiBwYXJzZUludChtYXhUb2tlbnMpLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYWtpbmcgQVBJIHJlcXVlc3Q6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbn0iLCAiZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnNC42LjAnOyAvLyB4LXJlbGVhc2UtcGxlYXNlLXZlcnNpb25cbiIsICJpbXBvcnQgdHlwZSB7IFJlc3BvbnNlIH0gZnJvbSAnLi9fc2hpbXMvZmV0Y2guanMnO1xuXG50eXBlIEJ5dGVzID0gc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBVaW50OEFycmF5IHwgQnVmZmVyIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxudHlwZSBTZXJ2ZXJTZW50RXZlbnQgPSB7XG4gIGV2ZW50OiBzdHJpbmcgfCBudWxsO1xuICBkYXRhOiBzdHJpbmc7XG4gIHJhdzogc3RyaW5nW107XG59O1xuXG5leHBvcnQgY2xhc3MgU3RyZWFtPEl0ZW0+IGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxJdGVtPiB7XG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcjtcblxuICBwcml2YXRlIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgcHJpdmF0ZSBkZWNvZGVyOiBTU0VEZWNvZGVyO1xuXG4gIGNvbnN0cnVjdG9yKHJlc3BvbnNlOiBSZXNwb25zZSwgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyKSB7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFNTRURlY29kZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgKml0ZXJNZXNzYWdlcygpOiBBc3luY0dlbmVyYXRvcjxTZXJ2ZXJTZW50RXZlbnQsIHZvaWQsIHVua25vd24+IHtcbiAgICBpZiAoIXRoaXMucmVzcG9uc2UuYm9keSkge1xuICAgICAgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBpdGVyYXRlIG92ZXIgYSByZXNwb25zZSB3aXRoIG5vIGJvZHlgKTtcbiAgICB9XG4gICAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcblxuICAgIGNvbnN0IGl0ZXIgPSByZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmFibGU8Qnl0ZXM+KHRoaXMucmVzcG9uc2UuYm9keSk7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpdGVyKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZGVjb2RlKGNodW5rKSkge1xuICAgICAgICBjb25zdCBzc2UgPSB0aGlzLmRlY29kZXIuZGVjb2RlKGxpbmUpO1xuICAgICAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmZsdXNoKCkpIHtcbiAgICAgIGNvbnN0IHNzZSA9IHRoaXMuZGVjb2Rlci5kZWNvZGUobGluZSk7XG4gICAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYXRvcjxJdGVtLCBhbnksIHVuZGVmaW5lZD4ge1xuICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGZvciBhd2FpdCAoY29uc3Qgc3NlIG9mIHRoaXMuaXRlck1lc3NhZ2VzKCkpIHtcbiAgICAgICAgaWYgKGRvbmUpIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmIChzc2UuZGF0YS5zdGFydHNXaXRoKCdbRE9ORV0nKSkge1xuICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNzZS5ldmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB5aWVsZCBKU09OLnBhcnNlKHNzZS5kYXRhKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgcGFyc2UgbWVzc2FnZSBpbnRvIEpTT046YCwgc3NlLmRhdGEpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRnJvbSBjaHVuazpgLCBzc2UucmF3KTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZiB0aGUgdXNlciBjYWxscyBgc3RyZWFtLmNvbnRyb2xsZXIuYWJvcnQoKWAsIHdlIHNob3VsZCBleGl0IHdpdGhvdXQgdGhyb3dpbmcuXG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSByZXR1cm47XG4gICAgICB0aHJvdyBlO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBJZiB0aGUgdXNlciBgYnJlYWtgcywgYWJvcnQgdGhlIG9uZ29pbmcgcmVxdWVzdC5cbiAgICAgIGlmICghZG9uZSkgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFNTRURlY29kZXIge1xuICBwcml2YXRlIGRhdGE6IHN0cmluZ1tdO1xuICBwcml2YXRlIGV2ZW50OiBzdHJpbmcgfCBudWxsO1xuICBwcml2YXRlIGNodW5rczogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ldmVudCA9IG51bGw7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgfVxuXG4gIGRlY29kZShsaW5lOiBzdHJpbmcpIHtcbiAgICBpZiAobGluZS5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cmluZygwLCBsaW5lLmxlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIGlmICghbGluZSkge1xuICAgICAgLy8gZW1wdHkgbGluZSBhbmQgd2UgZGlkbid0IHByZXZpb3VzbHkgZW5jb3VudGVyIGFueSBtZXNzYWdlc1xuICAgICAgaWYgKCF0aGlzLmV2ZW50ICYmICF0aGlzLmRhdGEubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3Qgc3NlOiBTZXJ2ZXJTZW50RXZlbnQgPSB7XG4gICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLmRhdGEuam9pbignXFxuJyksXG4gICAgICAgIHJhdzogdGhpcy5jaHVua3MsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmV2ZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgdGhpcy5jaHVua3MgPSBbXTtcblxuICAgICAgcmV0dXJuIHNzZTtcbiAgICB9XG5cbiAgICB0aGlzLmNodW5rcy5wdXNoKGxpbmUpO1xuXG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnOicpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgW2ZpZWxkbmFtZSwgXywgdmFsdWVdID0gcGFydGl0aW9uKGxpbmUsICc6Jyk7XG5cbiAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnICcpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICB9XG5cbiAgICBpZiAoZmllbGRuYW1lID09PSAnZXZlbnQnKSB7XG4gICAgICB0aGlzLmV2ZW50ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChmaWVsZG5hbWUgPT09ICdkYXRhJykge1xuICAgICAgdGhpcy5kYXRhLnB1c2godmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQSByZS1pbXBsZW1lbnRhdGlvbiBvZiBodHRweCdzIGBMaW5lRGVjb2RlcmAgaW4gUHl0aG9uIHRoYXQgaGFuZGxlcyBpbmNyZW1lbnRhbGx5XG4gKiByZWFkaW5nIGxpbmVzIGZyb20gdGV4dC5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZW5jb2RlL2h0dHB4L2Jsb2IvOTIwMzMzZWE5ODExOGU5Y2Y2MTdmMjQ2OTA1ZDdiMjAyNTEwOTQxYy9odHRweC9fZGVjb2RlcnMucHkjTDI1OFxuICovXG5jbGFzcyBMaW5lRGVjb2RlciB7XG4gIC8vIHByZXR0aWVyLWlnbm9yZVxuICBzdGF0aWMgTkVXTElORV9DSEFSUyA9IG5ldyBTZXQoWydcXG4nLCAnXFxyJywgJ1xceDBiJywgJ1xceDBjJywgJ1xceDFjJywgJ1xceDFkJywgJ1xceDFlJywgJ1xceDg1JywgJ1xcdTIwMjgnLCAnXFx1MjAyOSddKTtcbiAgc3RhdGljIE5FV0xJTkVfUkVHRVhQID0gL1xcclxcbnxbXFxuXFxyXFx4MGJcXHgwY1xceDFjXFx4MWRcXHgxZVxceDg1XFx1MjAyOFxcdTIwMjldL2c7XG5cbiAgYnVmZmVyOiBzdHJpbmdbXTtcbiAgdHJhaWxpbmdDUjogYm9vbGVhbjtcbiAgdGV4dERlY29kZXI6IGFueTsgLy8gVGV4dERlY29kZXIgZm91bmQgaW4gYnJvd3NlcnM7IG5vdCB0eXBlZCB0byBhdm9pZCBwdWxsaW5nIGluIGVpdGhlciBcImRvbVwiIG9yIFwibm9kZVwiIHR5cGVzLlxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gIH1cblxuICBkZWNvZGUoY2h1bms6IEJ5dGVzKTogc3RyaW5nW10ge1xuICAgIGxldCB0ZXh0ID0gdGhpcy5kZWNvZGVUZXh0KGNodW5rKTtcblxuICAgIGlmICh0aGlzLnRyYWlsaW5nQ1IpIHtcbiAgICAgIHRleHQgPSAnXFxyJyArIHRleHQ7XG4gICAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRleHQuZW5kc1dpdGgoJ1xccicpKSB7XG4gICAgICB0aGlzLnRyYWlsaW5nQ1IgPSB0cnVlO1xuICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMCwgLTEpO1xuICAgIH1cblxuICAgIGlmICghdGV4dCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHRyYWlsaW5nTmV3bGluZSA9IExpbmVEZWNvZGVyLk5FV0xJTkVfQ0hBUlMuaGFzKHRleHRbdGV4dC5sZW5ndGggLSAxXSB8fCAnJyk7XG4gICAgbGV0IGxpbmVzID0gdGV4dC5zcGxpdChMaW5lRGVjb2Rlci5ORVdMSU5FX1JFR0VYUCk7XG5cbiAgICBpZiAobGluZXMubGVuZ3RoID09PSAxICYmICF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2gobGluZXNbMF0hKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgbGluZXMgPSBbdGhpcy5idWZmZXIuam9pbignJykgKyBsaW5lc1swXSwgLi4ubGluZXMuc2xpY2UoMSldO1xuICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB9XG5cbiAgICBpZiAoIXRyYWlsaW5nTmV3bGluZSkge1xuICAgICAgdGhpcy5idWZmZXIgPSBbbGluZXMucG9wKCkgfHwgJyddO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIGRlY29kZVRleHQoYnl0ZXM6IEJ5dGVzKTogc3RyaW5nIHtcbiAgICBpZiAoYnl0ZXMgPT0gbnVsbCkgcmV0dXJuICcnO1xuICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSByZXR1cm4gYnl0ZXM7XG5cbiAgICAvLyBOb2RlOlxuICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBieXRlcy50b1N0cmluZygpO1xuICAgICAgfVxuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYnl0ZXMpLnRvU3RyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQ6IHJlY2VpdmVkIG5vbi1VaW50OEFycmF5ICgke2J5dGVzLmNvbnN0cnVjdG9yLm5hbWV9KSBzdHJlYW0gY2h1bmsgaW4gYW4gZW52aXJvbm1lbnQgd2l0aCBhIGdsb2JhbCBcIkJ1ZmZlclwiIGRlZmluZWQsIHdoaWNoIHRoaXMgbGlicmFyeSBhc3N1bWVzIHRvIGJlIE5vZGUuIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBCcm93c2VyXG4gICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgYnl0ZXMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICB0aGlzLnRleHREZWNvZGVyID8/PSBuZXcgVGV4dERlY29kZXIoJ3V0ZjgnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dERlY29kZXIuZGVjb2RlKGJ5dGVzKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVW5leHBlY3RlZDogcmVjZWl2ZWQgbm9uLVVpbnQ4QXJyYXkvQXJyYXlCdWZmZXIgKCR7XG4gICAgICAgICAgKGJ5dGVzIGFzIGFueSkuY29uc3RydWN0b3IubmFtZVxuICAgICAgICB9KSBpbiBhIHdlYiBwbGF0Zm9ybS4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkOiBuZWl0aGVyIEJ1ZmZlciBub3IgVGV4dERlY29kZXIgYXJlIGF2YWlsYWJsZSBhcyBnbG9iYWxzLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICApO1xuICB9XG5cbiAgZmx1c2goKTogc3RyaW5nW10ge1xuICAgIGlmICghdGhpcy5idWZmZXIubGVuZ3RoICYmICF0aGlzLnRyYWlsaW5nQ1IpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lcyA9IFt0aGlzLmJ1ZmZlci5qb2luKCcnKV07XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgICByZXR1cm4gbGluZXM7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFydGl0aW9uKHN0cjogc3RyaW5nLCBkZWxpbWl0ZXI6IHN0cmluZyk6IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXSB7XG4gIGNvbnN0IGluZGV4ID0gc3RyLmluZGV4T2YoZGVsaW1pdGVyKTtcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIHJldHVybiBbc3RyLnN1YnN0cmluZygwLCBpbmRleCksIGRlbGltaXRlciwgc3RyLnN1YnN0cmluZyhpbmRleCArIGRlbGltaXRlci5sZW5ndGgpXTtcbiAgfVxuXG4gIHJldHVybiBbc3RyLCAnJywgJyddO1xufVxuXG4vKipcbiAqIE1vc3QgYnJvd3NlcnMgZG9uJ3QgeWV0IGhhdmUgYXN5bmMgaXRlcmFibGUgc3VwcG9ydCBmb3IgUmVhZGFibGVTdHJlYW0sXG4gKiBhbmQgTm9kZSBoYXMgYSB2ZXJ5IGRpZmZlcmVudCB3YXkgb2YgcmVhZGluZyBieXRlcyBmcm9tIGl0cyBcIlJlYWRhYmxlU3RyZWFtXCIuXG4gKlxuICogVGhpcyBwb2x5ZmlsbCB3YXMgcHVsbGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01hdHRpYXNCdWVsZW5zL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3B1bGwvMTIyI2lzc3VlY29tbWVudC0xNjI3MzU0NDkwXG4gKi9cbmZ1bmN0aW9uIHJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYWJsZTxUPihzdHJlYW06IGFueSk6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxUPiB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSByZXR1cm4gc3RyZWFtO1xuXG4gIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKHJlc3VsdD8uZG9uZSkgcmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHJlYWRlci5jYW5jZWwoKTtcbiAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTtcbiAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9LFxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCB7IGNhc3RUb0Vycm9yLCBIZWFkZXJzIH0gZnJvbSAnLi9jb3JlLmpzJztcblxuZXhwb3J0IGNsYXNzIEFQSUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICByZWFkb25seSBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgZXJyb3I6IE9iamVjdCB8IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBjb2RlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICByZWFkb25seSBwYXJhbTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yOiBPYmplY3QgfCB1bmRlZmluZWQsXG4gICAgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICkge1xuICAgIHN1cGVyKEFQSUVycm9yLm1ha2VNZXNzYWdlKGVycm9yLCBtZXNzYWdlKSk7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcblxuICAgIGNvbnN0IGRhdGEgPSBlcnJvciBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIHRoaXMuZXJyb3IgPSBkYXRhO1xuICAgIHRoaXMuY29kZSA9IGRhdGE/LlsnY29kZSddO1xuICAgIHRoaXMucGFyYW0gPSBkYXRhPy5bJ3BhcmFtJ107XG4gICAgdGhpcy50eXBlID0gZGF0YT8uWyd0eXBlJ107XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBtYWtlTWVzc2FnZShlcnJvcjogYW55LCBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZXJyb3I/Lm1lc3NhZ2UgP1xuICAgICAgICB0eXBlb2YgZXJyb3IubWVzc2FnZSA9PT0gJ3N0cmluZycgPyBlcnJvci5tZXNzYWdlXG4gICAgICAgIDogSlNPTi5zdHJpbmdpZnkoZXJyb3IubWVzc2FnZSlcbiAgICAgIDogZXJyb3IgPyBKU09OLnN0cmluZ2lmeShlcnJvcilcbiAgICAgIDogbWVzc2FnZSB8fCAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGdlbmVyYXRlKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yUmVzcG9uc2U6IE9iamVjdCB8IHVuZGVmaW5lZCxcbiAgICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKSB7XG4gICAgaWYgKCFzdGF0dXMpIHtcbiAgICAgIHJldHVybiBuZXcgQVBJQ29ubmVjdGlvbkVycm9yKHsgY2F1c2U6IGNhc3RUb0Vycm9yKGVycm9yUmVzcG9uc2UpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yID0gKGVycm9yUmVzcG9uc2UgYXMgUmVjb3JkPHN0cmluZywgYW55Pik/LlsnZXJyb3InXTtcblxuICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xuICAgICAgcmV0dXJuIG5ldyBCYWRSZXF1ZXN0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICByZXR1cm4gbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICByZXR1cm4gbmV3IFBlcm1pc3Npb25EZW5pZWRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDQpIHtcbiAgICAgIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDkpIHtcbiAgICAgIHJldHVybiBuZXcgQ29uZmxpY3RFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MjIpIHtcbiAgICAgIHJldHVybiBuZXcgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQyOSkge1xuICAgICAgcmV0dXJuIG5ldyBSYXRlTGltaXRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID49IDUwMCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcm5hbFNlcnZlckVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgQVBJRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSVVzZXJBYm9ydEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UgfTogeyBtZXNzYWdlPzogc3RyaW5nIH0gPSB7fSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdSZXF1ZXN0IHdhcyBhYm9ydGVkLicsIHVuZGVmaW5lZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSUNvbm5lY3Rpb25FcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjYXVzZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmc7IGNhdXNlPzogRXJyb3IgfCB1bmRlZmluZWQgfSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdDb25uZWN0aW9uIGVycm9yLicsIHVuZGVmaW5lZCk7XG4gICAgLy8gaW4gc29tZSBlbnZpcm9ubWVudHMgdGhlICdjYXVzZScgcHJvcGVydHkgaXMgYWxyZWFkeSBkZWNsYXJlZFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoY2F1c2UpIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciBleHRlbmRzIEFQSUNvbm5lY3Rpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBtZXNzYWdlOiBtZXNzYWdlID8/ICdSZXF1ZXN0IHRpbWVkIG91dC4nIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDAwID0gNDAwO1xufVxuXG5leHBvcnQgY2xhc3MgQXV0aGVudGljYXRpb25FcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDEgPSA0MDE7XG59XG5cbmV4cG9ydCBjbGFzcyBQZXJtaXNzaW9uRGVuaWVkRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDAzID0gNDAzO1xufVxuXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDQgPSA0MDQ7XG59XG5cbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwOSA9IDQwOTtcbn1cblxuZXhwb3J0IGNsYXNzIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MjIgPSA0MjI7XG59XG5cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MjkgPSA0Mjk7XG59XG5cbmV4cG9ydCBjbGFzcyBJbnRlcm5hbFNlcnZlckVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige31cbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKlxuICogVGhpcyBpcyBhIHN0dWIgZm9yIG5vbi1ub2RlIGVudmlyb25tZW50cy5cbiAqIEluIG5vZGUgZW52aXJvbm1lbnRzLCBpdCBnZXRzIHJlcGxhY2VkIGFnZW50LW5vZGUudHMgYnkgdGhlIHBhY2thZ2UgZXhwb3J0IG1hcFxuICovXG5cbmV4cG9ydCB0eXBlIEFnZW50ID0gYW55O1xuXG5leHBvcnQgY29uc3QgZ2V0RGVmYXVsdEFnZW50ID0gKHVybDogc3RyaW5nKTogYW55ID0+IHtcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5cbi8vIElmIHdlIGFjY2lkZW50YWxseSBjYWxsIGZldGNoIHdpdGggdGhlIHdyb25nIHRoaXMgYmluZGluZyxcbi8vIGluIHRoZSBicm93c2VyIGl0IHdvdWxkIHRocm93OlxuLy8gICBUeXBlRXJyb3I6IEZhaWxlZCB0byBleGVjdXRlICdmZXRjaCcgb24gJ1dpbmRvdyc6IElsbGVnYWwgaW52b2NhdGlvblxuY29uc3QgX2ZldGNoID0gZmV0Y2guYmluZCh1bmRlZmluZWQpO1xuY29uc3QgX1JlcXVlc3QgPSBSZXF1ZXN0O1xuY29uc3QgX1Jlc3BvbnNlID0gUmVzcG9uc2U7XG5jb25zdCBfSGVhZGVycyA9IEhlYWRlcnM7XG5cbmV4cG9ydCBjb25zdCBpc1BvbHlmaWxsZWQgPSBmYWxzZTtcblxuZXhwb3J0IHsgX2ZldGNoIGFzIGZldGNoLCBfUmVxdWVzdCBhcyBSZXF1ZXN0LCBfUmVzcG9uc2UgYXMgUmVzcG9uc2UsIF9IZWFkZXJzIGFzIEhlYWRlcnMgfTtcbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cblxuY29uc3QgX0Zvcm1EYXRhID0gRm9ybURhdGE7XG5jb25zdCBfQmxvYiA9IEJsb2I7XG5cbmNvbnN0IF9GaWxlID1cbiAgdHlwZW9mIEZpbGUgIT09ICd1bmRlZmluZWQnID8gRmlsZSA6IChcbiAgICAvLyBCdW4gZG9lc24ndCBpbXBsZW1lbnQgRmlsZSB5ZXQsIHNvIGp1c3QgbWFrZSBhIHNoaW0gdGhhdCB0aHJvd3MgYSBoZWxwZnVsIGVycm9yIG1lc3NhZ2VcbiAgICBjbGFzcyBGaWxlIGV4dGVuZHMgQmxvYiB7XG4gICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBmaWxlIHVwbG9hZHMgYXJlbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnRmlsZScgaXMgbm90IGRlZmluZWRgKTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG5cbmV4cG9ydCB7IF9Gb3JtRGF0YSBhcyBGb3JtRGF0YSwgX0ZpbGUgYXMgRmlsZSwgX0Jsb2IgYXMgQmxvYiB9O1xuXG5leHBvcnQgY29uc3QgaXNQb2x5ZmlsbGVkID0gZmFsc2U7XG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5cbmltcG9ydCB7IEZvcm1EYXRhIH0gZnJvbSAnLi9mb3JtLWRhdGEuanMnO1xuaW1wb3J0IHR5cGUgeyBSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgTXVsdGlwYXJ0Qm9keSB9IGZyb20gJy4uL3VwbG9hZHMuanMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM8VCBleHRlbmRzIHt9ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBmb3JtOiBGb3JtRGF0YSxcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQ+PiB7XG4gIHJldHVybiB7IC4uLm9wdHMsIGJvZHk6IG5ldyBNdWx0aXBhcnRCb2R5KGZvcm0pIGFzIGFueSB9O1xufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqXG4gKiBUaGlzIGlzIGEgc3R1YiB0aGF0IGdldHMgcmVwbGFjZWQgYnkgZmlsZUZyb21QYXRoLW5vZGUuanMgZm9yIG5vZGUgZW52aXJvbm1lbnRzXG4gKiBpbiB0aGUgcGFja2FnZSBleHBvcnQgbWFwXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBGaWxlUHJvcGVydHlCYWcsIEZpbGUgfSBmcm9tICcuL2Zvcm0tZGF0YS5qcyc7XG5cbmV4cG9ydCB0eXBlIEZpbGVGcm9tUGF0aE9wdGlvbnMgPSBPbWl0PEZpbGVQcm9wZXJ0eUJhZywgJ2xhc3RNb2RpZmllZCc+O1xuXG4vKipcbiAqIFRoaXMgaXMgYSBzdHViIGZvciBub24tbm9kZSBlbnZpcm9ubWVudHMgdGhhdCBqdXN0IHRocm93cyBhbiBlcnJvci5cbiAqIEluIG5vZGUgZW52aXJvbm1lbnRzLCB0aGlzIG1vZHVsZSB3aWxsIGJlIHJlcGxhY2VkIGJ5IHV0aWwvbm9kZS9maWxlRnJvbVBhdGggYnkgdGhlXG4gKiBwYWNrYWdlIGltcG9ydCBtYXAuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgocGF0aDogc3RyaW5nKTogUHJvbWlzZTxGaWxlPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgocGF0aDogc3RyaW5nLCBmaWxlbmFtZT86IHN0cmluZyk6IFByb21pc2U8RmlsZT47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsZUZyb21QYXRoKHBhdGg6IHN0cmluZywgb3B0aW9ucz86IEZpbGVGcm9tUGF0aE9wdGlvbnMpOiBQcm9taXNlPEZpbGU+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGVGcm9tUGF0aChcbiAgcGF0aDogc3RyaW5nLFxuICBmaWxlbmFtZT86IHN0cmluZyxcbiAgb3B0aW9ucz86IEZpbGVGcm9tUGF0aE9wdGlvbnMsXG4pOiBQcm9taXNlPEZpbGU+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGVGcm9tUGF0aCgpOiBQcm9taXNlPEZpbGU+IHtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICdUaGUgYGZpbGVGcm9tUGF0aGAgZnVuY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgaW4gTm9kZS4gU2VlIHRoZSBSRUFETUUgZm9yIG1vcmUgZGV0YWlsczogaHR0cHM6Ly93d3cuZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLW5vZGUjZmlsZS11cGxvYWRzJyxcbiAgKTtcbn1cbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cblxuLy8gc2hpbSB0aGVzZSBOb2RlIHR5cGVzIHRvIGF2b2lkIGltcG9ydGluZyBAdHlwZXMvbm9kZSBhbmQgcG9sbHV0aW5nIHRoZSB1c2VyJ3Ncbi8vIHR5cGUgZW52aXJvbm1lbnQgaW4gbm9uLW5vZGUgcHJvamVjdHNcblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgUmVhZGFibGUge1xuICByZWFkYWJsZTogYm9vbGVhbjtcbiAgcmVhZG9ubHkgcmVhZGFibGVFbmRlZDogYm9vbGVhbjtcbiAgcmVhZG9ubHkgcmVhZGFibGVGbG93aW5nOiBib29sZWFuIHwgbnVsbDtcbiAgcmVhZG9ubHkgcmVhZGFibGVIaWdoV2F0ZXJNYXJrOiBudW1iZXI7XG4gIHJlYWRvbmx5IHJlYWRhYmxlTGVuZ3RoOiBudW1iZXI7XG4gIHJlYWRvbmx5IHJlYWRhYmxlT2JqZWN0TW9kZTogYm9vbGVhbjtcbiAgZGVzdHJveWVkOiBib29sZWFuO1xuICByZWFkKHNpemU/OiBudW1iZXIpOiBhbnk7XG4gIHBhdXNlKCk6IHRoaXM7XG4gIHJlc3VtZSgpOiB0aGlzO1xuICBpc1BhdXNlZCgpOiBib29sZWFuO1xuICBkZXN0cm95KGVycm9yPzogRXJyb3IpOiB0aGlzO1xuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxhbnk+O1xufVxuXG5leHBvcnQgZGVjbGFyZSBjbGFzcyBGc1JlYWRTdHJlYW0gZXh0ZW5kcyBSZWFkYWJsZSB7XG4gIHBhdGg6IHt9OyAvLyBub2RlIHR5cGUgaXMgc3RyaW5nIHwgQnVmZmVyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0ZzUmVhZFN0cmVhbSh2YWx1ZTogYW55KTogdmFsdWUgaXMgRnNSZWFkU3RyZWFtIHtcbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwgImltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuL2NvcmUuanMnO1xuaW1wb3J0IHsgdHlwZSBSZWFkYWJsZSB9IGZyb20gJy4vX3NoaW1zL25vZGUtcmVhZGFibGUuanMnO1xuaW1wb3J0IHsgdHlwZSBCb2R5SW5pdCB9IGZyb20gJy4vX3NoaW1zL2ZldGNoLmpzJztcbmltcG9ydCB7IEZvcm1EYXRhLCBGaWxlLCB0eXBlIEJsb2IsIHR5cGUgRmlsZVByb3BlcnR5QmFnIH0gZnJvbSAnLi9fc2hpbXMvZm9ybS1kYXRhLmpzJztcbmltcG9ydCB7IGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi9fc2hpbXMvZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMuanMnO1xuaW1wb3J0IHsgZmlsZUZyb21QYXRoIH0gZnJvbSAnLi9fc2hpbXMvZmlsZUZyb21QYXRoLmpzJztcbmltcG9ydCB7IHR5cGUgRnNSZWFkU3RyZWFtLCBpc0ZzUmVhZFN0cmVhbSB9IGZyb20gJy4vX3NoaW1zL25vZGUtcmVhZGFibGUuanMnO1xuXG5leHBvcnQgeyBmaWxlRnJvbVBhdGggfTtcblxudHlwZSBCbG9iTGlrZVBhcnQgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IEFycmF5QnVmZmVyVmlldyB8IEJsb2JMaWtlIHwgVWludDhBcnJheSB8IERhdGFWaWV3O1xuZXhwb3J0IHR5cGUgQmxvYlBhcnQgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IEFycmF5QnVmZmVyVmlldyB8IEJsb2IgfCBVaW50OEFycmF5IHwgRGF0YVZpZXc7XG5cbi8qKlxuICogVHlwaWNhbGx5LCB0aGlzIGlzIGEgbmF0aXZlIFwiRmlsZVwiIGNsYXNzLlxuICpcbiAqIFdlIHByb3ZpZGUgdGhlIHtAbGluayB0b0ZpbGV9IHV0aWxpdHkgdG8gY29udmVydCBhIHZhcmlldHkgb2Ygb2JqZWN0c1xuICogaW50byB0aGUgRmlsZSBjbGFzcy5cbiAqXG4gKiBGb3IgY29udmVuaWVuY2UsIHlvdSBjYW4gYWxzbyBwYXNzIGEgZmV0Y2ggUmVzcG9uc2UsIG9yIGluIE5vZGUsXG4gKiB0aGUgcmVzdWx0IG9mIGZzLmNyZWF0ZVJlYWRTdHJlYW0oKS5cbiAqL1xuZXhwb3J0IHR5cGUgVXBsb2FkYWJsZSA9IEZpbGVMaWtlIHwgUmVzcG9uc2VMaWtlIHwgRnNSZWFkU3RyZWFtO1xuXG4vKipcbiAqIEludGVuZGVkIHRvIG1hdGNoIHdlYi5CbG9iLCBub2RlLkJsb2IsIG5vZGUtZmV0Y2guQmxvYiwgZXRjLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJsb2JMaWtlIHtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi9zaXplKSAqL1xuICByZWFkb25seSBzaXplOiBudW1iZXI7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IvdHlwZSkgKi9cbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3RleHQpICovXG4gIHRleHQoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3NsaWNlKSAqL1xuICBzbGljZShzdGFydD86IG51bWJlciwgZW5kPzogbnVtYmVyKTogQmxvYkxpa2U7XG4gIC8vIHVuZm9ydHVuYXRlbHkgQHR5cGVzL25vZGUtZmV0Y2hAXjIuNi40IGRvZXNuJ3QgdHlwZSB0aGUgYXJyYXlCdWZmZXIgbWV0aG9kXG59XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLkZpbGUsIG5vZGUuRmlsZSwgbm9kZS1mZXRjaC5GaWxlLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUxpa2UgZXh0ZW5kcyBCbG9iTGlrZSB7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZpbGUvbGFzdE1vZGlmaWVkKSAqL1xuICByZWFkb25seSBsYXN0TW9kaWZpZWQ6IG51bWJlcjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRmlsZS9uYW1lKSAqL1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG59XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLlJlc3BvbnNlLCBub2RlLlJlc3BvbnNlLCBub2RlLWZldGNoLlJlc3BvbnNlLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVzcG9uc2VMaWtlIHtcbiAgdXJsOiBzdHJpbmc7XG4gIGJsb2IoKTogUHJvbWlzZTxCbG9iTGlrZT47XG59XG5cbmV4cG9ydCBjb25zdCBpc1Jlc3BvbnNlTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgUmVzcG9uc2VMaWtlID0+XG4gIHZhbHVlICE9IG51bGwgJiZcbiAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICB0eXBlb2YgdmFsdWUudXJsID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUuYmxvYiA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzRmlsZUxpa2UgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEZpbGVMaWtlID0+XG4gIHZhbHVlICE9IG51bGwgJiZcbiAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICB0eXBlb2YgdmFsdWUubmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgdHlwZW9mIHZhbHVlLmxhc3RNb2RpZmllZCA9PT0gJ251bWJlcicgJiZcbiAgaXNCbG9iTGlrZSh2YWx1ZSk7XG5cbi8qKlxuICogVGhlIEJsb2JMaWtlIHR5cGUgb21pdHMgYXJyYXlCdWZmZXIoKSBiZWNhdXNlIEB0eXBlcy9ub2RlLWZldGNoQF4yLjYuNCBsYWNrcyBpdDsgYnV0IHRoaXMgY2hlY2tcbiAqIGFkZHMgdGhlIGFycmF5QnVmZmVyKCkgbWV0aG9kIHR5cGUgYmVjYXVzZSBpdCBpcyBhdmFpbGFibGUgYW5kIHVzZWQgYXQgcnVudGltZVxuICovXG5leHBvcnQgY29uc3QgaXNCbG9iTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgQmxvYkxpa2UgJiB7IGFycmF5QnVmZmVyKCk6IFByb21pc2U8QXJyYXlCdWZmZXI+IH0gPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS5zaXplID09PSAnbnVtYmVyJyAmJlxuICB0eXBlb2YgdmFsdWUudHlwZSA9PT0gJ3N0cmluZycgJiZcbiAgdHlwZW9mIHZhbHVlLnRleHQgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIHZhbHVlLnNsaWNlID09PSAnZnVuY3Rpb24nICYmXG4gIHR5cGVvZiB2YWx1ZS5hcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzVXBsb2FkYWJsZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgVXBsb2FkYWJsZSA9PiB7XG4gIHJldHVybiBpc0ZpbGVMaWtlKHZhbHVlKSB8fCBpc1Jlc3BvbnNlTGlrZSh2YWx1ZSkgfHwgaXNGc1JlYWRTdHJlYW0odmFsdWUpO1xufTtcblxuZXhwb3J0IHR5cGUgVG9GaWxlSW5wdXQgPSBVcGxvYWRhYmxlIHwgRXhjbHVkZTxCbG9iTGlrZVBhcnQsIHN0cmluZz4gfCBBc3luY0l0ZXJhYmxlPEJsb2JMaWtlUGFydD47XG5cbi8qKlxuICogSGVscGVyIGZvciBjcmVhdGluZyBhIHtAbGluayBGaWxlfSB0byBwYXNzIHRvIGFuIFNESyB1cGxvYWQgbWV0aG9kIGZyb20gYSB2YXJpZXR5IG9mIGRpZmZlcmVudCBkYXRhIGZvcm1hdHNcbiAqIEBwYXJhbSB2YWx1ZSB0aGUgcmF3IGNvbnRlbnQgb2YgdGhlIGZpbGUuICBDYW4gYmUgYW4ge0BsaW5rIFVwbG9hZGFibGV9LCB7QGxpbmsgQmxvYkxpa2VQYXJ0fSwgb3Ige0BsaW5rIEFzeW5jSXRlcmFibGV9IG9mIHtAbGluayBCbG9iTGlrZVBhcnR9c1xuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBmaWxlLiBJZiBvbWl0dGVkLCB0b0ZpbGUgd2lsbCB0cnkgdG8gZGV0ZXJtaW5lIGEgZmlsZSBuYW1lIGZyb20gYml0cyBpZiBwb3NzaWJsZVxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zIGFkZGl0aW9uYWwgcHJvcGVydGllc1xuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRpb25zLnR5cGUgdGhlIE1JTUUgdHlwZSBvZiB0aGUgY29udGVudFxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRpb25zLmxhc3RNb2RpZmllZCB0aGUgbGFzdCBtb2RpZmllZCB0aW1lc3RhbXBcbiAqIEByZXR1cm5zIGEge0BsaW5rIEZpbGV9IHdpdGggdGhlIGdpdmVuIHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvRmlsZShcbiAgdmFsdWU6IFRvRmlsZUlucHV0IHwgUHJvbWlzZUxpa2U8VG9GaWxlSW5wdXQ+LFxuICBuYW1lPzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgb3B0aW9uczogRmlsZVByb3BlcnR5QmFnIHwgdW5kZWZpbmVkID0ge30sXG4pOiBQcm9taXNlPEZpbGVMaWtlPiB7XG4gIC8vIElmIGl0J3MgYSBwcm9taXNlLCByZXNvbHZlIGl0LlxuICB2YWx1ZSA9IGF3YWl0IHZhbHVlO1xuXG4gIGlmIChpc1Jlc3BvbnNlTGlrZSh2YWx1ZSkpIHtcbiAgICBjb25zdCBibG9iID0gYXdhaXQgdmFsdWUuYmxvYigpO1xuICAgIG5hbWUgfHw9IG5ldyBVUkwodmFsdWUudXJsKS5wYXRobmFtZS5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpID8/ICd1bmtub3duX2ZpbGUnO1xuXG4gICAgcmV0dXJuIG5ldyBGaWxlKFtibG9iIGFzIGFueV0sIG5hbWUsIG9wdGlvbnMpO1xuICB9XG5cbiAgY29uc3QgYml0cyA9IGF3YWl0IGdldEJ5dGVzKHZhbHVlKTtcblxuICBuYW1lIHx8PSBnZXROYW1lKHZhbHVlKSA/PyAndW5rbm93bl9maWxlJztcblxuICBpZiAoIW9wdGlvbnMudHlwZSkge1xuICAgIGNvbnN0IHR5cGUgPSAoYml0c1swXSBhcyBhbnkpPy50eXBlO1xuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMsIHR5cGUgfTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IEZpbGUoYml0cywgbmFtZSwgb3B0aW9ucyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEJ5dGVzKHZhbHVlOiBUb0ZpbGVJbnB1dCk6IFByb21pc2U8QXJyYXk8QmxvYlBhcnQ+PiB7XG4gIGxldCBwYXJ0czogQXJyYXk8QmxvYlBhcnQ+ID0gW107XG4gIGlmIChcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8XG4gICAgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKSB8fCAvLyBpbmNsdWRlcyBVaW50OEFycmF5LCBCdWZmZXIsIGV0Yy5cbiAgICB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyXG4gICkge1xuICAgIHBhcnRzLnB1c2godmFsdWUpO1xuICB9IGVsc2UgaWYgKGlzQmxvYkxpa2UodmFsdWUpKSB7XG4gICAgcGFydHMucHVzaChhd2FpdCB2YWx1ZS5hcnJheUJ1ZmZlcigpKTtcbiAgfSBlbHNlIGlmIChcbiAgICBpc0FzeW5jSXRlcmFibGVJdGVyYXRvcih2YWx1ZSkgLy8gaW5jbHVkZXMgUmVhZGFibGUsIFJlYWRhYmxlU3RyZWFtLCBldGMuXG4gICkge1xuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgdmFsdWUpIHtcbiAgICAgIHBhcnRzLnB1c2goY2h1bmsgYXMgQmxvYlBhcnQpOyAvLyBUT0RPLCBjb25zaWRlciB2YWxpZGF0aW5nP1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVW5leHBlY3RlZCBkYXRhIHR5cGU6ICR7dHlwZW9mIHZhbHVlfTsgY29uc3RydWN0b3I6ICR7XG4gICAgICAgIHZhbHVlPy5jb25zdHJ1Y3Rvcj8ubmFtZVxuICAgICAgfTsgcHJvcHM6ICR7cHJvcHNGb3JFcnJvcih2YWx1ZSl9YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG5mdW5jdGlvbiBwcm9wc0ZvckVycm9yKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgcmV0dXJuIGBbJHtwcm9wcy5tYXAoKHApID0+IGBcIiR7cH1cImApLmpvaW4oJywgJyl9XWA7XG59XG5cbmZ1bmN0aW9uIGdldE5hbWUodmFsdWU6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiAoXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLm5hbWUpIHx8XG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLmZpbGVuYW1lKSB8fFxuICAgIC8vIEZvciBmcy5SZWFkU3RyZWFtXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLnBhdGgpPy5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpXG4gICk7XG59XG5cbmNvbnN0IGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlciA9ICh4OiBzdHJpbmcgfCBCdWZmZXIgfCB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHg7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgQnVmZmVyKSByZXR1cm4gU3RyaW5nKHgpO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEFzeW5jSXRlcmFibGVJdGVyYXRvcjx1bmtub3duPiA9PlxuICB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNsYXNzIE11bHRpcGFydEJvZHkge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgYm9keTogUmVhZGFibGUgfCBCb2R5SW5pdCkge31cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdNdWx0aXBhcnRCb2R5JztcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaXNNdWx0aXBhcnRCb2R5ID0gKGJvZHk6IGFueSk6IGJvZHkgaXMgTXVsdGlwYXJ0Qm9keSA9PlxuICBib2R5ICYmIHR5cGVvZiBib2R5ID09PSAnb2JqZWN0JyAmJiBib2R5LmJvZHkgJiYgYm9keVtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTXVsdGlwYXJ0Qm9keSc7XG5cbi8qKlxuICogUmV0dXJucyBhIG11bHRpcGFydC9mb3JtLWRhdGEgcmVxdWVzdCBpZiBhbnkgcGFydCBvZiB0aGUgZ2l2ZW4gcmVxdWVzdCBib2R5IGNvbnRhaW5zIGEgRmlsZSAvIEJsb2IgdmFsdWUuXG4gKiBPdGhlcndpc2UgcmV0dXJucyB0aGUgcmVxdWVzdCBhcyBpcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID0gYXN5bmMgPFQgZXh0ZW5kcyB7fSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4ge1xuICBpZiAoIWhhc1VwbG9hZGFibGVWYWx1ZShvcHRzLmJvZHkpKSByZXR1cm4gb3B0cztcblxuICBjb25zdCBmb3JtID0gYXdhaXQgY3JlYXRlRm9ybShvcHRzLmJvZHkpO1xuICByZXR1cm4gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMoZm9ybSwgb3B0cyk7XG59O1xuXG5leHBvcnQgY29uc3QgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID0gYXN5bmMgPFQgZXh0ZW5kcyB7fSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4ge1xuICBjb25zdCBmb3JtID0gYXdhaXQgY3JlYXRlRm9ybShvcHRzLmJvZHkpO1xuICByZXR1cm4gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMoZm9ybSwgb3B0cyk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRm9ybSA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGJvZHk6IFQgfCB1bmRlZmluZWQpOiBQcm9taXNlPEZvcm1EYXRhPiA9PiB7XG4gIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXMoYm9keSB8fCB7fSkubWFwKChba2V5LCB2YWx1ZV0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXksIHZhbHVlKSkpO1xuICByZXR1cm4gZm9ybTtcbn07XG5cbmNvbnN0IGhhc1VwbG9hZGFibGVWYWx1ZSA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLnNvbWUoaGFzVXBsb2FkYWJsZVZhbHVlKTtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgIGlmIChoYXNVcGxvYWRhYmxlVmFsdWUoKHZhbHVlIGFzIGFueSlba10pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgYWRkRm9ybVZhbHVlID0gYXN5bmMgKGZvcm06IEZvcm1EYXRhLCBrZXk6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFJlY2VpdmVkIG51bGwgZm9yIFwiJHtrZXl9XCI7IHRvIHBhc3MgbnVsbCBpbiBGb3JtRGF0YSwgeW91IG11c3QgdXNlIHRoZSBzdHJpbmcgJ251bGwnYCxcbiAgICApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSBuZXN0ZWQgZm9ybWF0cyBjb25maWd1cmFibGVcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIGZvcm0uYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gIH0gZWxzZSBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkge1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0b0ZpbGUodmFsdWUpO1xuICAgIGZvcm0uYXBwZW5kKGtleSwgZmlsZSBhcyBGaWxlKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHZhbHVlLm1hcCgoZW50cnkpID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXkgKyAnW10nLCBlbnRyeSkpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKChbbmFtZSwgcHJvcF0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBgJHtrZXl9WyR7bmFtZX1dYCwgcHJvcCkpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBJbnZhbGlkIHZhbHVlIGdpdmVuIHRvIGZvcm0sIGV4cGVjdGVkIGEgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9iamVjdCwgQXJyYXksIEZpbGUgb3IgQmxvYiBidXQgZ290ICR7dmFsdWV9IGluc3RlYWRgLFxuICAgICk7XG4gIH1cbn07XG4iLCAiaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gJy4vdmVyc2lvbi5qcyc7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tICcuL3N0cmVhbWluZy5qcyc7XG5pbXBvcnQgeyBBUElFcnJvciwgQVBJQ29ubmVjdGlvbkVycm9yLCBBUElDb25uZWN0aW9uVGltZW91dEVycm9yLCBBUElVc2VyQWJvcnRFcnJvciB9IGZyb20gJy4vZXJyb3IuanMnO1xuaW1wb3J0IHR5cGUgeyBSZWFkYWJsZSB9IGZyb20gJy4vX3NoaW1zL25vZGUtcmVhZGFibGUuanMnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdEFnZW50LCB0eXBlIEFnZW50IH0gZnJvbSAnLi9fc2hpbXMvYWdlbnQuanMnO1xuaW1wb3J0IHtcbiAgZmV0Y2gsXG4gIGlzUG9seWZpbGxlZCBhcyBmZXRjaElzUG9seWZpbGxlZCxcbiAgdHlwZSBSZXF1ZXN0SW5mbyxcbiAgdHlwZSBSZXF1ZXN0SW5pdCxcbiAgdHlwZSBSZXNwb25zZSxcbiAgdHlwZSBIZWFkZXJzSW5pdCxcbn0gZnJvbSAnLi9fc2hpbXMvZmV0Y2guanMnO1xuZXhwb3J0IHsgdHlwZSBSZXNwb25zZSB9O1xuaW1wb3J0IHsgaXNNdWx0aXBhcnRCb2R5IH0gZnJvbSAnLi91cGxvYWRzLmpzJztcbmV4cG9ydCB7XG4gIG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zLFxuICBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMsXG4gIGNyZWF0ZUZvcm0sXG4gIHR5cGUgVXBsb2FkYWJsZSxcbn0gZnJvbSAnLi91cGxvYWRzLmpzJztcblxuY29uc3QgTUFYX1JFVFJJRVMgPSAyO1xuXG5leHBvcnQgdHlwZSBGZXRjaCA9ICh1cmw6IFJlcXVlc3RJbmZvLCBpbml0PzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8UmVzcG9uc2U+O1xuXG50eXBlIFByb21pc2VPclZhbHVlPFQ+ID0gVCB8IFByb21pc2U8VD47XG5cbnR5cGUgQVBJUmVzcG9uc2VQcm9wcyA9IHtcbiAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zO1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBkZWZhdWx0UGFyc2VSZXNwb25zZTxUPihwcm9wczogQVBJUmVzcG9uc2VQcm9wcyk6IFByb21pc2U8VD4ge1xuICBjb25zdCB7IHJlc3BvbnNlIH0gPSBwcm9wcztcbiAgaWYgKHByb3BzLm9wdGlvbnMuc3RyZWFtKSB7XG4gICAgLy8gTm90ZTogdGhlcmUgaXMgYW4gaW52YXJpYW50IGhlcmUgdGhhdCBpc24ndCByZXByZXNlbnRlZCBpbiB0aGUgdHlwZSBzeXN0ZW1cbiAgICAvLyB0aGF0IGlmIHlvdSBzZXQgYHN0cmVhbTogdHJ1ZWAgdGhlIHJlc3BvbnNlIHR5cGUgbXVzdCBhbHNvIGJlIGBTdHJlYW08VD5gXG4gICAgcmV0dXJuIG5ldyBTdHJlYW0ocmVzcG9uc2UsIHByb3BzLmNvbnRyb2xsZXIpIGFzIGFueTtcbiAgfVxuXG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICBpZiAoY29udGVudFR5cGU/LmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIGpzb24pO1xuXG4gICAgcmV0dXJuIGpzb24gYXMgVDtcbiAgfVxuXG4gIC8vIFRPRE8gaGFuZGxlIGJsb2IsIGFycmF5YnVmZmVyLCBvdGhlciBjb250ZW50IHR5cGVzLCBldGMuXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gIGRlYnVnKCdyZXNwb25zZScsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudXJsLCByZXNwb25zZS5oZWFkZXJzLCB0ZXh0KTtcbiAgcmV0dXJuIHRleHQgYXMgYW55IGFzIFQ7XG59XG5cbi8qKlxuICogQSBzdWJjbGFzcyBvZiBgUHJvbWlzZWAgcHJvdmlkaW5nIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHNcbiAqIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBTREsuXG4gKi9cbmV4cG9ydCBjbGFzcyBBUElQcm9taXNlPFQ+IGV4dGVuZHMgUHJvbWlzZTxUPiB7XG4gIHByaXZhdGUgcGFyc2VkUHJvbWlzZTogUHJvbWlzZTxUPiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlc3BvbnNlUHJvbWlzZTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPixcbiAgICBwcml2YXRlIHBhcnNlUmVzcG9uc2U6IChwcm9wczogQVBJUmVzcG9uc2VQcm9wcykgPT4gUHJvbWlzZU9yVmFsdWU8VD4gPSBkZWZhdWx0UGFyc2VSZXNwb25zZSxcbiAgKSB7XG4gICAgc3VwZXIoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIHRoaXMgaXMgbWF5YmUgYSBiaXQgd2VpcmQgYnV0IHRoaXMgaGFzIHRvIGJlIGEgbm8tb3AgdG8gbm90IGltcGxpY2l0bHlcbiAgICAgIC8vIHBhcnNlIHRoZSByZXNwb25zZSBib2R5OyBpbnN0ZWFkIC50aGVuLCAuY2F0Y2gsIC5maW5hbGx5IGFyZSBvdmVycmlkZGVuXG4gICAgICAvLyB0byBwYXJzZSB0aGUgcmVzcG9uc2VcbiAgICAgIHJlc29sdmUobnVsbCBhcyBhbnkpO1xuICAgIH0pO1xuICB9XG5cbiAgX3RoZW5VbndyYXA8VT4odHJhbnNmb3JtOiAoZGF0YTogVCkgPT4gVSk6IEFQSVByb21pc2U8VT4ge1xuICAgIHJldHVybiBuZXcgQVBJUHJvbWlzZSh0aGlzLnJlc3BvbnNlUHJvbWlzZSwgYXN5bmMgKHByb3BzKSA9PiB0cmFuc2Zvcm0oYXdhaXQgdGhpcy5wYXJzZVJlc3BvbnNlKHByb3BzKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIGluc3RlYWQgb2YgcGFyc2luZyB0aGUgcmVzcG9uc2VcbiAgICogZGF0YS5cbiAgICpcbiAgICogSWYgeW91IHdhbnQgdG8gcGFyc2UgdGhlIHJlc3BvbnNlIGJvZHkgYnV0IHN0aWxsIGdldCB0aGUgYFJlc3BvbnNlYFxuICAgKiBpbnN0YW5jZSwgeW91IGNhbiB1c2Uge0BsaW5rIHdpdGhSZXNwb25zZSgpfS5cbiAgICovXG4gIGFzUmVzcG9uc2UoKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlUHJvbWlzZS50aGVuKChwKSA9PiBwLnJlc3BvbnNlKTtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgcGFyc2VkIHJlc3BvbnNlIGRhdGEgYW5kIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZS5cbiAgICpcbiAgICogSWYgeW91IGp1c3Qgd2FudCB0byBnZXQgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIHdpdGhvdXQgcGFyc2luZyBpdCxcbiAgICogeW91IGNhbiB1c2Uge0BsaW5rIGFzUmVzcG9uc2UoKX0uXG4gICAqL1xuICBhc3luYyB3aXRoUmVzcG9uc2UoKTogUHJvbWlzZTx7IGRhdGE6IFQ7IHJlc3BvbnNlOiBSZXNwb25zZSB9PiB7XG4gICAgY29uc3QgW2RhdGEsIHJlc3BvbnNlXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnBhcnNlKCksIHRoaXMuYXNSZXNwb25zZSgpXSk7XG4gICAgcmV0dXJuIHsgZGF0YSwgcmVzcG9uc2UgfTtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2UoKTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKCF0aGlzLnBhcnNlZFByb21pc2UpIHtcbiAgICAgIHRoaXMucGFyc2VkUHJvbWlzZSA9IHRoaXMucmVzcG9uc2VQcm9taXNlLnRoZW4odGhpcy5wYXJzZVJlc3BvbnNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucGFyc2VkUHJvbWlzZTtcbiAgfVxuXG4gIG92ZXJyaWRlIHRoZW48VFJlc3VsdDEgPSBULCBUUmVzdWx0MiA9IG5ldmVyPihcbiAgICBvbmZ1bGZpbGxlZD86ICgodmFsdWU6IFQpID0+IFRSZXN1bHQxIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDE+KSB8IHVuZGVmaW5lZCB8IG51bGwsXG4gICAgb25yZWplY3RlZD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQyIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDI+KSB8IHVuZGVmaW5lZCB8IG51bGwsXG4gICk6IFByb21pc2U8VFJlc3VsdDEgfCBUUmVzdWx0Mj4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCk7XG4gIH1cblxuICBvdmVycmlkZSBjYXRjaDxUUmVzdWx0ID0gbmV2ZXI+KFxuICAgIG9ucmVqZWN0ZWQ/OiAoKHJlYXNvbjogYW55KSA9PiBUUmVzdWx0IHwgUHJvbWlzZUxpa2U8VFJlc3VsdD4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxUIHwgVFJlc3VsdD4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkuY2F0Y2gob25yZWplY3RlZCk7XG4gIH1cblxuICBvdmVycmlkZSBmaW5hbGx5KG9uZmluYWxseT86ICgoKSA9PiB2b2lkKSB8IHVuZGVmaW5lZCB8IG51bGwpOiBQcm9taXNlPFQ+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZSgpLmZpbmFsbHkob25maW5hbGx5KTtcbiAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQVBJQ2xpZW50IHtcbiAgYmFzZVVSTDogc3RyaW5nO1xuICBtYXhSZXRyaWVzOiBudW1iZXI7XG4gIHRpbWVvdXQ6IG51bWJlcjtcbiAgaHR0cEFnZW50OiBBZ2VudCB8IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIGZldGNoOiBGZXRjaDtcbiAgcHJvdGVjdGVkIGlkZW1wb3RlbmN5SGVhZGVyPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBiYXNlVVJMLFxuICAgIG1heFJldHJpZXMsXG4gICAgdGltZW91dCA9IDYwMDAwMCwgLy8gMTAgbWludXRlc1xuICAgIGh0dHBBZ2VudCxcbiAgICBmZXRjaDogb3ZlcnJpZGVuRmV0Y2gsXG4gIH06IHtcbiAgICBiYXNlVVJMOiBzdHJpbmc7XG4gICAgbWF4UmV0cmllcz86IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICB0aW1lb3V0OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgaHR0cEFnZW50OiBBZ2VudCB8IHVuZGVmaW5lZDtcbiAgICBmZXRjaDogRmV0Y2ggfCB1bmRlZmluZWQ7XG4gIH0pIHtcbiAgICB0aGlzLmJhc2VVUkwgPSBiYXNlVVJMO1xuICAgIHRoaXMubWF4UmV0cmllcyA9IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCdtYXhSZXRyaWVzJywgbWF4UmV0cmllcyA/PyBNQVhfUkVUUklFUyk7XG4gICAgdGhpcy50aW1lb3V0ID0gdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIoJ3RpbWVvdXQnLCB0aW1lb3V0KTtcbiAgICB0aGlzLmh0dHBBZ2VudCA9IGh0dHBBZ2VudDtcblxuICAgIHRoaXMuZmV0Y2ggPSBvdmVycmlkZW5GZXRjaCA/PyBmZXRjaDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhdXRoSGVhZGVycyhvcHRzOiBGaW5hbFJlcXVlc3RPcHRpb25zKTogSGVhZGVycyB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoaXMgdG8gYWRkIHlvdXIgb3duIGRlZmF1bHQgaGVhZGVycywgZm9yIGV4YW1wbGU6XG4gICAqXG4gICAqICB7XG4gICAqICAgIC4uLnN1cGVyLmRlZmF1bHRIZWFkZXJzKCksXG4gICAqICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgMTIzJyxcbiAgICogIH1cbiAgICovXG4gIHByb3RlY3RlZCBkZWZhdWx0SGVhZGVycyhvcHRzOiBGaW5hbFJlcXVlc3RPcHRpb25zKTogSGVhZGVycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdVc2VyLUFnZW50JzogdGhpcy5nZXRVc2VyQWdlbnQoKSxcbiAgICAgIC4uLmdldFBsYXRmb3JtSGVhZGVycygpLFxuICAgICAgLi4udGhpcy5hdXRoSGVhZGVycyhvcHRzKSxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGRlZmF1bHRRdWVyeSgpOiBEZWZhdWx0UXVlcnkgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoaXMgdG8gYWRkIHlvdXIgb3duIGhlYWRlcnMgdmFsaWRhdGlvbjpcbiAgICovXG4gIHByb3RlY3RlZCB2YWxpZGF0ZUhlYWRlcnMoaGVhZGVyczogSGVhZGVycywgY3VzdG9tSGVhZGVyczogSGVhZGVycykge31cblxuICBwcm90ZWN0ZWQgZGVmYXVsdElkZW1wb3RlbmN5S2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBzdGFpbmxlc3Mtbm9kZS1yZXRyeS0ke3V1aWQ0KCl9YDtcbiAgfVxuXG4gIGdldDxSZXEgZXh0ZW5kcyB7fSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgnZ2V0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwb3N0PFJlcSBleHRlbmRzIHt9LCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwb3N0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwYXRjaDxSZXEgZXh0ZW5kcyB7fSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncGF0Y2gnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHB1dDxSZXEgZXh0ZW5kcyB7fSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncHV0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBkZWxldGU8UmVxIGV4dGVuZHMge30sIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ2RlbGV0ZScsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXRob2RSZXF1ZXN0PFJlcSBleHRlbmRzIHt9LCBSc3A+KFxuICAgIG1ldGhvZDogSFRUUE1ldGhvZCxcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+LFxuICApOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoUHJvbWlzZS5yZXNvbHZlKG9wdHMpLnRoZW4oKG9wdHMpID0+ICh7IG1ldGhvZCwgcGF0aCwgLi4ub3B0cyB9KSkpO1xuICB9XG5cbiAgZ2V0QVBJTGlzdDxJdGVtLCBQYWdlQ2xhc3MgZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gPSBBYnN0cmFjdFBhZ2U8SXRlbT4+KFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBQYWdlOiBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBQYWdlQ2xhc3MsXG4gICAgb3B0cz86IFJlcXVlc3RPcHRpb25zPGFueT4sXG4gICk6IFBhZ2VQcm9taXNlPFBhZ2VDbGFzcywgSXRlbT4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RBUElMaXN0KFBhZ2UsIHsgbWV0aG9kOiAnZ2V0JywgcGF0aCwgLi4ub3B0cyB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlQ29udGVudExlbmd0aChib2R5OiB1bmtub3duKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuYnl0ZUxlbmd0aChib2R5LCAndXRmOCcpLnRvU3RyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICAgICAgY29uc3QgZW5jb2RlZCA9IGVuY29kZXIuZW5jb2RlKGJvZHkpO1xuICAgICAgICByZXR1cm4gZW5jb2RlZC5sZW5ndGgudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGJ1aWxkUmVxdWVzdDxSZXEgZXh0ZW5kcyB7fT4oXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9uczxSZXE+LFxuICApOiB7IHJlcTogUmVxdWVzdEluaXQ7IHVybDogc3RyaW5nOyB0aW1lb3V0OiBudW1iZXIgfSB7XG4gICAgY29uc3QgeyBtZXRob2QsIHBhdGgsIHF1ZXJ5LCBoZWFkZXJzOiBoZWFkZXJzID0ge30gfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBib2R5ID1cbiAgICAgIGlzTXVsdGlwYXJ0Qm9keShvcHRpb25zLmJvZHkpID8gb3B0aW9ucy5ib2R5LmJvZHlcbiAgICAgIDogb3B0aW9ucy5ib2R5ID8gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5ib2R5LCBudWxsLCAyKVxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IGNvbnRlbnRMZW5ndGggPSB0aGlzLmNhbGN1bGF0ZUNvbnRlbnRMZW5ndGgoYm9keSk7XG5cbiAgICBjb25zdCB1cmwgPSB0aGlzLmJ1aWxkVVJMKHBhdGghLCBxdWVyeSk7XG4gICAgaWYgKCd0aW1lb3V0JyBpbiBvcHRpb25zKSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcigndGltZW91dCcsIG9wdGlvbnMudGltZW91dCk7XG4gICAgY29uc3QgdGltZW91dCA9IG9wdGlvbnMudGltZW91dCA/PyB0aGlzLnRpbWVvdXQ7XG4gICAgY29uc3QgaHR0cEFnZW50ID0gb3B0aW9ucy5odHRwQWdlbnQgPz8gdGhpcy5odHRwQWdlbnQgPz8gZ2V0RGVmYXVsdEFnZW50KHVybCk7XG4gICAgY29uc3QgbWluQWdlbnRUaW1lb3V0ID0gdGltZW91dCArIDEwMDA7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIChodHRwQWdlbnQgYXMgYW55KT8ub3B0aW9ucz8udGltZW91dCA9PT0gJ251bWJlcicgJiZcbiAgICAgIG1pbkFnZW50VGltZW91dCA+ICgoaHR0cEFnZW50IGFzIGFueSkub3B0aW9ucy50aW1lb3V0ID8/IDApXG4gICAgKSB7XG4gICAgICAvLyBBbGxvdyBhbnkgZ2l2ZW4gcmVxdWVzdCB0byBidW1wIG91ciBhZ2VudCBhY3RpdmUgc29ja2V0IHRpbWVvdXQuXG4gICAgICAvLyBUaGlzIG1heSBzZWVtIHN0cmFuZ2UsIGJ1dCBsZWFraW5nIGFjdGl2ZSBzb2NrZXRzIHNob3VsZCBiZSByYXJlIGFuZCBub3QgcGFydGljdWxhcmx5IHByb2JsZW1hdGljLFxuICAgICAgLy8gYW5kIHdpdGhvdXQgbXV0YXRpbmcgYWdlbnQgd2Ugd291bGQgbmVlZCB0byBjcmVhdGUgbW9yZSBvZiB0aGVtLlxuICAgICAgLy8gVGhpcyB0cmFkZW9mZiBvcHRpbWl6ZXMgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgKGh0dHBBZ2VudCBhcyBhbnkpLm9wdGlvbnMudGltZW91dCA9IG1pbkFnZW50VGltZW91dDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pZGVtcG90ZW5jeUhlYWRlciAmJiBtZXRob2QgIT09ICdnZXQnKSB7XG4gICAgICBpZiAoIW9wdGlvbnMuaWRlbXBvdGVuY3lLZXkpIG9wdGlvbnMuaWRlbXBvdGVuY3lLZXkgPSB0aGlzLmRlZmF1bHRJZGVtcG90ZW5jeUtleSgpO1xuICAgICAgaGVhZGVyc1t0aGlzLmlkZW1wb3RlbmN5SGVhZGVyXSA9IG9wdGlvbnMuaWRlbXBvdGVuY3lLZXk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxSGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIC4uLihjb250ZW50TGVuZ3RoICYmIHsgJ0NvbnRlbnQtTGVuZ3RoJzogY29udGVudExlbmd0aCB9KSxcbiAgICAgIC4uLnRoaXMuZGVmYXVsdEhlYWRlcnMob3B0aW9ucyksXG4gICAgICAuLi5oZWFkZXJzLFxuICAgIH07XG4gICAgLy8gbGV0IGJ1aWx0aW4gZmV0Y2ggc2V0IHRoZSBDb250ZW50LVR5cGUgZm9yIG11bHRpcGFydCBib2RpZXNcbiAgICBpZiAoaXNNdWx0aXBhcnRCb2R5KG9wdGlvbnMuYm9keSkgJiYgIWZldGNoSXNQb2x5ZmlsbGVkKSB7XG4gICAgICBkZWxldGUgcmVxSGVhZGVyc1snQ29udGVudC1UeXBlJ107XG4gICAgfVxuXG4gICAgLy8gU3RyaXAgYW55IGhlYWRlcnMgYmVpbmcgZXhwbGljaXRseSBvbWl0dGVkIHdpdGggbnVsbFxuICAgIE9iamVjdC5rZXlzKHJlcUhlYWRlcnMpLmZvckVhY2goKGtleSkgPT4gcmVxSGVhZGVyc1trZXldID09PSBudWxsICYmIGRlbGV0ZSByZXFIZWFkZXJzW2tleV0pO1xuXG4gICAgY29uc3QgcmVxOiBSZXF1ZXN0SW5pdCA9IHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIC4uLihib2R5ICYmIHsgYm9keTogYm9keSBhcyBhbnkgfSksXG4gICAgICBoZWFkZXJzOiByZXFIZWFkZXJzLFxuICAgICAgLi4uKGh0dHBBZ2VudCAmJiB7IGFnZW50OiBodHRwQWdlbnQgfSksXG4gICAgICAvLyBAdHMtaWdub3JlIG5vZGUtZmV0Y2ggdXNlcyBhIGN1c3RvbSBBYm9ydFNpZ25hbCB0eXBlIHRoYXQgaXNcbiAgICAgIC8vIG5vdCBjb21wYXRpYmxlIHdpdGggc3RhbmRhcmQgd2ViIHR5cGVzXG4gICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsID8/IG51bGwsXG4gICAgfTtcblxuICAgIHRoaXMudmFsaWRhdGVIZWFkZXJzKHJlcUhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgcmV0dXJuIHsgcmVxLCB1cmwsIHRpbWVvdXQgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGFzIGEgY2FsbGJhY2sgZm9yIG11dGF0aW5nIHRoZSBnaXZlbiBgUmVxdWVzdEluaXRgIG9iamVjdC5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIGNhc2VzIHdoZXJlIHlvdSB3YW50IHRvIGFkZCBjZXJ0YWluIGhlYWRlcnMgYmFzZWQgb2ZmIG9mXG4gICAqIHRoZSByZXF1ZXN0IHByb3BlcnRpZXMsIGUuZy4gYG1ldGhvZGAgb3IgYHVybGAuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgcHJlcGFyZVJlcXVlc3QoXG4gICAgcmVxdWVzdDogUmVxdWVzdEluaXQsXG4gICAgeyB1cmwsIG9wdGlvbnMgfTogeyB1cmw6IHN0cmluZzsgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyB9LFxuICApOiBQcm9taXNlPHZvaWQ+IHt9XG5cbiAgcHJvdGVjdGVkIHBhcnNlSGVhZGVycyhoZWFkZXJzOiBIZWFkZXJzSW5pdCB8IG51bGwgfCB1bmRlZmluZWQpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICByZXR1cm4gKFxuICAgICAgIWhlYWRlcnMgPyB7fVxuICAgICAgOiBTeW1ib2wuaXRlcmF0b3IgaW4gaGVhZGVycyA/XG4gICAgICAgIE9iamVjdC5mcm9tRW50cmllcyhBcnJheS5mcm9tKGhlYWRlcnMgYXMgSXRlcmFibGU8c3RyaW5nW10+KS5tYXAoKGhlYWRlcikgPT4gWy4uLmhlYWRlcl0pKVxuICAgICAgOiB7IC4uLmhlYWRlcnMgfVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWFrZVN0YXR1c0Vycm9yKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yOiBPYmplY3QgfCB1bmRlZmluZWQsXG4gICAgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICkge1xuICAgIHJldHVybiBBUElFcnJvci5nZW5lcmF0ZShzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgfVxuXG4gIHJlcXVlc3Q8UmVxIGV4dGVuZHMge30sIFJzcD4oXG4gICAgb3B0aW9uczogUHJvbWlzZU9yVmFsdWU8RmluYWxSZXF1ZXN0T3B0aW9uczxSZXE+PixcbiAgICByZW1haW5pbmdSZXRyaWVzOiBudW1iZXIgfCBudWxsID0gbnVsbCxcbiAgKTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5tYWtlUmVxdWVzdChvcHRpb25zLCByZW1haW5pbmdSZXRyaWVzKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KFxuICAgIG9wdGlvbnNJbnB1dDogUHJvbWlzZU9yVmFsdWU8RmluYWxSZXF1ZXN0T3B0aW9ucz4sXG4gICAgcmV0cmllc1JlbWFpbmluZzogbnVtYmVyIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGF3YWl0IG9wdGlvbnNJbnB1dDtcbiAgICBpZiAocmV0cmllc1JlbWFpbmluZyA9PSBudWxsKSB7XG4gICAgICByZXRyaWVzUmVtYWluaW5nID0gb3B0aW9ucy5tYXhSZXRyaWVzID8/IHRoaXMubWF4UmV0cmllcztcbiAgICB9XG5cbiAgICBjb25zdCB7IHJlcSwgdXJsLCB0aW1lb3V0IH0gPSB0aGlzLmJ1aWxkUmVxdWVzdChvcHRpb25zKTtcblxuICAgIGF3YWl0IHRoaXMucHJlcGFyZVJlcXVlc3QocmVxLCB7IHVybCwgb3B0aW9ucyB9KTtcblxuICAgIGRlYnVnKCdyZXF1ZXN0JywgdXJsLCBvcHRpb25zLCByZXEuaGVhZGVycyk7XG5cbiAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoV2l0aFRpbWVvdXQodXJsLCByZXEsIHRpbWVvdXQsIGNvbnRyb2xsZXIpLmNhdGNoKGNhc3RUb0Vycm9yKTtcblxuICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgICB9XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzcG9uc2UubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yKCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgQVBJQ29ubmVjdGlvbkVycm9yKHsgY2F1c2U6IHJlc3BvbnNlIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlSGVhZGVycyA9IGNyZWF0ZVJlc3BvbnNlSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGlmIChyZXRyaWVzUmVtYWluaW5nICYmIHRoaXMuc2hvdWxkUmV0cnkocmVzcG9uc2UpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJldHJ5UmVxdWVzdChvcHRpb25zLCByZXRyaWVzUmVtYWluaW5nLCByZXNwb25zZUhlYWRlcnMpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlcnJUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKCgpID0+ICdVbmtub3duJyk7XG4gICAgICBjb25zdCBlcnJKU09OID0gc2FmZUpTT04oZXJyVGV4dCk7XG4gICAgICBjb25zdCBlcnJNZXNzYWdlID0gZXJySlNPTiA/IHVuZGVmaW5lZCA6IGVyclRleHQ7XG5cbiAgICAgIGRlYnVnKCdyZXNwb25zZScsIHJlc3BvbnNlLnN0YXR1cywgdXJsLCByZXNwb25zZUhlYWRlcnMsIGVyck1lc3NhZ2UpO1xuXG4gICAgICBjb25zdCBlcnIgPSB0aGlzLm1ha2VTdGF0dXNFcnJvcihyZXNwb25zZS5zdGF0dXMsIGVyckpTT04sIGVyck1lc3NhZ2UsIHJlc3BvbnNlSGVhZGVycyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcmVzcG9uc2UsIG9wdGlvbnMsIGNvbnRyb2xsZXIgfTtcbiAgfVxuXG4gIHJlcXVlc3RBUElMaXN0PEl0ZW0gPSB1bmtub3duLCBQYWdlQ2xhc3MgZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gPSBBYnN0cmFjdFBhZ2U8SXRlbT4+KFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogQ29uc3RydWN0b3JQYXJhbWV0ZXJzPHR5cGVvZiBBYnN0cmFjdFBhZ2U+KSA9PiBQYWdlQ2xhc3MsXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgbnVsbCk7XG4gICAgcmV0dXJuIG5ldyBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+KHRoaXMsIHJlcXVlc3QsIFBhZ2UpO1xuICB9XG5cbiAgYnVpbGRVUkw8UmVxIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KHBhdGg6IHN0cmluZywgcXVlcnk6IFJlcSB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVybCA9XG4gICAgICBpc0Fic29sdXRlVVJMKHBhdGgpID9cbiAgICAgICAgbmV3IFVSTChwYXRoKVxuICAgICAgOiBuZXcgVVJMKHRoaXMuYmFzZVVSTCArICh0aGlzLmJhc2VVUkwuZW5kc1dpdGgoJy8nKSAmJiBwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRoKSk7XG5cbiAgICBjb25zdCBkZWZhdWx0UXVlcnkgPSB0aGlzLmRlZmF1bHRRdWVyeSgpO1xuICAgIGlmICghaXNFbXB0eU9iaihkZWZhdWx0UXVlcnkpKSB7XG4gICAgICBxdWVyeSA9IHsgLi4uZGVmYXVsdFF1ZXJ5LCAuLi5xdWVyeSB9IGFzIFJlcTtcbiAgICB9XG5cbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIHVybC5zZWFyY2ggPSB0aGlzLnN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc3RyaW5naWZ5UXVlcnkocXVlcnk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KTogc3RyaW5nIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMocXVlcnkpXG4gICAgICAuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKVxuICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICByZXR1cm4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09YDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBzdHJpbmdpZnkgdHlwZSAke3R5cGVvZiB2YWx1ZX07IEV4cGVjdGVkIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvciBudWxsLiBJZiB5b3UgbmVlZCB0byBwYXNzIG5lc3RlZCBxdWVyeSBwYXJhbWV0ZXJzLCB5b3UgY2FuIG1hbnVhbGx5IGVuY29kZSB0aGVtLCBlLmcuIHsgcXVlcnk6IHsgJ2Zvb1trZXkxXSc6IHZhbHVlMSwgJ2Zvb1trZXkyXSc6IHZhbHVlMiB9IH0sIGFuZCBwbGVhc2Ugb3BlbiBhIEdpdEh1YiBpc3N1ZSByZXF1ZXN0aW5nIGJldHRlciBzdXBwb3J0IGZvciB5b3VyIHVzZSBjYXNlLmAsXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGFzeW5jIGZldGNoV2l0aFRpbWVvdXQoXG4gICAgdXJsOiBSZXF1ZXN0SW5mbyxcbiAgICBpbml0OiBSZXF1ZXN0SW5pdCB8IHVuZGVmaW5lZCxcbiAgICBtczogbnVtYmVyLFxuICAgIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcbiAgKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIGNvbnN0IHsgc2lnbmFsLCAuLi5vcHRpb25zIH0gPSBpbml0IHx8IHt9O1xuICAgIGlmIChzaWduYWwpIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSk7XG5cbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIG1zKTtcblxuICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3RDbGllbnQoKVxuICAgICAgLmZldGNoKHVybCwgeyBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsIGFzIGFueSwgLi4ub3B0aW9ucyB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRSZXF1ZXN0Q2xpZW50KCk6IFJlcXVlc3RDbGllbnQge1xuICAgIHJldHVybiB7IGZldGNoOiB0aGlzLmZldGNoIH07XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFJldHJ5KHJlc3BvbnNlOiBSZXNwb25zZSk6IGJvb2xlYW4ge1xuICAgIC8vIE5vdGUgdGhpcyBpcyBub3QgYSBzdGFuZGFyZCBoZWFkZXIuXG4gICAgY29uc3Qgc2hvdWxkUmV0cnlIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldCgneC1zaG91bGQtcmV0cnknKTtcblxuICAgIC8vIElmIHRoZSBzZXJ2ZXIgZXhwbGljaXRseSBzYXlzIHdoZXRoZXIgb3Igbm90IHRvIHJldHJ5LCBvYmV5LlxuICAgIGlmIChzaG91bGRSZXRyeUhlYWRlciA9PT0gJ3RydWUnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoc2hvdWxkUmV0cnlIZWFkZXIgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFJldHJ5IG9uIGxvY2sgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIHJhdGUgbGltaXRzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBSZXRyeSBpbnRlcm5hbCBlcnJvcnMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA1MDApIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXRyeVJlcXVlc3QoXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgICByZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsXG4gICAgcmVzcG9uc2VIZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPiB7XG4gICAgcmV0cmllc1JlbWFpbmluZyAtPSAxO1xuXG4gICAgLy8gQWJvdXQgdGhlIFJldHJ5LUFmdGVyIGhlYWRlcjogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9IZWFkZXJzL1JldHJ5LUFmdGVyXG4gICAgLy9cbiAgICAvLyBUT0RPOiB3ZSBtYXkgd2FudCB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIGhlYWRlciBpcyB1c2luZyB0aGUgaHR0cC1kYXRlIHN5bnRheDogXCJSZXRyeS1BZnRlcjogPGh0dHAtZGF0ZT5cIi5cbiAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9IZWFkZXJzL1JldHJ5LUFmdGVyI3N5bnRheCBmb3IgZGV0YWlscy5cbiAgICBjb25zdCByZXRyeUFmdGVyID0gcGFyc2VJbnQocmVzcG9uc2VIZWFkZXJzPy5bJ3JldHJ5LWFmdGVyJ10gfHwgJycpO1xuXG4gICAgY29uc3QgbWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgY29uc3QgdGltZW91dCA9IHRoaXMuY2FsY3VsYXRlUmV0cnlUaW1lb3V0U2Vjb25kcyhyZXRyaWVzUmVtYWluaW5nLCByZXRyeUFmdGVyLCBtYXhSZXRyaWVzKSAqIDEwMDA7XG4gICAgYXdhaXQgc2xlZXAodGltZW91dCk7XG5cbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdChvcHRpb25zLCByZXRyaWVzUmVtYWluaW5nKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlUmV0cnlUaW1lb3V0U2Vjb25kcyhcbiAgICByZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsXG4gICAgcmV0cnlBZnRlcjogbnVtYmVyLFxuICAgIG1heFJldHJpZXM6IG51bWJlcixcbiAgKTogbnVtYmVyIHtcbiAgICBjb25zdCBpbml0aWFsUmV0cnlEZWxheSA9IDAuNTtcbiAgICBjb25zdCBtYXhSZXRyeURlbGF5ID0gMjtcblxuICAgIC8vIElmIHRoZSBBUEkgYXNrcyB1cyB0byB3YWl0IGEgY2VydGFpbiBhbW91bnQgb2YgdGltZSAoYW5kIGl0J3MgYSByZWFzb25hYmxlIGFtb3VudCksXG4gICAgLy8ganVzdCBkbyB3aGF0IGl0IHNheXMuXG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIocmV0cnlBZnRlcikgJiYgcmV0cnlBZnRlciA8PSA2MCkge1xuICAgICAgcmV0dXJuIHJldHJ5QWZ0ZXI7XG4gICAgfVxuXG4gICAgY29uc3QgbnVtUmV0cmllcyA9IG1heFJldHJpZXMgLSByZXRyaWVzUmVtYWluaW5nO1xuXG4gICAgLy8gQXBwbHkgZXhwb25lbnRpYWwgYmFja29mZiwgYnV0IG5vdCBtb3JlIHRoYW4gdGhlIG1heC5cbiAgICBjb25zdCBzbGVlcFNlY29uZHMgPSBNYXRoLm1pbihpbml0aWFsUmV0cnlEZWxheSAqIE1hdGgucG93KG51bVJldHJpZXMgLSAxLCAyKSwgbWF4UmV0cnlEZWxheSk7XG5cbiAgICAvLyBBcHBseSBzb21lIGppdHRlciwgcGx1cy1vci1taW51cyBoYWxmIGEgc2Vjb25kLlxuICAgIGNvbnN0IGppdHRlciA9IE1hdGgucmFuZG9tKCkgLSAwLjU7XG5cbiAgICByZXR1cm4gc2xlZXBTZWNvbmRzICsgaml0dGVyO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRVc2VyQWdlbnQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfS9KUyAke1ZFUlNJT059YDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJUmVzb3VyY2Uge1xuICBwcm90ZWN0ZWQgY2xpZW50OiBBUElDbGllbnQ7XG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQVBJQ2xpZW50KSB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG5cbiAgICB0aGlzLmdldCA9IGNsaWVudC5nZXQuYmluZChjbGllbnQpO1xuICAgIHRoaXMucG9zdCA9IGNsaWVudC5wb3N0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnBhdGNoID0gY2xpZW50LnBhdGNoLmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnB1dCA9IGNsaWVudC5wdXQuYmluZChjbGllbnQpO1xuICAgIHRoaXMuZGVsZXRlID0gY2xpZW50LmRlbGV0ZS5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5nZXRBUElMaXN0ID0gY2xpZW50LmdldEFQSUxpc3QuYmluZChjbGllbnQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldDogQVBJQ2xpZW50WydnZXQnXTtcbiAgcHJvdGVjdGVkIHBvc3Q6IEFQSUNsaWVudFsncG9zdCddO1xuICBwcm90ZWN0ZWQgcGF0Y2g6IEFQSUNsaWVudFsncGF0Y2gnXTtcbiAgcHJvdGVjdGVkIHB1dDogQVBJQ2xpZW50WydwdXQnXTtcbiAgcHJvdGVjdGVkIGRlbGV0ZTogQVBJQ2xpZW50WydkZWxldGUnXTtcbiAgcHJvdGVjdGVkIGdldEFQSUxpc3Q6IEFQSUNsaWVudFsnZ2V0QVBJTGlzdCddO1xufVxuXG5leHBvcnQgdHlwZSBQYWdlSW5mbyA9IHsgdXJsOiBVUkwgfSB8IHsgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwgfTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0UGFnZTxJdGVtPiBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8SXRlbT4ge1xuICAjY2xpZW50OiBBUElDbGllbnQ7XG4gIHByb3RlY3RlZCBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zO1xuXG4gIHByb3RlY3RlZCByZXNwb25zZTogUmVzcG9uc2U7XG4gIHByb3RlY3RlZCBib2R5OiB1bmtub3duO1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQVBJQ2xpZW50LCByZXNwb25zZTogUmVzcG9uc2UsIGJvZHk6IHVua25vd24sIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpIHtcbiAgICB0aGlzLiNjbGllbnQgPSBjbGllbnQ7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgbmV4dFBhZ2VJbmZvIGluc3RlYWRcbiAgICovXG4gIGFic3RyYWN0IG5leHRQYWdlUGFyYW1zKCk6IFBhcnRpYWw8UmVjb3JkPHN0cmluZywgdW5rbm93bj4+IHwgbnVsbDtcbiAgYWJzdHJhY3QgbmV4dFBhZ2VJbmZvKCk6IFBhZ2VJbmZvIHwgbnVsbDtcblxuICBhYnN0cmFjdCBnZXRQYWdpbmF0ZWRJdGVtcygpOiBJdGVtW107XG5cbiAgaGFzTmV4dFBhZ2UoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLmdldFBhZ2luYXRlZEl0ZW1zKCk7XG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5uZXh0UGFnZUluZm8oKSAhPSBudWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0TmV4dFBhZ2UoKTogUHJvbWlzZTx0aGlzPiB7XG4gICAgY29uc3QgbmV4dEluZm8gPSB0aGlzLm5leHRQYWdlSW5mbygpO1xuICAgIGlmICghbmV4dEluZm8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ05vIG5leHQgcGFnZSBleHBlY3RlZDsgcGxlYXNlIGNoZWNrIGAuaGFzTmV4dFBhZ2UoKWAgYmVmb3JlIGNhbGxpbmcgYC5nZXROZXh0UGFnZSgpYC4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgbmV4dE9wdGlvbnMgPSB7IC4uLnRoaXMub3B0aW9ucyB9O1xuICAgIGlmICgncGFyYW1zJyBpbiBuZXh0SW5mbykge1xuICAgICAgbmV4dE9wdGlvbnMucXVlcnkgPSB7IC4uLm5leHRPcHRpb25zLnF1ZXJ5LCAuLi5uZXh0SW5mby5wYXJhbXMgfTtcbiAgICB9IGVsc2UgaWYgKCd1cmwnIGluIG5leHRJbmZvKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBbLi4uT2JqZWN0LmVudHJpZXMobmV4dE9wdGlvbnMucXVlcnkgfHwge30pLCAuLi5uZXh0SW5mby51cmwuc2VhcmNoUGFyYW1zLmVudHJpZXMoKV07XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBwYXJhbXMpIHtcbiAgICAgICAgbmV4dEluZm8udXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBuZXh0T3B0aW9ucy5xdWVyeSA9IHVuZGVmaW5lZDtcbiAgICAgIG5leHRPcHRpb25zLnBhdGggPSBuZXh0SW5mby51cmwudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuI2NsaWVudC5yZXF1ZXN0QVBJTGlzdCh0aGlzLmNvbnN0cnVjdG9yIGFzIGFueSwgbmV4dE9wdGlvbnMpO1xuICB9XG5cbiAgYXN5bmMgKml0ZXJQYWdlcygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICBsZXQgcGFnZTogQWJzdHJhY3RQYWdlPEl0ZW0+ID0gdGhpcztcbiAgICB5aWVsZCBwYWdlO1xuICAgIHdoaWxlIChwYWdlLmhhc05leHRQYWdlKCkpIHtcbiAgICAgIHBhZ2UgPSBhd2FpdCBwYWdlLmdldE5leHRQYWdlKCk7XG4gICAgICB5aWVsZCBwYWdlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGZvciBhd2FpdCAoY29uc3QgcGFnZSBvZiB0aGlzLml0ZXJQYWdlcygpKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcGFnZS5nZXRQYWdpbmF0ZWRJdGVtcygpKSB7XG4gICAgICAgIHlpZWxkIGl0ZW07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGhpcyBzdWJjbGFzcyBvZiBQcm9taXNlIHdpbGwgcmVzb2x2ZSB0byBhbiBpbnN0YW50aWF0ZWQgUGFnZSBvbmNlIHRoZSByZXF1ZXN0IGNvbXBsZXRlcy5cbiAqXG4gKiBJdCBhbHNvIGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZSB0byBhbGxvdyBhdXRvLXBhZ2luYXRpbmcgaXRlcmF0aW9uIG9uIGFuIHVuYXdhaXRlZCBsaXN0IGNhbGwsIGVnOlxuICpcbiAqICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBjbGllbnQuaXRlbXMubGlzdCgpKSB7XG4gKiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXG4gKiAgICB9XG4gKi9cbmV4cG9ydCBjbGFzcyBQYWdlUHJvbWlzZTxcbiAgICBQYWdlQ2xhc3MgZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4sXG4gICAgSXRlbSA9IFJldHVyblR5cGU8UGFnZUNsYXNzWydnZXRQYWdpbmF0ZWRJdGVtcyddPltudW1iZXJdLFxuICA+XG4gIGV4dGVuZHMgQVBJUHJvbWlzZTxQYWdlQ2xhc3M+XG4gIGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxJdGVtPlxue1xuICBjb25zdHJ1Y3RvcihcbiAgICBjbGllbnQ6IEFQSUNsaWVudCxcbiAgICByZXF1ZXN0OiBQcm9taXNlPEFQSVJlc3BvbnNlUHJvcHM+LFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogQ29uc3RydWN0b3JQYXJhbWV0ZXJzPHR5cGVvZiBBYnN0cmFjdFBhZ2U+KSA9PiBQYWdlQ2xhc3MsXG4gICkge1xuICAgIHN1cGVyKFxuICAgICAgcmVxdWVzdCxcbiAgICAgIGFzeW5jIChwcm9wcykgPT4gbmV3IFBhZ2UoY2xpZW50LCBwcm9wcy5yZXNwb25zZSwgYXdhaXQgZGVmYXVsdFBhcnNlUmVzcG9uc2UocHJvcHMpLCBwcm9wcy5vcHRpb25zKSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93IGF1dG8tcGFnaW5hdGluZyBpdGVyYXRpb24gb24gYW4gdW5hd2FpdGVkIGxpc3QgY2FsbCwgZWc6XG4gICAqXG4gICAqICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBjbGllbnQuaXRlbXMubGlzdCgpKSB7XG4gICAqICAgICAgY29uc29sZS5sb2coaXRlbSlcbiAgICogICAgfVxuICAgKi9cbiAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXM7XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIHBhZ2UpIHtcbiAgICAgIHlpZWxkIGl0ZW07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZXNwb25zZUhlYWRlcnMgPSAoXG4gIGhlYWRlcnM6IEF3YWl0ZWQ8UmV0dXJuVHlwZTxGZXRjaD4+WydoZWFkZXJzJ10sXG4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm94eShcbiAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBoZWFkZXJzLmVudHJpZXMoKSxcbiAgICApLFxuICAgIHtcbiAgICAgIGdldCh0YXJnZXQsIG5hbWUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmFtZS50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0W2tleS50b0xvd2VyQ2FzZSgpXSB8fCB0YXJnZXRba2V5XTtcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcbn07XG5cbnR5cGUgSFRUUE1ldGhvZCA9ICdnZXQnIHwgJ3Bvc3QnIHwgJ3B1dCcgfCAncGF0Y2gnIHwgJ2RlbGV0ZSc7XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RDbGllbnQgPSB7IGZldGNoOiBGZXRjaCB9O1xuZXhwb3J0IHR5cGUgSGVhZGVycyA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ+O1xuZXhwb3J0IHR5cGUgRGVmYXVsdFF1ZXJ5ID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPjtcbmV4cG9ydCB0eXBlIEtleXNFbnVtPFQ+ID0geyBbUCBpbiBrZXlvZiBSZXF1aXJlZDxUPl06IHRydWUgfTtcblxuZXhwb3J0IHR5cGUgUmVxdWVzdE9wdGlvbnM8UmVxIGV4dGVuZHMge30gPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IFJlYWRhYmxlPiA9IHtcbiAgbWV0aG9kPzogSFRUUE1ldGhvZDtcbiAgcGF0aD86IHN0cmluZztcbiAgcXVlcnk/OiBSZXEgfCB1bmRlZmluZWQ7XG4gIGJvZHk/OiBSZXEgfCB1bmRlZmluZWQ7XG4gIGhlYWRlcnM/OiBIZWFkZXJzIHwgdW5kZWZpbmVkO1xuXG4gIG1heFJldHJpZXM/OiBudW1iZXI7XG4gIHN0cmVhbT86IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gIHRpbWVvdXQ/OiBudW1iZXI7XG4gIGh0dHBBZ2VudD86IEFnZW50O1xuICBzaWduYWw/OiBBYm9ydFNpZ25hbCB8IHVuZGVmaW5lZCB8IG51bGw7XG4gIGlkZW1wb3RlbmN5S2V5Pzogc3RyaW5nO1xufTtcblxuLy8gVGhpcyBpcyByZXF1aXJlZCBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUgaWYgYSBnaXZlbiBvYmplY3QgbWF0Y2hlcyB0aGUgUmVxdWVzdE9wdGlvbnNcbi8vIHR5cGUgYXQgcnVudGltZS4gV2hpbGUgdGhpcyByZXF1aXJlcyBkdXBsaWNhdGlvbiwgaXQgaXMgZW5mb3JjZWQgYnkgdGhlIFR5cGVTY3JpcHRcbi8vIGNvbXBpbGVyIHN1Y2ggdGhhdCBhbnkgbWlzc2luZyAvIGV4dHJhbmVvdXMga2V5cyB3aWxsIGNhdXNlIGFuIGVycm9yLlxuY29uc3QgcmVxdWVzdE9wdGlvbnNLZXlzOiBLZXlzRW51bTxSZXF1ZXN0T3B0aW9ucz4gPSB7XG4gIG1ldGhvZDogdHJ1ZSxcbiAgcGF0aDogdHJ1ZSxcbiAgcXVlcnk6IHRydWUsXG4gIGJvZHk6IHRydWUsXG4gIGhlYWRlcnM6IHRydWUsXG5cbiAgbWF4UmV0cmllczogdHJ1ZSxcbiAgc3RyZWFtOiB0cnVlLFxuICB0aW1lb3V0OiB0cnVlLFxuICBodHRwQWdlbnQ6IHRydWUsXG4gIHNpZ25hbDogdHJ1ZSxcbiAgaWRlbXBvdGVuY3lLZXk6IHRydWUsXG59O1xuXG5leHBvcnQgY29uc3QgaXNSZXF1ZXN0T3B0aW9ucyA9IChvYmo6IHVua25vd24pOiBvYmogaXMgUmVxdWVzdE9wdGlvbnMgPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXG4gICAgb2JqICE9PSBudWxsICYmXG4gICAgIWlzRW1wdHlPYmoob2JqKSAmJlxuICAgIE9iamVjdC5rZXlzKG9iaikuZXZlcnkoKGspID0+IGhhc093bihyZXF1ZXN0T3B0aW9uc0tleXMsIGspKVxuICApO1xufTtcblxuZXhwb3J0IHR5cGUgRmluYWxSZXF1ZXN0T3B0aW9uczxSZXEgZXh0ZW5kcyB7fSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgUmVhZGFibGU+ID0gUmVxdWVzdE9wdGlvbnM8UmVxPiAmIHtcbiAgbWV0aG9kOiBIVFRQTWV0aG9kO1xuICBwYXRoOiBzdHJpbmc7XG59O1xuXG5kZWNsYXJlIGNvbnN0IERlbm86IGFueTtcbmRlY2xhcmUgY29uc3QgRWRnZVJ1bnRpbWU6IGFueTtcbnR5cGUgQXJjaCA9ICd4MzInIHwgJ3g2NCcgfCAnYXJtJyB8ICdhcm02NCcgfCBgb3RoZXI6JHtzdHJpbmd9YCB8ICd1bmtub3duJztcbnR5cGUgUGxhdGZvcm1OYW1lID1cbiAgfCAnTWFjT1MnXG4gIHwgJ0xpbnV4J1xuICB8ICdXaW5kb3dzJ1xuICB8ICdGcmVlQlNEJ1xuICB8ICdPcGVuQlNEJ1xuICB8ICdpT1MnXG4gIHwgJ0FuZHJvaWQnXG4gIHwgYE90aGVyOiR7c3RyaW5nfWBcbiAgfCAnVW5rbm93bic7XG50eXBlIEJyb3dzZXIgPSAnaWUnIHwgJ2VkZ2UnIHwgJ2Nocm9tZScgfCAnZmlyZWZveCcgfCAnc2FmYXJpJztcbnR5cGUgUGxhdGZvcm1Qcm9wZXJ0aWVzID0ge1xuICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcyc7XG4gICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBzdHJpbmc7XG4gICdYLVN0YWlubGVzcy1PUyc6IFBsYXRmb3JtTmFtZTtcbiAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBBcmNoO1xuICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICdub2RlJyB8ICdkZW5vJyB8ICdlZGdlJyB8IGBicm93c2VyOiR7QnJvd3Nlcn1gIHwgJ3Vua25vd24nO1xuICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogc3RyaW5nO1xufTtcbmNvbnN0IGdldFBsYXRmb3JtUHJvcGVydGllcyA9ICgpOiBQbGF0Zm9ybVByb3BlcnRpZXMgPT4ge1xuICBpZiAodHlwZW9mIERlbm8gIT09ICd1bmRlZmluZWQnICYmIERlbm8uYnVpbGQgIT0gbnVsbCkge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogVkVSU0lPTixcbiAgICAgICdYLVN0YWlubGVzcy1PUyc6IG5vcm1hbGl6ZVBsYXRmb3JtKERlbm8uYnVpbGQub3MpLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBub3JtYWxpemVBcmNoKERlbm8uYnVpbGQuYXJjaCksXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICdkZW5vJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBEZW5vLnZlcnNpb24sXG4gICAgfTtcbiAgfVxuICBpZiAodHlwZW9mIEVkZ2VSdW50aW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogVkVSU0lPTixcbiAgICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogYG90aGVyOiR7RWRnZVJ1bnRpbWV9YCxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ2VkZ2UnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHByb2Nlc3MudmVyc2lvbixcbiAgICB9O1xuICB9XG4gIC8vIENoZWNrIGlmIE5vZGUuanNcbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgPyBwcm9jZXNzIDogMCkgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogVkVSU0lPTixcbiAgICAgICdYLVN0YWlubGVzcy1PUyc6IG5vcm1hbGl6ZVBsYXRmb3JtKHByb2Nlc3MucGxhdGZvcm0pLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBub3JtYWxpemVBcmNoKHByb2Nlc3MuYXJjaCksXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICdub2RlJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBwcm9jZXNzLnZlcnNpb24sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGJyb3dzZXJJbmZvID0gZ2V0QnJvd3NlckluZm8oKTtcbiAgaWYgKGJyb3dzZXJJbmZvKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiAndW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6IGBicm93c2VyOiR7YnJvd3NlckluZm8uYnJvd3Nlcn1gLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IGJyb3dzZXJJbmZvLnZlcnNpb24sXG4gICAgfTtcbiAgfVxuXG4gIC8vIFRPRE8gYWRkIHN1cHBvcnQgZm9yIENsb3VkZmxhcmUgd29ya2VycywgZXRjLlxuICByZXR1cm4ge1xuICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogVkVSU0lPTixcbiAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiAndW5rbm93bicsXG4gICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAndW5rbm93bicsXG4gICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6ICd1bmtub3duJyxcbiAgfTtcbn07XG5cbnR5cGUgQnJvd3NlckluZm8gPSB7XG4gIGJyb3dzZXI6IEJyb3dzZXI7XG4gIHZlcnNpb246IHN0cmluZztcbn07XG5cbmRlY2xhcmUgY29uc3QgbmF2aWdhdG9yOiB7IHVzZXJBZ2VudDogc3RyaW5nIH0gfCB1bmRlZmluZWQ7XG5cbi8vIE5vdGU6IG1vZGlmaWVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0pTLURldlRvb2xzL2hvc3QtZW52aXJvbm1lbnQvYmxvYi9iMWFiNzllY2RlMzdkYjVkNmUxNjNjMDUwZTU0ZmU3ZDI4N2Q3YzkyL3NyYy9pc29tb3JwaGljLmJyb3dzZXIudHNcbmZ1bmN0aW9uIGdldEJyb3dzZXJJbmZvKCk6IEJyb3dzZXJJbmZvIHwgbnVsbCB7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBOT1RFOiBUaGUgb3JkZXIgbWF0dGVycyBoZXJlIVxuICBjb25zdCBicm93c2VyUGF0dGVybnMgPSBbXG4gICAgeyBrZXk6ICdlZGdlJyBhcyBjb25zdCwgcGF0dGVybjogL0VkZ2UoPzpcXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ2llJyBhcyBjb25zdCwgcGF0dGVybjogL01TSUUoPzpcXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ2llJyBhcyBjb25zdCwgcGF0dGVybjogL1RyaWRlbnQoPzouKnJ2XFw6KFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ2Nocm9tZScgYXMgY29uc3QsIHBhdHRlcm46IC9DaHJvbWUoPzpcXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ2ZpcmVmb3gnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvRmlyZWZveCg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnc2FmYXJpJyBhcyBjb25zdCwgcGF0dGVybjogLyg/OlZlcnNpb25cXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPyg/OlxcVytNb2JpbGVcXFMqKT9cXFcrU2FmYXJpLyB9LFxuICBdO1xuXG4gIC8vIEZpbmQgdGhlIEZJUlNUIG1hdGNoaW5nIGJyb3dzZXJcbiAgZm9yIChjb25zdCB7IGtleSwgcGF0dGVybiB9IG9mIGJyb3dzZXJQYXR0ZXJucykge1xuICAgIGNvbnN0IG1hdGNoID0gcGF0dGVybi5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgY29uc3QgbWFqb3IgPSBtYXRjaFsxXSB8fCAwO1xuICAgICAgY29uc3QgbWlub3IgPSBtYXRjaFsyXSB8fCAwO1xuICAgICAgY29uc3QgcGF0Y2ggPSBtYXRjaFszXSB8fCAwO1xuXG4gICAgICByZXR1cm4geyBicm93c2VyOiBrZXksIHZlcnNpb246IGAke21ham9yfS4ke21pbm9yfS4ke3BhdGNofWAgfTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuY29uc3Qgbm9ybWFsaXplQXJjaCA9IChhcmNoOiBzdHJpbmcpOiBBcmNoID0+IHtcbiAgLy8gTm9kZSBkb2NzOlxuICAvLyAtIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NhcmNoXG4gIC8vIERlbm8gZG9jczpcbiAgLy8gLSBodHRwczovL2RvYy5kZW5vLmxhbmQvZGVuby9zdGFibGUvfi9EZW5vLmJ1aWxkXG4gIGlmIChhcmNoID09PSAneDMyJykgcmV0dXJuICd4MzInO1xuICBpZiAoYXJjaCA9PT0gJ3g4Nl82NCcgfHwgYXJjaCA9PT0gJ3g2NCcpIHJldHVybiAneDY0JztcbiAgaWYgKGFyY2ggPT09ICdhcm0nKSByZXR1cm4gJ2FybSc7XG4gIGlmIChhcmNoID09PSAnYWFyY2g2NCcgfHwgYXJjaCA9PT0gJ2FybTY0JykgcmV0dXJuICdhcm02NCc7XG4gIGlmIChhcmNoKSByZXR1cm4gYG90aGVyOiR7YXJjaH1gO1xuICByZXR1cm4gJ3Vua25vd24nO1xufTtcblxuY29uc3Qgbm9ybWFsaXplUGxhdGZvcm0gPSAocGxhdGZvcm06IHN0cmluZyk6IFBsYXRmb3JtTmFtZSA9PiB7XG4gIC8vIE5vZGUgcGxhdGZvcm1zOlxuICAvLyAtIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NwbGF0Zm9ybVxuICAvLyBEZW5vIHBsYXRmb3JtczpcbiAgLy8gLSBodHRwczovL2RvYy5kZW5vLmxhbmQvZGVuby9zdGFibGUvfi9EZW5vLmJ1aWxkXG4gIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL2Rlbm9sYW5kL2Rlbm8vaXNzdWVzLzE0Nzk5XG5cbiAgcGxhdGZvcm0gPSBwbGF0Zm9ybS50b0xvd2VyQ2FzZSgpO1xuXG4gIC8vIE5PVEU6IHRoaXMgaU9TIGNoZWNrIGlzIHVudGVzdGVkIGFuZCBtYXkgbm90IHdvcmtcbiAgLy8gTm9kZSBkb2VzIG5vdCB3b3JrIG5hdGl2ZWx5IG9uIElPUywgdGhlcmUgaXMgYSBmb3JrIGF0XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMtbW9iaWxlL25vZGVqcy1tb2JpbGVcbiAgLy8gaG93ZXZlciBpdCBpcyB1bmtub3duIGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcgaG93IHRvIGRldGVjdCBpZiBpdCBpcyBydW5uaW5nXG4gIGlmIChwbGF0Zm9ybS5pbmNsdWRlcygnaW9zJykpIHJldHVybiAnaU9TJztcbiAgaWYgKHBsYXRmb3JtID09PSAnYW5kcm9pZCcpIHJldHVybiAnQW5kcm9pZCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicpIHJldHVybiAnTWFjT1MnO1xuICBpZiAocGxhdGZvcm0gPT09ICd3aW4zMicpIHJldHVybiAnV2luZG93cyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2ZyZWVic2QnKSByZXR1cm4gJ0ZyZWVCU0QnO1xuICBpZiAocGxhdGZvcm0gPT09ICdvcGVuYnNkJykgcmV0dXJuICdPcGVuQlNEJztcbiAgaWYgKHBsYXRmb3JtID09PSAnbGludXgnKSByZXR1cm4gJ0xpbnV4JztcbiAgaWYgKHBsYXRmb3JtKSByZXR1cm4gYE90aGVyOiR7cGxhdGZvcm19YDtcbiAgcmV0dXJuICdVbmtub3duJztcbn07XG5cbmxldCBfcGxhdGZvcm1IZWFkZXJzOiBQbGF0Zm9ybVByb3BlcnRpZXM7XG5jb25zdCBnZXRQbGF0Zm9ybUhlYWRlcnMgPSAoKSA9PiB7XG4gIHJldHVybiAoX3BsYXRmb3JtSGVhZGVycyA/Pz0gZ2V0UGxhdGZvcm1Qcm9wZXJ0aWVzKCkpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNhZmVKU09OID0gKHRleHQ6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59O1xuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTk3MDk4NDZcbmNvbnN0IHN0YXJ0c1dpdGhTY2hlbWVSZWdleHAgPSBuZXcgUmVnRXhwKCdeKD86W2Etel0rOik/Ly8nLCAnaScpO1xuY29uc3QgaXNBYnNvbHV0ZVVSTCA9ICh1cmw6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gc3RhcnRzV2l0aFNjaGVtZVJlZ2V4cC50ZXN0KHVybCk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuY29uc3QgdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIgPSAobmFtZTogc3RyaW5nLCBuOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcihuKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgKTtcbiAgfVxuICBpZiAobiA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJgKTtcbiAgfVxuICByZXR1cm4gbjtcbn07XG5cbmV4cG9ydCBjb25zdCBjYXN0VG9FcnJvciA9IChlcnI6IGFueSk6IEVycm9yID0+IHtcbiAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gZXJyO1xuICByZXR1cm4gbmV3IEVycm9yKGVycik7XG59O1xuXG5leHBvcnQgY29uc3QgZW5zdXJlUHJlc2VudCA9IDxUPih2YWx1ZTogVCB8IG51bGwgfCB1bmRlZmluZWQpOiBUID0+IHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYSB2YWx1ZSB0byBiZSBnaXZlbiBidXQgcmVjZWl2ZWQgJHt2YWx1ZX0gaW5zdGVhZC5gKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBSZWFkIGFuIGVudmlyb25tZW50IHZhcmlhYmxlLlxuICpcbiAqIFdpbGwgcmV0dXJuIHVuZGVmaW5lZCBpZiB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgZG9lc24ndCBleGlzdCBvciBjYW5ub3QgYmUgYWNjZXNzZWQuXG4gKi9cbmV4cG9ydCBjb25zdCByZWFkRW52ID0gKGVudjogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBwcm9jZXNzLmVudj8uW2Vudl0gPz8gdW5kZWZpbmVkO1xuICB9XG4gIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gRGVuby5lbnY/LmdldD8uKGVudik7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApO1xuXG4gIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlRmxvYXQgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuXG4gIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlQm9vbGVhbiA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHJldHVybiB2YWx1ZTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnO1xuICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VJbnRlZ2VyKHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUZsb2F0ID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VGbG9hdCh2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VCb29sZWFuID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlQm9vbGVhbih2YWx1ZSk7XG59O1xuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzQ0OTEyODdcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iajogT2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICBpZiAoIW9iaikgcmV0dXJuIHRydWU7XG4gIGZvciAoY29uc3QgX2sgaW4gb2JqKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBodHRwczovL2VzbGludC5vcmcvZG9jcy9sYXRlc3QvcnVsZXMvbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iajogT2JqZWN0LCBrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnKGFjdGlvbjogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52WydERUJVRyddID09PSAndHJ1ZScpIHtcbiAgICBjb25zb2xlLmxvZyhgT3BlbkFJOkRFQlVHOiR7YWN0aW9ufWAsIC4uLmFyZ3MpO1xuICB9XG59XG5cbi8qKlxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcbiAqL1xuY29uc3QgdXVpZDQgPSAoKSA9PiB7XG4gIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIChjKSA9PiB7XG4gICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICBjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcbiAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzUnVubmluZ0luQnJvd3NlciA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhZGVyc1Byb3RvY29sIHtcbiAgZ2V0OiAoaGVhZGVyOiBzdHJpbmcpID0+IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG59XG5leHBvcnQgdHlwZSBIZWFkZXJzTGlrZSA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkPiB8IEhlYWRlcnNQcm90b2NvbDtcblxuZXhwb3J0IGNvbnN0IGlzSGVhZGVyc1Byb3RvY29sID0gKGhlYWRlcnM6IGFueSk6IGhlYWRlcnMgaXMgSGVhZGVyc1Byb3RvY29sID0+IHtcbiAgcmV0dXJuIHR5cGVvZiBoZWFkZXJzPy5nZXQgPT09ICdmdW5jdGlvbic7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0SGVhZGVyID0gKGhlYWRlcnM6IEhlYWRlcnNMaWtlLCBrZXk6IHN0cmluZyk6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoaXNIZWFkZXJzUHJvdG9jb2woaGVhZGVycykpIHJldHVybiBoZWFkZXJzLmdldChrZXkpIHx8IGhlYWRlcnMuZ2V0KGxvd2VyS2V5KTtcbiAgY29uc3QgdmFsdWUgPSBoZWFkZXJzW2tleV0gfHwgaGVhZGVyc1tsb3dlcktleV07XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIGlmICh2YWx1ZS5sZW5ndGggPD0gMSkgcmV0dXJuIHZhbHVlWzBdO1xuICAgIGNvbnNvbGUud2FybihgUmVjZWl2ZWQgJHt2YWx1ZS5sZW5ndGh9IGVudHJpZXMgZm9yIHRoZSAke2tleX0gaGVhZGVyLCB1c2luZyB0aGUgZmlyc3QgZW50cnkuYCk7XG4gICAgcmV0dXJuIHZhbHVlWzBdO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogRW5jb2RlcyBhIHN0cmluZyB0byBCYXNlNjQgZm9ybWF0LlxuICovXG5leHBvcnQgY29uc3QgdG9CYXNlNjQgPSAoc3RyOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKCFzdHIpIHJldHVybiAnJztcbiAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0cikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBidG9hKHN0cik7XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBnZW5lcmF0ZSBiNjQgc3RyaW5nOyBFeHBlY3RlZCBgQnVmZmVyYCBvciBgYnRvYWAgdG8gYmUgZGVmaW5lZCcpO1xufTtcbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgeyBBYnN0cmFjdFBhZ2UsIFJlc3BvbnNlLCBBUElDbGllbnQsIEZpbmFsUmVxdWVzdE9wdGlvbnMsIFBhZ2VJbmZvIH0gZnJvbSAnLi9jb3JlLmpzJztcblxuZXhwb3J0IGludGVyZmFjZSBQYWdlUmVzcG9uc2U8SXRlbT4ge1xuICBkYXRhOiBBcnJheTxJdGVtPjtcblxuICBvYmplY3Q6IHN0cmluZztcbn1cblxuLyoqXG4gKiBOb3RlOiBubyBwYWdpbmF0aW9uIGFjdHVhbGx5IG9jY3VycyB5ZXQsIHRoaXMgaXMgZm9yIGZvcndhcmRzLWNvbXBhdGliaWxpdHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBQYWdlPEl0ZW0+IGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+IGltcGxlbWVudHMgUGFnZVJlc3BvbnNlPEl0ZW0+IHtcbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgZGF0YTogQXJyYXk8SXRlbT47XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBBUElDbGllbnQsIHJlc3BvbnNlOiBSZXNwb25zZSwgYm9keTogUGFnZVJlc3BvbnNlPEl0ZW0+LCBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zKSB7XG4gICAgc3VwZXIoY2xpZW50LCByZXNwb25zZSwgYm9keSwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLm9iamVjdCA9IGJvZHkub2JqZWN0O1xuICAgIHRoaXMuZGF0YSA9IGJvZHkuZGF0YTtcbiAgfVxuXG4gIGdldFBhZ2luYXRlZEl0ZW1zKCk6IEl0ZW1bXSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxuXG4gIC8vIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgYG5leHRQYWdlSW5mbygpYCBpbnN0ZWFkXG4gIC8qKlxuICAgKiBUaGlzIHBhZ2UgcmVwcmVzZW50cyBhIHJlc3BvbnNlIHRoYXQgaXNuJ3QgYWN0dWFsbHkgcGFnaW5hdGVkIGF0IHRoZSBBUEkgbGV2ZWxcbiAgICogc28gdGhlcmUgd2lsbCBuZXZlciBiZSBhbnkgbmV4dCBwYWdlIHBhcmFtcy5cbiAgICovXG4gIG5leHRQYWdlUGFyYW1zKCk6IG51bGwge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbmV4dFBhZ2VJbmZvKCk6IG51bGwge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3Vyc29yUGFnZVJlc3BvbnNlPEl0ZW0+IHtcbiAgZGF0YTogQXJyYXk8SXRlbT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3Vyc29yUGFnZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBJZGVudGlmaWVyIGZvciB0aGUgbGFzdCBqb2IgZnJvbSB0aGUgcHJldmlvdXMgcGFnaW5hdGlvbiByZXF1ZXN0LlxuICAgKi9cbiAgYWZ0ZXI/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiBmaW5lLXR1bmluZyBqb2JzIHRvIHJldHJpZXZlLlxuICAgKi9cbiAgbGltaXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBDdXJzb3JQYWdlPEl0ZW0gZXh0ZW5kcyB7IGlkOiBzdHJpbmcgfT5cbiAgZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT5cbiAgaW1wbGVtZW50cyBDdXJzb3JQYWdlUmVzcG9uc2U8SXRlbT5cbntcbiAgZGF0YTogQXJyYXk8SXRlbT47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY2xpZW50OiBBUElDbGllbnQsXG4gICAgcmVzcG9uc2U6IFJlc3BvbnNlLFxuICAgIGJvZHk6IEN1cnNvclBhZ2VSZXNwb25zZTxJdGVtPixcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zLFxuICApIHtcbiAgICBzdXBlcihjbGllbnQsIHJlc3BvbnNlLCBib2R5LCBvcHRpb25zKTtcblxuICAgIHRoaXMuZGF0YSA9IGJvZHkuZGF0YTtcbiAgfVxuXG4gIGdldFBhZ2luYXRlZEl0ZW1zKCk6IEl0ZW1bXSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxuXG4gIC8vIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgYG5leHRQYWdlSW5mbygpYCBpbnN0ZWFkXG4gIG5leHRQYWdlUGFyYW1zKCk6IFBhcnRpYWw8Q3Vyc29yUGFnZVBhcmFtcz4gfCBudWxsIHtcbiAgICBjb25zdCBpbmZvID0gdGhpcy5uZXh0UGFnZUluZm8oKTtcbiAgICBpZiAoIWluZm8pIHJldHVybiBudWxsO1xuICAgIGlmICgncGFyYW1zJyBpbiBpbmZvKSByZXR1cm4gaW5mby5wYXJhbXM7XG4gICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmZyb21FbnRyaWVzKGluZm8udXJsLnNlYXJjaFBhcmFtcyk7XG4gICAgaWYgKCFPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIG5leHRQYWdlSW5mbygpOiBQYWdlSW5mbyB8IG51bGwge1xuICAgIGlmICghdGhpcy5kYXRhPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IG5leHQgPSB0aGlzLmRhdGFbdGhpcy5kYXRhLmxlbmd0aCAtIDFdPy5pZDtcbiAgICBpZiAoIW5leHQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7IHBhcmFtczogeyBhZnRlcjogbmV4dCB9IH07XG4gIH1cbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgdHlwZSB7IE9wZW5BSSB9IGZyb20gJy4vaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgQVBJUmVzb3VyY2Uge1xuICBwcm90ZWN0ZWQgY2xpZW50OiBPcGVuQUk7XG4gIGNvbnN0cnVjdG9yKGNsaWVudDogT3BlbkFJKSB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG5cbiAgICB0aGlzLmdldCA9IGNsaWVudC5nZXQuYmluZChjbGllbnQpO1xuICAgIHRoaXMucG9zdCA9IGNsaWVudC5wb3N0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnBhdGNoID0gY2xpZW50LnBhdGNoLmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnB1dCA9IGNsaWVudC5wdXQuYmluZChjbGllbnQpO1xuICAgIHRoaXMuZGVsZXRlID0gY2xpZW50LmRlbGV0ZS5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5nZXRBUElMaXN0ID0gY2xpZW50LmdldEFQSUxpc3QuYmluZChjbGllbnQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldDogT3BlbkFJWydnZXQnXTtcbiAgcHJvdGVjdGVkIHBvc3Q6IE9wZW5BSVsncG9zdCddO1xuICBwcm90ZWN0ZWQgcGF0Y2g6IE9wZW5BSVsncGF0Y2gnXTtcbiAgcHJvdGVjdGVkIHB1dDogT3BlbkFJWydwdXQnXTtcbiAgcHJvdGVjdGVkIGRlbGV0ZTogT3BlbkFJWydkZWxldGUnXTtcbiAgcHJvdGVjdGVkIGdldEFQSUxpc3Q6IE9wZW5BSVsnZ2V0QVBJTGlzdCddO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uLy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IHR5cGUgVXBsb2FkYWJsZSwgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29yZS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2NyaXB0aW9ucyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFRyYW5zY3JpYmVzIGF1ZGlvIGludG8gdGhlIGlucHV0IGxhbmd1YWdlLlxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IFRyYW5zY3JpcHRpb25DcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPFRyYW5zY3JpcHRpb24+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvYXVkaW8vdHJhbnNjcmlwdGlvbnMnLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMoeyBib2R5LCAuLi5vcHRpb25zIH0pKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zY3JpcHRpb24ge1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgYXVkaW8gZmlsZSBvYmplY3QgKG5vdCBmaWxlIG5hbWUpIHRvIHRyYW5zY3JpYmUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOlxuICAgKiBmbGFjLCBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCBvZ2csIHdhdiwgb3Igd2VibS5cbiAgICovXG4gIGZpbGU6IFVwbG9hZGFibGU7XG5cbiAgLyoqXG4gICAqIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgYHdoaXNwZXItMWAgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICovXG4gIG1vZGVsOiAoc3RyaW5nICYge30pIHwgJ3doaXNwZXItMSc7XG5cbiAgLyoqXG4gICAqIFRoZSBsYW5ndWFnZSBvZiB0aGUgaW5wdXQgYXVkaW8uIFN1cHBseWluZyB0aGUgaW5wdXQgbGFuZ3VhZ2UgaW5cbiAgICogW0lTTy02MzktMV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9JU09fNjM5LTFfY29kZXMpIGZvcm1hdCB3aWxsXG4gICAqIGltcHJvdmUgYWNjdXJhY3kgYW5kIGxhdGVuY3kuXG4gICAqL1xuICBsYW5ndWFnZT86IHN0cmluZztcblxuICAvKipcbiAgICogQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWwncyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvXG4gICAqIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgbWF0Y2ggdGhlXG4gICAqIGF1ZGlvIGxhbmd1YWdlLlxuICAgKi9cbiAgcHJvbXB0Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCxcbiAgICogdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAqL1xuICByZXNwb25zZV9mb3JtYXQ/OiAnanNvbicgfCAndGV4dCcgfCAnc3J0JyB8ICd2ZXJib3NlX2pzb24nIHwgJ3Z0dCc7XG5cbiAgLyoqXG4gICAqIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGVcbiAgICogb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmRcbiAgICogZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZVxuICAgKiBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvXG4gICAqIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgVHJhbnNjcmlwdGlvbnMge1xuICBleHBvcnQgaW1wb3J0IFRyYW5zY3JpcHRpb24gPSBBUEkuVHJhbnNjcmlwdGlvbjtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2NyaXB0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLlRyYW5zY3JpcHRpb25DcmVhdGVQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi8uLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgdHlwZSBVcGxvYWRhYmxlLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb3JlLmpzJztcblxuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9ucyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgYXVkaW8gaW50byBFbmdsaXNoLlxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IFRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxUcmFuc2xhdGlvbj4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9hdWRpby90cmFuc2xhdGlvbnMnLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMoeyBib2R5LCAuLi5vcHRpb25zIH0pKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zbGF0aW9uIHtcbiAgdGV4dDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBhdWRpbyBmaWxlIG9iamVjdCAobm90IGZpbGUgbmFtZSkgdHJhbnNsYXRlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogZmxhYyxcbiAgICogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgb2dnLCB3YXYsIG9yIHdlYm0uXG4gICAqL1xuICBmaWxlOiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5IGB3aGlzcGVyLTFgIGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAqL1xuICBtb2RlbDogKHN0cmluZyAmIHt9KSB8ICd3aGlzcGVyLTEnO1xuXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbCdzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW9cbiAgICogc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBiZSBpblxuICAgKiBFbmdsaXNoLlxuICAgKi9cbiAgcHJvbXB0Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCxcbiAgICogdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAqL1xuICByZXNwb25zZV9mb3JtYXQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGVcbiAgICogb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmRcbiAgICogZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZVxuICAgKiBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvXG4gICAqIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgVHJhbnNsYXRpb25zIHtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2xhdGlvbiA9IEFQSS5UcmFuc2xhdGlvbjtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5UcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uLy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCB7IFRyYW5zY3JpcHRpb25zIH0gZnJvbSAnLi90cmFuc2NyaXB0aW9ucy5qcyc7XG5pbXBvcnQgeyBUcmFuc2xhdGlvbnMgfSBmcm9tICcuL3RyYW5zbGF0aW9ucy5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBBdWRpbyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgdHJhbnNjcmlwdGlvbnM6IFRyYW5zY3JpcHRpb25zID0gbmV3IFRyYW5zY3JpcHRpb25zKHRoaXMuY2xpZW50KTtcbiAgdHJhbnNsYXRpb25zOiBUcmFuc2xhdGlvbnMgPSBuZXcgVHJhbnNsYXRpb25zKHRoaXMuY2xpZW50KTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBBdWRpbyB7XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNjcmlwdGlvbnMgPSBBUEkuVHJhbnNjcmlwdGlvbnM7XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNjcmlwdGlvbiA9IEFQSS5UcmFuc2NyaXB0aW9uO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zY3JpcHRpb25DcmVhdGVQYXJhbXMgPSBBUEkuVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcztcblxuICBleHBvcnQgaW1wb3J0IFRyYW5zbGF0aW9ucyA9IEFQSS5UcmFuc2xhdGlvbnM7XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNsYXRpb24gPSBBUEkuVHJhbnNsYXRpb247XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNsYXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuVHJhbnNsYXRpb25DcmVhdGVQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi8uLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tICcuLi8uLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQ29tcGxldGlvbnNfIGZyb20gJy4uL2NvbXBsZXRpb25zLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gJy4uLy4uL3N0cmVhbWluZy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDb21wbGV0aW9ucyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBtb2RlbCByZXNwb25zZSBmb3IgdGhlIGdpdmVuIGNoYXQgY29udmVyc2F0aW9uLlxuICAgKi9cbiAgY3JlYXRlKFxuICAgIGJvZHk6IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPENoYXRDb21wbGV0aW9uPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxDaGF0Q29tcGxldGlvbkNodW5rPj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPENoYXRDb21wbGV0aW9uQ2h1bms+IHwgQ2hhdENvbXBsZXRpb24+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8Q2hhdENvbXBsZXRpb24+IHwgQVBJUHJvbWlzZTxTdHJlYW08Q2hhdENvbXBsZXRpb25DaHVuaz4+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvY2hhdC9jb21wbGV0aW9ucycsIHsgYm9keSwgLi4ub3B0aW9ucywgc3RyZWFtOiBib2R5LnN0cmVhbSA/PyBmYWxzZSB9KSBhc1xuICAgICAgfCBBUElQcm9taXNlPENoYXRDb21wbGV0aW9uPlxuICAgICAgfCBBUElQcm9taXNlPFN0cmVhbTxDaGF0Q29tcGxldGlvbkNodW5rPj47XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hhdCBjb21wbGV0aW9uIHJlc3BvbnNlIHJldHVybmVkIGJ5IG1vZGVsLCBiYXNlZCBvbiB0aGUgcHJvdmlkZWRcbiAqIGlucHV0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjaGF0IGNvbXBsZXRpb24uXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgY2hhdCBjb21wbGV0aW9uIGNob2ljZXMuIENhbiBiZSBtb3JlIHRoYW4gb25lIGlmIGBuYCBpcyBncmVhdGVyXG4gICAqIHRoYW4gMS5cbiAgICovXG4gIGNob2ljZXM6IEFycmF5PENoYXRDb21wbGV0aW9uLkNob2ljZT47XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgb2Ygd2hlbiB0aGUgY2hhdCBjb21wbGV0aW9uIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdXNlZCBmb3IgdGhlIGNoYXQgY29tcGxldGlvbi5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIGBjaGF0LmNvbXBsZXRpb25gLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFVzYWdlIHN0YXRpc3RpY3MgZm9yIHRoZSBjb21wbGV0aW9uIHJlcXVlc3QuXG4gICAqL1xuICB1c2FnZT86IENvbXBsZXRpb25zXy5Db21wbGV0aW9uVXNhZ2U7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2hhdENvbXBsZXRpb24ge1xuICBleHBvcnQgaW50ZXJmYWNlIENob2ljZSB7XG4gICAgLyoqXG4gICAgICogVGhlIHJlYXNvbiB0aGUgbW9kZWwgc3RvcHBlZCBnZW5lcmF0aW5nIHRva2Vucy4gVGhpcyB3aWxsIGJlIGBzdG9wYCBpZiB0aGUgbW9kZWxcbiAgICAgKiBoaXQgYSBuYXR1cmFsIHN0b3AgcG9pbnQgb3IgYSBwcm92aWRlZCBzdG9wIHNlcXVlbmNlLCBgbGVuZ3RoYCBpZiB0aGUgbWF4aW11bVxuICAgICAqIG51bWJlciBvZiB0b2tlbnMgc3BlY2lmaWVkIGluIHRoZSByZXF1ZXN0IHdhcyByZWFjaGVkLCBvciBgZnVuY3Rpb25fY2FsbGAgaWYgdGhlXG4gICAgICogbW9kZWwgY2FsbGVkIGEgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZmluaXNoX3JlYXNvbjogJ3N0b3AnIHwgJ2xlbmd0aCcgfCAnZnVuY3Rpb25fY2FsbCc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGNob2ljZSBpbiB0aGUgbGlzdCBvZiBjaG9pY2VzLlxuICAgICAqL1xuICAgIGluZGV4OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBBIGNoYXQgY29tcGxldGlvbiBtZXNzYWdlIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgbWVzc2FnZTogQ2hhdENvbXBsZXRpb25NZXNzYWdlO1xuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIHN0cmVhbWVkIGNodW5rIG9mIGEgY2hhdCBjb21wbGV0aW9uIHJlc3BvbnNlIHJldHVybmVkIGJ5IG1vZGVsLFxuICogYmFzZWQgb24gdGhlIHByb3ZpZGVkIGlucHV0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uQ2h1bmsge1xuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNoYXQgY29tcGxldGlvbiBjaHVuay5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiBjaGF0IGNvbXBsZXRpb24gY2hvaWNlcy4gQ2FuIGJlIG1vcmUgdGhhbiBvbmUgaWYgYG5gIGlzIGdyZWF0ZXJcbiAgICogdGhhbiAxLlxuICAgKi9cbiAgY2hvaWNlczogQXJyYXk8Q2hhdENvbXBsZXRpb25DaHVuay5DaG9pY2U+O1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIG9mIHdoZW4gdGhlIGNoYXQgY29tcGxldGlvbiBjaHVuayB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRvIGdlbmVyYXRlIHRoZSBjb21wbGV0aW9uLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgYGNoYXQuY29tcGxldGlvbi5jaHVua2AuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0Q29tcGxldGlvbkNodW5rIHtcbiAgZXhwb3J0IGludGVyZmFjZSBDaG9pY2Uge1xuICAgIC8qKlxuICAgICAqIEEgY2hhdCBjb21wbGV0aW9uIGRlbHRhIGdlbmVyYXRlZCBieSBzdHJlYW1lZCBtb2RlbCByZXNwb25zZXMuXG4gICAgICovXG4gICAgZGVsdGE6IENob2ljZS5EZWx0YTtcblxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIG1vZGVsIHN0b3BwZWQgZ2VuZXJhdGluZyB0b2tlbnMuIFRoaXMgd2lsbCBiZSBgc3RvcGAgaWYgdGhlIG1vZGVsXG4gICAgICogaGl0IGEgbmF0dXJhbCBzdG9wIHBvaW50IG9yIGEgcHJvdmlkZWQgc3RvcCBzZXF1ZW5jZSwgYGxlbmd0aGAgaWYgdGhlIG1heGltdW1cbiAgICAgKiBudW1iZXIgb2YgdG9rZW5zIHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdCB3YXMgcmVhY2hlZCwgb3IgYGZ1bmN0aW9uX2NhbGxgIGlmIHRoZVxuICAgICAqIG1vZGVsIGNhbGxlZCBhIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZpbmlzaF9yZWFzb246ICdzdG9wJyB8ICdsZW5ndGgnIHwgJ2Z1bmN0aW9uX2NhbGwnIHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgY2hvaWNlIGluIHRoZSBsaXN0IG9mIGNob2ljZXMuXG4gICAgICovXG4gICAgaW5kZXg6IG51bWJlcjtcbiAgfVxuXG4gIGV4cG9ydCBuYW1lc3BhY2UgQ2hvaWNlIHtcbiAgICAvKipcbiAgICAgKiBBIGNoYXQgY29tcGxldGlvbiBkZWx0YSBnZW5lcmF0ZWQgYnkgc3RyZWFtZWQgbW9kZWwgcmVzcG9uc2VzLlxuICAgICAqL1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgRGVsdGEge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgY29udGVudHMgb2YgdGhlIGNodW5rIG1lc3NhZ2UuXG4gICAgICAgKi9cbiAgICAgIGNvbnRlbnQ/OiBzdHJpbmcgfCBudWxsO1xuXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBuYW1lIGFuZCBhcmd1bWVudHMgb2YgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQsIGFzIGdlbmVyYXRlZCBieSB0aGVcbiAgICAgICAqIG1vZGVsLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbl9jYWxsPzogRGVsdGEuRnVuY3Rpb25DYWxsO1xuXG4gICAgICAvKipcbiAgICAgICAqIFRoZSByb2xlIG9mIHRoZSBhdXRob3Igb2YgdGhpcyBtZXNzYWdlLlxuICAgICAgICovXG4gICAgICByb2xlPzogQ2hhdENvbXBsZXRpb25Sb2xlO1xuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgRGVsdGEge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAgICAgKiBtb2RlbC5cbiAgICAgICAqL1xuICAgICAgZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbkNhbGwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFyZ3VtZW50cyB0byBjYWxsIHRoZSBmdW5jdGlvbiB3aXRoLCBhcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGluIEpTT05cbiAgICAgICAgICogZm9ybWF0LiBOb3RlIHRoYXQgdGhlIG1vZGVsIGRvZXMgbm90IGFsd2F5cyBnZW5lcmF0ZSB2YWxpZCBKU09OLCBhbmQgbWF5XG4gICAgICAgICAqIGhhbGx1Y2luYXRlIHBhcmFtZXRlcnMgbm90IGRlZmluZWQgYnkgeW91ciBmdW5jdGlvbiBzY2hlbWEuIFZhbGlkYXRlIHRoZVxuICAgICAgICAgKiBhcmd1bWVudHMgaW4geW91ciBjb2RlIGJlZm9yZSBjYWxsaW5nIHlvdXIgZnVuY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICBhcmd1bWVudHM/OiBzdHJpbmc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZT86IHN0cmluZztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBIGNoYXQgY29tcGxldGlvbiBtZXNzYWdlIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbXBsZXRpb25NZXNzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZS5cbiAgICovXG4gIGNvbnRlbnQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSByb2xlIG9mIHRoZSBhdXRob3Igb2YgdGhpcyBtZXNzYWdlLlxuICAgKi9cbiAgcm9sZTogQ2hhdENvbXBsZXRpb25Sb2xlO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAqIG1vZGVsLlxuICAgKi9cbiAgZnVuY3Rpb25fY2FsbD86IENoYXRDb21wbGV0aW9uTWVzc2FnZS5GdW5jdGlvbkNhbGw7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2hhdENvbXBsZXRpb25NZXNzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIGFuZCBhcmd1bWVudHMgb2YgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQsIGFzIGdlbmVyYXRlZCBieSB0aGVcbiAgICogbW9kZWwuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uQ2FsbCB7XG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyB0byBjYWxsIHRoZSBmdW5jdGlvbiB3aXRoLCBhcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGluIEpTT05cbiAgICAgKiBmb3JtYXQuIE5vdGUgdGhhdCB0aGUgbW9kZWwgZG9lcyBub3QgYWx3YXlzIGdlbmVyYXRlIHZhbGlkIEpTT04sIGFuZCBtYXlcbiAgICAgKiBoYWxsdWNpbmF0ZSBwYXJhbWV0ZXJzIG5vdCBkZWZpbmVkIGJ5IHlvdXIgZnVuY3Rpb24gc2NoZW1hLiBWYWxpZGF0ZSB0aGVcbiAgICAgKiBhcmd1bWVudHMgaW4geW91ciBjb2RlIGJlZm9yZSBjYWxsaW5nIHlvdXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgYXJndW1lbnRzOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gY2FsbC5cbiAgICAgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSB7XG4gIC8qKlxuICAgKiBUaGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UuIGBjb250ZW50YCBpcyByZXF1aXJlZCBmb3IgYWxsIG1lc3NhZ2VzLCBhbmQgbWF5IGJlXG4gICAqIG51bGwgZm9yIGFzc2lzdGFudCBtZXNzYWdlcyB3aXRoIGZ1bmN0aW9uIGNhbGxzLlxuICAgKi9cbiAgY29udGVudDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHJvbGUgb2YgdGhlIG1lc3NhZ2VzIGF1dGhvci4gT25lIG9mIGBzeXN0ZW1gLCBgdXNlcmAsIGBhc3Npc3RhbnRgLCBvclxuICAgKiBgZnVuY3Rpb25gLlxuICAgKi9cbiAgcm9sZTogJ3N5c3RlbScgfCAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdmdW5jdGlvbic7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIGFuZCBhcmd1bWVudHMgb2YgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQsIGFzIGdlbmVyYXRlZCBieSB0aGVcbiAgICogbW9kZWwuXG4gICAqL1xuICBmdW5jdGlvbl9jYWxsPzogQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0uRnVuY3Rpb25DYWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgYXV0aG9yIG9mIHRoaXMgbWVzc2FnZS4gYG5hbWVgIGlzIHJlcXVpcmVkIGlmIHJvbGUgaXNcbiAgICogYGZ1bmN0aW9uYCwgYW5kIGl0IHNob3VsZCBiZSB0aGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gd2hvc2UgcmVzcG9uc2UgaXMgaW4gdGhlXG4gICAqIGBjb250ZW50YC4gTWF5IGNvbnRhaW4gYS16LCBBLVosIDAtOSwgYW5kIHVuZGVyc2NvcmVzLCB3aXRoIGEgbWF4aW11bSBsZW5ndGggb2ZcbiAgICogNjQgY2hhcmFjdGVycy5cbiAgICovXG4gIG5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0ge1xuICAvKipcbiAgICogVGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZVxuICAgKiBtb2RlbC5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgRnVuY3Rpb25DYWxsIHtcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIHRvIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGgsIGFzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgaW4gSlNPTlxuICAgICAqIGZvcm1hdC4gTm90ZSB0aGF0IHRoZSBtb2RlbCBkb2VzIG5vdCBhbHdheXMgZ2VuZXJhdGUgdmFsaWQgSlNPTiwgYW5kIG1heVxuICAgICAqIGhhbGx1Y2luYXRlIHBhcmFtZXRlcnMgbm90IGRlZmluZWQgYnkgeW91ciBmdW5jdGlvbiBzY2hlbWEuIFZhbGlkYXRlIHRoZVxuICAgICAqIGFyZ3VtZW50cyBpbiB5b3VyIGNvZGUgYmVmb3JlIGNhbGxpbmcgeW91ciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICAgICAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgfVxufVxuXG4vKipcbiAqIFRoZSByb2xlIG9mIHRoZSBhdXRob3Igb2YgdGhpcyBtZXNzYWdlLlxuICovXG5leHBvcnQgdHlwZSBDaGF0Q29tcGxldGlvblJvbGUgPSAnc3lzdGVtJyB8ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ2Z1bmN0aW9uJztcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkXG4gKi9cbmV4cG9ydCB0eXBlIENyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdE1lc3NhZ2UgPSBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbTtcblxuZXhwb3J0IHR5cGUgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPVxuICB8IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nXG4gIHwgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIEEgbGlzdCBvZiBtZXNzYWdlcyBjb21wcmlzaW5nIHRoZSBjb252ZXJzYXRpb24gc28gZmFyLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19mb3JtYXRfaW5wdXRzX3RvX0NoYXRHUFRfbW9kZWxzLmlweW5iKS5cbiAgICovXG4gIG1lc3NhZ2VzOiBBcnJheTxDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbT47XG5cbiAgLyoqXG4gICAqIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIFNlZSB0aGVcbiAgICogW21vZGVsIGVuZHBvaW50IGNvbXBhdGliaWxpdHldKC9kb2NzL21vZGVscy9tb2RlbC1lbmRwb2ludC1jb21wYXRpYmlsaXR5KSB0YWJsZVxuICAgKiBmb3IgZGV0YWlscyBvbiB3aGljaCBtb2RlbHMgd29yayB3aXRoIHRoZSBDaGF0IEFQSS5cbiAgICovXG4gIG1vZGVsOlxuICAgIHwgKHN0cmluZyAmIHt9KVxuICAgIHwgJ2dwdC00J1xuICAgIHwgJ2dwdC00LTAzMTQnXG4gICAgfCAnZ3B0LTQtMDYxMydcbiAgICB8ICdncHQtNC0zMmsnXG4gICAgfCAnZ3B0LTQtMzJrLTAzMTQnXG4gICAgfCAnZ3B0LTQtMzJrLTA2MTMnXG4gICAgfCAnZ3B0LTMuNS10dXJibydcbiAgICB8ICdncHQtMy41LXR1cmJvLTE2aydcbiAgICB8ICdncHQtMy41LXR1cmJvLTAzMDEnXG4gICAgfCAnZ3B0LTMuNS10dXJiby0wNjEzJ1xuICAgIHwgJ2dwdC0zLjUtdHVyYm8tMTZrLTA2MTMnO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgYmV0d2VlbiAtMi4wIGFuZCAyLjAuIFBvc2l0aXZlIHZhbHVlcyBwZW5hbGl6ZSBuZXcgdG9rZW5zIGJhc2VkIG9uIHRoZWlyXG4gICAqIGV4aXN0aW5nIGZyZXF1ZW5jeSBpbiB0aGUgdGV4dCBzbyBmYXIsIGRlY3JlYXNpbmcgdGhlIG1vZGVsJ3MgbGlrZWxpaG9vZCB0b1xuICAgKiByZXBlYXQgdGhlIHNhbWUgbGluZSB2ZXJiYXRpbS5cbiAgICpcbiAgICogW1NlZSBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGZyZXF1ZW5jeSBhbmQgcHJlc2VuY2UgcGVuYWx0aWVzLl0oL2RvY3MvZ3VpZGVzL2dwdC9wYXJhbWV0ZXItZGV0YWlscylcbiAgICovXG4gIGZyZXF1ZW5jeV9wZW5hbHR5PzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQ29udHJvbHMgaG93IHRoZSBtb2RlbCByZXNwb25kcyB0byBmdW5jdGlvbiBjYWxscy4gXCJub25lXCIgbWVhbnMgdGhlIG1vZGVsIGRvZXNcbiAgICogbm90IGNhbGwgYSBmdW5jdGlvbiwgYW5kIHJlc3BvbmRzIHRvIHRoZSBlbmQtdXNlci4gXCJhdXRvXCIgbWVhbnMgdGhlIG1vZGVsIGNhblxuICAgKiBwaWNrIGJldHdlZW4gYW4gZW5kLXVzZXIgb3IgY2FsbGluZyBhIGZ1bmN0aW9uLiBTcGVjaWZ5aW5nIGEgcGFydGljdWxhciBmdW5jdGlvblxuICAgKiB2aWEgYHtcIm5hbWVcIjogXCJteV9mdW5jdGlvblwifWAgZm9yY2VzIHRoZSBtb2RlbCB0byBjYWxsIHRoYXQgZnVuY3Rpb24uIFwibm9uZVwiIGlzXG4gICAqIHRoZSBkZWZhdWx0IHdoZW4gbm8gZnVuY3Rpb25zIGFyZSBwcmVzZW50LiBcImF1dG9cIiBpcyB0aGUgZGVmYXVsdCBpZiBmdW5jdGlvbnNcbiAgICogYXJlIHByZXNlbnQuXG4gICAqL1xuICBmdW5jdGlvbl9jYWxsPzogJ25vbmUnIHwgJ2F1dG8nIHwgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMuRnVuY3Rpb25DYWxsT3B0aW9uO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgZnVuY3Rpb25zIHRoZSBtb2RlbCBtYXkgZ2VuZXJhdGUgSlNPTiBpbnB1dHMgZm9yLlxuICAgKi9cbiAgZnVuY3Rpb25zPzogQXJyYXk8Q2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMuRnVuY3Rpb24+O1xuXG4gIC8qKlxuICAgKiBNb2RpZnkgdGhlIGxpa2VsaWhvb2Qgb2Ygc3BlY2lmaWVkIHRva2VucyBhcHBlYXJpbmcgaW4gdGhlIGNvbXBsZXRpb24uXG4gICAqXG4gICAqIEFjY2VwdHMgYSBqc29uIG9iamVjdCB0aGF0IG1hcHMgdG9rZW5zIChzcGVjaWZpZWQgYnkgdGhlaXIgdG9rZW4gSUQgaW4gdGhlXG4gICAqIHRva2VuaXplcikgdG8gYW4gYXNzb2NpYXRlZCBiaWFzIHZhbHVlIGZyb20gLTEwMCB0byAxMDAuIE1hdGhlbWF0aWNhbGx5LCB0aGVcbiAgICogYmlhcyBpcyBhZGRlZCB0byB0aGUgbG9naXRzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgcHJpb3IgdG8gc2FtcGxpbmcuIFRoZSBleGFjdFxuICAgKiBlZmZlY3Qgd2lsbCB2YXJ5IHBlciBtb2RlbCwgYnV0IHZhbHVlcyBiZXR3ZWVuIC0xIGFuZCAxIHNob3VsZCBkZWNyZWFzZSBvclxuICAgKiBpbmNyZWFzZSBsaWtlbGlob29kIG9mIHNlbGVjdGlvbjsgdmFsdWVzIGxpa2UgLTEwMCBvciAxMDAgc2hvdWxkIHJlc3VsdCBpbiBhIGJhblxuICAgKiBvciBleGNsdXNpdmUgc2VsZWN0aW9uIG9mIHRoZSByZWxldmFudCB0b2tlbi5cbiAgICovXG4gIGxvZ2l0X2JpYXM/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIFt0b2tlbnNdKC90b2tlbml6ZXIpIHRvIGdlbmVyYXRlIGluIHRoZSBjaGF0IGNvbXBsZXRpb24uXG4gICAqXG4gICAqIFRoZSB0b3RhbCBsZW5ndGggb2YgaW5wdXQgdG9rZW5zIGFuZCBnZW5lcmF0ZWQgdG9rZW5zIGlzIGxpbWl0ZWQgYnkgdGhlIG1vZGVsJ3NcbiAgICogY29udGV4dCBsZW5ndGguXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX2NvdW50X3Rva2Vuc193aXRoX3Rpa3Rva2VuLmlweW5iKVxuICAgKiBmb3IgY291bnRpbmcgdG9rZW5zLlxuICAgKi9cbiAgbWF4X3Rva2Vucz86IG51bWJlcjtcblxuICAvKipcbiAgICogSG93IG1hbnkgY2hhdCBjb21wbGV0aW9uIGNob2ljZXMgdG8gZ2VuZXJhdGUgZm9yIGVhY2ggaW5wdXQgbWVzc2FnZS5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgYmV0d2VlbiAtMi4wIGFuZCAyLjAuIFBvc2l0aXZlIHZhbHVlcyBwZW5hbGl6ZSBuZXcgdG9rZW5zIGJhc2VkIG9uXG4gICAqIHdoZXRoZXIgdGhleSBhcHBlYXIgaW4gdGhlIHRleHQgc28gZmFyLCBpbmNyZWFzaW5nIHRoZSBtb2RlbCdzIGxpa2VsaWhvb2QgdG9cbiAgICogdGFsayBhYm91dCBuZXcgdG9waWNzLlxuICAgKlxuICAgKiBbU2VlIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZnJlcXVlbmN5IGFuZCBwcmVzZW5jZSBwZW5hbHRpZXMuXSgvZG9jcy9ndWlkZXMvZ3B0L3BhcmFtZXRlci1kZXRhaWxzKVxuICAgKi9cbiAgcHJlc2VuY2VfcGVuYWx0eT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFVwIHRvIDQgc2VxdWVuY2VzIHdoZXJlIHRoZSBBUEkgd2lsbCBzdG9wIGdlbmVyYXRpbmcgZnVydGhlciB0b2tlbnMuXG4gICAqL1xuICBzdG9wPzogc3RyaW5nIHwgbnVsbCB8IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIElmIHNldCwgcGFydGlhbCBtZXNzYWdlIGRlbHRhcyB3aWxsIGJlIHNlbnQsIGxpa2UgaW4gQ2hhdEdQVC4gVG9rZW5zIHdpbGwgYmVcbiAgICogc2VudCBhcyBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLCB3aXRoIHRoZSBzdHJlYW0gdGVybWluYXRlZCBieSBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2UuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX3N0cmVhbV9jb21wbGV0aW9ucy5pcHluYikuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuIHwgbnVsbDtcblxuICAvKipcbiAgICogV2hhdCBzYW1wbGluZyB0ZW1wZXJhdHVyZSB0byB1c2UsIGJldHdlZW4gMCBhbmQgMi4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsXG4gICAqIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlXG4gICAqIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuXG4gICAqXG4gICAqIFdlIGdlbmVyYWxseSByZWNvbW1lbmQgYWx0ZXJpbmcgdGhpcyBvciBgdG9wX3BgIGJ1dCBub3QgYm90aC5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQW4gYWx0ZXJuYXRpdmUgdG8gc2FtcGxpbmcgd2l0aCB0ZW1wZXJhdHVyZSwgY2FsbGVkIG51Y2xldXMgc2FtcGxpbmcsIHdoZXJlIHRoZVxuICAgKiBtb2RlbCBjb25zaWRlcnMgdGhlIHJlc3VsdHMgb2YgdGhlIHRva2VucyB3aXRoIHRvcF9wIHByb2JhYmlsaXR5IG1hc3MuIFNvIDAuMVxuICAgKiBtZWFucyBvbmx5IHRoZSB0b2tlbnMgY29tcHJpc2luZyB0aGUgdG9wIDEwJSBwcm9iYWJpbGl0eSBtYXNzIGFyZSBjb25zaWRlcmVkLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRlbXBlcmF0dXJlYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0b3BfcD86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yXG4gICAqIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAqL1xuICB1c2VyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbkNhbGxPcHRpb24ge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICAgICAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgRnVuY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQuIE11c3QgYmUgYS16LCBBLVosIDAtOSwgb3IgY29udGFpblxuICAgICAqIHVuZGVyc2NvcmVzIGFuZCBkYXNoZXMsIHdpdGggYSBtYXhpbXVtIGxlbmd0aCBvZiA2NC5cbiAgICAgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcGFyYW1ldGVycyB0aGUgZnVuY3Rpb25zIGFjY2VwdHMsIGRlc2NyaWJlZCBhcyBhIEpTT04gU2NoZW1hIG9iamVjdC4gU2VlIHRoZVxuICAgICAqIFtndWlkZV0oL2RvY3MvZ3VpZGVzL2dwdC9mdW5jdGlvbi1jYWxsaW5nKSBmb3IgZXhhbXBsZXMsIGFuZCB0aGVcbiAgICAgKiBbSlNPTiBTY2hlbWEgcmVmZXJlbmNlXShodHRwczovL2pzb24tc2NoZW1hLm9yZy91bmRlcnN0YW5kaW5nLWpzb24tc2NoZW1hLykgZm9yXG4gICAgICogZG9jdW1lbnRhdGlvbiBhYm91dCB0aGUgZm9ybWF0LlxuICAgICAqXG4gICAgICogVG8gZGVzY3JpYmUgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgbm8gcGFyYW1ldGVycywgcHJvdmlkZSB0aGUgdmFsdWVcbiAgICAgKiBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjoge319YC5cbiAgICAgKi9cbiAgICBwYXJhbWV0ZXJzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuICAgIC8qKlxuICAgICAqIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgZnVuY3Rpb24gZG9lcywgdXNlZCBieSB0aGUgbW9kZWwgdG8gY2hvb3NlIHdoZW4gYW5kXG4gICAgICogaG93IHRvIGNhbGwgdGhlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICB9XG5cbiAgZXhwb3J0IHR5cGUgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcztcblxuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBJZiBzZXQsIHBhcnRpYWwgbWVzc2FnZSBkZWx0YXMgd2lsbCBiZSBzZW50LCBsaWtlIGluIENoYXRHUFQuIFRva2VucyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2UgfCBudWxsO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBleHRlbmRzIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBJZiBzZXQsIHBhcnRpYWwgbWVzc2FnZSBkZWx0YXMgd2lsbCBiZSBzZW50LCBsaWtlIGluIENoYXRHUFQuIFRva2VucyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IG5hbWVzcGFjZSBDb21wbGV0aW9ucyB7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb24gPSBBUEkuQ2hhdENvbXBsZXRpb247XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DaHVuayA9IEFQSS5DaGF0Q29tcGxldGlvbkNodW5rO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uTWVzc2FnZSA9IEFQSS5DaGF0Q29tcGxldGlvbk1lc3NhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0gPSBBUEkuQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW07XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25Sb2xlID0gQVBJLkNoYXRDb21wbGV0aW9uUm9sZTtcbiAgZXhwb3J0IGltcG9ydCBDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlID0gQVBJLkNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdE1lc3NhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBDb21wbGV0aW9ucyB9IGZyb20gJy4vY29tcGxldGlvbnMuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdCBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgY29tcGxldGlvbnM6IENvbXBsZXRpb25zID0gbmV3IENvbXBsZXRpb25zKHRoaXMuY2xpZW50KTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0IHtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9ucyA9IEFQSS5Db21wbGV0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbiA9IEFQSS5DaGF0Q29tcGxldGlvbjtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNodW5rID0gQVBJLkNoYXRDb21wbGV0aW9uQ2h1bms7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25NZXNzYWdlID0gQVBJLkNoYXRDb21wbGV0aW9uTWVzc2FnZTtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSA9IEFQSS5DaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbTtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvblJvbGUgPSBBUEkuQ2hhdENvbXBsZXRpb25Sb2xlO1xuICBleHBvcnQgaW1wb3J0IENyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdE1lc3NhZ2UgPSBBUEkuQ3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZTtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUHJvbWlzZSB9IGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tICcuLi9zdHJlYW1pbmcuanMnO1xuXG5leHBvcnQgY2xhc3MgQ29tcGxldGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIHByb3ZpZGVkIHByb21wdCBhbmQgcGFyYW1ldGVycy5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IEFQSVByb21pc2U8Q29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4gfCBDb21wbGV0aW9uPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8Q29tcGxldGlvbj4gfCBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9jb21wbGV0aW9ucycsIHsgYm9keSwgLi4ub3B0aW9ucywgc3RyZWFtOiBib2R5LnN0cmVhbSA/PyBmYWxzZSB9KSBhc1xuICAgICAgfCBBUElQcm9taXNlPENvbXBsZXRpb24+XG4gICAgICB8IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+PjtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjb21wbGV0aW9uIHJlc3BvbnNlIGZyb20gdGhlIEFQSS4gTm90ZTogYm90aCB0aGUgc3RyZWFtZWQgYW5kXG4gKiBub24tc3RyZWFtZWQgcmVzcG9uc2Ugb2JqZWN0cyBzaGFyZSB0aGUgc2FtZSBzaGFwZSAodW5saWtlIHRoZSBjaGF0IGVuZHBvaW50KS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb21wbGV0aW9uLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgY29tcGxldGlvbiBjaG9pY2VzIHRoZSBtb2RlbCBnZW5lcmF0ZWQgZm9yIHRoZSBpbnB1dCBwcm9tcHQuXG4gICAqL1xuICBjaG9pY2VzOiBBcnJheTxDb21wbGV0aW9uQ2hvaWNlPjtcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBvZiB3aGVuIHRoZSBjb21wbGV0aW9uIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdXNlZCBmb3IgY29tcGxldGlvbi5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwidGV4dF9jb21wbGV0aW9uXCJcbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVc2FnZSBzdGF0aXN0aWNzIGZvciB0aGUgY29tcGxldGlvbiByZXF1ZXN0LlxuICAgKi9cbiAgdXNhZ2U/OiBDb21wbGV0aW9uVXNhZ2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNob2ljZSB7XG4gIC8qKlxuICAgKiBUaGUgcmVhc29uIHRoZSBtb2RlbCBzdG9wcGVkIGdlbmVyYXRpbmcgdG9rZW5zLiBUaGlzIHdpbGwgYmUgYHN0b3BgIGlmIHRoZSBtb2RlbFxuICAgKiBoaXQgYSBuYXR1cmFsIHN0b3AgcG9pbnQgb3IgYSBwcm92aWRlZCBzdG9wIHNlcXVlbmNlLCBvciBgbGVuZ3RoYCBpZiB0aGUgbWF4aW11bVxuICAgKiBudW1iZXIgb2YgdG9rZW5zIHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdCB3YXMgcmVhY2hlZC5cbiAgICovXG4gIGZpbmlzaF9yZWFzb246ICdzdG9wJyB8ICdsZW5ndGgnO1xuXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgbG9ncHJvYnM6IENvbXBsZXRpb25DaG9pY2UuTG9ncHJvYnMgfCBudWxsO1xuXG4gIHRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb21wbGV0aW9uQ2hvaWNlIHtcbiAgZXhwb3J0IGludGVyZmFjZSBMb2dwcm9icyB7XG4gICAgdGV4dF9vZmZzZXQ/OiBBcnJheTxudW1iZXI+O1xuXG4gICAgdG9rZW5fbG9ncHJvYnM/OiBBcnJheTxudW1iZXI+O1xuXG4gICAgdG9rZW5zPzogQXJyYXk8c3RyaW5nPjtcblxuICAgIHRvcF9sb2dwcm9icz86IEFycmF5PFJlY29yZDxzdHJpbmcsIG51bWJlcj4+O1xuICB9XG59XG5cbi8qKlxuICogVXNhZ2Ugc3RhdGlzdGljcyBmb3IgdGhlIGNvbXBsZXRpb24gcmVxdWVzdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uVXNhZ2Uge1xuICAvKipcbiAgICogTnVtYmVyIG9mIHRva2VucyBpbiB0aGUgZ2VuZXJhdGVkIGNvbXBsZXRpb24uXG4gICAqL1xuICBjb21wbGV0aW9uX3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdG9rZW5zIGluIHRoZSBwcm9tcHQuXG4gICAqL1xuICBwcm9tcHRfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRvdGFsIG51bWJlciBvZiB0b2tlbnMgdXNlZCBpbiB0aGUgcmVxdWVzdCAocHJvbXB0ICsgY29tcGxldGlvbikuXG4gICAqL1xuICB0b3RhbF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgfCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIFlvdSBjYW4gdXNlIHRoZVxuICAgKiBbTGlzdCBtb2RlbHNdKC9kb2NzL2FwaS1yZWZlcmVuY2UvbW9kZWxzL2xpc3QpIEFQSSB0byBzZWUgYWxsIG9mIHlvdXIgYXZhaWxhYmxlXG4gICAqIG1vZGVscywgb3Igc2VlIG91ciBbTW9kZWwgb3ZlcnZpZXddKC9kb2NzL21vZGVscy9vdmVydmlldykgZm9yIGRlc2NyaXB0aW9ucyBvZlxuICAgKiB0aGVtLlxuICAgKi9cbiAgbW9kZWw6XG4gICAgfCAoc3RyaW5nICYge30pXG4gICAgfCAnYmFiYmFnZS0wMDInXG4gICAgfCAnZGF2aW5jaS0wMDInXG4gICAgfCAndGV4dC1kYXZpbmNpLTAwMydcbiAgICB8ICd0ZXh0LWRhdmluY2ktMDAyJ1xuICAgIHwgJ3RleHQtZGF2aW5jaS0wMDEnXG4gICAgfCAnY29kZS1kYXZpbmNpLTAwMidcbiAgICB8ICd0ZXh0LWN1cmllLTAwMSdcbiAgICB8ICd0ZXh0LWJhYmJhZ2UtMDAxJ1xuICAgIHwgJ3RleHQtYWRhLTAwMSc7XG5cbiAgLyoqXG4gICAqIFRoZSBwcm9tcHQocykgdG8gZ2VuZXJhdGUgY29tcGxldGlvbnMgZm9yLCBlbmNvZGVkIGFzIGEgc3RyaW5nLCBhcnJheSBvZlxuICAgKiBzdHJpbmdzLCBhcnJheSBvZiB0b2tlbnMsIG9yIGFycmF5IG9mIHRva2VuIGFycmF5cy5cbiAgICpcbiAgICogTm90ZSB0aGF0IDx8ZW5kb2Z0ZXh0fD4gaXMgdGhlIGRvY3VtZW50IHNlcGFyYXRvciB0aGF0IHRoZSBtb2RlbCBzZWVzIGR1cmluZ1xuICAgKiB0cmFpbmluZywgc28gaWYgYSBwcm9tcHQgaXMgbm90IHNwZWNpZmllZCB0aGUgbW9kZWwgd2lsbCBnZW5lcmF0ZSBhcyBpZiBmcm9tIHRoZVxuICAgKiBiZWdpbm5pbmcgb2YgYSBuZXcgZG9jdW1lbnQuXG4gICAqL1xuICBwcm9tcHQ6IHN0cmluZyB8IEFycmF5PHN0cmluZz4gfCBBcnJheTxudW1iZXI+IHwgQXJyYXk8QXJyYXk8bnVtYmVyPj4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYGJlc3Rfb2ZgIGNvbXBsZXRpb25zIHNlcnZlci1zaWRlIGFuZCByZXR1cm5zIHRoZSBcImJlc3RcIiAodGhlIG9uZSB3aXRoXG4gICAqIHRoZSBoaWdoZXN0IGxvZyBwcm9iYWJpbGl0eSBwZXIgdG9rZW4pLiBSZXN1bHRzIGNhbm5vdCBiZSBzdHJlYW1lZC5cbiAgICpcbiAgICogV2hlbiB1c2VkIHdpdGggYG5gLCBgYmVzdF9vZmAgY29udHJvbHMgdGhlIG51bWJlciBvZiBjYW5kaWRhdGUgY29tcGxldGlvbnMgYW5kXG4gICAqIGBuYCBzcGVjaWZpZXMgaG93IG1hbnkgdG8gcmV0dXJuIFx1MjAxMyBgYmVzdF9vZmAgbXVzdCBiZSBncmVhdGVyIHRoYW4gYG5gLlxuICAgKlxuICAgKiAqKk5vdGU6KiogQmVjYXVzZSB0aGlzIHBhcmFtZXRlciBnZW5lcmF0ZXMgbWFueSBjb21wbGV0aW9ucywgaXQgY2FuIHF1aWNrbHlcbiAgICogY29uc3VtZSB5b3VyIHRva2VuIHF1b3RhLiBVc2UgY2FyZWZ1bGx5IGFuZCBlbnN1cmUgdGhhdCB5b3UgaGF2ZSByZWFzb25hYmxlXG4gICAqIHNldHRpbmdzIGZvciBgbWF4X3Rva2Vuc2AgYW5kIGBzdG9wYC5cbiAgICovXG4gIGJlc3Rfb2Y/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBFY2hvIGJhY2sgdGhlIHByb21wdCBpbiBhZGRpdGlvbiB0byB0aGUgY29tcGxldGlvblxuICAgKi9cbiAgZWNobz86IGJvb2xlYW4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgYmV0d2VlbiAtMi4wIGFuZCAyLjAuIFBvc2l0aXZlIHZhbHVlcyBwZW5hbGl6ZSBuZXcgdG9rZW5zIGJhc2VkIG9uIHRoZWlyXG4gICAqIGV4aXN0aW5nIGZyZXF1ZW5jeSBpbiB0aGUgdGV4dCBzbyBmYXIsIGRlY3JlYXNpbmcgdGhlIG1vZGVsJ3MgbGlrZWxpaG9vZCB0b1xuICAgKiByZXBlYXQgdGhlIHNhbWUgbGluZSB2ZXJiYXRpbS5cbiAgICpcbiAgICogW1NlZSBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGZyZXF1ZW5jeSBhbmQgcHJlc2VuY2UgcGVuYWx0aWVzLl0oL2RvY3MvZ3VpZGVzL2dwdC9wYXJhbWV0ZXItZGV0YWlscylcbiAgICovXG4gIGZyZXF1ZW5jeV9wZW5hbHR5PzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaWtlbGlob29kIG9mIHNwZWNpZmllZCB0b2tlbnMgYXBwZWFyaW5nIGluIHRoZSBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBBY2NlcHRzIGEganNvbiBvYmplY3QgdGhhdCBtYXBzIHRva2VucyAoc3BlY2lmaWVkIGJ5IHRoZWlyIHRva2VuIElEIGluIHRoZSBHUFRcbiAgICogdG9rZW5pemVyKSB0byBhbiBhc3NvY2lhdGVkIGJpYXMgdmFsdWUgZnJvbSAtMTAwIHRvIDEwMC4gWW91IGNhbiB1c2UgdGhpc1xuICAgKiBbdG9rZW5pemVyIHRvb2xdKC90b2tlbml6ZXI/dmlldz1icGUpICh3aGljaCB3b3JrcyBmb3IgYm90aCBHUFQtMiBhbmQgR1BULTMpIHRvXG4gICAqIGNvbnZlcnQgdGV4dCB0byB0b2tlbiBJRHMuIE1hdGhlbWF0aWNhbGx5LCB0aGUgYmlhcyBpcyBhZGRlZCB0byB0aGUgbG9naXRzXG4gICAqIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgcHJpb3IgdG8gc2FtcGxpbmcuIFRoZSBleGFjdCBlZmZlY3Qgd2lsbCB2YXJ5IHBlciBtb2RlbCxcbiAgICogYnV0IHZhbHVlcyBiZXR3ZWVuIC0xIGFuZCAxIHNob3VsZCBkZWNyZWFzZSBvciBpbmNyZWFzZSBsaWtlbGlob29kIG9mIHNlbGVjdGlvbjtcbiAgICogdmFsdWVzIGxpa2UgLTEwMCBvciAxMDAgc2hvdWxkIHJlc3VsdCBpbiBhIGJhbiBvciBleGNsdXNpdmUgc2VsZWN0aW9uIG9mIHRoZVxuICAgKiByZWxldmFudCB0b2tlbi5cbiAgICpcbiAgICogQXMgYW4gZXhhbXBsZSwgeW91IGNhbiBwYXNzIGB7XCI1MDI1NlwiOiAtMTAwfWAgdG8gcHJldmVudCB0aGUgPHxlbmRvZnRleHR8PiB0b2tlblxuICAgKiBmcm9tIGJlaW5nIGdlbmVyYXRlZC5cbiAgICovXG4gIGxvZ2l0X2JpYXM/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHwgbnVsbDtcblxuICAvKipcbiAgICogSW5jbHVkZSB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb24gdGhlIGBsb2dwcm9ic2AgbW9zdCBsaWtlbHkgdG9rZW5zLCBhcyB3ZWxsIHRoZVxuICAgKiBjaG9zZW4gdG9rZW5zLiBGb3IgZXhhbXBsZSwgaWYgYGxvZ3Byb2JzYCBpcyA1LCB0aGUgQVBJIHdpbGwgcmV0dXJuIGEgbGlzdCBvZlxuICAgKiB0aGUgNSBtb3N0IGxpa2VseSB0b2tlbnMuIFRoZSBBUEkgd2lsbCBhbHdheXMgcmV0dXJuIHRoZSBgbG9ncHJvYmAgb2YgdGhlXG4gICAqIHNhbXBsZWQgdG9rZW4sIHNvIHRoZXJlIG1heSBiZSB1cCB0byBgbG9ncHJvYnMrMWAgZWxlbWVudHMgaW4gdGhlIHJlc3BvbnNlLlxuICAgKlxuICAgKiBUaGUgbWF4aW11bSB2YWx1ZSBmb3IgYGxvZ3Byb2JzYCBpcyA1LlxuICAgKi9cbiAgbG9ncHJvYnM/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgW3Rva2Vuc10oL3Rva2VuaXplcikgdG8gZ2VuZXJhdGUgaW4gdGhlIGNvbXBsZXRpb24uXG4gICAqXG4gICAqIFRoZSB0b2tlbiBjb3VudCBvZiB5b3VyIHByb21wdCBwbHVzIGBtYXhfdG9rZW5zYCBjYW5ub3QgZXhjZWVkIHRoZSBtb2RlbCdzXG4gICAqIGNvbnRleHQgbGVuZ3RoLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19jb3VudF90b2tlbnNfd2l0aF90aWt0b2tlbi5pcHluYilcbiAgICogZm9yIGNvdW50aW5nIHRva2Vucy5cbiAgICovXG4gIG1heF90b2tlbnM/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBIb3cgbWFueSBjb21wbGV0aW9ucyB0byBnZW5lcmF0ZSBmb3IgZWFjaCBwcm9tcHQuXG4gICAqXG4gICAqICoqTm90ZToqKiBCZWNhdXNlIHRoaXMgcGFyYW1ldGVyIGdlbmVyYXRlcyBtYW55IGNvbXBsZXRpb25zLCBpdCBjYW4gcXVpY2tseVxuICAgKiBjb25zdW1lIHlvdXIgdG9rZW4gcXVvdGEuIFVzZSBjYXJlZnVsbHkgYW5kIGVuc3VyZSB0aGF0IHlvdSBoYXZlIHJlYXNvbmFibGVcbiAgICogc2V0dGluZ3MgZm9yIGBtYXhfdG9rZW5zYCBhbmQgYHN0b3BgLlxuICAgKi9cbiAgbj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE51bWJlciBiZXR3ZWVuIC0yLjAgYW5kIDIuMC4gUG9zaXRpdmUgdmFsdWVzIHBlbmFsaXplIG5ldyB0b2tlbnMgYmFzZWQgb25cbiAgICogd2hldGhlciB0aGV5IGFwcGVhciBpbiB0aGUgdGV4dCBzbyBmYXIsIGluY3JlYXNpbmcgdGhlIG1vZGVsJ3MgbGlrZWxpaG9vZCB0b1xuICAgKiB0YWxrIGFib3V0IG5ldyB0b3BpY3MuXG4gICAqXG4gICAqIFtTZWUgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBmcmVxdWVuY3kgYW5kIHByZXNlbmNlIHBlbmFsdGllcy5dKC9kb2NzL2d1aWRlcy9ncHQvcGFyYW1ldGVyLWRldGFpbHMpXG4gICAqL1xuICBwcmVzZW5jZV9wZW5hbHR5PzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVXAgdG8gNCBzZXF1ZW5jZXMgd2hlcmUgdGhlIEFQSSB3aWxsIHN0b3AgZ2VuZXJhdGluZyBmdXJ0aGVyIHRva2Vucy4gVGhlXG4gICAqIHJldHVybmVkIHRleHQgd2lsbCBub3QgY29udGFpbiB0aGUgc3RvcCBzZXF1ZW5jZS5cbiAgICovXG4gIHN0b3A/OiBzdHJpbmcgfCBudWxsIHwgQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gYmFjayBwYXJ0aWFsIHByb2dyZXNzLiBJZiBzZXQsIHRva2VucyB3aWxsIGJlIHNlbnQgYXNcbiAgICogZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBzdWZmaXggdGhhdCBjb21lcyBhZnRlciBhIGNvbXBsZXRpb24gb2YgaW5zZXJ0ZWQgdGV4dC5cbiAgICovXG4gIHN1ZmZpeD86IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFdoYXQgc2FtcGxpbmcgdGVtcGVyYXR1cmUgdG8gdXNlLCBiZXR3ZWVuIDAgYW5kIDIuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbFxuICAgKiBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZVxuICAgKiBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRvcF9wYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEFuIGFsdGVybmF0aXZlIHRvIHNhbXBsaW5nIHdpdGggdGVtcGVyYXR1cmUsIGNhbGxlZCBudWNsZXVzIHNhbXBsaW5nLCB3aGVyZSB0aGVcbiAgICogbW9kZWwgY29uc2lkZXJzIHRoZSByZXN1bHRzIG9mIHRoZSB0b2tlbnMgd2l0aCB0b3BfcCBwcm9iYWJpbGl0eSBtYXNzLiBTbyAwLjFcbiAgICogbWVhbnMgb25seSB0aGUgdG9rZW5zIGNvbXByaXNpbmcgdGhlIHRvcCAxMCUgcHJvYmFiaWxpdHkgbWFzcyBhcmUgY29uc2lkZXJlZC5cbiAgICpcbiAgICogV2UgZ2VuZXJhbGx5IHJlY29tbWVuZCBhbHRlcmluZyB0aGlzIG9yIGB0ZW1wZXJhdHVyZWAgYnV0IG5vdCBib3RoLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGJhY2sgcGFydGlhbCBwcm9ncmVzcy4gSWYgc2V0LCB0b2tlbnMgd2lsbCBiZSBzZW50IGFzXG4gICAqIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsIHdpdGggdGhlIHN0cmVhbSB0ZXJtaW5hdGVkIGJ5IGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fc3RyZWFtX2NvbXBsZXRpb25zLmlweW5iKS5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGV4dGVuZHMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gYmFjayBwYXJ0aWFsIHByb2dyZXNzLiBJZiBzZXQsIHRva2VucyB3aWxsIGJlIHNlbnQgYXNcbiAgICogZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENvbXBsZXRpb25zIHtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uID0gQVBJLkNvbXBsZXRpb247XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNob2ljZSA9IEFQSS5Db21wbGV0aW9uQ2hvaWNlO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25Vc2FnZSA9IEFQSS5Db21wbGV0aW9uVXNhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgRW1iZWRkaW5ncyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZW1iZWRkaW5nIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGlucHV0IHRleHQuXG4gICAqL1xuICBjcmVhdGUoXG4gICAgYm9keTogRW1iZWRkaW5nQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8Q3JlYXRlRW1iZWRkaW5nUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvZW1iZWRkaW5ncycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIGVtYmVkZGluZ3MgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAgICovXG4gIGRhdGE6IEFycmF5PEVtYmVkZGluZz47XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBtb2RlbCB1c2VkIHRvIGdlbmVyYXRlIHRoZSBlbWJlZGRpbmcuXG4gICAqL1xuICBtb2RlbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcImVtYmVkZGluZ1wiLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSB1c2FnZSBpbmZvcm1hdGlvbiBmb3IgdGhlIHJlcXVlc3QuXG4gICAqL1xuICB1c2FnZTogQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2UuVXNhZ2U7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2Uge1xuICAvKipcbiAgICogVGhlIHVzYWdlIGluZm9ybWF0aW9uIGZvciB0aGUgcmVxdWVzdC5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgVXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgdG9rZW5zIHVzZWQgYnkgdGhlIHByb21wdC5cbiAgICAgKi9cbiAgICBwcm9tcHRfdG9rZW5zOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyB1c2VkIGJ5IHRoZSByZXF1ZXN0LlxuICAgICAqL1xuICAgIHRvdGFsX3Rva2VuczogbnVtYmVyO1xuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhbiBlbWJlZGRpbmcgdmVjdG9yIHJldHVybmVkIGJ5IGVtYmVkZGluZyBlbmRwb2ludC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFbWJlZGRpbmcge1xuICAvKipcbiAgICogVGhlIGVtYmVkZGluZyB2ZWN0b3IsIHdoaWNoIGlzIGEgbGlzdCBvZiBmbG9hdHMuIFRoZSBsZW5ndGggb2YgdmVjdG9yIGRlcGVuZHMgb25cbiAgICogdGhlIG1vZGVsIGFzIGxpc3RlZCBpbiB0aGUgW2VtYmVkZGluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2VtYmVkZGluZ3MpLlxuICAgKi9cbiAgZW1iZWRkaW5nOiBBcnJheTxudW1iZXI+O1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXggb2YgdGhlIGVtYmVkZGluZyBpbiB0aGUgbGlzdCBvZiBlbWJlZGRpbmdzLlxuICAgKi9cbiAgaW5kZXg6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJlbWJlZGRpbmdcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtYmVkZGluZ0NyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBJbnB1dCB0ZXh0IHRvIGVtYmVkLCBlbmNvZGVkIGFzIGEgc3RyaW5nIG9yIGFycmF5IG9mIHRva2Vucy4gVG8gZW1iZWQgbXVsdGlwbGVcbiAgICogaW5wdXRzIGluIGEgc2luZ2xlIHJlcXVlc3QsIHBhc3MgYW4gYXJyYXkgb2Ygc3RyaW5ncyBvciBhcnJheSBvZiB0b2tlbiBhcnJheXMuXG4gICAqIEVhY2ggaW5wdXQgbXVzdCBub3QgZXhjZWVkIHRoZSBtYXggaW5wdXQgdG9rZW5zIGZvciB0aGUgbW9kZWwgKDgxOTEgdG9rZW5zIGZvclxuICAgKiBgdGV4dC1lbWJlZGRpbmctYWRhLTAwMmApLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19jb3VudF90b2tlbnNfd2l0aF90aWt0b2tlbi5pcHluYilcbiAgICogZm9yIGNvdW50aW5nIHRva2Vucy5cbiAgICovXG4gIGlucHV0OiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+IHwgQXJyYXk8bnVtYmVyPiB8IEFycmF5PEFycmF5PG51bWJlcj4+O1xuXG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBZb3UgY2FuIHVzZSB0aGVcbiAgICogW0xpc3QgbW9kZWxzXSgvZG9jcy9hcGktcmVmZXJlbmNlL21vZGVscy9saXN0KSBBUEkgdG8gc2VlIGFsbCBvZiB5b3VyIGF2YWlsYWJsZVxuICAgKiBtb2RlbHMsIG9yIHNlZSBvdXIgW01vZGVsIG92ZXJ2aWV3XSgvZG9jcy9tb2RlbHMvb3ZlcnZpZXcpIGZvciBkZXNjcmlwdGlvbnMgb2ZcbiAgICogdGhlbS5cbiAgICovXG4gIG1vZGVsOiAoc3RyaW5nICYge30pIHwgJ3RleHQtZW1iZWRkaW5nLWFkYS0wMDInO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBFbWJlZGRpbmdzIHtcbiAgZXhwb3J0IGltcG9ydCBDcmVhdGVFbWJlZGRpbmdSZXNwb25zZSA9IEFQSS5DcmVhdGVFbWJlZGRpbmdSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBFbWJlZGRpbmcgPSBBUEkuRW1iZWRkaW5nO1xuICBleHBvcnQgaW1wb3J0IEVtYmVkZGluZ0NyZWF0ZVBhcmFtcyA9IEFQSS5FbWJlZGRpbmdDcmVhdGVQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQ29tcGxldGlvbnMgZnJvbSAnLi9jb21wbGV0aW9ucy5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBFZGl0cyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgZWRpdCBmb3IgdGhlIHByb3ZpZGVkIGlucHV0LCBpbnN0cnVjdGlvbiwgYW5kIHBhcmFtZXRlcnMuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFRoZSBFZGl0cyBBUEkgaXMgZGVwcmVjYXRlZDsgcGxlYXNlIHVzZSBDaGF0IENvbXBsZXRpb25zIGluc3RlYWQuXG4gICAqXG4gICAqIGh0dHBzOi8vb3BlbmFpLmNvbS9ibG9nL2dwdC00LWFwaS1nZW5lcmFsLWF2YWlsYWJpbGl0eSNkZXByZWNhdGlvbi1vZi10aGUtZWRpdHMtYXBpXG4gICAqL1xuICBjcmVhdGUoYm9keTogRWRpdENyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RWRpdD4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9lZGl0cycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXQge1xuICAvKipcbiAgICogQSBsaXN0IG9mIGVkaXQgY2hvaWNlcy4gQ2FuIGJlIG1vcmUgdGhhbiBvbmUgaWYgYG5gIGlzIGdyZWF0ZXIgdGhhbiAxLlxuICAgKi9cbiAgY2hvaWNlczogQXJyYXk8RWRpdC5DaG9pY2U+O1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIG9mIHdoZW4gdGhlIGVkaXQgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIGBlZGl0YC5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVc2FnZSBzdGF0aXN0aWNzIGZvciB0aGUgY29tcGxldGlvbiByZXF1ZXN0LlxuICAgKi9cbiAgdXNhZ2U6IENvbXBsZXRpb25zLkNvbXBsZXRpb25Vc2FnZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBFZGl0IHtcbiAgZXhwb3J0IGludGVyZmFjZSBDaG9pY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIG1vZGVsIHN0b3BwZWQgZ2VuZXJhdGluZyB0b2tlbnMuIFRoaXMgd2lsbCBiZSBgc3RvcGAgaWYgdGhlIG1vZGVsXG4gICAgICogaGl0IGEgbmF0dXJhbCBzdG9wIHBvaW50IG9yIGEgcHJvdmlkZWQgc3RvcCBzZXF1ZW5jZSwgb3IgYGxlbmd0aGAgaWYgdGhlIG1heGltdW1cbiAgICAgKiBudW1iZXIgb2YgdG9rZW5zIHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdCB3YXMgcmVhY2hlZC5cbiAgICAgKi9cbiAgICBmaW5pc2hfcmVhc29uOiAnc3RvcCcgfCAnbGVuZ3RoJztcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgY2hvaWNlIGluIHRoZSBsaXN0IG9mIGNob2ljZXMuXG4gICAgICovXG4gICAgaW5kZXg6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBlZGl0ZWQgcmVzdWx0LlxuICAgICAqL1xuICAgIHRleHQ6IHN0cmluZztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGluc3RydWN0aW9uIHRoYXQgdGVsbHMgdGhlIG1vZGVsIGhvdyB0byBlZGl0IHRoZSBwcm9tcHQuXG4gICAqL1xuICBpbnN0cnVjdGlvbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBZb3UgY2FuIHVzZSB0aGUgYHRleHQtZGF2aW5jaS1lZGl0LTAwMWAgb3JcbiAgICogYGNvZGUtZGF2aW5jaS1lZGl0LTAwMWAgbW9kZWwgd2l0aCB0aGlzIGVuZHBvaW50LlxuICAgKi9cbiAgbW9kZWw6IChzdHJpbmcgJiB7fSkgfCAndGV4dC1kYXZpbmNpLWVkaXQtMDAxJyB8ICdjb2RlLWRhdmluY2ktZWRpdC0wMDEnO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5wdXQgdGV4dCB0byB1c2UgYXMgYSBzdGFydGluZyBwb2ludCBmb3IgdGhlIGVkaXQuXG4gICAqL1xuICBpbnB1dD86IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEhvdyBtYW55IGVkaXRzIHRvIGdlbmVyYXRlIGZvciB0aGUgaW5wdXQgYW5kIGluc3RydWN0aW9uLlxuICAgKi9cbiAgbj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFdoYXQgc2FtcGxpbmcgdGVtcGVyYXR1cmUgdG8gdXNlLCBiZXR3ZWVuIDAgYW5kIDIuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbFxuICAgKiBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZVxuICAgKiBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRvcF9wYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEFuIGFsdGVybmF0aXZlIHRvIHNhbXBsaW5nIHdpdGggdGVtcGVyYXR1cmUsIGNhbGxlZCBudWNsZXVzIHNhbXBsaW5nLCB3aGVyZSB0aGVcbiAgICogbW9kZWwgY29uc2lkZXJzIHRoZSByZXN1bHRzIG9mIHRoZSB0b2tlbnMgd2l0aCB0b3BfcCBwcm9iYWJpbGl0eSBtYXNzLiBTbyAwLjFcbiAgICogbWVhbnMgb25seSB0aGUgdG9rZW5zIGNvbXByaXNpbmcgdGhlIHRvcCAxMCUgcHJvYmFiaWxpdHkgbWFzcyBhcmUgY29uc2lkZXJlZC5cbiAgICpcbiAgICogV2UgZ2VuZXJhbGx5IHJlY29tbWVuZCBhbHRlcmluZyB0aGlzIG9yIGB0ZW1wZXJhdHVyZWAgYnV0IG5vdCBib3RoLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXIgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEVkaXRzIHtcbiAgZXhwb3J0IGltcG9ydCBFZGl0ID0gQVBJLkVkaXQ7XG4gIGV4cG9ydCBpbXBvcnQgRWRpdENyZWF0ZVBhcmFtcyA9IEFQSS5FZGl0Q3JlYXRlUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCB7IHNsZWVwIH0gZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yIH0gZnJvbSAnLi4vZXJyb3IuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgdHlwZSBVcGxvYWRhYmxlLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IFBhZ2UgfSBmcm9tICcuLi9wYWdpbmF0aW9uLmpzJztcblxuZXhwb3J0IGNsYXNzIEZpbGVzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogVXBsb2FkIGEgZmlsZSB0aGF0IGNvbnRhaW5zIGRvY3VtZW50KHMpIHRvIGJlIHVzZWQgYWNyb3NzIHZhcmlvdXNcbiAgICogZW5kcG9pbnRzL2ZlYXR1cmVzLiBDdXJyZW50bHksIHRoZSBzaXplIG9mIGFsbCB0aGUgZmlsZXMgdXBsb2FkZWQgYnkgb25lXG4gICAqIG9yZ2FuaXphdGlvbiBjYW4gYmUgdXAgdG8gMSBHQi4gUGxlYXNlIGNvbnRhY3QgdXMgaWYgeW91IG5lZWQgdG8gaW5jcmVhc2UgdGhlXG4gICAqIHN0b3JhZ2UgbGltaXQuXG4gICAqL1xuICBjcmVhdGUoYm9keTogRmlsZUNyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmlsZU9iamVjdD4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9maWxlcycsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyh7IGJvZHksIC4uLm9wdGlvbnMgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpYyBmaWxlLlxuICAgKi9cbiAgcmV0cmlldmUoZmlsZUlkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbGVPYmplY3Q+IHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9maWxlcy8ke2ZpbGVJZH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBmaWxlcyB0aGF0IGJlbG9uZyB0byB0aGUgdXNlcidzIG9yZ2FuaXphdGlvbi5cbiAgICovXG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPEZpbGVPYmplY3RzUGFnZSwgRmlsZU9iamVjdD4ge1xuICAgIHJldHVybiB0aGlzLmdldEFQSUxpc3QoJy9maWxlcycsIEZpbGVPYmplY3RzUGFnZSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgZmlsZS5cbiAgICovXG4gIGRlbChmaWxlSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmlsZURlbGV0ZWQ+IHtcbiAgICByZXR1cm4gdGhpcy5kZWxldGUoYC9maWxlcy8ke2ZpbGVJZH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb250ZW50cyBvZiB0aGUgc3BlY2lmaWVkIGZpbGVcbiAgICovXG4gIHJldHJpZXZlQ29udGVudChmaWxlSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvZmlsZXMvJHtmaWxlSWR9L2NvbnRlbnRgLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczogeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywgLi4ub3B0aW9ucz8uaGVhZGVycyB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXRzIGZvciB0aGUgZ2l2ZW4gZmlsZSB0byBiZSBwcm9jZXNzZWQsIGRlZmF1bHQgdGltZW91dCBpcyAzMCBtaW5zLlxuICAgKi9cbiAgYXN5bmMgd2FpdEZvclByb2Nlc3NpbmcoXG4gICAgaWQ6IHN0cmluZyxcbiAgICB7IHBvbGxJbnRlcnZhbCA9IDUwMDAsIG1heFdhaXQgPSAzMCAqIDYwICogMTAwMCB9OiB7IHBvbGxJbnRlcnZhbD86IG51bWJlcjsgbWF4V2FpdD86IG51bWJlciB9ID0ge30sXG4gICk6IFByb21pc2U8RmlsZU9iamVjdD4ge1xuICAgIGNvbnN0IFRFUk1JTkFMX1NUQVRFUyA9IG5ldyBTZXQoWydwcm9jZXNzZWQnLCAnZXJyb3InLCAnZGVsZXRlZCddKTtcblxuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgZmlsZSA9IGF3YWl0IHRoaXMucmV0cmlldmUoaWQpO1xuXG4gICAgd2hpbGUgKCFmaWxlLnN0YXR1cyB8fCAhVEVSTUlOQUxfU1RBVEVTLmhhcyhmaWxlLnN0YXR1cykpIHtcbiAgICAgIGF3YWl0IHNsZWVwKHBvbGxJbnRlcnZhbCk7XG5cbiAgICAgIGZpbGUgPSBhd2FpdCB0aGlzLnJldHJpZXZlKGlkKTtcbiAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnQgPiBtYXhXYWl0KSB7XG4gICAgICAgIHRocm93IG5ldyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yKHtcbiAgICAgICAgICBtZXNzYWdlOiBgR2l2aW5nIHVwIG9uIHdhaXRpbmcgZm9yIGZpbGUgJHtpZH0gdG8gZmluaXNoIHByb2Nlc3NpbmcgYWZ0ZXIgJHttYXhXYWl0fSBtaWxsaXNlY29uZHMuYCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbGU7XG4gIH1cbn1cblxuLyoqXG4gKiBOb3RlOiBubyBwYWdpbmF0aW9uIGFjdHVhbGx5IG9jY3VycyB5ZXQsIHRoaXMgaXMgZm9yIGZvcndhcmRzLWNvbXBhdGliaWxpdHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWxlT2JqZWN0c1BhZ2UgZXh0ZW5kcyBQYWdlPEZpbGVPYmplY3Q+IHt9XG4vLyBhbGlhcyBzbyB3ZSBjYW4gZXhwb3J0IGl0IGluIHRoZSBuYW1lc3BhY2VcbnR5cGUgX0ZpbGVPYmplY3RzUGFnZSA9IEZpbGVPYmplY3RzUGFnZTtcblxuZXhwb3J0IHR5cGUgRmlsZUNvbnRlbnQgPSBzdHJpbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZURlbGV0ZWQge1xuICBpZDogc3RyaW5nO1xuXG4gIGRlbGV0ZWQ6IGJvb2xlYW47XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGhlIGBGaWxlYCBvYmplY3QgcmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaGFzIGJlZW4gdXBsb2FkZWQgdG8gT3BlbkFJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVPYmplY3Qge1xuICAvKipcbiAgICogVGhlIGZpbGUgaWRlbnRpZmllciwgd2hpY2ggY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIEFQSSBlbmRwb2ludHMuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgZmlsZSBpbiBieXRlcy5cbiAgICovXG4gIGJ5dGVzOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgZm9yIHdoZW4gdGhlIGZpbGUgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkX2F0OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBmaWxlLlxuICAgKi9cbiAgZmlsZW5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJmaWxlXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGludGVuZGVkIHB1cnBvc2Ugb2YgdGhlIGZpbGUuIEN1cnJlbnRseSwgb25seSBcImZpbmUtdHVuZVwiIGlzIHN1cHBvcnRlZC5cbiAgICovXG4gIHB1cnBvc2U6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBmaWxlLCB3aGljaCBjYW4gYmUgZWl0aGVyIGB1cGxvYWRlZGAsIGBwcm9jZXNzZWRgLFxuICAgKiBgcGVuZGluZ2AsIGBlcnJvcmAsIGBkZWxldGluZ2Agb3IgYGRlbGV0ZWRgLlxuICAgKi9cbiAgc3RhdHVzPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBZGRpdGlvbmFsIGRldGFpbHMgYWJvdXQgdGhlIHN0YXR1cyBvZiB0aGUgZmlsZS4gSWYgdGhlIGZpbGUgaXMgaW4gdGhlIGBlcnJvcmBcbiAgICogc3RhdGUsIHRoaXMgd2lsbCBpbmNsdWRlIGEgbWVzc2FnZSBkZXNjcmliaW5nIHRoZSBlcnJvci5cbiAgICovXG4gIHN0YXR1c19kZXRhaWxzPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIFtKU09OIExpbmVzXShodHRwczovL2pzb25saW5lcy5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3QvKSBmaWxlIHRvIGJlXG4gICAqIHVwbG9hZGVkLlxuICAgKlxuICAgKiBJZiB0aGUgYHB1cnBvc2VgIGlzIHNldCB0byBcImZpbmUtdHVuZVwiLCB0aGUgZmlsZSB3aWxsIGJlIHVzZWQgZm9yIGZpbmUtdHVuaW5nLlxuICAgKi9cbiAgZmlsZTogVXBsb2FkYWJsZTtcblxuICAvKipcbiAgICogVGhlIGludGVuZGVkIHB1cnBvc2Ugb2YgdGhlIHVwbG9hZGVkIGRvY3VtZW50cy5cbiAgICpcbiAgICogVXNlIFwiZmluZS10dW5lXCIgZm9yIFtmaW5lLXR1bmluZ10oL2RvY3MvYXBpLXJlZmVyZW5jZS9maW5lLXR1bmluZykuIFRoaXMgYWxsb3dzXG4gICAqIHVzIHRvIHZhbGlkYXRlIHRoZSBmb3JtYXQgb2YgdGhlIHVwbG9hZGVkIGZpbGUuXG4gICAqL1xuICBwdXJwb3NlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmlsZXMge1xuICBleHBvcnQgaW1wb3J0IEZpbGVDb250ZW50ID0gQVBJLkZpbGVDb250ZW50O1xuICBleHBvcnQgaW1wb3J0IEZpbGVEZWxldGVkID0gQVBJLkZpbGVEZWxldGVkO1xuICBleHBvcnQgaW1wb3J0IEZpbGVPYmplY3QgPSBBUEkuRmlsZU9iamVjdDtcbiAgZXhwb3J0IHR5cGUgRmlsZU9iamVjdHNQYWdlID0gX0ZpbGVPYmplY3RzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBGaWxlQ3JlYXRlUGFyYW1zID0gQVBJLkZpbGVDcmVhdGVQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgRmlsZXMgZnJvbSAnLi9maWxlcy5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBQYWdlIH0gZnJvbSAnLi4vcGFnaW5hdGlvbi5qcyc7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tICcuLi9zdHJlYW1pbmcuanMnO1xuXG5leHBvcnQgY2xhc3MgRmluZVR1bmVzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGpvYiB0aGF0IGZpbmUtdHVuZXMgYSBzcGVjaWZpZWQgbW9kZWwgZnJvbSBhIGdpdmVuIGRhdGFzZXQuXG4gICAqXG4gICAqIFJlc3BvbnNlIGluY2x1ZGVzIGRldGFpbHMgb2YgdGhlIGVucXVldWVkIGpvYiBpbmNsdWRpbmcgam9iIHN0YXR1cyBhbmQgdGhlIG5hbWVcbiAgICogb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWxzIG9uY2UgY29tcGxldGUuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nKVxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IEZpbmVUdW5lQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaW5lVHVuZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9maW5lLXR1bmVzJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgaW5mbyBhYm91dCB0aGUgZmluZS10dW5lIGpvYi5cbiAgICpcbiAgICogW0xlYXJuIG1vcmUgYWJvdXQgZmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcpXG4gICAqL1xuICByZXRyaWV2ZShmaW5lVHVuZUlkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbmVUdW5lPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvZmluZS10dW5lcy8ke2ZpbmVUdW5lSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCB5b3VyIG9yZ2FuaXphdGlvbidzIGZpbmUtdHVuaW5nIGpvYnNcbiAgICovXG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5lc1BhZ2UsIEZpbmVUdW5lPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdCgnL2ZpbmUtdHVuZXMnLCBGaW5lVHVuZXNQYWdlLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbW1lZGlhdGVseSBjYW5jZWwgYSBmaW5lLXR1bmUgam9iLlxuICAgKi9cbiAgY2FuY2VsKGZpbmVUdW5lSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmluZVR1bmU+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KGAvZmluZS10dW5lcy8ke2ZpbmVUdW5lSWR9L2NhbmNlbGAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaW5lLWdyYWluZWQgc3RhdHVzIHVwZGF0ZXMgZm9yIGEgZmluZS10dW5lIGpvYi5cbiAgICovXG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmVJZDogc3RyaW5nLFxuICAgIHF1ZXJ5PzogRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlPjtcbiAgbGlzdEV2ZW50cyhcbiAgICBmaW5lVHVuZUlkOiBzdHJpbmcsXG4gICAgcXVlcnk6IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08RmluZVR1bmVFdmVudD4+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5lSWQ6IHN0cmluZyxcbiAgICBxdWVyeT86IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc0Jhc2UgfCB1bmRlZmluZWQsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPEZpbmVUdW5lRXZlbnQ+IHwgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5lSWQ6IHN0cmluZyxcbiAgICBxdWVyeT86IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcyB8IHVuZGVmaW5lZCxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxGaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZT4gfCBBUElQcm9taXNlPFN0cmVhbTxGaW5lVHVuZUV2ZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbmUtdHVuZXMvJHtmaW5lVHVuZUlkfS9ldmVudHNgLCB7XG4gICAgICBxdWVyeSxcbiAgICAgIHRpbWVvdXQ6IDg2NDAwMDAwLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHN0cmVhbTogcXVlcnk/LnN0cmVhbSA/PyBmYWxzZSxcbiAgICB9KSBhcyBBUElQcm9taXNlPEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlPiB8IEFQSVByb21pc2U8U3RyZWFtPEZpbmVUdW5lRXZlbnQ+PjtcbiAgfVxufVxuXG4vKipcbiAqIE5vdGU6IG5vIHBhZ2luYXRpb24gYWN0dWFsbHkgb2NjdXJzIHlldCwgdGhpcyBpcyBmb3IgZm9yd2FyZHMtY29tcGF0aWJpbGl0eS5cbiAqL1xuZXhwb3J0IGNsYXNzIEZpbmVUdW5lc1BhZ2UgZXh0ZW5kcyBQYWdlPEZpbmVUdW5lPiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9GaW5lVHVuZXNQYWdlID0gRmluZVR1bmVzUGFnZTtcblxuLyoqXG4gKiBUaGUgYEZpbmVUdW5lYCBvYmplY3QgcmVwcmVzZW50cyBhIGxlZ2FjeSBmaW5lLXR1bmUgam9iIHRoYXQgaGFzIGJlZW4gY3JlYXRlZFxuICogdGhyb3VnaCB0aGUgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lIHtcbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgaWRlbnRpZmllciwgd2hpY2ggY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIEFQSSBlbmRwb2ludHMuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIGZvciB3aGVuIHRoZSBmaW5lLXR1bmluZyBqb2Igd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkX2F0OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVsIHRoYXQgaXMgYmVpbmcgY3JlYXRlZC5cbiAgICovXG4gIGZpbmVfdHVuZWRfbW9kZWw6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi4gU2VlIHRoZVxuICAgKiBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcvaHlwZXJwYXJhbWV0ZXJzKSBmb3IgbW9yZVxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgaHlwZXJwYXJhbXM6IEZpbmVUdW5lLkh5cGVycGFyYW1zO1xuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBtb2RlbCB0aGF0IGlzIGJlaW5nIGZpbmUtdHVuZWQuXG4gICAqL1xuICBtb2RlbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcImZpbmUtdHVuZVwiLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvcmdhbml6YXRpb24gdGhhdCBvd25zIHRoZSBmaW5lLXR1bmluZyBqb2IuXG4gICAqL1xuICBvcmdhbml6YXRpb25faWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGNvbXBpbGVkIHJlc3VsdHMgZmlsZXMgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuXG4gICAqL1xuICByZXN1bHRfZmlsZXM6IEFycmF5PEZpbGVzLkZpbGVPYmplY3Q+O1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIGZpbmUtdHVuaW5nIGpvYiwgd2hpY2ggY2FuIGJlIGVpdGhlciBgY3JlYXRlZGAsXG4gICAqIGBydW5uaW5nYCwgYHN1Y2NlZWRlZGAsIGBmYWlsZWRgLCBvciBgY2FuY2VsbGVkYC5cbiAgICovXG4gIHN0YXR1czogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBmaWxlcyB1c2VkIGZvciB0cmFpbmluZy5cbiAgICovXG4gIHRyYWluaW5nX2ZpbGVzOiBBcnJheTxGaWxlcy5GaWxlT2JqZWN0PjtcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBmb3Igd2hlbiB0aGUgZmluZS10dW5pbmcgam9iIHdhcyBsYXN0IHVwZGF0ZWQuXG4gICAqL1xuICB1cGRhdGVkX2F0OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIGZpbGVzIHVzZWQgZm9yIHZhbGlkYXRpb24uXG4gICAqL1xuICB2YWxpZGF0aW9uX2ZpbGVzOiBBcnJheTxGaWxlcy5GaWxlT2JqZWN0PjtcblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgZXZlbnRzIHRoYXQgaGF2ZSBiZWVuIG9ic2VydmVkIGluIHRoZSBsaWZlY3ljbGUgb2YgdGhlIEZpbmVUdW5lIGpvYi5cbiAgICovXG4gIGV2ZW50cz86IEFycmF5PEZpbmVUdW5lRXZlbnQ+O1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEZpbmVUdW5lIHtcbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi4gU2VlIHRoZVxuICAgKiBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcvaHlwZXJwYXJhbWV0ZXJzKSBmb3IgbW9yZVxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBIeXBlcnBhcmFtcyB7XG4gICAgLyoqXG4gICAgICogVGhlIGJhdGNoIHNpemUgdG8gdXNlIGZvciB0cmFpbmluZy4gVGhlIGJhdGNoIHNpemUgaXMgdGhlIG51bWJlciBvZiB0cmFpbmluZ1xuICAgICAqIGV4YW1wbGVzIHVzZWQgdG8gdHJhaW4gYSBzaW5nbGUgZm9yd2FyZCBhbmQgYmFja3dhcmQgcGFzcy5cbiAgICAgKi9cbiAgICBiYXRjaF9zaXplOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbGVhcm5pbmcgcmF0ZSBtdWx0aXBsaWVyIHRvIHVzZSBmb3IgdHJhaW5pbmcuXG4gICAgICovXG4gICAgbGVhcm5pbmdfcmF0ZV9tdWx0aXBsaWVyOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGVwb2NocyB0byB0cmFpbiB0aGUgbW9kZWwgZm9yLiBBbiBlcG9jaCByZWZlcnMgdG8gb25lIGZ1bGwgY3ljbGVcbiAgICAgKiB0aHJvdWdoIHRoZSB0cmFpbmluZyBkYXRhc2V0LlxuICAgICAqL1xuICAgIG5fZXBvY2hzOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgd2VpZ2h0IHRvIHVzZSBmb3IgbG9zcyBvbiB0aGUgcHJvbXB0IHRva2Vucy5cbiAgICAgKi9cbiAgICBwcm9tcHRfbG9zc193ZWlnaHQ6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgY2xhc3NlcyB0byB1c2UgZm9yIGNvbXB1dGluZyBjbGFzc2lmaWNhdGlvbiBtZXRyaWNzLlxuICAgICAqL1xuICAgIGNsYXNzaWZpY2F0aW9uX25fY2xhc3Nlcz86IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBwb3NpdGl2ZSBjbGFzcyB0byB1c2UgZm9yIGNvbXB1dGluZyBjbGFzc2lmaWNhdGlvbiBtZXRyaWNzLlxuICAgICAqL1xuICAgIGNsYXNzaWZpY2F0aW9uX3Bvc2l0aXZlX2NsYXNzPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNsYXNzaWZpY2F0aW9uIG1ldHJpY3MgdG8gY29tcHV0ZSB1c2luZyB0aGUgdmFsaWRhdGlvbiBkYXRhc2V0IGF0IHRoZSBlbmQgb2ZcbiAgICAgKiBldmVyeSBlcG9jaC5cbiAgICAgKi9cbiAgICBjb21wdXRlX2NsYXNzaWZpY2F0aW9uX21ldHJpY3M/OiBib29sZWFuO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmVFdmVudCB7XG4gIGNyZWF0ZWRfYXQ6IG51bWJlcjtcblxuICBsZXZlbDogc3RyaW5nO1xuXG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZSB7XG4gIGRhdGE6IEFycmF5PEZpbmVUdW5lRXZlbnQ+O1xuXG4gIG9iamVjdDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBJRCBvZiBhbiB1cGxvYWRlZCBmaWxlIHRoYXQgY29udGFpbnMgdHJhaW5pbmcgZGF0YS5cbiAgICpcbiAgICogU2VlIFt1cGxvYWQgZmlsZV0oL2RvY3MvYXBpLXJlZmVyZW5jZS9maWxlcy91cGxvYWQpIGZvciBob3cgdG8gdXBsb2FkIGEgZmlsZS5cbiAgICpcbiAgICogWW91ciBkYXRhc2V0IG11c3QgYmUgZm9ybWF0dGVkIGFzIGEgSlNPTkwgZmlsZSwgd2hlcmUgZWFjaCB0cmFpbmluZyBleGFtcGxlIGlzIGFcbiAgICogSlNPTiBvYmplY3Qgd2l0aCB0aGUga2V5cyBcInByb21wdFwiIGFuZCBcImNvbXBsZXRpb25cIi4gQWRkaXRpb25hbGx5LCB5b3UgbXVzdFxuICAgKiB1cGxvYWQgeW91ciBmaWxlIHdpdGggdGhlIHB1cnBvc2UgYGZpbmUtdHVuZWAuXG4gICAqXG4gICAqIFNlZSB0aGVcbiAgICogW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2NyZWF0aW5nLXRyYWluaW5nLWRhdGEpIGZvclxuICAgKiBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0cmFpbmluZ19maWxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXRjaCBzaXplIHRvIHVzZSBmb3IgdHJhaW5pbmcuIFRoZSBiYXRjaCBzaXplIGlzIHRoZSBudW1iZXIgb2YgdHJhaW5pbmdcbiAgICogZXhhbXBsZXMgdXNlZCB0byB0cmFpbiBhIHNpbmdsZSBmb3J3YXJkIGFuZCBiYWNrd2FyZCBwYXNzLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGUgYmF0Y2ggc2l6ZSB3aWxsIGJlIGR5bmFtaWNhbGx5IGNvbmZpZ3VyZWQgdG8gYmUgfjAuMiUgb2YgdGhlXG4gICAqIG51bWJlciBvZiBleGFtcGxlcyBpbiB0aGUgdHJhaW5pbmcgc2V0LCBjYXBwZWQgYXQgMjU2IC0gaW4gZ2VuZXJhbCwgd2UndmUgZm91bmRcbiAgICogdGhhdCBsYXJnZXIgYmF0Y2ggc2l6ZXMgdGVuZCB0byB3b3JrIGJldHRlciBmb3IgbGFyZ2VyIGRhdGFzZXRzLlxuICAgKi9cbiAgYmF0Y2hfc2l6ZT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIElmIHRoaXMgaXMgcHJvdmlkZWQsIHdlIGNhbGN1bGF0ZSBGLWJldGEgc2NvcmVzIGF0IHRoZSBzcGVjaWZpZWQgYmV0YSB2YWx1ZXMuXG4gICAqIFRoZSBGLWJldGEgc2NvcmUgaXMgYSBnZW5lcmFsaXphdGlvbiBvZiBGLTEgc2NvcmUuIFRoaXMgaXMgb25seSB1c2VkIGZvciBiaW5hcnlcbiAgICogY2xhc3NpZmljYXRpb24uXG4gICAqXG4gICAqIFdpdGggYSBiZXRhIG9mIDEgKGkuZS4gdGhlIEYtMSBzY29yZSksIHByZWNpc2lvbiBhbmQgcmVjYWxsIGFyZSBnaXZlbiB0aGUgc2FtZVxuICAgKiB3ZWlnaHQuIEEgbGFyZ2VyIGJldGEgc2NvcmUgcHV0cyBtb3JlIHdlaWdodCBvbiByZWNhbGwgYW5kIGxlc3Mgb24gcHJlY2lzaW9uLiBBXG4gICAqIHNtYWxsZXIgYmV0YSBzY29yZSBwdXRzIG1vcmUgd2VpZ2h0IG9uIHByZWNpc2lvbiBhbmQgbGVzcyBvbiByZWNhbGwuXG4gICAqL1xuICBjbGFzc2lmaWNhdGlvbl9iZXRhcz86IEFycmF5PG51bWJlcj4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGNsYXNzZXMgaW4gYSBjbGFzc2lmaWNhdGlvbiB0YXNrLlxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciBpcyByZXF1aXJlZCBmb3IgbXVsdGljbGFzcyBjbGFzc2lmaWNhdGlvbi5cbiAgICovXG4gIGNsYXNzaWZpY2F0aW9uX25fY2xhc3Nlcz86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBwb3NpdGl2ZSBjbGFzcyBpbiBiaW5hcnkgY2xhc3NpZmljYXRpb24uXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIGlzIG5lZWRlZCB0byBnZW5lcmF0ZSBwcmVjaXNpb24sIHJlY2FsbCwgYW5kIEYxIG1ldHJpY3Mgd2hlblxuICAgKiBkb2luZyBiaW5hcnkgY2xhc3NpZmljYXRpb24uXG4gICAqL1xuICBjbGFzc2lmaWNhdGlvbl9wb3NpdGl2ZV9jbGFzcz86IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgd2UgY2FsY3VsYXRlIGNsYXNzaWZpY2F0aW9uLXNwZWNpZmljIG1ldHJpY3Mgc3VjaCBhcyBhY2N1cmFjeSBhbmQgRi0xXG4gICAqIHNjb3JlIHVzaW5nIHRoZSB2YWxpZGF0aW9uIHNldCBhdCB0aGUgZW5kIG9mIGV2ZXJ5IGVwb2NoLiBUaGVzZSBtZXRyaWNzIGNhbiBiZVxuICAgKiB2aWV3ZWQgaW4gdGhlXG4gICAqIFtyZXN1bHRzIGZpbGVdKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcvYW5hbHl6aW5nLXlvdXItZmluZS10dW5lZC1tb2RlbCkuXG4gICAqXG4gICAqIEluIG9yZGVyIHRvIGNvbXB1dGUgY2xhc3NpZmljYXRpb24gbWV0cmljcywgeW91IG11c3QgcHJvdmlkZSBhXG4gICAqIGB2YWxpZGF0aW9uX2ZpbGVgLiBBZGRpdGlvbmFsbHksIHlvdSBtdXN0IHNwZWNpZnkgYGNsYXNzaWZpY2F0aW9uX25fY2xhc3Nlc2AgZm9yXG4gICAqIG11bHRpY2xhc3MgY2xhc3NpZmljYXRpb24gb3IgYGNsYXNzaWZpY2F0aW9uX3Bvc2l0aXZlX2NsYXNzYCBmb3IgYmluYXJ5XG4gICAqIGNsYXNzaWZpY2F0aW9uLlxuICAgKi9cbiAgY29tcHV0ZV9jbGFzc2lmaWNhdGlvbl9tZXRyaWNzPzogYm9vbGVhbiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBsZWFybmluZyByYXRlIG11bHRpcGxpZXIgdG8gdXNlIGZvciB0cmFpbmluZy4gVGhlIGZpbmUtdHVuaW5nIGxlYXJuaW5nIHJhdGVcbiAgICogaXMgdGhlIG9yaWdpbmFsIGxlYXJuaW5nIHJhdGUgdXNlZCBmb3IgcHJldHJhaW5pbmcgbXVsdGlwbGllZCBieSB0aGlzIHZhbHVlLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGUgbGVhcm5pbmcgcmF0ZSBtdWx0aXBsaWVyIGlzIHRoZSAwLjA1LCAwLjEsIG9yIDAuMiBkZXBlbmRpbmcgb25cbiAgICogZmluYWwgYGJhdGNoX3NpemVgIChsYXJnZXIgbGVhcm5pbmcgcmF0ZXMgdGVuZCB0byBwZXJmb3JtIGJldHRlciB3aXRoIGxhcmdlclxuICAgKiBiYXRjaCBzaXplcykuIFdlIHJlY29tbWVuZCBleHBlcmltZW50aW5nIHdpdGggdmFsdWVzIGluIHRoZSByYW5nZSAwLjAyIHRvIDAuMiB0b1xuICAgKiBzZWUgd2hhdCBwcm9kdWNlcyB0aGUgYmVzdCByZXN1bHRzLlxuICAgKi9cbiAgbGVhcm5pbmdfcmF0ZV9tdWx0aXBsaWVyPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGJhc2UgbW9kZWwgdG8gZmluZS10dW5lLiBZb3UgY2FuIHNlbGVjdCBvbmUgb2YgXCJhZGFcIiwgXCJiYWJiYWdlXCIsXG4gICAqIFwiY3VyaWVcIiwgXCJkYXZpbmNpXCIsIG9yIGEgZmluZS10dW5lZCBtb2RlbCBjcmVhdGVkIGFmdGVyIDIwMjItMDQtMjEgYW5kIGJlZm9yZVxuICAgKiAyMDIzLTA4LTIyLiBUbyBsZWFybiBtb3JlIGFib3V0IHRoZXNlIG1vZGVscywgc2VlIHRoZSBbTW9kZWxzXSgvZG9jcy9tb2RlbHMpXG4gICAqIGRvY3VtZW50YXRpb24uXG4gICAqL1xuICBtb2RlbD86IChzdHJpbmcgJiB7fSkgfCAnYWRhJyB8ICdiYWJiYWdlJyB8ICdjdXJpZScgfCAnZGF2aW5jaScgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGVwb2NocyB0byB0cmFpbiB0aGUgbW9kZWwgZm9yLiBBbiBlcG9jaCByZWZlcnMgdG8gb25lIGZ1bGwgY3ljbGVcbiAgICogdGhyb3VnaCB0aGUgdHJhaW5pbmcgZGF0YXNldC5cbiAgICovXG4gIG5fZXBvY2hzPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHdlaWdodCB0byB1c2UgZm9yIGxvc3Mgb24gdGhlIHByb21wdCB0b2tlbnMuIFRoaXMgY29udHJvbHMgaG93IG11Y2ggdGhlXG4gICAqIG1vZGVsIHRyaWVzIHRvIGxlYXJuIHRvIGdlbmVyYXRlIHRoZSBwcm9tcHQgKGFzIGNvbXBhcmVkIHRvIHRoZSBjb21wbGV0aW9uIHdoaWNoXG4gICAqIGFsd2F5cyBoYXMgYSB3ZWlnaHQgb2YgMS4wKSwgYW5kIGNhbiBhZGQgYSBzdGFiaWxpemluZyBlZmZlY3QgdG8gdHJhaW5pbmcgd2hlblxuICAgKiBjb21wbGV0aW9ucyBhcmUgc2hvcnQuXG4gICAqXG4gICAqIElmIHByb21wdHMgYXJlIGV4dHJlbWVseSBsb25nIChyZWxhdGl2ZSB0byBjb21wbGV0aW9ucyksIGl0IG1heSBtYWtlIHNlbnNlIHRvXG4gICAqIHJlZHVjZSB0aGlzIHdlaWdodCBzbyBhcyB0byBhdm9pZCBvdmVyLXByaW9yaXRpemluZyBsZWFybmluZyB0aGUgcHJvbXB0LlxuICAgKi9cbiAgcHJvbXB0X2xvc3Nfd2VpZ2h0PzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQSBzdHJpbmcgb2YgdXAgdG8gNDAgY2hhcmFjdGVycyB0aGF0IHdpbGwgYmUgYWRkZWQgdG8geW91ciBmaW5lLXR1bmVkIG1vZGVsXG4gICAqIG5hbWUuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBhIGBzdWZmaXhgIG9mIFwiY3VzdG9tLW1vZGVsLW5hbWVcIiB3b3VsZCBwcm9kdWNlIGEgbW9kZWwgbmFtZSBsaWtlXG4gICAqIGBhZGE6ZnQteW91ci1vcmc6Y3VzdG9tLW1vZGVsLW5hbWUtMjAyMi0wMi0xNS0wNC0yMS0wNGAuXG4gICAqL1xuICBzdWZmaXg/OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgYW4gdXBsb2FkZWQgZmlsZSB0aGF0IGNvbnRhaW5zIHZhbGlkYXRpb24gZGF0YS5cbiAgICpcbiAgICogSWYgeW91IHByb3ZpZGUgdGhpcyBmaWxlLCB0aGUgZGF0YSBpcyB1c2VkIHRvIGdlbmVyYXRlIHZhbGlkYXRpb24gbWV0cmljc1xuICAgKiBwZXJpb2RpY2FsbHkgZHVyaW5nIGZpbmUtdHVuaW5nLiBUaGVzZSBtZXRyaWNzIGNhbiBiZSB2aWV3ZWQgaW4gdGhlXG4gICAqIFtmaW5lLXR1bmluZyByZXN1bHRzIGZpbGVdKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcvYW5hbHl6aW5nLXlvdXItZmluZS10dW5lZC1tb2RlbCkuXG4gICAqIFlvdXIgdHJhaW4gYW5kIHZhbGlkYXRpb24gZGF0YSBzaG91bGQgYmUgbXV0dWFsbHkgZXhjbHVzaXZlLlxuICAgKlxuICAgKiBZb3VyIGRhdGFzZXQgbXVzdCBiZSBmb3JtYXR0ZWQgYXMgYSBKU09OTCBmaWxlLCB3aGVyZSBlYWNoIHZhbGlkYXRpb24gZXhhbXBsZSBpc1xuICAgKiBhIEpTT04gb2JqZWN0IHdpdGggdGhlIGtleXMgXCJwcm9tcHRcIiBhbmQgXCJjb21wbGV0aW9uXCIuIEFkZGl0aW9uYWxseSwgeW91IG11c3RcbiAgICogdXBsb2FkIHlvdXIgZmlsZSB3aXRoIHRoZSBwdXJwb3NlIGBmaW5lLXR1bmVgLlxuICAgKlxuICAgKiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZy9jcmVhdGluZy10cmFpbmluZy1kYXRhKSBmb3JcbiAgICogbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdmFsaWRhdGlvbl9maWxlPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zID1cbiAgfCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmdcbiAgfCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN0cmVhbSBldmVudHMgZm9yIHRoZSBmaW5lLXR1bmUgam9iLiBJZiBzZXQgdG8gdHJ1ZSwgZXZlbnRzIHdpbGwgYmVcbiAgICogc2VudCBhcyBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLiBUaGUgc3RyZWFtIHdpbGwgdGVybWluYXRlIHdpdGggYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlIHdoZW4gdGhlIGpvYiBpcyBmaW5pc2hlZCAoc3VjY2VlZGVkLCBjYW5jZWxsZWQsIG9yIGZhaWxlZCkuXG4gICAqXG4gICAqIElmIHNldCB0byBmYWxzZSwgb25seSBldmVudHMgZ2VuZXJhdGVkIHNvIGZhciB3aWxsIGJlIHJldHVybmVkLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXMge1xuICBleHBvcnQgdHlwZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmcgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gZXZlbnRzIGZvciB0aGUgZmluZS10dW5lIGpvYi4gSWYgc2V0IHRvIHRydWUsIGV2ZW50cyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZS4gVGhlIHN0cmVhbSB3aWxsIHRlcm1pbmF0ZSB3aXRoIGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZSB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgKHN1Y2NlZWRlZCwgY2FuY2VsbGVkLCBvciBmYWlsZWQpLlxuICAgKlxuICAgKiBJZiBzZXQgdG8gZmFsc2UsIG9ubHkgZXZlbnRzIGdlbmVyYXRlZCBzbyBmYXIgd2lsbCBiZSByZXR1cm5lZC5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZyBleHRlbmRzIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gZXZlbnRzIGZvciB0aGUgZmluZS10dW5lIGpvYi4gSWYgc2V0IHRvIHRydWUsIGV2ZW50cyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZS4gVGhlIHN0cmVhbSB3aWxsIHRlcm1pbmF0ZSB3aXRoIGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZSB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgKHN1Y2NlZWRlZCwgY2FuY2VsbGVkLCBvciBmYWlsZWQpLlxuICAgKlxuICAgKiBJZiBzZXQgdG8gZmFsc2UsIG9ubHkgZXZlbnRzIGdlbmVyYXRlZCBzbyBmYXIgd2lsbCBiZSByZXR1cm5lZC5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaW5lVHVuZXMge1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lID0gQVBJLkZpbmVUdW5lO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lRXZlbnQgPSBBUEkuRmluZVR1bmVFdmVudDtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZSA9IEFQSS5GaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZTtcbiAgZXhwb3J0IHR5cGUgRmluZVR1bmVzUGFnZSA9IF9GaW5lVHVuZXNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lQ3JlYXRlUGFyYW1zID0gQVBJLkZpbmVUdW5lQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmcgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uLy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCB7IGlzUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb3JlLmpzJztcbmltcG9ydCAqIGFzIEZpbGVzIGZyb20gJy4uL2ZpbGVzLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IEN1cnNvclBhZ2UsIEN1cnNvclBhZ2VQYXJhbXMgfSBmcm9tICcuLi8uLi9wYWdpbmF0aW9uLmpzJztcblxuZXhwb3J0IGNsYXNzIEpvYnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgam9iIHRoYXQgZmluZS10dW5lcyBhIHNwZWNpZmllZCBtb2RlbCBmcm9tIGEgZ2l2ZW4gZGF0YXNldC5cbiAgICpcbiAgICogUmVzcG9uc2UgaW5jbHVkZXMgZGV0YWlscyBvZiB0aGUgZW5xdWV1ZWQgam9iIGluY2x1ZGluZyBqb2Igc3RhdHVzIGFuZCB0aGUgbmFtZVxuICAgKiBvZiB0aGUgZmluZS10dW5lZCBtb2RlbHMgb25jZSBjb21wbGV0ZS5cbiAgICpcbiAgICogW0xlYXJuIG1vcmUgYWJvdXQgZmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICovXG4gIGNyZWF0ZShib2R5OiBKb2JDcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbmVUdW5pbmdKb2I+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvZmluZV90dW5pbmcvam9icycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgaW5mbyBhYm91dCBhIGZpbmUtdHVuaW5nIGpvYi5cbiAgICpcbiAgICogW0xlYXJuIG1vcmUgYWJvdXQgZmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICovXG4gIHJldHJpZXZlKGZpbmVUdW5pbmdKb2JJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaW5lVHVuaW5nSm9iPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvZmluZV90dW5pbmcvam9icy8ke2ZpbmVUdW5pbmdKb2JJZH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0IHlvdXIgb3JnYW5pemF0aW9uJ3MgZmluZS10dW5pbmcgam9ic1xuICAgKi9cbiAgbGlzdChcbiAgICBxdWVyeT86IEpvYkxpc3RQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8RmluZVR1bmluZ0pvYnNQYWdlLCBGaW5lVHVuaW5nSm9iPjtcbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8RmluZVR1bmluZ0pvYnNQYWdlLCBGaW5lVHVuaW5nSm9iPjtcbiAgbGlzdChcbiAgICBxdWVyeTogSm9iTGlzdFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxGaW5lVHVuaW5nSm9ic1BhZ2UsIEZpbmVUdW5pbmdKb2I+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhxdWVyeSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3Qoe30sIHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdCgnL2ZpbmVfdHVuaW5nL2pvYnMnLCBGaW5lVHVuaW5nSm9ic1BhZ2UsIHsgcXVlcnksIC4uLm9wdGlvbnMgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW1tZWRpYXRlbHkgY2FuY2VsIGEgZmluZS10dW5lIGpvYi5cbiAgICovXG4gIGNhbmNlbChmaW5lVHVuaW5nSm9iSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmluZVR1bmluZ0pvYj4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoYC9maW5lX3R1bmluZy9qb2JzLyR7ZmluZVR1bmluZ0pvYklkfS9jYW5jZWxgLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3RhdHVzIHVwZGF0ZXMgZm9yIGEgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgbGlzdEV2ZW50cyhcbiAgICBmaW5lVHVuaW5nSm9iSWQ6IHN0cmluZyxcbiAgICBxdWVyeT86IEpvYkxpc3RFdmVudHNQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8RmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UsIEZpbmVUdW5pbmdKb2JFdmVudD47XG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmluZ0pvYklkOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8RmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UsIEZpbmVUdW5pbmdKb2JFdmVudD47XG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmluZ0pvYklkOiBzdHJpbmcsXG4gICAgcXVlcnk6IEpvYkxpc3RFdmVudHNQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8RmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UsIEZpbmVUdW5pbmdKb2JFdmVudD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdEV2ZW50cyhmaW5lVHVuaW5nSm9iSWQsIHt9LCBxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEFQSUxpc3QoYC9maW5lX3R1bmluZy9qb2JzLyR7ZmluZVR1bmluZ0pvYklkfS9ldmVudHNgLCBGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSwge1xuICAgICAgcXVlcnksXG4gICAgICAuLi5vcHRpb25zLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaW5lVHVuaW5nSm9ic1BhZ2UgZXh0ZW5kcyBDdXJzb3JQYWdlPEZpbmVUdW5pbmdKb2I+IHt9XG4vLyBhbGlhcyBzbyB3ZSBjYW4gZXhwb3J0IGl0IGluIHRoZSBuYW1lc3BhY2VcbnR5cGUgX0ZpbmVUdW5pbmdKb2JzUGFnZSA9IEZpbmVUdW5pbmdKb2JzUGFnZTtcblxuZXhwb3J0IGNsYXNzIEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlIGV4dGVuZHMgQ3Vyc29yUGFnZTxGaW5lVHVuaW5nSm9iRXZlbnQ+IHt9XG4vLyBhbGlhcyBzbyB3ZSBjYW4gZXhwb3J0IGl0IGluIHRoZSBuYW1lc3BhY2VcbnR5cGUgX0ZpbmVUdW5pbmdKb2JFdmVudHNQYWdlID0gRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2U7XG5cbi8qKlxuICogVGhlIGBmaW5lX3R1bmluZy5qb2JgIG9iamVjdCByZXByZXNlbnRzIGEgZmluZS10dW5pbmcgam9iIHRoYXQgaGFzIGJlZW4gY3JlYXRlZFxuICogdGhyb3VnaCB0aGUgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5pbmdKb2Ige1xuICAvKipcbiAgICogVGhlIG9iamVjdCBpZGVudGlmaWVyLCB3aGljaCBjYW4gYmUgcmVmZXJlbmNlZCBpbiB0aGUgQVBJIGVuZHBvaW50cy5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgZm9yIHdoZW4gdGhlIGZpbmUtdHVuaW5nIGpvYiB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWwgdGhhdCBpcyBiZWluZyBjcmVhdGVkLlxuICAgKi9cbiAgZmluZV90dW5lZF9tb2RlbDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGh5cGVycGFyYW1ldGVycyB1c2VkIGZvciB0aGUgZmluZS10dW5pbmcgam9iLiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgaHlwZXJwYXJhbWV0ZXJzOiBGaW5lVHVuaW5nSm9iLkh5cGVycGFyYW1ldGVycztcblxuICAvKipcbiAgICogVGhlIGJhc2UgbW9kZWwgdGhhdCBpcyBiZWluZyBmaW5lLXR1bmVkLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJmaW5lX3R1bmluZy5qb2JcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgb3ducyB0aGUgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgb3JnYW5pemF0aW9uX2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBjb21waWxlZCByZXN1bHRzIGZpbGVzIGZvciB0aGUgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgcmVzdWx0X2ZpbGVzOiBBcnJheTxGaWxlcy5GaWxlT2JqZWN0PjtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBmaW5lLXR1bmluZyBqb2IsIHdoaWNoIGNhbiBiZSBlaXRoZXIgYGNyZWF0ZWRgLFxuICAgKiBgcGVuZGluZ2AsIGBydW5uaW5nYCwgYHN1Y2NlZWRlZGAsIGBmYWlsZWRgLCBvciBgY2FuY2VsbGVkYC5cbiAgICovXG4gIHN0YXR1czogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIGJpbGxhYmxlIHRva2VucyBwcm9jZXNzZWQgYnkgdGhpcyBmaW5lIHR1bmluZyBqb2IuXG4gICAqL1xuICB0cmFpbmVkX3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgZmlsZSBJRCB1c2VkIGZvciB0cmFpbmluZy5cbiAgICovXG4gIHRyYWluaW5nX2ZpbGU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGZpbGUgSUQgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAgICovXG4gIHZhbGlkYXRpb25fZmlsZTogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBmb3Igd2hlbiB0aGUgZmluZS10dW5pbmcgam9iIHdhcyBmaW5pc2hlZC5cbiAgICovXG4gIGZpbmlzaGVkX2F0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEZpbmVUdW5pbmdKb2Ige1xuICAvKipcbiAgICogVGhlIGh5cGVycGFyYW1ldGVycyB1c2VkIGZvciB0aGUgZmluZS10dW5pbmcgam9iLiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBIeXBlcnBhcmFtZXRlcnMge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgZXBvY2hzIHRvIHRyYWluIHRoZSBtb2RlbCBmb3IuIEFuIGVwb2NoIHJlZmVycyB0byBvbmUgZnVsbCBjeWNsZVxuICAgICAqIHRocm91Z2ggdGhlIHRyYWluaW5nIGRhdGFzZXQuIFwiQXV0b1wiIGRlY2lkZXMgdGhlIG9wdGltYWwgbnVtYmVyIG9mIGVwb2NocyBiYXNlZFxuICAgICAqIG9uIHRoZSBzaXplIG9mIHRoZSBkYXRhc2V0LiBJZiBzZXR0aW5nIHRoZSBudW1iZXIgbWFudWFsbHksIHdlIHN1cHBvcnQgYW55XG4gICAgICogbnVtYmVyIGJldHdlZW4gMSBhbmQgNTAgZXBvY2hzLlxuICAgICAqL1xuICAgIG5fZXBvY2hzPzogJ2F1dG8nIHwgbnVtYmVyO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmluZ0pvYkV2ZW50IHtcbiAgaWQ6IHN0cmluZztcblxuICBjcmVhdGVkX2F0OiBudW1iZXI7XG5cbiAgbGV2ZWw6ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcic7XG5cbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIG9iamVjdDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEpvYkNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgbW9kZWwgdG8gZmluZS10dW5lLiBZb3UgY2FuIHNlbGVjdCBvbmUgb2YgdGhlXG4gICAqIFtzdXBwb3J0ZWQgbW9kZWxzXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcvd2hhdC1tb2RlbHMtY2FuLWJlLWZpbmUtdHVuZWQpLlxuICAgKi9cbiAgbW9kZWw6IChzdHJpbmcgJiB7fSkgfCAnYmFiYmFnZS0wMDInIHwgJ2RhdmluY2ktMDAyJyB8ICdncHQtMy41LXR1cmJvJztcblxuICAvKipcbiAgICogVGhlIElEIG9mIGFuIHVwbG9hZGVkIGZpbGUgdGhhdCBjb250YWlucyB0cmFpbmluZyBkYXRhLlxuICAgKlxuICAgKiBTZWUgW3VwbG9hZCBmaWxlXSgvZG9jcy9hcGktcmVmZXJlbmNlL2ZpbGVzL3VwbG9hZCkgZm9yIGhvdyB0byB1cGxvYWQgYSBmaWxlLlxuICAgKlxuICAgKiBZb3VyIGRhdGFzZXQgbXVzdCBiZSBmb3JtYXR0ZWQgYXMgYSBKU09OTCBmaWxlLiBBZGRpdGlvbmFsbHksIHlvdSBtdXN0IHVwbG9hZFxuICAgKiB5b3VyIGZpbGUgd2l0aCB0aGUgcHVycG9zZSBgZmluZS10dW5lYC5cbiAgICpcbiAgICogU2VlIHRoZSBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZykgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHRyYWluaW5nX2ZpbGU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGh5cGVycGFyYW1ldGVycyB1c2VkIGZvciB0aGUgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgaHlwZXJwYXJhbWV0ZXJzPzogSm9iQ3JlYXRlUGFyYW1zLkh5cGVycGFyYW1ldGVycztcblxuICAvKipcbiAgICogQSBzdHJpbmcgb2YgdXAgdG8gNDAgY2hhcmFjdGVycyB0aGF0IHdpbGwgYmUgYWRkZWQgdG8geW91ciBmaW5lLXR1bmVkIG1vZGVsXG4gICAqIG5hbWUuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBhIGBzdWZmaXhgIG9mIFwiY3VzdG9tLW1vZGVsLW5hbWVcIiB3b3VsZCBwcm9kdWNlIGEgbW9kZWwgbmFtZSBsaWtlXG4gICAqIGBmdDpncHQtMy41LXR1cmJvOm9wZW5haTpjdXN0b20tbW9kZWwtbmFtZTo3cDRsVVJlbGAuXG4gICAqL1xuICBzdWZmaXg/OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgYW4gdXBsb2FkZWQgZmlsZSB0aGF0IGNvbnRhaW5zIHZhbGlkYXRpb24gZGF0YS5cbiAgICpcbiAgICogSWYgeW91IHByb3ZpZGUgdGhpcyBmaWxlLCB0aGUgZGF0YSBpcyB1c2VkIHRvIGdlbmVyYXRlIHZhbGlkYXRpb24gbWV0cmljc1xuICAgKiBwZXJpb2RpY2FsbHkgZHVyaW5nIGZpbmUtdHVuaW5nLiBUaGVzZSBtZXRyaWNzIGNhbiBiZSB2aWV3ZWQgaW4gdGhlIGZpbmUtdHVuaW5nXG4gICAqIHJlc3VsdHMgZmlsZS4gVGhlIHNhbWUgZGF0YSBzaG91bGQgbm90IGJlIHByZXNlbnQgaW4gYm90aCB0cmFpbiBhbmQgdmFsaWRhdGlvblxuICAgKiBmaWxlcy5cbiAgICpcbiAgICogWW91ciBkYXRhc2V0IG11c3QgYmUgZm9ybWF0dGVkIGFzIGEgSlNPTkwgZmlsZS4gWW91IG11c3QgdXBsb2FkIHlvdXIgZmlsZSB3aXRoXG4gICAqIHRoZSBwdXJwb3NlIGBmaW5lLXR1bmVgLlxuICAgKlxuICAgKiBTZWUgdGhlIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdmFsaWRhdGlvbl9maWxlPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBKb2JDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGh5cGVycGFyYW1ldGVycyB1c2VkIGZvciB0aGUgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBIeXBlcnBhcmFtZXRlcnMge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgZXBvY2hzIHRvIHRyYWluIHRoZSBtb2RlbCBmb3IuIEFuIGVwb2NoIHJlZmVycyB0byBvbmUgZnVsbCBjeWNsZVxuICAgICAqIHRocm91Z2ggdGhlIHRyYWluaW5nIGRhdGFzZXQuXG4gICAgICovXG4gICAgbl9lcG9jaHM/OiAnYXV0bycgfCBudW1iZXI7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBKb2JMaXN0UGFyYW1zIGV4dGVuZHMgQ3Vyc29yUGFnZVBhcmFtcyB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIEpvYkxpc3RFdmVudHNQYXJhbXMgZXh0ZW5kcyBDdXJzb3JQYWdlUGFyYW1zIHt9XG5cbmV4cG9ydCBuYW1lc3BhY2UgSm9icyB7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZ0pvYiA9IEFQSS5GaW5lVHVuaW5nSm9iO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2JFdmVudCA9IEFQSS5GaW5lVHVuaW5nSm9iRXZlbnQ7XG4gIGV4cG9ydCB0eXBlIEZpbmVUdW5pbmdKb2JzUGFnZSA9IF9GaW5lVHVuaW5nSm9ic1BhZ2U7XG4gIGV4cG9ydCB0eXBlIEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlID0gX0ZpbmVUdW5pbmdKb2JFdmVudHNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEpvYkNyZWF0ZVBhcmFtcyA9IEFQSS5Kb2JDcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSm9iTGlzdFBhcmFtcyA9IEFQSS5Kb2JMaXN0UGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEpvYkxpc3RFdmVudHNQYXJhbXMgPSBBUEkuSm9iTGlzdEV2ZW50c1BhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uLy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCB7IEpvYnMgfSBmcm9tICcuL2pvYnMuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgRmluZVR1bmluZyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgam9iczogSm9icyA9IG5ldyBKb2JzKHRoaXMuY2xpZW50KTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaW5lVHVuaW5nIHtcbiAgZXhwb3J0IGltcG9ydCBKb2JzID0gQVBJLkpvYnM7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZ0pvYiA9IEFQSS5GaW5lVHVuaW5nSm9iO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2JFdmVudCA9IEFQSS5GaW5lVHVuaW5nSm9iRXZlbnQ7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZ0pvYnNQYWdlID0gQVBJLkZpbmVUdW5pbmdKb2JzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSA9IEFQSS5GaW5lVHVuaW5nSm9iRXZlbnRzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBKb2JDcmVhdGVQYXJhbXMgPSBBUEkuSm9iQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEpvYkxpc3RQYXJhbXMgPSBBUEkuSm9iTGlzdFBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBKb2JMaXN0RXZlbnRzUGFyYW1zID0gQVBJLkpvYkxpc3RFdmVudHNQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgdHlwZSBVcGxvYWRhYmxlLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi9jb3JlLmpzJztcblxuZXhwb3J0IGNsYXNzIEltYWdlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB2YXJpYXRpb24gb2YgYSBnaXZlbiBpbWFnZS5cbiAgICovXG4gIGNyZWF0ZVZhcmlhdGlvbihcbiAgICBib2R5OiBJbWFnZUNyZWF0ZVZhcmlhdGlvblBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEltYWdlc1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ltYWdlcy92YXJpYXRpb25zJywgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlZGl0ZWQgb3IgZXh0ZW5kZWQgaW1hZ2UgZ2l2ZW4gYW4gb3JpZ2luYWwgaW1hZ2UgYW5kIGEgcHJvbXB0LlxuICAgKi9cbiAgZWRpdChib2R5OiBJbWFnZUVkaXRQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEltYWdlc1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ltYWdlcy9lZGl0cycsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyh7IGJvZHksIC4uLm9wdGlvbnMgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW1hZ2UgZ2l2ZW4gYSBwcm9tcHQuXG4gICAqL1xuICBnZW5lcmF0ZShib2R5OiBJbWFnZUdlbmVyYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxJbWFnZXNSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9pbWFnZXMvZ2VuZXJhdGlvbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSB1cmwgb3IgdGhlIGNvbnRlbnQgb2YgYW4gaW1hZ2UgZ2VuZXJhdGVkIGJ5IHRoZSBPcGVuQUkgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBiYXNlNjQtZW5jb2RlZCBKU09OIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2UsIGlmIGByZXNwb25zZV9mb3JtYXRgIGlzXG4gICAqIGBiNjRfanNvbmAuXG4gICAqL1xuICBiNjRfanNvbj86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIFVSTCBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlLCBpZiBgcmVzcG9uc2VfZm9ybWF0YCBpcyBgdXJsYCAoZGVmYXVsdCkuXG4gICAqL1xuICB1cmw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VzUmVzcG9uc2Uge1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgZGF0YTogQXJyYXk8SW1hZ2U+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBpbWFnZSB0byB1c2UgYXMgdGhlIGJhc2lzIGZvciB0aGUgdmFyaWF0aW9uKHMpLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsXG4gICAqIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuXG4gICAqL1xuICBpbWFnZTogVXBsb2FkYWJsZTtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgYHVybGAgb3JcbiAgICogYGI2NF9qc29uYC5cbiAgICovXG4gIHJlc3BvbnNlX2Zvcm1hdD86ICd1cmwnIHwgJ2I2NF9qc29uJyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiBgMjU2eDI1NmAsIGA1MTJ4NTEyYCwgb3JcbiAgICogYDEwMjR4MTAyNGAuXG4gICAqL1xuICBzaXplPzogJzI1NngyNTYnIHwgJzUxMng1MTInIHwgJzEwMjR4MTAyNCcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZUVkaXRQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGltYWdlIHRvIGVkaXQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS4gSWYgbWFza1xuICAgKiBpcyBub3QgcHJvdmlkZWQsIGltYWdlIG11c3QgaGF2ZSB0cmFuc3BhcmVuY3ksIHdoaWNoIHdpbGwgYmUgdXNlZCBhcyB0aGUgbWFzay5cbiAgICovXG4gIGltYWdlOiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBBIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGRlc2lyZWQgaW1hZ2UocykuIFRoZSBtYXhpbXVtIGxlbmd0aCBpcyAxMDAwXG4gICAqIGNoYXJhY3RlcnMuXG4gICAqL1xuICBwcm9tcHQ6IHN0cmluZztcblxuICAvKipcbiAgICogQW4gYWRkaXRpb25hbCBpbWFnZSB3aG9zZSBmdWxseSB0cmFuc3BhcmVudCBhcmVhcyAoZS5nLiB3aGVyZSBhbHBoYSBpcyB6ZXJvKVxuICAgKiBpbmRpY2F0ZSB3aGVyZSBgaW1hZ2VgIHNob3VsZCBiZSBlZGl0ZWQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuXG4gICAqIDRNQiwgYW5kIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9ucyBhcyBgaW1hZ2VgLlxuICAgKi9cbiAgbWFzaz86IFVwbG9hZGFibGU7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAqL1xuICBuPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mIGB1cmxgIG9yXG4gICAqIGBiNjRfanNvbmAuXG4gICAqL1xuICByZXNwb25zZV9mb3JtYXQ/OiAndXJsJyB8ICdiNjRfanNvbicgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgYDI1NngyNTZgLCBgNTEyeDUxMmAsIG9yXG4gICAqIGAxMDI0eDEwMjRgLlxuICAgKi9cbiAgc2l6ZT86ICcyNTZ4MjU2JyB8ICc1MTJ4NTEyJyB8ICcxMDI0eDEwMjQnIHwgbnVsbDtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3JcbiAgICogYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICovXG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VHZW5lcmF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBBIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGRlc2lyZWQgaW1hZ2UocykuIFRoZSBtYXhpbXVtIGxlbmd0aCBpcyAxMDAwXG4gICAqIGNoYXJhY3RlcnMuXG4gICAqL1xuICBwcm9tcHQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgYHVybGAgb3JcbiAgICogYGI2NF9qc29uYC5cbiAgICovXG4gIHJlc3BvbnNlX2Zvcm1hdD86ICd1cmwnIHwgJ2I2NF9qc29uJyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiBgMjU2eDI1NmAsIGA1MTJ4NTEyYCwgb3JcbiAgICogYDEwMjR4MTAyNGAuXG4gICAqL1xuICBzaXplPzogJzI1NngyNTYnIHwgJzUxMng1MTInIHwgJzEwMjR4MTAyNCcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBJbWFnZXMge1xuICBleHBvcnQgaW1wb3J0IEltYWdlID0gQVBJLkltYWdlO1xuICBleHBvcnQgaW1wb3J0IEltYWdlc1Jlc3BvbnNlID0gQVBJLkltYWdlc1Jlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IEltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zID0gQVBJLkltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEltYWdlRWRpdFBhcmFtcyA9IEFQSS5JbWFnZUVkaXRQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VHZW5lcmF0ZVBhcmFtcyA9IEFQSS5JbWFnZUdlbmVyYXRlUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IFBhZ2UgfSBmcm9tICcuLi9wYWdpbmF0aW9uLmpzJztcblxuZXhwb3J0IGNsYXNzIE1vZGVscyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZGVsIHN1Y2ggYXNcbiAgICogdGhlIG93bmVyIGFuZCBwZXJtaXNzaW9uaW5nLlxuICAgKi9cbiAgcmV0cmlldmUobW9kZWw6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8TW9kZWw+IHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9tb2RlbHMvJHttb2RlbH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoXG4gICAqIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgKi9cbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8TW9kZWxzUGFnZSwgTW9kZWw+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KCcvbW9kZWxzJywgTW9kZWxzUGFnZSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgZmluZS10dW5lZCBtb2RlbC4gWW91IG11c3QgaGF2ZSB0aGUgT3duZXIgcm9sZSBpbiB5b3VyIG9yZ2FuaXphdGlvbiB0b1xuICAgKiBkZWxldGUgYSBtb2RlbC5cbiAgICovXG4gIGRlbChtb2RlbDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxNb2RlbERlbGV0ZWQ+IHtcbiAgICByZXR1cm4gdGhpcy5kZWxldGUoYC9tb2RlbHMvJHttb2RlbH1gLCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIE5vdGU6IG5vIHBhZ2luYXRpb24gYWN0dWFsbHkgb2NjdXJzIHlldCwgdGhpcyBpcyBmb3IgZm9yd2FyZHMtY29tcGF0aWJpbGl0eS5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsc1BhZ2UgZXh0ZW5kcyBQYWdlPE1vZGVsPiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9Nb2RlbHNQYWdlID0gTW9kZWxzUGFnZTtcblxuLyoqXG4gKiBEZXNjcmliZXMgYW4gT3BlbkFJIG1vZGVsIG9mZmVyaW5nIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB0aGUgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsIHtcbiAgLyoqXG4gICAqIFRoZSBtb2RlbCBpZGVudGlmaWVyLCB3aGljaCBjYW4gYmUgcmVmZXJlbmNlZCBpbiB0aGUgQVBJIGVuZHBvaW50cy5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgd2hlbiB0aGUgbW9kZWwgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwibW9kZWxcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgb3ducyB0aGUgbW9kZWwuXG4gICAqL1xuICBvd25lZF9ieTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsRGVsZXRlZCB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgZGVsZXRlZDogYm9vbGVhbjtcblxuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBNb2RlbHMge1xuICBleHBvcnQgaW1wb3J0IE1vZGVsID0gQVBJLk1vZGVsO1xuICBleHBvcnQgaW1wb3J0IE1vZGVsRGVsZXRlZCA9IEFQSS5Nb2RlbERlbGV0ZWQ7XG4gIGV4cG9ydCB0eXBlIE1vZGVsc1BhZ2UgPSBfTW9kZWxzUGFnZTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBNb2RlcmF0aW9ucyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENsYXNzaWZpZXMgaWYgdGV4dCB2aW9sYXRlcyBPcGVuQUkncyBDb250ZW50IFBvbGljeVxuICAgKi9cbiAgY3JlYXRlKFxuICAgIGJvZHk6IE1vZGVyYXRpb25DcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxNb2RlcmF0aW9uQ3JlYXRlUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvbW9kZXJhdGlvbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlcmF0aW9uIHtcbiAgLyoqXG4gICAqIEEgbGlzdCBvZiB0aGUgY2F0ZWdvcmllcywgYW5kIHdoZXRoZXIgdGhleSBhcmUgZmxhZ2dlZCBvciBub3QuXG4gICAqL1xuICBjYXRlZ29yaWVzOiBNb2RlcmF0aW9uLkNhdGVnb3JpZXM7XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiB0aGUgY2F0ZWdvcmllcyBhbG9uZyB3aXRoIHRoZWlyIHNjb3JlcyBhcyBwcmVkaWN0ZWQgYnkgbW9kZWwuXG4gICAqL1xuICBjYXRlZ29yeV9zY29yZXM6IE1vZGVyYXRpb24uQ2F0ZWdvcnlTY29yZXM7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGNvbnRlbnQgdmlvbGF0ZXNcbiAgICogW09wZW5BSSdzIHVzYWdlIHBvbGljaWVzXSgvcG9saWNpZXMvdXNhZ2UtcG9saWNpZXMpLlxuICAgKi9cbiAgZmxhZ2dlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBNb2RlcmF0aW9uIHtcbiAgLyoqXG4gICAqIEEgbGlzdCBvZiB0aGUgY2F0ZWdvcmllcywgYW5kIHdoZXRoZXIgdGhleSBhcmUgZmxhZ2dlZCBvciBub3QuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIENhdGVnb3JpZXMge1xuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBleHByZXNzZXMsIGluY2l0ZXMsIG9yIHByb21vdGVzIGhhcmFzc2luZyBsYW5ndWFnZSB0b3dhcmRzIGFueVxuICAgICAqIHRhcmdldC5cbiAgICAgKi9cbiAgICBoYXJhc3NtZW50OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogSGFyYXNzbWVudCBjb250ZW50IHRoYXQgYWxzbyBpbmNsdWRlcyB2aW9sZW5jZSBvciBzZXJpb3VzIGhhcm0gdG93YXJkcyBhbnlcbiAgICAgKiB0YXJnZXQuXG4gICAgICovXG4gICAgJ2hhcmFzc21lbnQvdGhyZWF0ZW5pbmcnOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCB0aGF0IGV4cHJlc3NlcywgaW5jaXRlcywgb3IgcHJvbW90ZXMgaGF0ZSBiYXNlZCBvbiByYWNlLCBnZW5kZXIsXG4gICAgICogZXRobmljaXR5LCByZWxpZ2lvbiwgbmF0aW9uYWxpdHksIHNleHVhbCBvcmllbnRhdGlvbiwgZGlzYWJpbGl0eSBzdGF0dXMsIG9yXG4gICAgICogY2FzdGUuIEhhdGVmdWwgY29udGVudCBhaW1lZCBhdCBub24tcHJvdGVjdGVkIGdyb3VwcyAoZS5nLiwgY2hlc3MgcGxheWVycykgaXNcbiAgICAgKiBoYXJyYXNzbWVudC5cbiAgICAgKi9cbiAgICBoYXRlOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogSGF0ZWZ1bCBjb250ZW50IHRoYXQgYWxzbyBpbmNsdWRlcyB2aW9sZW5jZSBvciBzZXJpb3VzIGhhcm0gdG93YXJkcyB0aGUgdGFyZ2V0ZWRcbiAgICAgKiBncm91cCBiYXNlZCBvbiByYWNlLCBnZW5kZXIsIGV0aG5pY2l0eSwgcmVsaWdpb24sIG5hdGlvbmFsaXR5LCBzZXh1YWxcbiAgICAgKiBvcmllbnRhdGlvbiwgZGlzYWJpbGl0eSBzdGF0dXMsIG9yIGNhc3RlLlxuICAgICAqL1xuICAgICdoYXRlL3RocmVhdGVuaW5nJzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBwcm9tb3RlcywgZW5jb3VyYWdlcywgb3IgZGVwaWN0cyBhY3RzIG9mIHNlbGYtaGFybSwgc3VjaCBhc1xuICAgICAqIHN1aWNpZGUsIGN1dHRpbmcsIGFuZCBlYXRpbmcgZGlzb3JkZXJzLlxuICAgICAqL1xuICAgICdzZWxmLWhhcm0nOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCB0aGF0IGVuY291cmFnZXMgcGVyZm9ybWluZyBhY3RzIG9mIHNlbGYtaGFybSwgc3VjaCBhcyBzdWljaWRlLCBjdXR0aW5nLFxuICAgICAqIGFuZCBlYXRpbmcgZGlzb3JkZXJzLCBvciB0aGF0IGdpdmVzIGluc3RydWN0aW9ucyBvciBhZHZpY2Ugb24gaG93IHRvIGNvbW1pdCBzdWNoXG4gICAgICogYWN0cy5cbiAgICAgKi9cbiAgICAnc2VsZi1oYXJtL2luc3RydWN0aW9ucyc6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IHdoZXJlIHRoZSBzcGVha2VyIGV4cHJlc3NlcyB0aGF0IHRoZXkgYXJlIGVuZ2FnaW5nIG9yIGludGVuZCB0byBlbmdhZ2VcbiAgICAgKiBpbiBhY3RzIG9mIHNlbGYtaGFybSwgc3VjaCBhcyBzdWljaWRlLCBjdXR0aW5nLCBhbmQgZWF0aW5nIGRpc29yZGVycy5cbiAgICAgKi9cbiAgICAnc2VsZi1oYXJtL2ludGVudCc6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IG1lYW50IHRvIGFyb3VzZSBzZXh1YWwgZXhjaXRlbWVudCwgc3VjaCBhcyB0aGUgZGVzY3JpcHRpb24gb2Ygc2V4dWFsXG4gICAgICogYWN0aXZpdHksIG9yIHRoYXQgcHJvbW90ZXMgc2V4dWFsIHNlcnZpY2VzIChleGNsdWRpbmcgc2V4IGVkdWNhdGlvbiBhbmRcbiAgICAgKiB3ZWxsbmVzcykuXG4gICAgICovXG4gICAgc2V4dWFsOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogU2V4dWFsIGNvbnRlbnQgdGhhdCBpbmNsdWRlcyBhbiBpbmRpdmlkdWFsIHdobyBpcyB1bmRlciAxOCB5ZWFycyBvbGQuXG4gICAgICovXG4gICAgJ3NleHVhbC9taW5vcnMnOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCB0aGF0IGRlcGljdHMgZGVhdGgsIHZpb2xlbmNlLCBvciBwaHlzaWNhbCBpbmp1cnkuXG4gICAgICovXG4gICAgdmlvbGVuY2U6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRoYXQgZGVwaWN0cyBkZWF0aCwgdmlvbGVuY2UsIG9yIHBoeXNpY2FsIGluanVyeSBpbiBncmFwaGljIGRldGFpbC5cbiAgICAgKi9cbiAgICAndmlvbGVuY2UvZ3JhcGhpYyc6IGJvb2xlYW47XG4gIH1cblxuICAvKipcbiAgICogQSBsaXN0IG9mIHRoZSBjYXRlZ29yaWVzIGFsb25nIHdpdGggdGhlaXIgc2NvcmVzIGFzIHByZWRpY3RlZCBieSBtb2RlbC5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2F0ZWdvcnlTY29yZXMge1xuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdoYXJhc3NtZW50Jy5cbiAgICAgKi9cbiAgICBoYXJhc3NtZW50OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnaGFyYXNzbWVudC90aHJlYXRlbmluZycuXG4gICAgICovXG4gICAgJ2hhcmFzc21lbnQvdGhyZWF0ZW5pbmcnOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnaGF0ZScuXG4gICAgICovXG4gICAgaGF0ZTogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ2hhdGUvdGhyZWF0ZW5pbmcnLlxuICAgICAqL1xuICAgICdoYXRlL3RocmVhdGVuaW5nJzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ3NlbGYtaGFybScuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybSc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdzZWxmLWhhcm0vaW5zdHJ1Y3Rpb25zJy5cbiAgICAgKi9cbiAgICAnc2VsZi1oYXJtL2luc3RydWN0aW9ucyc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdzZWxmLWhhcm0vaW50ZW50Jy5cbiAgICAgKi9cbiAgICAnc2VsZi1oYXJtL2ludGVudCc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdzZXh1YWwnLlxuICAgICAqL1xuICAgIHNleHVhbDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ3NleHVhbC9taW5vcnMnLlxuICAgICAqL1xuICAgICdzZXh1YWwvbWlub3JzJzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ3Zpb2xlbmNlJy5cbiAgICAgKi9cbiAgICB2aW9sZW5jZTogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ3Zpb2xlbmNlL2dyYXBoaWMnLlxuICAgICAqL1xuICAgICd2aW9sZW5jZS9ncmFwaGljJzogbnVtYmVyO1xuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBwb2xpY3kgY29tcGxpYW5jZSByZXBvcnQgYnkgT3BlbkFJJ3MgY29udGVudCBtb2RlcmF0aW9uIG1vZGVsIGFnYWluc3RcbiAqIGEgZ2l2ZW4gaW5wdXQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIG1vZGVyYXRpb24gcmVxdWVzdC5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB1c2VkIHRvIGdlbmVyYXRlIHRoZSBtb2RlcmF0aW9uIHJlc3VsdHMuXG4gICAqL1xuICBtb2RlbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgbW9kZXJhdGlvbiBvYmplY3RzLlxuICAgKi9cbiAgcmVzdWx0czogQXJyYXk8TW9kZXJhdGlvbj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZXJhdGlvbkNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgaW5wdXQgdGV4dCB0byBjbGFzc2lmeVxuICAgKi9cbiAgaW5wdXQ6IHN0cmluZyB8IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIFR3byBjb250ZW50IG1vZGVyYXRpb25zIG1vZGVscyBhcmUgYXZhaWxhYmxlOiBgdGV4dC1tb2RlcmF0aW9uLXN0YWJsZWAgYW5kXG4gICAqIGB0ZXh0LW1vZGVyYXRpb24tbGF0ZXN0YC5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgaXMgYHRleHQtbW9kZXJhdGlvbi1sYXRlc3RgIHdoaWNoIHdpbGwgYmUgYXV0b21hdGljYWxseSB1cGdyYWRlZFxuICAgKiBvdmVyIHRpbWUuIFRoaXMgZW5zdXJlcyB5b3UgYXJlIGFsd2F5cyB1c2luZyBvdXIgbW9zdCBhY2N1cmF0ZSBtb2RlbC4gSWYgeW91IHVzZVxuICAgKiBgdGV4dC1tb2RlcmF0aW9uLXN0YWJsZWAsIHdlIHdpbGwgcHJvdmlkZSBhZHZhbmNlZCBub3RpY2UgYmVmb3JlIHVwZGF0aW5nIHRoZVxuICAgKiBtb2RlbC4gQWNjdXJhY3kgb2YgYHRleHQtbW9kZXJhdGlvbi1zdGFibGVgIG1heSBiZSBzbGlnaHRseSBsb3dlciB0aGFuIGZvclxuICAgKiBgdGV4dC1tb2RlcmF0aW9uLWxhdGVzdGAuXG4gICAqL1xuICBtb2RlbD86IChzdHJpbmcgJiB7fSkgfCAndGV4dC1tb2RlcmF0aW9uLWxhdGVzdCcgfCAndGV4dC1tb2RlcmF0aW9uLXN0YWJsZSc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTW9kZXJhdGlvbnMge1xuICBleHBvcnQgaW1wb3J0IE1vZGVyYXRpb24gPSBBUEkuTW9kZXJhdGlvbjtcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uQ3JlYXRlUmVzcG9uc2UgPSBBUEkuTW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IE1vZGVyYXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuTW9kZXJhdGlvbkNyZWF0ZVBhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4vY29yZS5qcyc7XG5pbXBvcnQgKiBhcyBQYWdpbmF0aW9uIGZyb20gJy4vcGFnaW5hdGlvbi5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9yZXNvdXJjZXMvaW5kZXguanMnO1xuaW1wb3J0ICogYXMgRXJyb3JzIGZyb20gJy4vZXJyb3IuanMnO1xuaW1wb3J0IHR5cGUgeyBBZ2VudCB9IGZyb20gJy4vX3NoaW1zL2FnZW50LmpzJztcbmltcG9ydCAqIGFzIFVwbG9hZHMgZnJvbSAnLi91cGxvYWRzLmpzJztcblxuZXhwb3J0IGludGVyZmFjZSBDbGllbnRPcHRpb25zIHtcbiAgLyoqXG4gICAqIERlZmF1bHRzIHRvIHByb2Nlc3MuZW52W1wiT1BFTkFJX0FQSV9LRVlcIl0uXG4gICAqL1xuICBhcGlLZXk/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhc2UgVVJMIGZvciB0aGUgQVBJLCBlLmcuLCBcImh0dHBzOi8vYXBpLmV4YW1wbGUuY29tL3YyL1wiXG4gICAqL1xuICBiYXNlVVJMPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0aGF0IHRoZSBjbGllbnQgc2hvdWxkIHdhaXQgZm9yIGEgcmVzcG9uc2VcbiAgICogZnJvbSB0aGUgc2VydmVyIGJlZm9yZSB0aW1pbmcgb3V0IGEgc2luZ2xlIHJlcXVlc3QuXG4gICAqXG4gICAqIE5vdGUgdGhhdCByZXF1ZXN0IHRpbWVvdXRzIGFyZSByZXRyaWVkIGJ5IGRlZmF1bHQsIHNvIGluIGEgd29yc3QtY2FzZSBzY2VuYXJpbyB5b3UgbWF5IHdhaXRcbiAgICogbXVjaCBsb25nZXIgdGhhbiB0aGlzIHRpbWVvdXQgYmVmb3JlIHRoZSBwcm9taXNlIHN1Y2NlZWRzIG9yIGZhaWxzLlxuICAgKi9cbiAgdGltZW91dD86IG51bWJlcjtcblxuICAvKipcbiAgICogQW4gSFRUUCBhZ2VudCB1c2VkIHRvIG1hbmFnZSBIVFRQKFMpIGNvbm5lY3Rpb25zLlxuICAgKlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIGFuIGFnZW50IHdpbGwgYmUgY29uc3RydWN0ZWQgYnkgZGVmYXVsdCBpbiB0aGUgTm9kZS5qcyBlbnZpcm9ubWVudCxcbiAgICogb3RoZXJ3aXNlIG5vIGFnZW50IGlzIHVzZWQuXG4gICAqL1xuICBodHRwQWdlbnQ/OiBBZ2VudDtcblxuICAvKipcbiAgICogU3BlY2lmeSBhIGN1c3RvbSBgZmV0Y2hgIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIHdlIHVzZSBgbm9kZS1mZXRjaGAgb24gTm9kZS5qcyBhbmQgb3RoZXJ3aXNlIGV4cGVjdCB0aGF0IGBmZXRjaGAgaXNcbiAgICogZGVmaW5lZCBnbG9iYWxseS5cbiAgICovXG4gIGZldGNoPzogQ29yZS5GZXRjaCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoYXQgdGhlIGNsaWVudCB3aWxsIHJldHJ5IGEgcmVxdWVzdCBpbiBjYXNlIG9mIGFcbiAgICogdGVtcG9yYXJ5IGZhaWx1cmUsIGxpa2UgYSBuZXR3b3JrIGVycm9yIG9yIGEgNVhYIGVycm9yIGZyb20gdGhlIHNlcnZlci5cbiAgICpcbiAgICogQGRlZmF1bHQgMlxuICAgKi9cbiAgbWF4UmV0cmllcz86IG51bWJlcjtcblxuICAvKipcbiAgICogRGVmYXVsdCBoZWFkZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSByZW1vdmVkIGluIGluZGl2aWR1YWwgcmVxdWVzdHMgYnkgZXhwbGljaXRseSBzZXR0aW5nIHRoZVxuICAgKiBoZWFkZXIgdG8gYHVuZGVmaW5lZGAgb3IgYG51bGxgIGluIHJlcXVlc3Qgb3B0aW9ucy5cbiAgICovXG4gIGRlZmF1bHRIZWFkZXJzPzogQ29yZS5IZWFkZXJzO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHF1ZXJ5IHBhcmFtZXRlcnMgdG8gaW5jbHVkZSB3aXRoIGV2ZXJ5IHJlcXVlc3QgdG8gdGhlIEFQSS5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHJlbW92ZWQgaW4gaW5kaXZpZHVhbCByZXF1ZXN0cyBieSBleHBsaWNpdGx5IHNldHRpbmcgdGhlXG4gICAqIHBhcmFtIHRvIGB1bmRlZmluZWRgIGluIHJlcXVlc3Qgb3B0aW9ucy5cbiAgICovXG4gIGRlZmF1bHRRdWVyeT86IENvcmUuRGVmYXVsdFF1ZXJ5O1xuXG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0LCBjbGllbnQtc2lkZSB1c2Ugb2YgdGhpcyBsaWJyYXJ5IGlzIG5vdCBhbGxvd2VkLCBhcyBpdCByaXNrcyBleHBvc2luZyB5b3VyIHNlY3JldCBBUEkgY3JlZGVudGlhbHMgdG8gYXR0YWNrZXJzLlxuICAgKiBPbmx5IHNldCB0aGlzIG9wdGlvbiB0byBgdHJ1ZWAgaWYgeW91IHVuZGVyc3RhbmQgdGhlIHJpc2tzIGFuZCBoYXZlIGFwcHJvcHJpYXRlIG1pdGlnYXRpb25zIGluIHBsYWNlLlxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI/OiBib29sZWFuO1xuXG4gIG9yZ2FuaXphdGlvbj86IHN0cmluZyB8IG51bGw7XG59XG5cbi8qKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBPcGVuQUkgQVBJLiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSSBleHRlbmRzIENvcmUuQVBJQ2xpZW50IHtcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIG9yZ2FuaXphdGlvbj86IHN0cmluZyB8IG51bGw7XG5cbiAgcHJpdmF0ZSBfb3B0aW9uczogQ2xpZW50T3B0aW9ucztcblxuICAvKipcbiAgICogQVBJIENsaWVudCBmb3IgaW50ZXJmYWNpbmcgd2l0aCB0aGUgT3BlbkFJIEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmFwaUtleT1wcm9jZXNzLmVudlsnT1BFTkFJX0FQSV9LRVknXV0gLSBUaGUgQVBJIEtleSB0byBzZW5kIHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iYXNlVVJMXSAtIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhc2UgVVJMIGZvciB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMudGltZW91dD0xMCBtaW51dGVzXSAtIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIChpbiBtaWxsaXNlY29uZHMpIHRoZSBjbGllbnQgd2lsbCB3YWl0IGZvciBhIHJlc3BvbnNlIGJlZm9yZSB0aW1pbmcgb3V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaHR0cEFnZW50XSAtIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChzKSBjb25uZWN0aW9ucy5cbiAgICogQHBhcmFtIHtDb3JlLkZldGNofSBbb3B0cy5mZXRjaF0gLSBTcGVjaWZ5IGEgY3VzdG9tIGBmZXRjaGAgZnVuY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5tYXhSZXRyaWVzPTJdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7Q29yZS5IZWFkZXJzfSBvcHRzLmRlZmF1bHRIZWFkZXJzIC0gRGVmYXVsdCBoZWFkZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7Q29yZS5EZWZhdWx0UXVlcnl9IG9wdHMuZGVmYXVsdFF1ZXJ5IC0gRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI9ZmFsc2VdIC0gQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICogQHBhcmFtIHtzdHJpbmcgfCBudWxsfSBbb3B0cy5vcmdhbml6YXRpb25dXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgYXBpS2V5ID0gQ29yZS5yZWFkRW52KCdPUEVOQUlfQVBJX0tFWScpLFxuICAgIG9yZ2FuaXphdGlvbiA9IENvcmUucmVhZEVudignT1BFTkFJX09SR19JRCcpID8/IG51bGwsXG4gICAgLi4ub3B0c1xuICB9OiBDbGllbnRPcHRpb25zID0ge30pIHtcbiAgICBpZiAoYXBpS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGUgT1BFTkFJX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbWlzc2luZyBvciBlbXB0eTsgZWl0aGVyIHByb3ZpZGUgaXQsIG9yIGluc3RhbnRpYXRlIHRoZSBPcGVuQUkgY2xpZW50IHdpdGggYW4gYXBpS2V5IG9wdGlvbiwgbGlrZSBuZXcgT3BlbkFJKHsgYXBpS2V5OiAnbXkgYXBpS2V5JyB9KS5cIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9uczogQ2xpZW50T3B0aW9ucyA9IHtcbiAgICAgIGFwaUtleSxcbiAgICAgIG9yZ2FuaXphdGlvbixcbiAgICAgIC4uLm9wdHMsXG4gICAgICBiYXNlVVJMOiBvcHRzLmJhc2VVUkwgPz8gYGh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjFgLFxuICAgIH07XG5cbiAgICBpZiAoIW9wdGlvbnMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIgJiYgQ29yZS5pc1J1bm5pbmdJbkJyb3dzZXIoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkl0IGxvb2tzIGxpa2UgeW91J3JlIHJ1bm5pbmcgaW4gYSBicm93c2VyLWxpa2UgZW52aXJvbm1lbnQuXFxuXFxuVGhpcyBpcyBkaXNhYmxlZCBieSBkZWZhdWx0LCBhcyBpdCByaXNrcyBleHBvc2luZyB5b3VyIHNlY3JldCBBUEkgY3JlZGVudGlhbHMgdG8gYXR0YWNrZXJzLlxcbklmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZSxcXG55b3UgY2FuIHNldCB0aGUgYGRhbmdlcm91c2x5QWxsb3dCcm93c2VyYCBvcHRpb24gdG8gYHRydWVgLCBlLmcuLFxcblxcbm5ldyBPcGVuQUkoeyBhcGlLZXksIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlIH0pO1xcblxcbmh0dHBzOi8vaGVscC5vcGVuYWkuY29tL2VuL2FydGljbGVzLzUxMTI1OTUtYmVzdC1wcmFjdGljZXMtZm9yLWFwaS1rZXktc2FmZXR5XFxuXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIHN1cGVyKHtcbiAgICAgIGJhc2VVUkw6IG9wdGlvbnMuYmFzZVVSTCEsXG4gICAgICB0aW1lb3V0OiBvcHRpb25zLnRpbWVvdXQgPz8gNjAwMDAwIC8qIDEwIG1pbnV0ZXMgKi8sXG4gICAgICBodHRwQWdlbnQ6IG9wdGlvbnMuaHR0cEFnZW50LFxuICAgICAgbWF4UmV0cmllczogb3B0aW9ucy5tYXhSZXRyaWVzLFxuICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgfSk7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICB0aGlzLm9yZ2FuaXphdGlvbiA9IG9yZ2FuaXphdGlvbjtcbiAgfVxuXG4gIGNvbXBsZXRpb25zOiBBUEkuQ29tcGxldGlvbnMgPSBuZXcgQVBJLkNvbXBsZXRpb25zKHRoaXMpO1xuICBjaGF0OiBBUEkuQ2hhdCA9IG5ldyBBUEkuQ2hhdCh0aGlzKTtcbiAgZWRpdHM6IEFQSS5FZGl0cyA9IG5ldyBBUEkuRWRpdHModGhpcyk7XG4gIGVtYmVkZGluZ3M6IEFQSS5FbWJlZGRpbmdzID0gbmV3IEFQSS5FbWJlZGRpbmdzKHRoaXMpO1xuICBmaWxlczogQVBJLkZpbGVzID0gbmV3IEFQSS5GaWxlcyh0aGlzKTtcbiAgaW1hZ2VzOiBBUEkuSW1hZ2VzID0gbmV3IEFQSS5JbWFnZXModGhpcyk7XG4gIGF1ZGlvOiBBUEkuQXVkaW8gPSBuZXcgQVBJLkF1ZGlvKHRoaXMpO1xuICBtb2RlcmF0aW9uczogQVBJLk1vZGVyYXRpb25zID0gbmV3IEFQSS5Nb2RlcmF0aW9ucyh0aGlzKTtcbiAgbW9kZWxzOiBBUEkuTW9kZWxzID0gbmV3IEFQSS5Nb2RlbHModGhpcyk7XG4gIGZpbmVUdW5pbmc6IEFQSS5GaW5lVHVuaW5nID0gbmV3IEFQSS5GaW5lVHVuaW5nKHRoaXMpO1xuICBmaW5lVHVuZXM6IEFQSS5GaW5lVHVuZXMgPSBuZXcgQVBJLkZpbmVUdW5lcyh0aGlzKTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdFF1ZXJ5KCk6IENvcmUuRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5kZWZhdWx0UXVlcnk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdEhlYWRlcnMob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMob3B0cyksXG4gICAgICAnT3BlbkFJLU9yZ2FuaXphdGlvbic6IHRoaXMub3JnYW5pemF0aW9uLFxuICAgICAgLi4udGhpcy5fb3B0aW9ucy5kZWZhdWx0SGVhZGVycyxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGF1dGhIZWFkZXJzKG9wdHM6IENvcmUuRmluYWxSZXF1ZXN0T3B0aW9ucyk6IENvcmUuSGVhZGVycyB7XG4gICAgcmV0dXJuIHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAgfTtcbiAgfVxuXG4gIHN0YXRpYyBPcGVuQUkgPSB0aGlzO1xuXG4gIHN0YXRpYyBBUElFcnJvciA9IEVycm9ycy5BUElFcnJvcjtcbiAgc3RhdGljIEFQSUNvbm5lY3Rpb25FcnJvciA9IEVycm9ycy5BUElDb25uZWN0aW9uRXJyb3I7XG4gIHN0YXRpYyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yID0gRXJyb3JzLkFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3I7XG4gIHN0YXRpYyBBUElVc2VyQWJvcnRFcnJvciA9IEVycm9ycy5BUElVc2VyQWJvcnRFcnJvcjtcbiAgc3RhdGljIE5vdEZvdW5kRXJyb3IgPSBFcnJvcnMuTm90Rm91bmRFcnJvcjtcbiAgc3RhdGljIENvbmZsaWN0RXJyb3IgPSBFcnJvcnMuQ29uZmxpY3RFcnJvcjtcbiAgc3RhdGljIFJhdGVMaW1pdEVycm9yID0gRXJyb3JzLlJhdGVMaW1pdEVycm9yO1xuICBzdGF0aWMgQmFkUmVxdWVzdEVycm9yID0gRXJyb3JzLkJhZFJlcXVlc3RFcnJvcjtcbiAgc3RhdGljIEF1dGhlbnRpY2F0aW9uRXJyb3IgPSBFcnJvcnMuQXV0aGVudGljYXRpb25FcnJvcjtcbiAgc3RhdGljIEludGVybmFsU2VydmVyRXJyb3IgPSBFcnJvcnMuSW50ZXJuYWxTZXJ2ZXJFcnJvcjtcbiAgc3RhdGljIFBlcm1pc3Npb25EZW5pZWRFcnJvciA9IEVycm9ycy5QZXJtaXNzaW9uRGVuaWVkRXJyb3I7XG4gIHN0YXRpYyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IgPSBFcnJvcnMuVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yO1xufVxuXG5leHBvcnQgY29uc3Qge1xuICBBUElFcnJvcixcbiAgQVBJQ29ubmVjdGlvbkVycm9yLFxuICBBUElDb25uZWN0aW9uVGltZW91dEVycm9yLFxuICBBUElVc2VyQWJvcnRFcnJvcixcbiAgTm90Rm91bmRFcnJvcixcbiAgQ29uZmxpY3RFcnJvcixcbiAgUmF0ZUxpbWl0RXJyb3IsXG4gIEJhZFJlcXVlc3RFcnJvcixcbiAgQXV0aGVudGljYXRpb25FcnJvcixcbiAgSW50ZXJuYWxTZXJ2ZXJFcnJvcixcbiAgUGVybWlzc2lvbkRlbmllZEVycm9yLFxuICBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IsXG59ID0gRXJyb3JzO1xuXG5leHBvcnQgaW1wb3J0IHRvRmlsZSA9IFVwbG9hZHMudG9GaWxlO1xuZXhwb3J0IGltcG9ydCBmaWxlRnJvbVBhdGggPSBVcGxvYWRzLmZpbGVGcm9tUGF0aDtcblxuZXhwb3J0IG5hbWVzcGFjZSBPcGVuQUkge1xuICAvLyBIZWxwZXIgZnVuY3Rpb25zXG4gIGV4cG9ydCBpbXBvcnQgdG9GaWxlID0gVXBsb2Fkcy50b0ZpbGU7XG4gIGV4cG9ydCBpbXBvcnQgZmlsZUZyb21QYXRoID0gVXBsb2Fkcy5maWxlRnJvbVBhdGg7XG5cbiAgZXhwb3J0IGltcG9ydCBSZXF1ZXN0T3B0aW9ucyA9IENvcmUuUmVxdWVzdE9wdGlvbnM7XG5cbiAgZXhwb3J0IGltcG9ydCBQYWdlID0gUGFnaW5hdGlvbi5QYWdlO1xuICBleHBvcnQgaW1wb3J0IFBhZ2VSZXNwb25zZSA9IFBhZ2luYXRpb24uUGFnZVJlc3BvbnNlO1xuXG4gIGV4cG9ydCBpbXBvcnQgQ3Vyc29yUGFnZSA9IFBhZ2luYXRpb24uQ3Vyc29yUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBDdXJzb3JQYWdlUGFyYW1zID0gUGFnaW5hdGlvbi5DdXJzb3JQYWdlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEN1cnNvclBhZ2VSZXNwb25zZSA9IFBhZ2luYXRpb24uQ3Vyc29yUGFnZVJlc3BvbnNlO1xuXG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbnMgPSBBUEkuQ29tcGxldGlvbnM7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbiA9IEFQSS5Db21wbGV0aW9uO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DaG9pY2UgPSBBUEkuQ29tcGxldGlvbkNob2ljZTtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uVXNhZ2UgPSBBUEkuQ29tcGxldGlvblVzYWdlO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG4gIGV4cG9ydCBpbXBvcnQgQ2hhdCA9IEFQSS5DaGF0O1xuXG4gIGV4cG9ydCBpbXBvcnQgRWRpdHMgPSBBUEkuRWRpdHM7XG4gIGV4cG9ydCBpbXBvcnQgRWRpdCA9IEFQSS5FZGl0O1xuICBleHBvcnQgaW1wb3J0IEVkaXRDcmVhdGVQYXJhbXMgPSBBUEkuRWRpdENyZWF0ZVBhcmFtcztcblxuICBleHBvcnQgaW1wb3J0IEVtYmVkZGluZ3MgPSBBUEkuRW1iZWRkaW5ncztcbiAgZXhwb3J0IGltcG9ydCBDcmVhdGVFbWJlZGRpbmdSZXNwb25zZSA9IEFQSS5DcmVhdGVFbWJlZGRpbmdSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBFbWJlZGRpbmcgPSBBUEkuRW1iZWRkaW5nO1xuICBleHBvcnQgaW1wb3J0IEVtYmVkZGluZ0NyZWF0ZVBhcmFtcyA9IEFQSS5FbWJlZGRpbmdDcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBGaWxlcyA9IEFQSS5GaWxlcztcbiAgZXhwb3J0IGltcG9ydCBGaWxlQ29udGVudCA9IEFQSS5GaWxlQ29udGVudDtcbiAgZXhwb3J0IGltcG9ydCBGaWxlRGVsZXRlZCA9IEFQSS5GaWxlRGVsZXRlZDtcbiAgZXhwb3J0IGltcG9ydCBGaWxlT2JqZWN0ID0gQVBJLkZpbGVPYmplY3Q7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZU9iamVjdHNQYWdlID0gQVBJLkZpbGVPYmplY3RzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBGaWxlQ3JlYXRlUGFyYW1zID0gQVBJLkZpbGVDcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBJbWFnZXMgPSBBUEkuSW1hZ2VzO1xuICBleHBvcnQgaW1wb3J0IEltYWdlID0gQVBJLkltYWdlO1xuICBleHBvcnQgaW1wb3J0IEltYWdlc1Jlc3BvbnNlID0gQVBJLkltYWdlc1Jlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IEltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zID0gQVBJLkltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEltYWdlRWRpdFBhcmFtcyA9IEFQSS5JbWFnZUVkaXRQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VHZW5lcmF0ZVBhcmFtcyA9IEFQSS5JbWFnZUdlbmVyYXRlUGFyYW1zO1xuXG4gIGV4cG9ydCBpbXBvcnQgQXVkaW8gPSBBUEkuQXVkaW87XG5cbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9ucyA9IEFQSS5Nb2RlcmF0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uID0gQVBJLk1vZGVyYXRpb247XG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlID0gQVBJLk1vZGVyYXRpb25DcmVhdGVSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLk1vZGVyYXRpb25DcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBNb2RlbHMgPSBBUEkuTW9kZWxzO1xuICBleHBvcnQgaW1wb3J0IE1vZGVsID0gQVBJLk1vZGVsO1xuICBleHBvcnQgaW1wb3J0IE1vZGVsRGVsZXRlZCA9IEFQSS5Nb2RlbERlbGV0ZWQ7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZWxzUGFnZSA9IEFQSS5Nb2RlbHNQYWdlO1xuXG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZyA9IEFQSS5GaW5lVHVuaW5nO1xuXG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVzID0gQVBJLkZpbmVUdW5lcztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZSA9IEFQSS5GaW5lVHVuZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUV2ZW50ID0gQVBJLkZpbmVUdW5lRXZlbnQ7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2UgPSBBUEkuRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVzUGFnZSA9IEFQSS5GaW5lVHVuZXNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lQ3JlYXRlUGFyYW1zID0gQVBJLkZpbmVUdW5lQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmcgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBPcGVuQUk7XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUF1Qjs7O0FDQXZCLElBQUFDLG1CQUFrRjs7O0FDQWxGLHNCQUE4RjtBQUt2RixJQUFNLGdCQUFOLGNBQTRCLGlDQUFpQjtBQUFBLEVBR25ELFlBQVlDLE1BQVUsUUFBZ0I7QUFDckMsVUFBTUEsTUFBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2Y7QUFBQSxFQUVBLE1BQU0sVUFBeUI7QUFDOUIsVUFBTSxTQUFTLE1BQU0sS0FBSyxVQUFVO0FBRXBDLFVBQU0sRUFBQyxZQUFXLElBQUk7QUFFdEIsZ0JBQVksTUFBTTtBQUVsQixnQkFBWSxTQUFTLE1BQU0sRUFBQyxNQUFNLHVCQUFzQixDQUFDO0FBR3pELFVBQU0sZ0JBQWdCLFlBQVksU0FBUyxLQUFLO0FBQUEsTUFDL0MsTUFBTTtBQUFBLE1BQ04sTUFBTTtBQUFBLElBQ1AsQ0FBQztBQUdELGtCQUFjLE1BQU0sV0FBVztBQUcvQixVQUFNLFlBQVksWUFBWSxTQUFTLEtBQUs7QUFBQSxNQUMzQyxNQUFNO0FBQUEsSUFDUCxDQUFDO0FBRUQsVUFBTSxhQUFhLFlBQVksU0FBUyxLQUFLO0FBQUEsTUFDNUMsTUFBTTtBQUFBLElBQ1AsQ0FBQztBQUVELFVBQU0sWUFBWSxZQUFZLFNBQVMsS0FBSztBQUFBLE1BQzFDLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxJQUNSLENBQUM7QUFFRCxVQUFNLGFBQWEsWUFBWSxTQUFTLEtBQUs7QUFBQSxNQUM1QyxNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsSUFDUCxDQUFDO0FBRUQsY0FBVSxZQUFZLFNBQVM7QUFDL0IsZUFBVyxZQUFZLFVBQVU7QUFFakMsZ0JBQVksU0FBUyxLQUFLLEVBQUMsTUFBTSxxQ0FBb0MsQ0FBQztBQUl0RSxnQkFBWSxTQUFTLE1BQU0sRUFBQyxNQUFNLFVBQVMsQ0FBQztBQUU1QyxRQUFJLHdCQUFRLFdBQVcsRUFDckIsUUFBUSxTQUFTLEVBQ2pCLFFBQVEsMkZBQTJGLEVBQ25HLFFBQVEsVUFBUSxLQUNmLGVBQWUsZ0JBQWdCLEVBQy9CLFNBQVMsS0FBSyxPQUFPLFNBQVMsU0FBUyxHQUFHLEtBQUssT0FBTyxTQUFTLE9BQU8sTUFBTSxHQUFHLENBQUMsUUFBUSxLQUFLLE9BQU8sU0FBUyxPQUFPLE1BQU0sRUFBRSxNQUFNLEVBQUUsRUFDcEksU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxPQUFPLFNBQVMsU0FBUztBQUM5QixZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUFDO0FBR0osVUFBTSx1QkFBdUIsQ0FBQyxVQUE2QkMsWUFBa0I7QUFDNUUsTUFBQUEsUUFBTyxRQUFRLFdBQVM7QUFDeEIsaUJBQVMsVUFBVSxPQUFPLEtBQUs7QUFBQSxNQUMvQixDQUFDO0FBQUEsSUFDRjtBQUdBLFFBQUksd0JBQVEsV0FBVyxFQUNyQixRQUFRLE9BQU8sRUFDZixRQUFRLGlCQUFpQixFQUN6QixZQUFZLGNBQVk7QUFFeEIsVUFBSSxDQUFDLEtBQUssT0FBTyxTQUFTLFVBQVUsQ0FBQyxLQUFLLE9BQU8sU0FBUyxPQUFPLFdBQVcsUUFBUSxHQUFHO0FBQ3RGLDZCQUFxQixVQUFVLGFBQWE7QUFBQSxNQUM3QztBQUNBLFVBQUksS0FBSyxPQUFPLFNBQVMsVUFBVSxLQUFLLE9BQU8sU0FBUyxPQUFPLFdBQVcsUUFBUSxHQUFHO0FBQ3BGLDZCQUFxQixVQUFVLGdCQUFnQjtBQUFBLE1BQ2hEO0FBQ0EsVUFBSSxLQUFLLE9BQU8sU0FBUyxjQUFjLFVBQVUsT0FBTyxTQUFTLEdBQUc7QUFDbkUsZUFBTyxRQUFRLENBQUMsVUFBa0I7QUFDakMsbUJBQVMsVUFBVSxPQUFPLEtBQUs7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDRjtBQUNELGVBQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxTQUFTLGlCQUFpQixLQUFLLEVBQzdELFNBQVMsT0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLFFBQVE7QUFDN0IsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUMvQixjQUFNLFlBQVksU0FBUyxjQUFjLFlBQVk7QUFDckQsWUFBSSxXQUFXO0FBQ2Qsb0JBQVUsY0FBYyxZQUFZLEtBQUssT0FBTyxTQUFTLE1BQU0sWUFBWTtBQUFBLFFBQzVFO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsUUFBSSx3QkFBUSxXQUFXLEVBQ3RCLFFBQVEsUUFBUSxFQUNoQixRQUFRLHFCQUFxQixFQUM3QjtBQUFBLE1BQVksVUFBUSxLQUNuQixlQUFlLDhCQUE4QixFQUM3QyxTQUFTLEtBQUssT0FBTyxTQUFTLGdCQUFnQixTQUFZLEtBQUssT0FBTyxTQUFTLGNBQWMsdURBQXVELEVBQ3BKLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLGNBQWMsVUFBVSxTQUFZLFFBQVEsaUJBQWlCO0FBQ2xGLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxDQUFDO0FBQUEsSUFDRjtBQUVBLFFBQUksd0JBQVEsV0FBVyxFQUNyQixRQUFRLFlBQVksRUFDcEIsUUFBUSxTQUFTLGdHQUFnRyx1Q0FBdUMsQ0FBQyxFQUN6SjtBQUFBLE1BQVEsVUFBUSxLQUNmLGVBQWUsTUFBTSxFQUNyQixTQUFTLEtBQUssT0FBTyxTQUFTLFVBQVUsRUFDeEMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsYUFBYTtBQUNsQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQztBQUFBLElBQ0g7QUFFQSxRQUFJLHdCQUFRLFdBQVcsRUFDdEIsUUFBUSxhQUFhLEVBQ3JCLFFBQVEsb0tBQW9LLEVBQzVLO0FBQUEsTUFBVSxZQUFVLE9BQ25CLFVBQVUsR0FBRyxHQUFHLElBQUksRUFDcEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxnQkFBZ0IsU0FBWSxLQUFLLE9BQU8sU0FBUyxjQUFjLGlCQUFpQixXQUFXLEVBQ3pILGtCQUFrQixFQUNsQixTQUFTLE9BQU8sVUFBVTtBQUMxQixhQUFLLE9BQU8sU0FBUyxjQUFjO0FBQ25DLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxDQUFDO0FBQUEsSUFDRjtBQUVBLGFBQVMsU0FBUyxNQUFjLE1BQWdDO0FBQzlELFlBQU0sT0FBTyxJQUFJLGlCQUFpQjtBQUNsQyxZQUFNLE9BQU8sU0FBUyxjQUFjLE1BQU07QUFDMUMsV0FBSyxZQUFZLE9BQU87QUFDeEIsV0FBSyxZQUFZLElBQUk7QUFFckIsWUFBTSxTQUFTLFNBQVMsY0FBYyxHQUFHO0FBQ3pDLGFBQU8sT0FBTztBQUNkLGFBQU8sU0FBUztBQUNoQixhQUFPLE1BQU07QUFDYixhQUFPLFlBQVk7QUFDbkIsV0FBSyxZQUFZLE1BQU07QUFFdkIsYUFBTztBQUFBLElBQ1Q7QUFFQSxRQUFJLHdCQUFRLFdBQVcsRUFDdEIsUUFBUSw4QkFBOEIsRUFDdEMsUUFBUSxxRUFBcUUsRUFDN0U7QUFBQSxNQUFVLENBQUMsV0FDWCxPQUFPLFNBQVMsS0FBSyxPQUFPLFNBQVMsb0JBQW9CLEVBQUUsU0FBUyxDQUFDLFVBQVU7QUFDOUUsYUFBSyxPQUFPLFNBQVMsdUJBQXVCO0FBQzVDLGFBQUssT0FBTyxhQUFhO0FBRXpCLGNBQU0sOEJBQThCLFNBQVMsZUFBZSxzQkFBc0I7QUFDbEYsWUFBSSw2QkFBNkI7QUFDaEMsY0FBSSxPQUFPO0FBQ1Ysd0NBQTRCLE1BQU0sVUFBVTtBQUFBLFVBQzdDLE9BQU87QUFDTix3Q0FBNEIsTUFBTSxVQUFVO0FBQUEsVUFDN0M7QUFBQSxRQUNEO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRjtBQUlBLGdCQUFZLFNBQVMsTUFBTSxFQUFDLE1BQU0sYUFBWSxDQUFDO0FBRS9DLFFBQUksd0JBQVEsV0FBVyxFQUNoQixRQUFRLFdBQVcsRUFDbkIsUUFBUSxvQkFBb0IsRUFDNUI7QUFBQSxNQUFRLFVBQVEsS0FDWixlQUFlLGlCQUFpQixFQUNoQyxTQUFTLEtBQUssT0FBTyxTQUFTLFlBQVksaUJBQWlCLFFBQVEsRUFDbkUsU0FBUyxPQUFPLFVBQVU7QUFDbkMsYUFBSyxPQUFPLFNBQVMsV0FBVyxRQUFRLE1BQU0sWUFBWSxJQUFJLGlCQUFpQjtBQUMvRSxhQUFLLFFBQVEsWUFBWTtBQUN6QixjQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLGNBQU0sWUFBWSxTQUFTLGlCQUFpQixXQUFXO0FBQ3ZELGtCQUFVLFFBQVEsY0FBWTtBQUM3QixtQkFBUyxjQUFjLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFDN0MsQ0FBQztBQUFBLE1BQ08sQ0FBQztBQUFBLElBQ0w7QUFFTixRQUFJLHdCQUFRLFdBQVcsRUFDaEIsUUFBUSxjQUFjLEVBQ3RCLFFBQVEsb0JBQW9CLEVBQzVCO0FBQUEsTUFBUSxVQUFRLEtBQ1osZUFBZSxvQkFBb0IsRUFDbkMsU0FBUyxLQUFLLE9BQU8sU0FBUyxlQUFlLGlCQUFpQixXQUFXLEVBQ3pFLFNBQVMsT0FBTyxVQUFVO0FBQ25DLGFBQUssT0FBTyxTQUFTLGNBQWMsUUFBUSxNQUFNLFlBQVksSUFBSSxpQkFBaUI7QUFDbEYsYUFBSyxRQUFRLFlBQVk7QUFDekIsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUMvQixjQUFNLHFCQUFxQixTQUFTLGNBQWMscUJBQXFCO0FBQ3ZFLGNBQU0sZUFBZSxTQUFTLGlCQUFpQixjQUFjO0FBQzdELFlBQUksb0JBQW9CO0FBQ3ZCLDZCQUFtQixjQUFjLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFDdkQ7QUFDQSxxQkFBYSxRQUFRLGlCQUFlO0FBQ25DLHNCQUFZLGNBQWMsS0FBSyxPQUFPLFNBQVM7QUFBQSxRQUNoRCxDQUFDO0FBQUEsTUFDTyxDQUFDO0FBQUEsSUFDTDtBQUVOLFFBQUk7QUFDSixVQUFNLG9DQUFvQyxpQkFBaUIsU0FBUyxJQUFJLEVBQUUsaUJBQWlCLGlCQUFpQiwwQkFBMEIsRUFBRSxLQUFLO0FBRTdJLFFBQUksd0JBQVEsV0FBVyxFQUNyQixRQUFRLG9DQUFvQyxFQUM1QyxRQUFRLHlEQUF5RCxFQUNqRTtBQUFBLE1BQVUsWUFBVSxPQUNuQixjQUFjLGlCQUFpQixFQUMvQixRQUFRLFdBQVcsRUFDbkIsU0FBUyxnQkFBZ0IsRUFDekIsUUFBUSxZQUFZO0FBQ3BCLGNBQU0sZUFBZSxXQUFXLGlDQUFpQztBQUNqRSxxQkFBYSxTQUFTLFlBQVk7QUFFbEMsY0FBTSxtQkFBbUIsU0FBUyxjQUFjLG1CQUFtQjtBQUNuRSxZQUFJLGtCQUFrQjtBQUNyQixnQkFBTSxlQUFlLGlCQUFpQixpQkFBaUIsY0FBYztBQUNyRSx1QkFBYSxRQUFRLENBQUMsZ0JBQWdCO0FBQ3JDLGtCQUFNLFVBQVU7QUFDaEIsb0JBQVEsTUFBTSxrQkFBa0I7QUFBQSxVQUNqQyxDQUFDO0FBQ0QsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQztBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0YsRUFDQyxlQUFlLENBQUMsVUFBVTtBQUMxQixxQkFBZTtBQUVmLFVBQUksZUFBZSxLQUFLLE9BQU8sU0FBUztBQUV4QyxVQUFJLEtBQUssT0FBTyxTQUFTLDhCQUE4Qix3QkFBd0I7QUFDOUUsdUJBQWUsV0FBVyxpQ0FBaUM7QUFBQSxNQUM1RDtBQUVBLFlBQU0sU0FBUyxZQUFZLEVBQzFCLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGNBQU0sV0FBVyxXQUFXLEtBQUs7QUFDakMsYUFBSyxPQUFPLFNBQVMsNkJBQTZCO0FBQ2xELGNBQU0sbUJBQW1CLFNBQVMsY0FBYyxtQkFBbUI7QUFDbkUsWUFBSSxrQkFBa0I7QUFDckIsZ0JBQU0sZUFBZSxpQkFBaUIsaUJBQWlCLGNBQWM7QUFDckUsdUJBQWEsUUFBUSxDQUFDLGdCQUFnQjtBQUNyQyxrQkFBTSxVQUFVO0FBQ2hCLG9CQUFRLE1BQU0sa0JBQWtCO0FBQUEsVUFDakMsQ0FBQztBQUFBLFFBQ0Y7QUFFQSxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUVGLFFBQUk7QUFDSixVQUFNLG1DQUFtQyxpQkFBaUIsU0FBUyxJQUFJLEVBQUUsaUJBQWlCLGlCQUFpQix5QkFBeUIsRUFBRSxLQUFLO0FBRTNJLFFBQUksd0JBQVEsV0FBVyxFQUNyQixRQUFRLG1DQUFtQyxFQUMzQyxRQUFRLHdEQUF3RCxFQUNoRTtBQUFBLE1BQVUsWUFBVSxPQUNuQixjQUFjLGlCQUFpQixFQUMvQixRQUFRLFdBQVcsRUFDbkIsU0FBUyxnQkFBZ0IsRUFDekIsUUFBUSxZQUFZO0FBQ3BCLGNBQU0sZUFBZSxXQUFXLGdDQUFnQztBQUNoRSxxQkFBYSxTQUFTLFlBQVk7QUFFbEMsY0FBTSxtQkFBbUIsU0FBUyxjQUFjLG1CQUFtQjtBQUNuRSxZQUFJLGtCQUFrQjtBQUNyQixnQkFBTSxjQUFjLGlCQUFpQixpQkFBaUIsYUFBYTtBQUNuRSxzQkFBWSxRQUFRLENBQUMsZUFBZTtBQUNuQyxrQkFBTSxVQUFVO0FBQ2hCLG9CQUFRLE1BQU0sa0JBQWtCO0FBQUEsVUFDakMsQ0FBQztBQUNELGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEM7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGLEVBQ0MsZUFBZSxDQUFDLFVBQVU7QUFDMUIscUJBQWU7QUFFZixVQUFJLGVBQWUsS0FBSyxPQUFPLFNBQVM7QUFFeEMsVUFBSSxLQUFLLE9BQU8sU0FBUyw2QkFBNkIsMEJBQTBCO0FBQy9FLHVCQUFlLFdBQVcsZ0NBQWdDO0FBQUEsTUFDM0Q7QUFFQSxZQUFNLFNBQVMsWUFBWSxFQUN6QixTQUFTLE9BQU8sVUFBVTtBQUMxQixjQUFNLFdBQVcsV0FBVyxLQUFLO0FBQ2pDLGFBQUssT0FBTyxTQUFTLDRCQUE0QjtBQUNqRCxjQUFNLG1CQUFtQixTQUFTLGNBQWMsbUJBQW1CO0FBQ25FLFlBQUksa0JBQWtCO0FBQ3JCLGdCQUFNLGNBQWMsaUJBQWlCLGlCQUFpQixhQUFhO0FBQ25FLHNCQUFZLFFBQVEsQ0FBQyxlQUFlO0FBQ25DLGtCQUFNLFVBQVU7QUFDaEIsb0JBQVEsTUFBTSxrQkFBa0I7QUFBQSxVQUNqQyxDQUFDO0FBQUEsUUFDRjtBQUNGLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxDQUFDO0FBQUEsSUFDRixDQUFDO0FBSUQsZ0JBQVksU0FBUyxNQUFNLEVBQUMsTUFBTSxlQUFjLENBQUM7QUFFakQsUUFBSSx3QkFBUSxXQUFXLEVBQ3RCLFFBQVEsMEJBQTBCLEVBQ2xDLFFBQVEsK0NBQStDLEVBQ3ZEO0FBQUEsTUFBUSxVQUFRLEtBQ04sZUFBZSxNQUFNLEVBQ3JCLFNBQVMsS0FBSyxPQUFPLFNBQVMsbUJBQW1CLGlCQUFpQixlQUFlLEVBQ2pGLFNBQVMsT0FBTyxVQUFVO0FBQ25DLGFBQUssT0FBTyxTQUFTLGtCQUFrQixRQUFRLFFBQVEsaUJBQWlCO0FBQ3hFLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUN2QixDQUFDO0FBQUEsSUFDTDtBQUVOLFFBQUksd0JBQVEsV0FBVyxFQUN0QixRQUFRLG9CQUFvQixFQUM1QixRQUFRLGlDQUFpQyxFQUN6QztBQUFBLE1BQVEsVUFBUSxLQUNOLGVBQWUsa0JBQWtCLEVBQ2pDLFNBQVMsS0FBSyxPQUFPLFNBQVMsb0JBQW9CLGlCQUFpQixnQkFBZ0IsRUFDbkYsU0FBUyxPQUFPLFVBQVU7QUFDbkMsYUFBSyxPQUFPLFNBQVMsbUJBQW1CLFFBQVEsUUFBUSxpQkFBaUI7QUFDekUsWUFBSSxPQUFPO0FBRVYsY0FBSSxDQUFDLEtBQUssT0FBTyxTQUFTLGlCQUFpQixTQUFTLEtBQUssR0FBRztBQUMzRCxpQkFBSyxPQUFPLFNBQVMsb0JBQW9CO0FBQUEsVUFDMUM7QUFFQSxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUUvQixnQkFBTSxXQUFXLElBQUksTUFBTSxTQUFTO0FBR3BDLGdCQUFNLGFBQWEsU0FBUyxLQUFLLFVBQ2hDLEtBQUssS0FBSyxZQUFZLE1BQU0sS0FBSyxPQUFPLFNBQVMsaUJBQWlCLFlBQVksQ0FBQztBQUVoRixjQUFJLFlBQVk7QUFFZixpQkFBSyxRQUFRLE1BQU0sY0FBYztBQUFBLFVBQ2xDLE9BQU87QUFFTixpQkFBSyxRQUFRLE1BQU0sY0FBYztBQUFBLFVBQ2xDO0FBQUEsUUFDRCxPQUFPO0FBRU4sZUFBSyxRQUFRLE1BQU0sY0FBYztBQUNqQyxlQUFLLE9BQU8sU0FBUyxtQkFBbUIsaUJBQWlCO0FBQUEsUUFDMUQ7QUFBQSxNQUNRLENBQUM7QUFBQSxJQUNMO0FBRU4sUUFBSSx3QkFBUSxXQUFXLEVBQ3RCLFFBQVEseUJBQXlCLEVBQ2pDLFFBQVEsZ0VBQWdFLEVBQ3hFO0FBQUEsTUFBVSxDQUFDLFdBQ1gsT0FBTyxTQUFTLEtBQUssT0FBTyxTQUFTLG9CQUFvQixFQUFFLFNBQVMsQ0FBQyxVQUFVO0FBQzlFLGFBQUssT0FBTyxTQUFTLHVCQUF1QjtBQUM1QyxhQUFLLE9BQU8sYUFBYTtBQUFBLE1BQzFCLENBQUM7QUFBQSxJQUNGO0FBSUEsZ0JBQVksU0FBUyxNQUFNLEVBQUMsTUFBTSxXQUFVLENBQUM7QUFFN0MsUUFBSSx3QkFBUSxXQUFXLEVBQ3RCLFFBQVEsaUJBQWlCLEVBQ3pCLFFBQVEsb0NBQW9DLEVBQzVDO0FBQUEsTUFBVSxZQUFVLE9BQ25CLGNBQWMsaUJBQWlCLEVBQy9CLFFBQVEsV0FBVyxFQUNuQixTQUFTLGdCQUFnQixFQUN6QixRQUFRLFlBQVk7QUFDcEIsYUFBSyxPQUFPLFNBQVMsZ0JBQWdCLGlCQUFpQjtBQUN0RCxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLGFBQUssUUFBUTtBQUFBLE1BQ2QsQ0FBQztBQUFBLElBQ0YsRUFDQztBQUFBLE1BQVEsVUFBUSxLQUNmLGVBQWUsMkJBQTJCLEVBQzFDLFNBQVMsS0FBSyxPQUFPLFNBQVMsaUJBQWlCLGlCQUFpQixhQUFhLEVBQzdFLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLGdCQUFnQixRQUFRLFFBQVEsaUJBQWlCO0FBQ3RFLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxDQUFDO0FBQUEsSUFDSDtBQUVBLFFBQUksd0JBQVEsV0FBVyxFQUN0QixRQUFRLGNBQWMsRUFDdEIsUUFBUSxVQUFVLGlDQUFpQyx3Q0FBd0MsRUFBRSxDQUFDLEVBQzlGO0FBQUEsTUFBUSxVQUFRLEtBQ2YsZUFBZSx1QkFBdUIsRUFDdEMsU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjLGlCQUFpQixVQUFVLEVBQ3ZFLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLGFBQWEsUUFBUSxRQUFRLGlCQUFpQjtBQUNuRSxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQztBQUFBLElBQ0g7QUFFQSxhQUFTLFVBQVUsTUFBYyxNQUFjLFlBQXNDO0FBQ3BGLFlBQU0sT0FBTyxJQUFJLGlCQUFpQjtBQUNsQyxZQUFNLE9BQU8sU0FBUyxjQUFjLE1BQU07QUFDMUMsV0FBSyxZQUFZLE9BQU87QUFDeEIsV0FBSyxZQUFZLElBQUk7QUFFckIsWUFBTSxTQUFTLFNBQVMsY0FBYyxHQUFHO0FBQ3pDLGFBQU8sT0FBTztBQUNkLGFBQU8sU0FBUztBQUNoQixhQUFPLE1BQU07QUFDYixhQUFPLFlBQVk7QUFDbkIsV0FBSyxZQUFZLE1BQU07QUFFdkIsWUFBTSxRQUFRLFNBQVMsY0FBYyxNQUFNO0FBQzNDLFlBQU0sWUFBWSxNQUFNO0FBQ3hCLFdBQUssWUFBWSxLQUFLO0FBRXRCLGFBQU87QUFBQSxJQUNSO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxZQUFZO0FBQ2pCLFVBQU0sYUFBYSxLQUFLLE9BQU8sU0FBUztBQUV4QyxRQUFJLENBQUMsWUFBWTtBQUNoQjtBQUFBLElBQ0Q7QUFFQSxVQUFNLE1BQU0sYUFBYTtBQUV6QixRQUFJO0FBQ0gsWUFBTSxXQUFXLFVBQU0sNEJBQVc7QUFBQSxRQUNqQztBQUFBLFFBQ0EsUUFBUTtBQUFBLFFBQ1IsU0FBUztBQUFBLFVBQ1IsZ0JBQWdCO0FBQUEsUUFDakI7QUFBQSxNQUNELENBQUM7QUFFRCxZQUFNLFdBQVcsU0FBUztBQUUxQixZQUFNLFNBQVMsU0FBUyxLQUFLLElBQUksQ0FBQyxVQUF3QixNQUFNLEVBQUU7QUFFbEUsV0FBSyxPQUFPLFNBQVMsU0FBUztBQUU5QixhQUFPO0FBQUEsSUFFUixTQUFTLE9BQVA7QUFDRCxjQUFRLE1BQU0sVUFBVSxLQUFLO0FBQUEsSUFDOUI7QUFBQSxFQUNEO0FBQ0Q7QUFFTyxTQUFTLFdBQVcsWUFBNEI7QUFDbkQsTUFBSSxXQUFXLFdBQVcsS0FBSyxHQUFHO0FBRWhDLFVBQU0sUUFBUSxXQUFXLE1BQU0sa0JBQWtCO0FBQ2pELFFBQUksVUFBVSxRQUFRLE1BQU0sU0FBUyxHQUFHO0FBQzVDLFlBQU0sSUFBSSxNQUFNLG1CQUFtQjtBQUFBLElBQ3BDO0FBRUssVUFBTSxJQUFJLFNBQVMsTUFBTSxDQUFDLENBQUMsSUFBSTtBQUMvQixVQUFNLElBQUksU0FBUyxNQUFNLENBQUMsQ0FBQyxJQUFJO0FBQy9CLFVBQU0sSUFBSSxTQUFTLE1BQU0sQ0FBQyxDQUFDLElBQUk7QUFFL0IsVUFBTSxJQUFJLElBQUksTUFBTSxLQUFLLElBQUksS0FBSyxJQUFJLElBQUksSUFBSTtBQUM5QyxVQUFNLElBQUksSUFBSSxJQUFJO0FBQ2xCLFVBQU0sSUFBSSxRQUFRLEdBQUcsR0FBRyxJQUFJLElBQUksQ0FBQztBQUNqQyxVQUFNLElBQUksUUFBUSxHQUFHLEdBQUcsQ0FBQztBQUN6QixVQUFNLElBQUksUUFBUSxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUM7QUFFakMsVUFBTSxRQUFRLFNBQVUsR0FBVztBQUNqQyxZQUFNQyxPQUFNLEtBQUssTUFBTSxJQUFJLEdBQUcsRUFBRSxTQUFTLEVBQUU7QUFDM0MsYUFBT0EsS0FBSSxXQUFXLElBQUksTUFBTUEsT0FBTUE7QUFBQSxJQUN4QztBQUVBLFVBQU0sTUFBTSxNQUFNLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQztBQUMvQyxXQUFPO0FBQUEsRUFDVCxXQUFXLFdBQVcsV0FBVyxLQUFLLEdBQUc7QUFFdkMsVUFBTSxNQUFNLFdBQVcsUUFBUSxHQUFHLElBQUksS0FBSyxNQUFNO0FBQ2pELFVBQU0sV0FBVyxXQUFXLE9BQU8sQ0FBQyxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFNLEdBQUc7QUFFN0QsUUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsU0FBUyxFQUFFLEdBQ2hDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxTQUFTLEVBQUUsR0FDOUIsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLFNBQVMsRUFBRTtBQUVoQyxRQUFJLEVBQUUsVUFBVTtBQUNkLFVBQUksTUFBTTtBQUNaLFFBQUksRUFBRSxVQUFVO0FBQ2QsVUFBSSxNQUFNO0FBQ1osUUFBSSxFQUFFLFVBQVU7QUFDZCxVQUFJLE1BQU07QUFFWixXQUFPLE1BQU0sSUFBSSxJQUFJO0FBQUEsRUFDdkIsT0FBTztBQUVMLFdBQU87QUFBQSxFQUNUO0FBQ0o7QUFFQSxTQUFTLFFBQVEsR0FBVyxHQUFXLEdBQVc7QUFDakQsTUFBSSxJQUFJO0FBQUcsU0FBSztBQUNoQixNQUFJLElBQUk7QUFBRyxTQUFLO0FBQ2hCLE1BQUksSUFBSSxJQUFJO0FBQUcsV0FBTyxLQUFLLElBQUksS0FBSyxJQUFJO0FBQ3hDLE1BQUksSUFBSSxJQUFJO0FBQUcsV0FBTztBQUN0QixNQUFJLElBQUksSUFBSTtBQUFHLFdBQU8sS0FBSyxJQUFJLE1BQU0sSUFBSSxJQUFJLEtBQUs7QUFDbEQsU0FBTztBQUNSOzs7QUN2Z0JBLFNBQVMsY0FBYztBQUNyQixTQUFPO0FBQUEsSUFDTCxPQUFPO0FBQUEsSUFDUCxTQUFTO0FBQUEsSUFDVCxRQUFRO0FBQUEsSUFDUixZQUFZO0FBQUEsSUFDWixLQUFLO0FBQUEsSUFDTCxXQUFXO0FBQUEsSUFDWCxjQUFjO0FBQUEsSUFDZCxXQUFXO0FBQUEsSUFDWCxPQUFPO0FBQUEsSUFDUCxZQUFZO0FBQUEsSUFDWixRQUFRO0FBQUEsSUFDUixVQUFVO0FBQUEsSUFDVixVQUFVO0FBQUEsSUFDVixVQUFVO0FBQUEsSUFDVixXQUFXO0FBQUEsSUFDWCxRQUFRO0FBQUEsSUFDUixhQUFhO0FBQUEsSUFDYixXQUFXO0FBQUEsSUFDWCxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsRUFDVDtBQUNGO0FBRUEsSUFBSSxXQUFXLFlBQVk7QUFFM0IsU0FBUyxlQUFlLGFBQWE7QUFDbkMsYUFBVztBQUNiO0FBS0EsSUFBTSxhQUFhO0FBQ25CLElBQU0sZ0JBQWdCLElBQUksT0FBTyxXQUFXLFFBQVEsR0FBRztBQUN2RCxJQUFNLHFCQUFxQjtBQUMzQixJQUFNLHdCQUF3QixJQUFJLE9BQU8sbUJBQW1CLFFBQVEsR0FBRztBQUN2RSxJQUFNLHFCQUFxQjtBQUFBLEVBQ3pCLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFDUDtBQUNBLElBQU0sdUJBQXVCLENBQUMsT0FBTyxtQkFBbUIsRUFBRTtBQUMxRCxTQUFTLE9BQU8sTUFBTSxRQUFRO0FBQzVCLE1BQUksUUFBUTtBQUNWLFFBQUksV0FBVyxLQUFLLElBQUksR0FBRztBQUN6QixhQUFPLEtBQUssUUFBUSxlQUFlLG9CQUFvQjtBQUFBLElBQ3pEO0FBQUEsRUFDRixPQUFPO0FBQ0wsUUFBSSxtQkFBbUIsS0FBSyxJQUFJLEdBQUc7QUFDakMsYUFBTyxLQUFLLFFBQVEsdUJBQXVCLG9CQUFvQjtBQUFBLElBQ2pFO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFDVDtBQUVBLElBQU0sZUFBZTtBQUtyQixTQUFTLFNBQVMsTUFBTTtBQUV0QixTQUFPLEtBQUssUUFBUSxjQUFjLENBQUMsR0FBRyxNQUFNO0FBQzFDLFFBQUksRUFBRSxZQUFZO0FBQ2xCLFFBQUksTUFBTTtBQUFTLGFBQU87QUFDMUIsUUFBSSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEtBQUs7QUFDdkIsYUFBTyxFQUFFLE9BQU8sQ0FBQyxNQUFNLE1BQ25CLE9BQU8sYUFBYSxTQUFTLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQ2hELE9BQU8sYUFBYSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFBQSxJQUN6QztBQUNBLFdBQU87QUFBQSxFQUNULENBQUM7QUFDSDtBQUVBLElBQU0sUUFBUTtBQU1kLFNBQVMsS0FBSyxPQUFPLEtBQUs7QUFDeEIsVUFBUSxPQUFPLFVBQVUsV0FBVyxRQUFRLE1BQU07QUFDbEQsUUFBTSxPQUFPO0FBQ2IsUUFBTSxNQUFNO0FBQUEsSUFDVixTQUFTLENBQUMsTUFBTSxRQUFRO0FBQ3RCLFlBQU0sSUFBSSxVQUFVO0FBQ3BCLFlBQU0sSUFBSSxRQUFRLE9BQU8sSUFBSTtBQUM3QixjQUFRLE1BQU0sUUFBUSxNQUFNLEdBQUc7QUFDL0IsYUFBTztBQUFBLElBQ1Q7QUFBQSxJQUNBLFVBQVUsTUFBTTtBQUNkLGFBQU8sSUFBSSxPQUFPLE9BQU8sR0FBRztBQUFBLElBQzlCO0FBQUEsRUFDRjtBQUNBLFNBQU87QUFDVDtBQUVBLElBQU0sc0JBQXNCO0FBQzVCLElBQU0sdUJBQXVCO0FBTzdCLFNBQVMsU0FBUyxVQUFVLE1BQU0sTUFBTTtBQUN0QyxNQUFJLFVBQVU7QUFDWixRQUFJO0FBQ0osUUFBSTtBQUNGLGFBQU8sbUJBQW1CLFNBQVMsSUFBSSxDQUFDLEVBQ3JDLFFBQVEscUJBQXFCLEVBQUUsRUFDL0IsWUFBWTtBQUFBLElBQ2pCLFNBQVMsR0FBUDtBQUNBLGFBQU87QUFBQSxJQUNUO0FBQ0EsUUFBSSxLQUFLLFFBQVEsYUFBYSxNQUFNLEtBQUssS0FBSyxRQUFRLFdBQVcsTUFBTSxLQUFLLEtBQUssUUFBUSxPQUFPLE1BQU0sR0FBRztBQUN2RyxhQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0Y7QUFDQSxNQUFJLFFBQVEsQ0FBQyxxQkFBcUIsS0FBSyxJQUFJLEdBQUc7QUFDNUMsV0FBTyxXQUFXLE1BQU0sSUFBSTtBQUFBLEVBQzlCO0FBQ0EsTUFBSTtBQUNGLFdBQU8sVUFBVSxJQUFJLEVBQUUsUUFBUSxRQUFRLEdBQUc7QUFBQSxFQUM1QyxTQUFTLEdBQVA7QUFDQSxXQUFPO0FBQUEsRUFDVDtBQUNBLFNBQU87QUFDVDtBQUVBLElBQU0sV0FBVyxDQUFDO0FBQ2xCLElBQU0sYUFBYTtBQUNuQixJQUFNLFdBQVc7QUFDakIsSUFBTSxTQUFTO0FBTWYsU0FBUyxXQUFXLE1BQU0sTUFBTTtBQUM5QixNQUFJLENBQUMsU0FBUyxNQUFNLElBQUksR0FBRztBQUl6QixRQUFJLFdBQVcsS0FBSyxJQUFJLEdBQUc7QUFDekIsZUFBUyxNQUFNLElBQUksSUFBSSxPQUFPO0FBQUEsSUFDaEMsT0FBTztBQUNMLGVBQVMsTUFBTSxJQUFJLElBQUksTUFBTSxNQUFNLEtBQUssSUFBSTtBQUFBLElBQzlDO0FBQUEsRUFDRjtBQUNBLFNBQU8sU0FBUyxNQUFNLElBQUk7QUFDMUIsUUFBTSxlQUFlLEtBQUssUUFBUSxHQUFHLE1BQU07QUFFM0MsTUFBSSxLQUFLLFVBQVUsR0FBRyxDQUFDLE1BQU0sTUFBTTtBQUNqQyxRQUFJLGNBQWM7QUFDaEIsYUFBTztBQUFBLElBQ1Q7QUFDQSxXQUFPLEtBQUssUUFBUSxVQUFVLElBQUksSUFBSTtBQUFBLEVBQ3hDLFdBQVcsS0FBSyxPQUFPLENBQUMsTUFBTSxLQUFLO0FBQ2pDLFFBQUksY0FBYztBQUNoQixhQUFPO0FBQUEsSUFDVDtBQUNBLFdBQU8sS0FBSyxRQUFRLFFBQVEsSUFBSSxJQUFJO0FBQUEsRUFDdEMsT0FBTztBQUNMLFdBQU8sT0FBTztBQUFBLEVBQ2hCO0FBQ0Y7QUFFQSxJQUFNLFdBQVcsRUFBRSxNQUFNLFNBQVNDLFlBQVc7QUFBQyxFQUFFO0FBRWhELFNBQVMsV0FBVyxVQUFVLE9BQU87QUFHbkMsUUFBTSxNQUFNLFNBQVMsUUFBUSxPQUFPLENBQUMsT0FBTyxRQUFRLFFBQVE7QUFDeEQsUUFBSSxVQUFVLE9BQ1osT0FBTztBQUNULFdBQU8sRUFBRSxRQUFRLEtBQUssSUFBSSxJQUFJLE1BQU07QUFBTSxnQkFBVSxDQUFDO0FBQ3JELFFBQUksU0FBUztBQUdYLGFBQU87QUFBQSxJQUNULE9BQU87QUFFTCxhQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0YsQ0FBQyxHQUNELFFBQVEsSUFBSSxNQUFNLEtBQUs7QUFDekIsTUFBSSxJQUFJO0FBR1IsTUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssR0FBRztBQUFFLFVBQU0sTUFBTTtBQUFBLEVBQUc7QUFDdkMsTUFBSSxNQUFNLFNBQVMsS0FBSyxDQUFDLE1BQU0sTUFBTSxTQUFTLENBQUMsRUFBRSxLQUFLLEdBQUc7QUFBRSxVQUFNLElBQUk7QUFBQSxFQUFHO0FBRXhFLE1BQUksTUFBTSxTQUFTLE9BQU87QUFDeEIsVUFBTSxPQUFPLEtBQUs7QUFBQSxFQUNwQixPQUFPO0FBQ0wsV0FBTyxNQUFNLFNBQVM7QUFBTyxZQUFNLEtBQUssRUFBRTtBQUFBLEVBQzVDO0FBRUEsU0FBTyxJQUFJLE1BQU0sUUFBUSxLQUFLO0FBRTVCLFVBQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLFNBQVMsR0FBRztBQUFBLEVBQ2pEO0FBQ0EsU0FBTztBQUNUO0FBVUEsU0FBUyxNQUFNLEtBQUssR0FBRyxRQUFRO0FBQzdCLFFBQU0sSUFBSSxJQUFJO0FBQ2QsTUFBSSxNQUFNLEdBQUc7QUFDWCxXQUFPO0FBQUEsRUFDVDtBQUdBLE1BQUksVUFBVTtBQUdkLFNBQU8sVUFBVSxHQUFHO0FBQ2xCLFVBQU0sV0FBVyxJQUFJLE9BQU8sSUFBSSxVQUFVLENBQUM7QUFDM0MsUUFBSSxhQUFhLEtBQUssQ0FBQyxRQUFRO0FBQzdCO0FBQUEsSUFDRixXQUFXLGFBQWEsS0FBSyxRQUFRO0FBQ25DO0FBQUEsSUFDRixPQUFPO0FBQ0w7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUVBLFNBQU8sSUFBSSxNQUFNLEdBQUcsSUFBSSxPQUFPO0FBQ2pDO0FBRUEsU0FBUyxtQkFBbUIsS0FBSyxHQUFHO0FBQ2xDLE1BQUksSUFBSSxRQUFRLEVBQUUsQ0FBQyxDQUFDLE1BQU0sSUFBSTtBQUM1QixXQUFPO0FBQUEsRUFDVDtBQUNBLFFBQU0sSUFBSSxJQUFJO0FBQ2QsTUFBSSxRQUFRLEdBQ1YsSUFBSTtBQUNOLFNBQU8sSUFBSSxHQUFHLEtBQUs7QUFDakIsUUFBSSxJQUFJLENBQUMsTUFBTSxNQUFNO0FBQ25CO0FBQUEsSUFDRixXQUFXLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHO0FBQzFCO0FBQUEsSUFDRixXQUFXLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHO0FBQzFCO0FBQ0EsVUFBSSxRQUFRLEdBQUc7QUFDYixlQUFPO0FBQUEsTUFDVDtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0EsU0FBTztBQUNUO0FBRUEsU0FBUyx5QkFBeUIsS0FBSztBQUNyQyxNQUFJLE9BQU8sSUFBSSxZQUFZLENBQUMsSUFBSSxRQUFRO0FBQ3RDLFlBQVEsS0FBSyx5TUFBeU07QUFBQSxFQUN4TjtBQUNGO0FBT0EsU0FBUyxhQUFhLFNBQVMsT0FBTztBQUNwQyxNQUFJLFFBQVEsR0FBRztBQUNiLFdBQU87QUFBQSxFQUNUO0FBQ0EsTUFBSSxTQUFTO0FBQ2IsU0FBTyxRQUFRLEdBQUc7QUFDaEIsUUFBSSxRQUFRLEdBQUc7QUFDYixnQkFBVTtBQUFBLElBQ1o7QUFDQSxjQUFVO0FBQ1YsZUFBVztBQUFBLEVBQ2I7QUFDQSxTQUFPLFNBQVM7QUFDbEI7QUFFQSxTQUFTLFdBQVcsS0FBSyxNQUFNLEtBQUtDLFFBQU87QUFDekMsUUFBTSxPQUFPLEtBQUs7QUFDbEIsUUFBTSxRQUFRLEtBQUssUUFBUSxPQUFPLEtBQUssS0FBSyxJQUFJO0FBQ2hELFFBQU0sT0FBTyxJQUFJLENBQUMsRUFBRSxRQUFRLGVBQWUsSUFBSTtBQUUvQyxNQUFJLElBQUksQ0FBQyxFQUFFLE9BQU8sQ0FBQyxNQUFNLEtBQUs7QUFDNUIsSUFBQUEsT0FBTSxNQUFNLFNBQVM7QUFDckIsVUFBTSxRQUFRO0FBQUEsTUFDWixNQUFNO0FBQUEsTUFDTjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsUUFBUUEsT0FBTSxhQUFhLElBQUk7QUFBQSxJQUNqQztBQUNBLElBQUFBLE9BQU0sTUFBTSxTQUFTO0FBQ3JCLFdBQU87QUFBQSxFQUNUO0FBQ0EsU0FBTztBQUFBLElBQ0wsTUFBTTtBQUFBLElBQ047QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0EsTUFBTSxPQUFPLElBQUk7QUFBQSxFQUNuQjtBQUNGO0FBRUEsU0FBUyx1QkFBdUIsS0FBSyxNQUFNO0FBQ3pDLFFBQU0sb0JBQW9CLElBQUksTUFBTSxlQUFlO0FBRW5ELE1BQUksc0JBQXNCLE1BQU07QUFDOUIsV0FBTztBQUFBLEVBQ1Q7QUFFQSxRQUFNLGVBQWUsa0JBQWtCLENBQUM7QUFFeEMsU0FBTyxLQUNKLE1BQU0sSUFBSSxFQUNWLElBQUksVUFBUTtBQUNYLFVBQU0sb0JBQW9CLEtBQUssTUFBTSxNQUFNO0FBQzNDLFFBQUksc0JBQXNCLE1BQU07QUFDOUIsYUFBTztBQUFBLElBQ1Q7QUFFQSxVQUFNLENBQUMsWUFBWSxJQUFJO0FBRXZCLFFBQUksYUFBYSxVQUFVLGFBQWEsUUFBUTtBQUM5QyxhQUFPLEtBQUssTUFBTSxhQUFhLE1BQU07QUFBQSxJQUN2QztBQUVBLFdBQU87QUFBQSxFQUNULENBQUMsRUFDQSxLQUFLLElBQUk7QUFDZDtBQUtBLElBQU0sWUFBTixNQUFnQjtBQUFBLEVBQ2QsWUFBWUMsVUFBUztBQUNuQixTQUFLLFVBQVVBLFlBQVc7QUFBQSxFQUM1QjtBQUFBLEVBRUEsTUFBTSxLQUFLO0FBQ1QsVUFBTSxNQUFNLEtBQUssTUFBTSxNQUFNLFFBQVEsS0FBSyxHQUFHO0FBQzdDLFFBQUksT0FBTyxJQUFJLENBQUMsRUFBRSxTQUFTLEdBQUc7QUFDNUIsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxNQUNaO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLEtBQUssS0FBSztBQUNSLFVBQU0sTUFBTSxLQUFLLE1BQU0sTUFBTSxLQUFLLEtBQUssR0FBRztBQUMxQyxRQUFJLEtBQUs7QUFDUCxZQUFNLE9BQU8sSUFBSSxDQUFDLEVBQUUsUUFBUSxhQUFhLEVBQUU7QUFDM0MsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxRQUNWLGdCQUFnQjtBQUFBLFFBQ2hCLE1BQU0sQ0FBQyxLQUFLLFFBQVEsV0FDaEIsTUFBTSxNQUFNLElBQUksSUFDaEI7QUFBQSxNQUNOO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLE9BQU8sS0FBSztBQUNWLFVBQU0sTUFBTSxLQUFLLE1BQU0sTUFBTSxPQUFPLEtBQUssR0FBRztBQUM1QyxRQUFJLEtBQUs7QUFDUCxZQUFNLE1BQU0sSUFBSSxDQUFDO0FBQ2pCLFlBQU0sT0FBTyx1QkFBdUIsS0FBSyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBRXJELGFBQU87QUFBQSxRQUNMLE1BQU07QUFBQSxRQUNOO0FBQUEsUUFDQSxNQUFNLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLEtBQUssTUFBTSxPQUFPLFVBQVUsSUFBSSxJQUFJLElBQUksQ0FBQztBQUFBLFFBQzlFO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFFQSxRQUFRLEtBQUs7QUFDWCxVQUFNLE1BQU0sS0FBSyxNQUFNLE1BQU0sUUFBUSxLQUFLLEdBQUc7QUFDN0MsUUFBSSxLQUFLO0FBQ1AsVUFBSSxPQUFPLElBQUksQ0FBQyxFQUFFLEtBQUs7QUFHdkIsVUFBSSxLQUFLLEtBQUssSUFBSSxHQUFHO0FBQ25CLGNBQU0sVUFBVSxNQUFNLE1BQU0sR0FBRztBQUMvQixZQUFJLEtBQUssUUFBUSxVQUFVO0FBQ3pCLGlCQUFPLFFBQVEsS0FBSztBQUFBLFFBQ3RCLFdBQVcsQ0FBQyxXQUFXLEtBQUssS0FBSyxPQUFPLEdBQUc7QUFFekMsaUJBQU8sUUFBUSxLQUFLO0FBQUEsUUFDdEI7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxRQUNWLE9BQU8sSUFBSSxDQUFDLEVBQUU7QUFBQSxRQUNkO0FBQUEsUUFDQSxRQUFRLEtBQUssTUFBTSxPQUFPLElBQUk7QUFBQSxNQUNoQztBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFFQSxHQUFHLEtBQUs7QUFDTixVQUFNLE1BQU0sS0FBSyxNQUFNLE1BQU0sR0FBRyxLQUFLLEdBQUc7QUFDeEMsUUFBSSxLQUFLO0FBQ1AsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxNQUNaO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLFdBQVcsS0FBSztBQUNkLFVBQU0sTUFBTSxLQUFLLE1BQU0sTUFBTSxXQUFXLEtBQUssR0FBRztBQUNoRCxRQUFJLEtBQUs7QUFDUCxZQUFNLE9BQU8sSUFBSSxDQUFDLEVBQUUsUUFBUSxnQkFBZ0IsRUFBRTtBQUM5QyxZQUFNLE1BQU0sS0FBSyxNQUFNLE1BQU07QUFDN0IsV0FBSyxNQUFNLE1BQU0sTUFBTTtBQUN2QixZQUFNLFNBQVMsS0FBSyxNQUFNLFlBQVksSUFBSTtBQUMxQyxXQUFLLE1BQU0sTUFBTSxNQUFNO0FBQ3ZCLGFBQU87QUFBQSxRQUNMLE1BQU07QUFBQSxRQUNOLEtBQUssSUFBSSxDQUFDO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLEtBQUssS0FBSztBQUNSLFFBQUksTUFBTSxLQUFLLE1BQU0sTUFBTSxLQUFLLEtBQUssR0FBRztBQUN4QyxRQUFJLEtBQUs7QUFDUCxVQUFJLEtBQUssUUFBUSxXQUFXLFFBQVEsR0FBRyxXQUFXLG1CQUNoRCxNQUFNLFVBQVUsU0FBUyxjQUFjO0FBRXpDLFVBQUksT0FBTyxJQUFJLENBQUMsRUFBRSxLQUFLO0FBQ3ZCLFlBQU0sWUFBWSxLQUFLLFNBQVM7QUFFaEMsWUFBTSxPQUFPO0FBQUEsUUFDWCxNQUFNO0FBQUEsUUFDTixLQUFLO0FBQUEsUUFDTCxTQUFTO0FBQUEsUUFDVCxPQUFPLFlBQVksQ0FBQyxLQUFLLE1BQU0sR0FBRyxFQUFFLElBQUk7QUFBQSxRQUN4QyxPQUFPO0FBQUEsUUFDUCxPQUFPLENBQUM7QUFBQSxNQUNWO0FBRUEsYUFBTyxZQUFZLGFBQWEsS0FBSyxNQUFNLEVBQUUsTUFBTSxLQUFLO0FBRXhELFVBQUksS0FBSyxRQUFRLFVBQVU7QUFDekIsZUFBTyxZQUFZLE9BQU87QUFBQSxNQUM1QjtBQUdBLFlBQU0sWUFBWSxJQUFJLE9BQU8sV0FBVyxrQ0FBbUM7QUFHM0UsYUFBTyxLQUFLO0FBQ1YsbUJBQVc7QUFDWCxZQUFJLEVBQUUsTUFBTSxVQUFVLEtBQUssR0FBRyxJQUFJO0FBQ2hDO0FBQUEsUUFDRjtBQUVBLFlBQUksS0FBSyxNQUFNLE1BQU0sR0FBRyxLQUFLLEdBQUcsR0FBRztBQUNqQztBQUFBLFFBQ0Y7QUFFQSxjQUFNLElBQUksQ0FBQztBQUNYLGNBQU0sSUFBSSxVQUFVLElBQUksTUFBTTtBQUU5QixlQUFPLElBQUksQ0FBQyxFQUFFLE1BQU0sTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsUUFBUSxDQUFDLE1BQU0sSUFBSSxPQUFPLElBQUksRUFBRSxNQUFNLENBQUM7QUFDL0UsbUJBQVcsSUFBSSxNQUFNLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFFL0IsWUFBSSxLQUFLLFFBQVEsVUFBVTtBQUN6QixtQkFBUztBQUNULHlCQUFlLEtBQUssU0FBUztBQUFBLFFBQy9CLE9BQU87QUFDTCxtQkFBUyxJQUFJLENBQUMsRUFBRSxPQUFPLE1BQU07QUFDN0IsbUJBQVMsU0FBUyxJQUFJLElBQUk7QUFDMUIseUJBQWUsS0FBSyxNQUFNLE1BQU07QUFDaEMsb0JBQVUsSUFBSSxDQUFDLEVBQUU7QUFBQSxRQUNuQjtBQUVBLG9CQUFZO0FBRVosWUFBSSxDQUFDLFFBQVEsT0FBTyxLQUFLLFFBQVEsR0FBRztBQUNsQyxpQkFBTyxXQUFXO0FBQ2xCLGdCQUFNLElBQUksVUFBVSxTQUFTLFNBQVMsQ0FBQztBQUN2QyxxQkFBVztBQUFBLFFBQ2I7QUFFQSxZQUFJLENBQUMsVUFBVTtBQUNiLGdCQUFNLGtCQUFrQixJQUFJLE9BQU8sUUFBUSxLQUFLLElBQUksR0FBRyxTQUFTLENBQUMscURBQXNEO0FBQ3ZILGdCQUFNLFVBQVUsSUFBSSxPQUFPLFFBQVEsS0FBSyxJQUFJLEdBQUcsU0FBUyxDQUFDLHFEQUFxRDtBQUM5RyxnQkFBTSxtQkFBbUIsSUFBSSxPQUFPLFFBQVEsS0FBSyxJQUFJLEdBQUcsU0FBUyxDQUFDLGtCQUFrQjtBQUNwRixnQkFBTSxvQkFBb0IsSUFBSSxPQUFPLFFBQVEsS0FBSyxJQUFJLEdBQUcsU0FBUyxDQUFDLEtBQUs7QUFHeEUsaUJBQU8sS0FBSztBQUNWLHNCQUFVLElBQUksTUFBTSxNQUFNLENBQUMsRUFBRSxDQUFDO0FBQzlCLHVCQUFXO0FBR1gsZ0JBQUksS0FBSyxRQUFRLFVBQVU7QUFDekIseUJBQVcsU0FBUyxRQUFRLDJCQUEyQixJQUFJO0FBQUEsWUFDN0Q7QUFHQSxnQkFBSSxpQkFBaUIsS0FBSyxRQUFRLEdBQUc7QUFDbkM7QUFBQSxZQUNGO0FBR0EsZ0JBQUksa0JBQWtCLEtBQUssUUFBUSxHQUFHO0FBQ3BDO0FBQUEsWUFDRjtBQUdBLGdCQUFJLGdCQUFnQixLQUFLLFFBQVEsR0FBRztBQUNsQztBQUFBLFlBQ0Y7QUFHQSxnQkFBSSxRQUFRLEtBQUssR0FBRyxHQUFHO0FBQ3JCO0FBQUEsWUFDRjtBQUVBLGdCQUFJLFNBQVMsT0FBTyxNQUFNLEtBQUssVUFBVSxDQUFDLFNBQVMsS0FBSyxHQUFHO0FBQ3pELDhCQUFnQixPQUFPLFNBQVMsTUFBTSxNQUFNO0FBQUEsWUFDOUMsT0FBTztBQUVMLGtCQUFJLFdBQVc7QUFDYjtBQUFBLGNBQ0Y7QUFHQSxrQkFBSSxLQUFLLE9BQU8sTUFBTSxLQUFLLEdBQUc7QUFDNUI7QUFBQSxjQUNGO0FBQ0Esa0JBQUksaUJBQWlCLEtBQUssSUFBSSxHQUFHO0FBQy9CO0FBQUEsY0FDRjtBQUNBLGtCQUFJLGtCQUFrQixLQUFLLElBQUksR0FBRztBQUNoQztBQUFBLGNBQ0Y7QUFDQSxrQkFBSSxRQUFRLEtBQUssSUFBSSxHQUFHO0FBQ3RCO0FBQUEsY0FDRjtBQUVBLDhCQUFnQixPQUFPO0FBQUEsWUFDekI7QUFFQSxnQkFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLEtBQUssR0FBRztBQUNsQywwQkFBWTtBQUFBLFlBQ2Q7QUFFQSxtQkFBTyxVQUFVO0FBQ2pCLGtCQUFNLElBQUksVUFBVSxRQUFRLFNBQVMsQ0FBQztBQUN0QyxtQkFBTyxTQUFTLE1BQU0sTUFBTTtBQUFBLFVBQzlCO0FBQUEsUUFDRjtBQUVBLFlBQUksQ0FBQyxLQUFLLE9BQU87QUFFZixjQUFJLG1CQUFtQjtBQUNyQixpQkFBSyxRQUFRO0FBQUEsVUFDZixXQUFXLFlBQVksS0FBSyxHQUFHLEdBQUc7QUFDaEMsZ0NBQW9CO0FBQUEsVUFDdEI7QUFBQSxRQUNGO0FBR0EsWUFBSSxLQUFLLFFBQVEsS0FBSztBQUNwQixtQkFBUyxjQUFjLEtBQUssWUFBWTtBQUN4QyxjQUFJLFFBQVE7QUFDVix3QkFBWSxPQUFPLENBQUMsTUFBTTtBQUMxQiwyQkFBZSxhQUFhLFFBQVEsZ0JBQWdCLEVBQUU7QUFBQSxVQUN4RDtBQUFBLFFBQ0Y7QUFFQSxhQUFLLE1BQU0sS0FBSztBQUFBLFVBQ2QsTUFBTTtBQUFBLFVBQ047QUFBQSxVQUNBLE1BQU0sQ0FBQyxDQUFDO0FBQUEsVUFDUixTQUFTO0FBQUEsVUFDVCxPQUFPO0FBQUEsVUFDUCxNQUFNO0FBQUEsUUFDUixDQUFDO0FBRUQsYUFBSyxPQUFPO0FBQUEsTUFDZDtBQUdBLFdBQUssTUFBTSxLQUFLLE1BQU0sU0FBUyxDQUFDLEVBQUUsTUFBTSxJQUFJLFVBQVU7QUFDdEQsV0FBSyxNQUFNLEtBQUssTUFBTSxTQUFTLENBQUMsRUFBRSxPQUFPLGFBQWEsVUFBVTtBQUNoRSxXQUFLLE1BQU0sS0FBSyxJQUFJLFVBQVU7QUFFOUIsWUFBTSxJQUFJLEtBQUssTUFBTTtBQUdyQixXQUFLLElBQUksR0FBRyxJQUFJLEdBQUcsS0FBSztBQUN0QixhQUFLLE1BQU0sTUFBTSxNQUFNO0FBQ3ZCLGFBQUssTUFBTSxDQUFDLEVBQUUsU0FBUyxLQUFLLE1BQU0sWUFBWSxLQUFLLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBRXBFLFlBQUksQ0FBQyxLQUFLLE9BQU87QUFFZixnQkFBTSxVQUFVLEtBQUssTUFBTSxDQUFDLEVBQUUsT0FBTyxPQUFPLE9BQUssRUFBRSxTQUFTLE9BQU87QUFDbkUsZ0JBQU0sd0JBQXdCLFFBQVEsU0FBUyxLQUFLLFFBQVEsS0FBSyxPQUFLLFNBQVMsS0FBSyxFQUFFLEdBQUcsQ0FBQztBQUUxRixlQUFLLFFBQVE7QUFBQSxRQUNmO0FBQUEsTUFDRjtBQUdBLFVBQUksS0FBSyxPQUFPO0FBQ2QsYUFBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLEtBQUs7QUFDdEIsZUFBSyxNQUFNLENBQUMsRUFBRSxRQUFRO0FBQUEsUUFDeEI7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGO0FBQUEsRUFFQSxLQUFLLEtBQUs7QUFDUixVQUFNLE1BQU0sS0FBSyxNQUFNLE1BQU0sS0FBSyxLQUFLLEdBQUc7QUFDMUMsUUFBSSxLQUFLO0FBQ1AsWUFBTSxRQUFRO0FBQUEsUUFDWixNQUFNO0FBQUEsUUFDTixLQUFLLElBQUksQ0FBQztBQUFBLFFBQ1YsS0FBSyxDQUFDLEtBQUssUUFBUSxjQUNiLElBQUksQ0FBQyxNQUFNLFNBQVMsSUFBSSxDQUFDLE1BQU0sWUFBWSxJQUFJLENBQUMsTUFBTTtBQUFBLFFBQzVELE1BQU0sSUFBSSxDQUFDO0FBQUEsTUFDYjtBQUNBLFVBQUksS0FBSyxRQUFRLFVBQVU7QUFDekIsY0FBTSxPQUFPLEtBQUssUUFBUSxZQUFZLEtBQUssUUFBUSxVQUFVLElBQUksQ0FBQyxDQUFDLElBQUksT0FBTyxJQUFJLENBQUMsQ0FBQztBQUNwRixjQUFNLE9BQU87QUFDYixjQUFNLE9BQU87QUFDYixjQUFNLFNBQVMsS0FBSyxNQUFNLE9BQU8sSUFBSTtBQUFBLE1BQ3ZDO0FBQ0EsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGO0FBQUEsRUFFQSxJQUFJLEtBQUs7QUFDUCxVQUFNLE1BQU0sS0FBSyxNQUFNLE1BQU0sSUFBSSxLQUFLLEdBQUc7QUFDekMsUUFBSSxLQUFLO0FBQ1AsWUFBTSxNQUFNLElBQUksQ0FBQyxFQUFFLFlBQVksRUFBRSxRQUFRLFFBQVEsR0FBRztBQUNwRCxZQUFNLE9BQU8sSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLEVBQUUsUUFBUSxZQUFZLElBQUksRUFBRSxRQUFRLEtBQUssTUFBTSxPQUFPLFVBQVUsSUFBSSxJQUFJO0FBQ25HLFlBQU0sUUFBUSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRSxVQUFVLEdBQUcsSUFBSSxDQUFDLEVBQUUsU0FBUyxDQUFDLEVBQUUsUUFBUSxLQUFLLE1BQU0sT0FBTyxVQUFVLElBQUksSUFBSSxJQUFJLENBQUM7QUFDL0csYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ047QUFBQSxRQUNBLEtBQUssSUFBSSxDQUFDO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLE1BQU0sS0FBSztBQUNULFVBQU0sTUFBTSxLQUFLLE1BQU0sTUFBTSxNQUFNLEtBQUssR0FBRztBQUMzQyxRQUFJLEtBQUs7QUFDUCxZQUFNLE9BQU87QUFBQSxRQUNYLE1BQU07QUFBQSxRQUNOLFFBQVEsV0FBVyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksT0FBSztBQUFFLGlCQUFPLEVBQUUsTUFBTSxFQUFFO0FBQUEsUUFBRyxDQUFDO0FBQUEsUUFDM0QsT0FBTyxJQUFJLENBQUMsRUFBRSxRQUFRLGNBQWMsRUFBRSxFQUFFLE1BQU0sUUFBUTtBQUFBLFFBQ3RELE1BQU0sSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEVBQUUsS0FBSyxJQUFJLElBQUksQ0FBQyxFQUFFLFFBQVEsYUFBYSxFQUFFLEVBQUUsTUFBTSxJQUFJLElBQUksQ0FBQztBQUFBLE1BQ2pGO0FBRUEsVUFBSSxLQUFLLE9BQU8sV0FBVyxLQUFLLE1BQU0sUUFBUTtBQUM1QyxhQUFLLE1BQU0sSUFBSSxDQUFDO0FBRWhCLFlBQUksSUFBSSxLQUFLLE1BQU07QUFDbkIsWUFBSSxHQUFHLEdBQUcsR0FBRztBQUNiLGFBQUssSUFBSSxHQUFHLElBQUksR0FBRyxLQUFLO0FBQ3RCLGNBQUksWUFBWSxLQUFLLEtBQUssTUFBTSxDQUFDLENBQUMsR0FBRztBQUNuQyxpQkFBSyxNQUFNLENBQUMsSUFBSTtBQUFBLFVBQ2xCLFdBQVcsYUFBYSxLQUFLLEtBQUssTUFBTSxDQUFDLENBQUMsR0FBRztBQUMzQyxpQkFBSyxNQUFNLENBQUMsSUFBSTtBQUFBLFVBQ2xCLFdBQVcsWUFBWSxLQUFLLEtBQUssTUFBTSxDQUFDLENBQUMsR0FBRztBQUMxQyxpQkFBSyxNQUFNLENBQUMsSUFBSTtBQUFBLFVBQ2xCLE9BQU87QUFDTCxpQkFBSyxNQUFNLENBQUMsSUFBSTtBQUFBLFVBQ2xCO0FBQUEsUUFDRjtBQUVBLFlBQUksS0FBSyxLQUFLO0FBQ2QsYUFBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLEtBQUs7QUFDdEIsZUFBSyxLQUFLLENBQUMsSUFBSSxXQUFXLEtBQUssS0FBSyxDQUFDLEdBQUcsS0FBSyxPQUFPLE1BQU0sRUFBRSxJQUFJLE9BQUs7QUFBRSxtQkFBTyxFQUFFLE1BQU0sRUFBRTtBQUFBLFVBQUcsQ0FBQztBQUFBLFFBQzlGO0FBS0EsWUFBSSxLQUFLLE9BQU87QUFDaEIsYUFBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLEtBQUs7QUFDdEIsZUFBSyxPQUFPLENBQUMsRUFBRSxTQUFTLEtBQUssTUFBTSxPQUFPLEtBQUssT0FBTyxDQUFDLEVBQUUsSUFBSTtBQUFBLFFBQy9EO0FBR0EsWUFBSSxLQUFLLEtBQUs7QUFDZCxhQUFLLElBQUksR0FBRyxJQUFJLEdBQUcsS0FBSztBQUN0QixnQkFBTSxLQUFLLEtBQUssQ0FBQztBQUNqQixlQUFLLElBQUksR0FBRyxJQUFJLElBQUksUUFBUSxLQUFLO0FBQy9CLGdCQUFJLENBQUMsRUFBRSxTQUFTLEtBQUssTUFBTSxPQUFPLElBQUksQ0FBQyxFQUFFLElBQUk7QUFBQSxVQUMvQztBQUFBLFFBQ0Y7QUFFQSxlQUFPO0FBQUEsTUFDVDtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFFQSxTQUFTLEtBQUs7QUFDWixVQUFNLE1BQU0sS0FBSyxNQUFNLE1BQU0sU0FBUyxLQUFLLEdBQUc7QUFDOUMsUUFBSSxLQUFLO0FBQ1AsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxRQUNWLE9BQU8sSUFBSSxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sTUFBTSxJQUFJO0FBQUEsUUFDdEMsTUFBTSxJQUFJLENBQUM7QUFBQSxRQUNYLFFBQVEsS0FBSyxNQUFNLE9BQU8sSUFBSSxDQUFDLENBQUM7QUFBQSxNQUNsQztBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFFQSxVQUFVLEtBQUs7QUFDYixVQUFNLE1BQU0sS0FBSyxNQUFNLE1BQU0sVUFBVSxLQUFLLEdBQUc7QUFDL0MsUUFBSSxLQUFLO0FBQ1AsWUFBTSxPQUFPLElBQUksQ0FBQyxFQUFFLE9BQU8sSUFBSSxDQUFDLEVBQUUsU0FBUyxDQUFDLE1BQU0sT0FDOUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxHQUFHLEVBQUUsSUFDbEIsSUFBSSxDQUFDO0FBQ1QsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxRQUNWO0FBQUEsUUFDQSxRQUFRLEtBQUssTUFBTSxPQUFPLElBQUk7QUFBQSxNQUNoQztBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFFQSxLQUFLLEtBQUs7QUFDUixVQUFNLE1BQU0sS0FBSyxNQUFNLE1BQU0sS0FBSyxLQUFLLEdBQUc7QUFDMUMsUUFBSSxLQUFLO0FBQ1AsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxRQUNWLE1BQU0sSUFBSSxDQUFDO0FBQUEsUUFDWCxRQUFRLEtBQUssTUFBTSxPQUFPLElBQUksQ0FBQyxDQUFDO0FBQUEsTUFDbEM7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBRUEsT0FBTyxLQUFLO0FBQ1YsVUFBTSxNQUFNLEtBQUssTUFBTSxPQUFPLE9BQU8sS0FBSyxHQUFHO0FBQzdDLFFBQUksS0FBSztBQUNQLGFBQU87QUFBQSxRQUNMLE1BQU07QUFBQSxRQUNOLEtBQUssSUFBSSxDQUFDO0FBQUEsUUFDVixNQUFNLE9BQU8sSUFBSSxDQUFDLENBQUM7QUFBQSxNQUNyQjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFFQSxJQUFJLEtBQUs7QUFDUCxVQUFNLE1BQU0sS0FBSyxNQUFNLE9BQU8sSUFBSSxLQUFLLEdBQUc7QUFDMUMsUUFBSSxLQUFLO0FBQ1AsVUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLFVBQVUsUUFBUSxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUc7QUFDcEQsYUFBSyxNQUFNLE1BQU0sU0FBUztBQUFBLE1BQzVCLFdBQVcsS0FBSyxNQUFNLE1BQU0sVUFBVSxVQUFVLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBRztBQUM1RCxhQUFLLE1BQU0sTUFBTSxTQUFTO0FBQUEsTUFDNUI7QUFDQSxVQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sY0FBYyxpQ0FBaUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxHQUFHO0FBQ2pGLGFBQUssTUFBTSxNQUFNLGFBQWE7QUFBQSxNQUNoQyxXQUFXLEtBQUssTUFBTSxNQUFNLGNBQWMsbUNBQW1DLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBRztBQUN6RixhQUFLLE1BQU0sTUFBTSxhQUFhO0FBQUEsTUFDaEM7QUFFQSxhQUFPO0FBQUEsUUFDTCxNQUFNLEtBQUssUUFBUSxXQUNmLFNBQ0E7QUFBQSxRQUNKLEtBQUssSUFBSSxDQUFDO0FBQUEsUUFDVixRQUFRLEtBQUssTUFBTSxNQUFNO0FBQUEsUUFDekIsWUFBWSxLQUFLLE1BQU0sTUFBTTtBQUFBLFFBQzdCLE1BQU0sS0FBSyxRQUFRLFdBQ2QsS0FBSyxRQUFRLFlBQ1osS0FBSyxRQUFRLFVBQVUsSUFBSSxDQUFDLENBQUMsSUFDN0IsT0FBTyxJQUFJLENBQUMsQ0FBQyxJQUNmLElBQUksQ0FBQztBQUFBLE1BQ1g7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBRUEsS0FBSyxLQUFLO0FBQ1IsVUFBTSxNQUFNLEtBQUssTUFBTSxPQUFPLEtBQUssS0FBSyxHQUFHO0FBQzNDLFFBQUksS0FBSztBQUNQLFlBQU0sYUFBYSxJQUFJLENBQUMsRUFBRSxLQUFLO0FBQy9CLFVBQUksQ0FBQyxLQUFLLFFBQVEsWUFBWSxLQUFLLEtBQUssVUFBVSxHQUFHO0FBRW5ELFlBQUksQ0FBRSxLQUFLLEtBQUssVUFBVSxHQUFJO0FBQzVCO0FBQUEsUUFDRjtBQUdBLGNBQU0sYUFBYSxNQUFNLFdBQVcsTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJO0FBQ3RELGFBQUssV0FBVyxTQUFTLFdBQVcsVUFBVSxNQUFNLEdBQUc7QUFDckQ7QUFBQSxRQUNGO0FBQUEsTUFDRixPQUFPO0FBRUwsY0FBTSxpQkFBaUIsbUJBQW1CLElBQUksQ0FBQyxHQUFHLElBQUk7QUFDdEQsWUFBSSxpQkFBaUIsSUFBSTtBQUN2QixnQkFBTSxRQUFRLElBQUksQ0FBQyxFQUFFLFFBQVEsR0FBRyxNQUFNLElBQUksSUFBSTtBQUM5QyxnQkFBTSxVQUFVLFFBQVEsSUFBSSxDQUFDLEVBQUUsU0FBUztBQUN4QyxjQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRSxVQUFVLEdBQUcsY0FBYztBQUMzQyxjQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRSxVQUFVLEdBQUcsT0FBTyxFQUFFLEtBQUs7QUFDM0MsY0FBSSxDQUFDLElBQUk7QUFBQSxRQUNYO0FBQUEsTUFDRjtBQUNBLFVBQUksT0FBTyxJQUFJLENBQUM7QUFDaEIsVUFBSSxRQUFRO0FBQ1osVUFBSSxLQUFLLFFBQVEsVUFBVTtBQUV6QixjQUFNLE9BQU8sZ0NBQWdDLEtBQUssSUFBSTtBQUV0RCxZQUFJLE1BQU07QUFDUixpQkFBTyxLQUFLLENBQUM7QUFDYixrQkFBUSxLQUFLLENBQUM7QUFBQSxRQUNoQjtBQUFBLE1BQ0YsT0FBTztBQUNMLGdCQUFRLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFLE1BQU0sR0FBRyxFQUFFLElBQUk7QUFBQSxNQUN6QztBQUVBLGFBQU8sS0FBSyxLQUFLO0FBQ2pCLFVBQUksS0FBSyxLQUFLLElBQUksR0FBRztBQUNuQixZQUFJLEtBQUssUUFBUSxZQUFZLENBQUUsS0FBSyxLQUFLLFVBQVUsR0FBSTtBQUVyRCxpQkFBTyxLQUFLLE1BQU0sQ0FBQztBQUFBLFFBQ3JCLE9BQU87QUFDTCxpQkFBTyxLQUFLLE1BQU0sR0FBRyxFQUFFO0FBQUEsUUFDekI7QUFBQSxNQUNGO0FBQ0EsYUFBTyxXQUFXLEtBQUs7QUFBQSxRQUNyQixNQUFNLE9BQU8sS0FBSyxRQUFRLEtBQUssTUFBTSxPQUFPLFVBQVUsSUFBSSxJQUFJO0FBQUEsUUFDOUQsT0FBTyxRQUFRLE1BQU0sUUFBUSxLQUFLLE1BQU0sT0FBTyxVQUFVLElBQUksSUFBSTtBQUFBLE1BQ25FLEdBQUcsSUFBSSxDQUFDLEdBQUcsS0FBSyxLQUFLO0FBQUEsSUFDdkI7QUFBQSxFQUNGO0FBQUEsRUFFQSxRQUFRLEtBQUssT0FBTztBQUNsQixRQUFJO0FBQ0osU0FBSyxNQUFNLEtBQUssTUFBTSxPQUFPLFFBQVEsS0FBSyxHQUFHLE9BQ3JDLE1BQU0sS0FBSyxNQUFNLE9BQU8sT0FBTyxLQUFLLEdBQUcsSUFBSTtBQUNqRCxVQUFJLFFBQVEsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsUUFBUSxRQUFRLEdBQUc7QUFDakQsYUFBTyxNQUFNLEtBQUssWUFBWSxDQUFDO0FBQy9CLFVBQUksQ0FBQyxNQUFNO0FBQ1QsY0FBTSxPQUFPLElBQUksQ0FBQyxFQUFFLE9BQU8sQ0FBQztBQUM1QixlQUFPO0FBQUEsVUFDTCxNQUFNO0FBQUEsVUFDTixLQUFLO0FBQUEsVUFDTDtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQ0EsYUFBTyxXQUFXLEtBQUssTUFBTSxJQUFJLENBQUMsR0FBRyxLQUFLLEtBQUs7QUFBQSxJQUNqRDtBQUFBLEVBQ0Y7QUFBQSxFQUVBLFNBQVMsS0FBSyxXQUFXLFdBQVcsSUFBSTtBQUN0QyxRQUFJLFFBQVEsS0FBSyxNQUFNLE9BQU8sU0FBUyxPQUFPLEtBQUssR0FBRztBQUN0RCxRQUFJLENBQUM7QUFBTztBQUdaLFFBQUksTUFBTSxDQUFDLEtBQUssU0FBUyxNQUFNLGVBQWU7QUFBRztBQUVqRCxVQUFNLFdBQVcsTUFBTSxDQUFDLEtBQUssTUFBTSxDQUFDLEtBQUs7QUFFekMsUUFBSSxDQUFDLFlBQWEsYUFBYSxhQUFhLE1BQU0sS0FBSyxNQUFNLE9BQU8sWUFBWSxLQUFLLFFBQVEsSUFBSztBQUNoRyxZQUFNLFVBQVUsTUFBTSxDQUFDLEVBQUUsU0FBUztBQUNsQyxVQUFJLFFBQVEsU0FBUyxhQUFhLFNBQVMsZ0JBQWdCO0FBRTNELFlBQU0sU0FBUyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sTUFBTSxLQUFLLE1BQU0sT0FBTyxTQUFTLFlBQVksS0FBSyxNQUFNLE9BQU8sU0FBUztBQUN2RyxhQUFPLFlBQVk7QUFHbkIsa0JBQVksVUFBVSxNQUFNLEtBQUssSUFBSSxTQUFTLE9BQU87QUFFckQsY0FBUSxRQUFRLE9BQU8sS0FBSyxTQUFTLE1BQU0sTUFBTTtBQUMvQyxpQkFBUyxNQUFNLENBQUMsS0FBSyxNQUFNLENBQUMsS0FBSyxNQUFNLENBQUMsS0FBSyxNQUFNLENBQUMsS0FBSyxNQUFNLENBQUMsS0FBSyxNQUFNLENBQUM7QUFFNUUsWUFBSSxDQUFDO0FBQVE7QUFFYixrQkFBVSxPQUFPO0FBRWpCLFlBQUksTUFBTSxDQUFDLEtBQUssTUFBTSxDQUFDLEdBQUc7QUFDeEIsd0JBQWM7QUFDZDtBQUFBLFFBQ0YsV0FBVyxNQUFNLENBQUMsS0FBSyxNQUFNLENBQUMsR0FBRztBQUMvQixjQUFJLFVBQVUsS0FBSyxHQUFHLFVBQVUsV0FBVyxJQUFJO0FBQzdDLDZCQUFpQjtBQUNqQjtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBRUEsc0JBQWM7QUFFZCxZQUFJLGFBQWE7QUFBRztBQUdwQixrQkFBVSxLQUFLLElBQUksU0FBUyxVQUFVLGFBQWEsYUFBYTtBQUVoRSxjQUFNLE1BQU0sSUFBSSxNQUFNLEdBQUcsVUFBVSxNQUFNLFNBQVMsTUFBTSxDQUFDLEVBQUUsU0FBUyxPQUFPLFVBQVUsT0FBTztBQUc1RixZQUFJLEtBQUssSUFBSSxTQUFTLE9BQU8sSUFBSSxHQUFHO0FBQ2xDLGdCQUFNQyxRQUFPLElBQUksTUFBTSxHQUFHLEVBQUU7QUFDNUIsaUJBQU87QUFBQSxZQUNMLE1BQU07QUFBQSxZQUNOO0FBQUEsWUFDQSxNQUFBQTtBQUFBLFlBQ0EsUUFBUSxLQUFLLE1BQU0sYUFBYUEsS0FBSTtBQUFBLFVBQ3RDO0FBQUEsUUFDRjtBQUdBLGNBQU0sT0FBTyxJQUFJLE1BQU0sR0FBRyxFQUFFO0FBQzVCLGVBQU87QUFBQSxVQUNMLE1BQU07QUFBQSxVQUNOO0FBQUEsVUFDQTtBQUFBLFVBQ0EsUUFBUSxLQUFLLE1BQU0sYUFBYSxJQUFJO0FBQUEsUUFDdEM7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLFNBQVMsS0FBSztBQUNaLFVBQU0sTUFBTSxLQUFLLE1BQU0sT0FBTyxLQUFLLEtBQUssR0FBRztBQUMzQyxRQUFJLEtBQUs7QUFDUCxVQUFJLE9BQU8sSUFBSSxDQUFDLEVBQUUsUUFBUSxPQUFPLEdBQUc7QUFDcEMsWUFBTSxtQkFBbUIsT0FBTyxLQUFLLElBQUk7QUFDekMsWUFBTSwwQkFBMEIsS0FBSyxLQUFLLElBQUksS0FBSyxLQUFLLEtBQUssSUFBSTtBQUNqRSxVQUFJLG9CQUFvQix5QkFBeUI7QUFDL0MsZUFBTyxLQUFLLFVBQVUsR0FBRyxLQUFLLFNBQVMsQ0FBQztBQUFBLE1BQzFDO0FBQ0EsYUFBTyxPQUFPLE1BQU0sSUFBSTtBQUN4QixhQUFPO0FBQUEsUUFDTCxNQUFNO0FBQUEsUUFDTixLQUFLLElBQUksQ0FBQztBQUFBLFFBQ1Y7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLEdBQUcsS0FBSztBQUNOLFVBQU0sTUFBTSxLQUFLLE1BQU0sT0FBTyxHQUFHLEtBQUssR0FBRztBQUN6QyxRQUFJLEtBQUs7QUFDUCxhQUFPO0FBQUEsUUFDTCxNQUFNO0FBQUEsUUFDTixLQUFLLElBQUksQ0FBQztBQUFBLE1BQ1o7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBRUEsSUFBSSxLQUFLO0FBQ1AsVUFBTSxNQUFNLEtBQUssTUFBTSxPQUFPLElBQUksS0FBSyxHQUFHO0FBQzFDLFFBQUksS0FBSztBQUNQLGFBQU87QUFBQSxRQUNMLE1BQU07QUFBQSxRQUNOLEtBQUssSUFBSSxDQUFDO0FBQUEsUUFDVixNQUFNLElBQUksQ0FBQztBQUFBLFFBQ1gsUUFBUSxLQUFLLE1BQU0sYUFBYSxJQUFJLENBQUMsQ0FBQztBQUFBLE1BQ3hDO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLFNBQVMsS0FBS0MsU0FBUTtBQUNwQixVQUFNLE1BQU0sS0FBSyxNQUFNLE9BQU8sU0FBUyxLQUFLLEdBQUc7QUFDL0MsUUFBSSxLQUFLO0FBQ1AsVUFBSSxNQUFNO0FBQ1YsVUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLO0FBQ2xCLGVBQU8sT0FBTyxLQUFLLFFBQVEsU0FBU0EsUUFBTyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDO0FBQzNELGVBQU8sWUFBWTtBQUFBLE1BQ3JCLE9BQU87QUFDTCxlQUFPLE9BQU8sSUFBSSxDQUFDLENBQUM7QUFDcEIsZUFBTztBQUFBLE1BQ1Q7QUFFQSxhQUFPO0FBQUEsUUFDTCxNQUFNO0FBQUEsUUFDTixLQUFLLElBQUksQ0FBQztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsUUFDQSxRQUFRO0FBQUEsVUFDTjtBQUFBLFlBQ0UsTUFBTTtBQUFBLFlBQ04sS0FBSztBQUFBLFlBQ0w7QUFBQSxVQUNGO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBRUEsSUFBSSxLQUFLQSxTQUFRO0FBQ2YsUUFBSTtBQUNKLFFBQUksTUFBTSxLQUFLLE1BQU0sT0FBTyxJQUFJLEtBQUssR0FBRyxHQUFHO0FBQ3pDLFVBQUksTUFBTTtBQUNWLFVBQUksSUFBSSxDQUFDLE1BQU0sS0FBSztBQUNsQixlQUFPLE9BQU8sS0FBSyxRQUFRLFNBQVNBLFFBQU8sSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQztBQUMzRCxlQUFPLFlBQVk7QUFBQSxNQUNyQixPQUFPO0FBRUwsWUFBSTtBQUNKLFdBQUc7QUFDRCx3QkFBYyxJQUFJLENBQUM7QUFDbkIsY0FBSSxDQUFDLElBQUksS0FBSyxNQUFNLE9BQU8sV0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUFBLFFBQ3RELFNBQVMsZ0JBQWdCLElBQUksQ0FBQztBQUM5QixlQUFPLE9BQU8sSUFBSSxDQUFDLENBQUM7QUFDcEIsWUFBSSxJQUFJLENBQUMsTUFBTSxRQUFRO0FBQ3JCLGlCQUFPLFlBQVksSUFBSSxDQUFDO0FBQUEsUUFDMUIsT0FBTztBQUNMLGlCQUFPLElBQUksQ0FBQztBQUFBLFFBQ2Q7QUFBQSxNQUNGO0FBQ0EsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFFBQ0EsUUFBUTtBQUFBLFVBQ047QUFBQSxZQUNFLE1BQU07QUFBQSxZQUNOLEtBQUs7QUFBQSxZQUNMO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLFdBQVcsS0FBS0MsY0FBYTtBQUMzQixVQUFNLE1BQU0sS0FBSyxNQUFNLE9BQU8sS0FBSyxLQUFLLEdBQUc7QUFDM0MsUUFBSSxLQUFLO0FBQ1AsVUFBSTtBQUNKLFVBQUksS0FBSyxNQUFNLE1BQU0sWUFBWTtBQUMvQixlQUFPLEtBQUssUUFBUSxXQUFZLEtBQUssUUFBUSxZQUFZLEtBQUssUUFBUSxVQUFVLElBQUksQ0FBQyxDQUFDLElBQUksT0FBTyxJQUFJLENBQUMsQ0FBQyxJQUFLLElBQUksQ0FBQztBQUFBLE1BQ25ILE9BQU87QUFDTCxlQUFPLE9BQU8sS0FBSyxRQUFRLGNBQWNBLGFBQVksSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQztBQUFBLE1BQ3ZFO0FBQ0EsYUFBTztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sS0FBSyxJQUFJLENBQUM7QUFBQSxRQUNWO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0Y7QUFLQSxJQUFNLFFBQVE7QUFBQSxFQUNaLFNBQVM7QUFBQSxFQUNULE1BQU07QUFBQSxFQUNOLFFBQVE7QUFBQSxFQUNSLElBQUk7QUFBQSxFQUNKLFNBQVM7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQVVOLEtBQUs7QUFBQSxFQUNMLE9BQU87QUFBQSxFQUNQLFVBQVU7QUFBQTtBQUFBO0FBQUEsRUFHVixZQUFZO0FBQUEsRUFDWixNQUFNO0FBQ1I7QUFFQSxNQUFNLFNBQVM7QUFDZixNQUFNLFNBQVM7QUFDZixNQUFNLE1BQU0sS0FBSyxNQUFNLEdBQUcsRUFDdkIsUUFBUSxTQUFTLE1BQU0sTUFBTSxFQUM3QixRQUFRLFNBQVMsTUFBTSxNQUFNLEVBQzdCLFNBQVM7QUFFWixNQUFNLFNBQVM7QUFDZixNQUFNLGdCQUFnQixLQUFLLGVBQWUsRUFDdkMsUUFBUSxRQUFRLE1BQU0sTUFBTSxFQUM1QixTQUFTO0FBRVosTUFBTSxPQUFPLEtBQUssTUFBTSxJQUFJLEVBQ3pCLFFBQVEsU0FBUyxNQUFNLE1BQU0sRUFDN0IsUUFBUSxNQUFNLGlFQUFpRSxFQUMvRSxRQUFRLE9BQU8sWUFBWSxNQUFNLElBQUksU0FBUyxHQUFHLEVBQ2pELFNBQVM7QUFFWixNQUFNLE9BQU87QUFNYixNQUFNLFdBQVc7QUFDakIsTUFBTSxPQUFPLEtBQUssTUFBTSxNQUFNLEdBQUcsRUFDOUIsUUFBUSxXQUFXLE1BQU0sUUFBUSxFQUNqQyxRQUFRLE9BQU8sTUFBTSxJQUFJLEVBQ3pCLFFBQVEsYUFBYSwwRUFBMEUsRUFDL0YsU0FBUztBQUVaLE1BQU0sWUFBWSxLQUFLLE1BQU0sVUFBVSxFQUNwQyxRQUFRLE1BQU0sTUFBTSxFQUFFLEVBQ3RCLFFBQVEsV0FBVyxlQUFlLEVBQ2xDLFFBQVEsYUFBYSxFQUFFLEVBQ3ZCLFFBQVEsVUFBVSxFQUFFLEVBQ3BCLFFBQVEsY0FBYyxTQUFTLEVBQy9CLFFBQVEsVUFBVSxnREFBZ0QsRUFDbEUsUUFBUSxRQUFRLHdCQUF3QixFQUN4QyxRQUFRLFFBQVEsNkRBQTZELEVBQzdFLFFBQVEsT0FBTyxNQUFNLElBQUksRUFDekIsU0FBUztBQUVaLE1BQU0sYUFBYSxLQUFLLE1BQU0sVUFBVSxFQUNyQyxRQUFRLGFBQWEsTUFBTSxTQUFTLEVBQ3BDLFNBQVM7QUFNWixNQUFNLFNBQVMsRUFBRSxHQUFHLE1BQU07QUFNMUIsTUFBTSxNQUFNO0FBQUEsRUFDVixHQUFHLE1BQU07QUFBQSxFQUNULE9BQU87QUFBQTtBQUdUO0FBRUEsTUFBTSxJQUFJLFFBQVEsS0FBSyxNQUFNLElBQUksS0FBSyxFQUNuQyxRQUFRLE1BQU0sTUFBTSxFQUFFLEVBQ3RCLFFBQVEsV0FBVyxlQUFlLEVBQ2xDLFFBQVEsY0FBYyxTQUFTLEVBQy9CLFFBQVEsUUFBUSxZQUFZLEVBQzVCLFFBQVEsVUFBVSxnREFBZ0QsRUFDbEUsUUFBUSxRQUFRLHdCQUF3QixFQUN4QyxRQUFRLFFBQVEsNkRBQTZELEVBQzdFLFFBQVEsT0FBTyxNQUFNLElBQUksRUFDekIsU0FBUztBQUVaLE1BQU0sSUFBSSxZQUFZLEtBQUssTUFBTSxVQUFVLEVBQ3hDLFFBQVEsTUFBTSxNQUFNLEVBQUUsRUFDdEIsUUFBUSxXQUFXLGVBQWUsRUFDbEMsUUFBUSxhQUFhLEVBQUUsRUFDdkIsUUFBUSxTQUFTLE1BQU0sSUFBSSxLQUFLLEVBQ2hDLFFBQVEsY0FBYyxTQUFTLEVBQy9CLFFBQVEsVUFBVSxnREFBZ0QsRUFDbEUsUUFBUSxRQUFRLHdCQUF3QixFQUN4QyxRQUFRLFFBQVEsNkRBQTZELEVBQzdFLFFBQVEsT0FBTyxNQUFNLElBQUksRUFDekIsU0FBUztBQUtaLE1BQU0sV0FBVztBQUFBLEVBQ2YsR0FBRyxNQUFNO0FBQUEsRUFDVCxNQUFNO0FBQUEsSUFDSjtBQUFBLEVBRXdFLEVBQ3ZFLFFBQVEsV0FBVyxNQUFNLFFBQVEsRUFDakMsUUFBUSxRQUFRLG1LQUdrQixFQUNsQyxTQUFTO0FBQUEsRUFDWixLQUFLO0FBQUEsRUFDTCxTQUFTO0FBQUEsRUFDVCxRQUFRO0FBQUE7QUFBQSxFQUNSLFVBQVU7QUFBQSxFQUNWLFdBQVcsS0FBSyxNQUFNLE9BQU8sVUFBVSxFQUNwQyxRQUFRLE1BQU0sTUFBTSxFQUFFLEVBQ3RCLFFBQVEsV0FBVyxpQkFBaUIsRUFDcEMsUUFBUSxZQUFZLE1BQU0sUUFBUSxFQUNsQyxRQUFRLGNBQWMsU0FBUyxFQUMvQixRQUFRLFdBQVcsRUFBRSxFQUNyQixRQUFRLFNBQVMsRUFBRSxFQUNuQixRQUFRLFNBQVMsRUFBRSxFQUNuQixTQUFTO0FBQ2Q7QUFLQSxJQUFNLFNBQVM7QUFBQSxFQUNiLFFBQVE7QUFBQSxFQUNSLFVBQVU7QUFBQSxFQUNWLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQTtBQUFBLEVBTUwsTUFBTTtBQUFBLEVBQ04sU0FBUztBQUFBLEVBQ1QsUUFBUTtBQUFBLEVBQ1IsZUFBZTtBQUFBLEVBQ2YsVUFBVTtBQUFBLElBQ1IsUUFBUTtBQUFBO0FBQUE7QUFBQSxJQUdSLFdBQVc7QUFBQSxJQUNYLFdBQVc7QUFBQTtBQUFBLEVBQ2I7QUFBQSxFQUNBLE1BQU07QUFBQSxFQUNOLElBQUk7QUFBQSxFQUNKLEtBQUs7QUFBQSxFQUNMLE1BQU07QUFBQSxFQUNOLGFBQWE7QUFDZjtBQUlBLE9BQU8sZUFBZTtBQUN0QixPQUFPLGNBQWMsS0FBSyxPQUFPLFdBQVcsRUFBRSxRQUFRLGdCQUFnQixPQUFPLFlBQVksRUFBRSxTQUFTO0FBR3BHLE9BQU8sWUFBWTtBQUduQixPQUFPLGNBQWM7QUFFckIsT0FBTyxXQUFXLEtBQUssTUFBTSxRQUFRLEVBQUUsUUFBUSxhQUFhLEtBQUssRUFBRSxTQUFTO0FBRTVFLE9BQU8sU0FBUyxTQUFTLEtBQUssT0FBTyxTQUFTLE1BQU0sRUFDakQsUUFBUSxVQUFVLE9BQU8sWUFBWSxFQUNyQyxTQUFTO0FBRVosT0FBTyxTQUFTLFlBQVksS0FBSyxPQUFPLFNBQVMsV0FBVyxHQUFHLEVBQzVELFFBQVEsVUFBVSxPQUFPLFlBQVksRUFDckMsU0FBUztBQUVaLE9BQU8sU0FBUyxZQUFZLEtBQUssT0FBTyxTQUFTLFdBQVcsR0FBRyxFQUM1RCxRQUFRLFVBQVUsT0FBTyxZQUFZLEVBQ3JDLFNBQVM7QUFFWixPQUFPLFdBQVc7QUFFbEIsT0FBTyxVQUFVO0FBQ2pCLE9BQU8sU0FBUztBQUNoQixPQUFPLFdBQVcsS0FBSyxPQUFPLFFBQVEsRUFDbkMsUUFBUSxVQUFVLE9BQU8sT0FBTyxFQUNoQyxRQUFRLFNBQVMsT0FBTyxNQUFNLEVBQzlCLFNBQVM7QUFFWixPQUFPLGFBQWE7QUFFcEIsT0FBTyxNQUFNLEtBQUssT0FBTyxHQUFHLEVBQ3pCLFFBQVEsV0FBVyxPQUFPLFFBQVEsRUFDbEMsUUFBUSxhQUFhLE9BQU8sVUFBVSxFQUN0QyxTQUFTO0FBRVosT0FBTyxTQUFTO0FBQ2hCLE9BQU8sUUFBUTtBQUNmLE9BQU8sU0FBUztBQUVoQixPQUFPLE9BQU8sS0FBSyxPQUFPLElBQUksRUFDM0IsUUFBUSxTQUFTLE9BQU8sTUFBTSxFQUM5QixRQUFRLFFBQVEsT0FBTyxLQUFLLEVBQzVCLFFBQVEsU0FBUyxPQUFPLE1BQU0sRUFDOUIsU0FBUztBQUVaLE9BQU8sVUFBVSxLQUFLLE9BQU8sT0FBTyxFQUNqQyxRQUFRLFNBQVMsT0FBTyxNQUFNLEVBQzlCLFFBQVEsT0FBTyxNQUFNLE1BQU0sRUFDM0IsU0FBUztBQUVaLE9BQU8sU0FBUyxLQUFLLE9BQU8sTUFBTSxFQUMvQixRQUFRLE9BQU8sTUFBTSxNQUFNLEVBQzNCLFNBQVM7QUFFWixPQUFPLGdCQUFnQixLQUFLLE9BQU8sZUFBZSxHQUFHLEVBQ2xELFFBQVEsV0FBVyxPQUFPLE9BQU8sRUFDakMsUUFBUSxVQUFVLE9BQU8sTUFBTSxFQUMvQixTQUFTO0FBTVosT0FBTyxTQUFTLEVBQUUsR0FBRyxPQUFPO0FBTTVCLE9BQU8sV0FBVztBQUFBLEVBQ2hCLEdBQUcsT0FBTztBQUFBLEVBQ1YsUUFBUTtBQUFBLElBQ04sT0FBTztBQUFBLElBQ1AsUUFBUTtBQUFBLElBQ1IsUUFBUTtBQUFBLElBQ1IsUUFBUTtBQUFBLEVBQ1Y7QUFBQSxFQUNBLElBQUk7QUFBQSxJQUNGLE9BQU87QUFBQSxJQUNQLFFBQVE7QUFBQSxJQUNSLFFBQVE7QUFBQSxJQUNSLFFBQVE7QUFBQSxFQUNWO0FBQUEsRUFDQSxNQUFNLEtBQUsseUJBQXlCLEVBQ2pDLFFBQVEsU0FBUyxPQUFPLE1BQU0sRUFDOUIsU0FBUztBQUFBLEVBQ1osU0FBUyxLQUFLLCtCQUErQixFQUMxQyxRQUFRLFNBQVMsT0FBTyxNQUFNLEVBQzlCLFNBQVM7QUFDZDtBQU1BLE9BQU8sTUFBTTtBQUFBLEVBQ1gsR0FBRyxPQUFPO0FBQUEsRUFDVixRQUFRLEtBQUssT0FBTyxNQUFNLEVBQUUsUUFBUSxNQUFNLE1BQU0sRUFBRSxTQUFTO0FBQUEsRUFDM0QsaUJBQWlCO0FBQUEsRUFDakIsS0FBSztBQUFBLEVBQ0wsWUFBWTtBQUFBLEVBQ1osS0FBSztBQUFBLEVBQ0wsTUFBTTtBQUNSO0FBRUEsT0FBTyxJQUFJLE1BQU0sS0FBSyxPQUFPLElBQUksS0FBSyxHQUFHLEVBQ3RDLFFBQVEsU0FBUyxPQUFPLElBQUksZUFBZSxFQUMzQyxTQUFTO0FBS1osT0FBTyxTQUFTO0FBQUEsRUFDZCxHQUFHLE9BQU87QUFBQSxFQUNWLElBQUksS0FBSyxPQUFPLEVBQUUsRUFBRSxRQUFRLFFBQVEsR0FBRyxFQUFFLFNBQVM7QUFBQSxFQUNsRCxNQUFNLEtBQUssT0FBTyxJQUFJLElBQUksRUFDdkIsUUFBUSxRQUFRLGVBQWUsRUFDL0IsUUFBUSxXQUFXLEdBQUcsRUFDdEIsU0FBUztBQUNkO0FBTUEsU0FBUyxZQUFZLE1BQU07QUFDekIsU0FBTyxLQUVKLFFBQVEsUUFBUSxRQUFRLEVBRXhCLFFBQVEsT0FBTyxRQUFRLEVBRXZCLFFBQVEsMkJBQTJCLFVBQVUsRUFFN0MsUUFBUSxNQUFNLFFBQVEsRUFFdEIsUUFBUSxnQ0FBZ0MsVUFBVSxFQUVsRCxRQUFRLE1BQU0sUUFBUSxFQUV0QixRQUFRLFVBQVUsUUFBUTtBQUMvQjtBQU1BLFNBQVMsT0FBTyxNQUFNO0FBQ3BCLE1BQUksTUFBTSxJQUNSLEdBQ0E7QUFFRixRQUFNLElBQUksS0FBSztBQUNmLE9BQUssSUFBSSxHQUFHLElBQUksR0FBRyxLQUFLO0FBQ3RCLFNBQUssS0FBSyxXQUFXLENBQUM7QUFDdEIsUUFBSSxLQUFLLE9BQU8sSUFBSSxLQUFLO0FBQ3ZCLFdBQUssTUFBTSxHQUFHLFNBQVMsRUFBRTtBQUFBLElBQzNCO0FBQ0EsV0FBTyxPQUFPLEtBQUs7QUFBQSxFQUNyQjtBQUVBLFNBQU87QUFDVDtBQUtBLElBQU0sUUFBTixNQUFZO0FBQUEsRUFDVixZQUFZSCxVQUFTO0FBQ25CLFNBQUssU0FBUyxDQUFDO0FBQ2YsU0FBSyxPQUFPLFFBQVEsdUJBQU8sT0FBTyxJQUFJO0FBQ3RDLFNBQUssVUFBVUEsWUFBVztBQUMxQixTQUFLLFFBQVEsWUFBWSxLQUFLLFFBQVEsYUFBYSxJQUFJLFVBQVU7QUFDakUsU0FBSyxZQUFZLEtBQUssUUFBUTtBQUM5QixTQUFLLFVBQVUsVUFBVSxLQUFLO0FBQzlCLFNBQUssVUFBVSxRQUFRO0FBQ3ZCLFNBQUssY0FBYyxDQUFDO0FBQ3BCLFNBQUssUUFBUTtBQUFBLE1BQ1gsUUFBUTtBQUFBLE1BQ1IsWUFBWTtBQUFBLE1BQ1osS0FBSztBQUFBLElBQ1A7QUFFQSxVQUFNLFFBQVE7QUFBQSxNQUNaLE9BQU8sTUFBTTtBQUFBLE1BQ2IsUUFBUSxPQUFPO0FBQUEsSUFDakI7QUFFQSxRQUFJLEtBQUssUUFBUSxVQUFVO0FBQ3pCLFlBQU0sUUFBUSxNQUFNO0FBQ3BCLFlBQU0sU0FBUyxPQUFPO0FBQUEsSUFDeEIsV0FBVyxLQUFLLFFBQVEsS0FBSztBQUMzQixZQUFNLFFBQVEsTUFBTTtBQUNwQixVQUFJLEtBQUssUUFBUSxRQUFRO0FBQ3ZCLGNBQU0sU0FBUyxPQUFPO0FBQUEsTUFDeEIsT0FBTztBQUNMLGNBQU0sU0FBUyxPQUFPO0FBQUEsTUFDeEI7QUFBQSxJQUNGO0FBQ0EsU0FBSyxVQUFVLFFBQVE7QUFBQSxFQUN6QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsV0FBVyxRQUFRO0FBQ2pCLFdBQU87QUFBQSxNQUNMO0FBQUEsTUFDQTtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxPQUFPLElBQUksS0FBS0EsVUFBUztBQUN2QixVQUFNRCxTQUFRLElBQUksTUFBTUMsUUFBTztBQUMvQixXQUFPRCxPQUFNLElBQUksR0FBRztBQUFBLEVBQ3RCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxPQUFPLFVBQVUsS0FBS0MsVUFBUztBQUM3QixVQUFNRCxTQUFRLElBQUksTUFBTUMsUUFBTztBQUMvQixXQUFPRCxPQUFNLGFBQWEsR0FBRztBQUFBLEVBQy9CO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLEtBQUs7QUFDUCxVQUFNLElBQ0gsUUFBUSxZQUFZLElBQUk7QUFFM0IsU0FBSyxZQUFZLEtBQUssS0FBSyxNQUFNO0FBRWpDLFFBQUk7QUFDSixXQUFPLE9BQU8sS0FBSyxZQUFZLE1BQU0sR0FBRztBQUN0QyxXQUFLLGFBQWEsS0FBSyxLQUFLLEtBQUssTUFBTTtBQUFBLElBQ3pDO0FBRUEsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsWUFBWSxLQUFLLFNBQVMsQ0FBQyxHQUFHO0FBQzVCLFFBQUksS0FBSyxRQUFRLFVBQVU7QUFDekIsWUFBTSxJQUFJLFFBQVEsT0FBTyxNQUFNLEVBQUUsUUFBUSxVQUFVLEVBQUU7QUFBQSxJQUN2RCxPQUFPO0FBQ0wsWUFBTSxJQUFJLFFBQVEsZ0JBQWdCLENBQUMsR0FBRyxTQUFTLFNBQVM7QUFDdEQsZUFBTyxVQUFVLE9BQU8sT0FBTyxLQUFLLE1BQU07QUFBQSxNQUM1QyxDQUFDO0FBQUEsSUFDSDtBQUVBLFFBQUksT0FBTyxXQUFXLFFBQVE7QUFFOUIsV0FBTyxLQUFLO0FBQ1YsVUFBSSxLQUFLLFFBQVEsY0FDWixLQUFLLFFBQVEsV0FBVyxTQUN4QixLQUFLLFFBQVEsV0FBVyxNQUFNLEtBQUssQ0FBQyxpQkFBaUI7QUFDdEQsWUFBSSxRQUFRLGFBQWEsS0FBSyxFQUFFLE9BQU8sS0FBSyxHQUFHLEtBQUssTUFBTSxHQUFHO0FBQzNELGdCQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxpQkFBTyxLQUFLLEtBQUs7QUFDakIsaUJBQU87QUFBQSxRQUNUO0FBQ0EsZUFBTztBQUFBLE1BQ1QsQ0FBQyxHQUFHO0FBQ0o7QUFBQSxNQUNGO0FBR0EsVUFBSSxRQUFRLEtBQUssVUFBVSxNQUFNLEdBQUcsR0FBRztBQUNyQyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxZQUFJLE1BQU0sSUFBSSxXQUFXLEtBQUssT0FBTyxTQUFTLEdBQUc7QUFHL0MsaUJBQU8sT0FBTyxTQUFTLENBQUMsRUFBRSxPQUFPO0FBQUEsUUFDbkMsT0FBTztBQUNMLGlCQUFPLEtBQUssS0FBSztBQUFBLFFBQ25CO0FBQ0E7QUFBQSxNQUNGO0FBR0EsVUFBSSxRQUFRLEtBQUssVUFBVSxLQUFLLEdBQUcsR0FBRztBQUNwQyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxvQkFBWSxPQUFPLE9BQU8sU0FBUyxDQUFDO0FBRXBDLFlBQUksY0FBYyxVQUFVLFNBQVMsZUFBZSxVQUFVLFNBQVMsU0FBUztBQUM5RSxvQkFBVSxPQUFPLE9BQU8sTUFBTTtBQUM5QixvQkFBVSxRQUFRLE9BQU8sTUFBTTtBQUMvQixlQUFLLFlBQVksS0FBSyxZQUFZLFNBQVMsQ0FBQyxFQUFFLE1BQU0sVUFBVTtBQUFBLFFBQ2hFLE9BQU87QUFDTCxpQkFBTyxLQUFLLEtBQUs7QUFBQSxRQUNuQjtBQUNBO0FBQUEsTUFDRjtBQUdBLFVBQUksUUFBUSxLQUFLLFVBQVUsT0FBTyxHQUFHLEdBQUc7QUFDdEMsY0FBTSxJQUFJLFVBQVUsTUFBTSxJQUFJLE1BQU07QUFDcEMsZUFBTyxLQUFLLEtBQUs7QUFDakI7QUFBQSxNQUNGO0FBR0EsVUFBSSxRQUFRLEtBQUssVUFBVSxRQUFRLEdBQUcsR0FBRztBQUN2QyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxlQUFPLEtBQUssS0FBSztBQUNqQjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFFBQVEsS0FBSyxVQUFVLEdBQUcsR0FBRyxHQUFHO0FBQ2xDLGNBQU0sSUFBSSxVQUFVLE1BQU0sSUFBSSxNQUFNO0FBQ3BDLGVBQU8sS0FBSyxLQUFLO0FBQ2pCO0FBQUEsTUFDRjtBQUdBLFVBQUksUUFBUSxLQUFLLFVBQVUsV0FBVyxHQUFHLEdBQUc7QUFDMUMsY0FBTSxJQUFJLFVBQVUsTUFBTSxJQUFJLE1BQU07QUFDcEMsZUFBTyxLQUFLLEtBQUs7QUFDakI7QUFBQSxNQUNGO0FBR0EsVUFBSSxRQUFRLEtBQUssVUFBVSxLQUFLLEdBQUcsR0FBRztBQUNwQyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxlQUFPLEtBQUssS0FBSztBQUNqQjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFFBQVEsS0FBSyxVQUFVLEtBQUssR0FBRyxHQUFHO0FBQ3BDLGNBQU0sSUFBSSxVQUFVLE1BQU0sSUFBSSxNQUFNO0FBQ3BDLGVBQU8sS0FBSyxLQUFLO0FBQ2pCO0FBQUEsTUFDRjtBQUdBLFVBQUksUUFBUSxLQUFLLFVBQVUsSUFBSSxHQUFHLEdBQUc7QUFDbkMsY0FBTSxJQUFJLFVBQVUsTUFBTSxJQUFJLE1BQU07QUFDcEMsb0JBQVksT0FBTyxPQUFPLFNBQVMsQ0FBQztBQUNwQyxZQUFJLGNBQWMsVUFBVSxTQUFTLGVBQWUsVUFBVSxTQUFTLFNBQVM7QUFDOUUsb0JBQVUsT0FBTyxPQUFPLE1BQU07QUFDOUIsb0JBQVUsUUFBUSxPQUFPLE1BQU07QUFDL0IsZUFBSyxZQUFZLEtBQUssWUFBWSxTQUFTLENBQUMsRUFBRSxNQUFNLFVBQVU7QUFBQSxRQUNoRSxXQUFXLENBQUMsS0FBSyxPQUFPLE1BQU0sTUFBTSxHQUFHLEdBQUc7QUFDeEMsZUFBSyxPQUFPLE1BQU0sTUFBTSxHQUFHLElBQUk7QUFBQSxZQUM3QixNQUFNLE1BQU07QUFBQSxZQUNaLE9BQU8sTUFBTTtBQUFBLFVBQ2Y7QUFBQSxRQUNGO0FBQ0E7QUFBQSxNQUNGO0FBR0EsVUFBSSxRQUFRLEtBQUssVUFBVSxNQUFNLEdBQUcsR0FBRztBQUNyQyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxlQUFPLEtBQUssS0FBSztBQUNqQjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFFBQVEsS0FBSyxVQUFVLFNBQVMsR0FBRyxHQUFHO0FBQ3hDLGNBQU0sSUFBSSxVQUFVLE1BQU0sSUFBSSxNQUFNO0FBQ3BDLGVBQU8sS0FBSyxLQUFLO0FBQ2pCO0FBQUEsTUFDRjtBQUlBLGVBQVM7QUFDVCxVQUFJLEtBQUssUUFBUSxjQUFjLEtBQUssUUFBUSxXQUFXLFlBQVk7QUFDakUsWUFBSSxhQUFhO0FBQ2pCLGNBQU0sVUFBVSxJQUFJLE1BQU0sQ0FBQztBQUMzQixZQUFJO0FBQ0osYUFBSyxRQUFRLFdBQVcsV0FBVyxRQUFRLFNBQVMsZUFBZTtBQUNqRSxzQkFBWSxjQUFjLEtBQUssRUFBRSxPQUFPLEtBQUssR0FBRyxPQUFPO0FBQ3ZELGNBQUksT0FBTyxjQUFjLFlBQVksYUFBYSxHQUFHO0FBQUUseUJBQWEsS0FBSyxJQUFJLFlBQVksU0FBUztBQUFBLFVBQUc7QUFBQSxRQUN2RyxDQUFDO0FBQ0QsWUFBSSxhQUFhLFlBQVksY0FBYyxHQUFHO0FBQzVDLG1CQUFTLElBQUksVUFBVSxHQUFHLGFBQWEsQ0FBQztBQUFBLFFBQzFDO0FBQUEsTUFDRjtBQUNBLFVBQUksS0FBSyxNQUFNLFFBQVEsUUFBUSxLQUFLLFVBQVUsVUFBVSxNQUFNLElBQUk7QUFDaEUsb0JBQVksT0FBTyxPQUFPLFNBQVMsQ0FBQztBQUNwQyxZQUFJLHdCQUF3QixVQUFVLFNBQVMsYUFBYTtBQUMxRCxvQkFBVSxPQUFPLE9BQU8sTUFBTTtBQUM5QixvQkFBVSxRQUFRLE9BQU8sTUFBTTtBQUMvQixlQUFLLFlBQVksSUFBSTtBQUNyQixlQUFLLFlBQVksS0FBSyxZQUFZLFNBQVMsQ0FBQyxFQUFFLE1BQU0sVUFBVTtBQUFBLFFBQ2hFLE9BQU87QUFDTCxpQkFBTyxLQUFLLEtBQUs7QUFBQSxRQUNuQjtBQUNBLCtCQUF3QixPQUFPLFdBQVcsSUFBSTtBQUM5QyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQztBQUFBLE1BQ0Y7QUFHQSxVQUFJLFFBQVEsS0FBSyxVQUFVLEtBQUssR0FBRyxHQUFHO0FBQ3BDLGNBQU0sSUFBSSxVQUFVLE1BQU0sSUFBSSxNQUFNO0FBQ3BDLG9CQUFZLE9BQU8sT0FBTyxTQUFTLENBQUM7QUFDcEMsWUFBSSxhQUFhLFVBQVUsU0FBUyxRQUFRO0FBQzFDLG9CQUFVLE9BQU8sT0FBTyxNQUFNO0FBQzlCLG9CQUFVLFFBQVEsT0FBTyxNQUFNO0FBQy9CLGVBQUssWUFBWSxJQUFJO0FBQ3JCLGVBQUssWUFBWSxLQUFLLFlBQVksU0FBUyxDQUFDLEVBQUUsTUFBTSxVQUFVO0FBQUEsUUFDaEUsT0FBTztBQUNMLGlCQUFPLEtBQUssS0FBSztBQUFBLFFBQ25CO0FBQ0E7QUFBQSxNQUNGO0FBRUEsVUFBSSxLQUFLO0FBQ1AsY0FBTSxTQUFTLDRCQUE0QixJQUFJLFdBQVcsQ0FBQztBQUMzRCxZQUFJLEtBQUssUUFBUSxRQUFRO0FBQ3ZCLGtCQUFRLE1BQU0sTUFBTTtBQUNwQjtBQUFBLFFBQ0YsT0FBTztBQUNMLGdCQUFNLElBQUksTUFBTSxNQUFNO0FBQUEsUUFDeEI7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUVBLFNBQUssTUFBTSxNQUFNO0FBQ2pCLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxPQUFPLEtBQUssU0FBUyxDQUFDLEdBQUc7QUFDdkIsU0FBSyxZQUFZLEtBQUssRUFBRSxLQUFLLE9BQU8sQ0FBQztBQUNyQyxXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsYUFBYSxLQUFLLFNBQVMsQ0FBQyxHQUFHO0FBQzdCLFFBQUksT0FBTyxXQUFXO0FBR3RCLFFBQUksWUFBWTtBQUNoQixRQUFJO0FBQ0osUUFBSSxjQUFjO0FBR2xCLFFBQUksS0FBSyxPQUFPLE9BQU87QUFDckIsWUFBTSxRQUFRLE9BQU8sS0FBSyxLQUFLLE9BQU8sS0FBSztBQUMzQyxVQUFJLE1BQU0sU0FBUyxHQUFHO0FBQ3BCLGdCQUFRLFFBQVEsS0FBSyxVQUFVLE1BQU0sT0FBTyxjQUFjLEtBQUssU0FBUyxNQUFNLE1BQU07QUFDbEYsY0FBSSxNQUFNLFNBQVMsTUFBTSxDQUFDLEVBQUUsTUFBTSxNQUFNLENBQUMsRUFBRSxZQUFZLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQyxHQUFHO0FBQ3JFLHdCQUFZLFVBQVUsTUFBTSxHQUFHLE1BQU0sS0FBSyxJQUFJLE1BQU0sYUFBYSxLQUFLLE1BQU0sQ0FBQyxFQUFFLFNBQVMsQ0FBQyxJQUFJLE1BQU0sVUFBVSxNQUFNLEtBQUssVUFBVSxNQUFNLE9BQU8sY0FBYyxTQUFTO0FBQUEsVUFDeEs7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFFQSxZQUFRLFFBQVEsS0FBSyxVQUFVLE1BQU0sT0FBTyxVQUFVLEtBQUssU0FBUyxNQUFNLE1BQU07QUFDOUUsa0JBQVksVUFBVSxNQUFNLEdBQUcsTUFBTSxLQUFLLElBQUksTUFBTSxhQUFhLEtBQUssTUFBTSxDQUFDLEVBQUUsU0FBUyxDQUFDLElBQUksTUFBTSxVQUFVLE1BQU0sS0FBSyxVQUFVLE1BQU0sT0FBTyxVQUFVLFNBQVM7QUFBQSxJQUNwSztBQUdBLFlBQVEsUUFBUSxLQUFLLFVBQVUsTUFBTSxPQUFPLFlBQVksS0FBSyxTQUFTLE1BQU0sTUFBTTtBQUNoRixrQkFBWSxVQUFVLE1BQU0sR0FBRyxNQUFNLFFBQVEsTUFBTSxDQUFDLEVBQUUsU0FBUyxDQUFDLElBQUksT0FBTyxVQUFVLE1BQU0sS0FBSyxVQUFVLE1BQU0sT0FBTyxZQUFZLFNBQVM7QUFDNUksV0FBSyxVQUFVLE1BQU0sT0FBTyxZQUFZO0FBQUEsSUFDMUM7QUFFQSxXQUFPLEtBQUs7QUFDVixVQUFJLENBQUMsY0FBYztBQUNqQixtQkFBVztBQUFBLE1BQ2I7QUFDQSxxQkFBZTtBQUdmLFVBQUksS0FBSyxRQUFRLGNBQ1osS0FBSyxRQUFRLFdBQVcsVUFDeEIsS0FBSyxRQUFRLFdBQVcsT0FBTyxLQUFLLENBQUMsaUJBQWlCO0FBQ3ZELFlBQUksUUFBUSxhQUFhLEtBQUssRUFBRSxPQUFPLEtBQUssR0FBRyxLQUFLLE1BQU0sR0FBRztBQUMzRCxnQkFBTSxJQUFJLFVBQVUsTUFBTSxJQUFJLE1BQU07QUFDcEMsaUJBQU8sS0FBSyxLQUFLO0FBQ2pCLGlCQUFPO0FBQUEsUUFDVDtBQUNBLGVBQU87QUFBQSxNQUNULENBQUMsR0FBRztBQUNKO0FBQUEsTUFDRjtBQUdBLFVBQUksUUFBUSxLQUFLLFVBQVUsT0FBTyxHQUFHLEdBQUc7QUFDdEMsY0FBTSxJQUFJLFVBQVUsTUFBTSxJQUFJLE1BQU07QUFDcEMsZUFBTyxLQUFLLEtBQUs7QUFDakI7QUFBQSxNQUNGO0FBR0EsVUFBSSxRQUFRLEtBQUssVUFBVSxJQUFJLEdBQUcsR0FBRztBQUNuQyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxvQkFBWSxPQUFPLE9BQU8sU0FBUyxDQUFDO0FBQ3BDLFlBQUksYUFBYSxNQUFNLFNBQVMsVUFBVSxVQUFVLFNBQVMsUUFBUTtBQUNuRSxvQkFBVSxPQUFPLE1BQU07QUFDdkIsb0JBQVUsUUFBUSxNQUFNO0FBQUEsUUFDMUIsT0FBTztBQUNMLGlCQUFPLEtBQUssS0FBSztBQUFBLFFBQ25CO0FBQ0E7QUFBQSxNQUNGO0FBR0EsVUFBSSxRQUFRLEtBQUssVUFBVSxLQUFLLEdBQUcsR0FBRztBQUNwQyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxlQUFPLEtBQUssS0FBSztBQUNqQjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFFBQVEsS0FBSyxVQUFVLFFBQVEsS0FBSyxLQUFLLE9BQU8sS0FBSyxHQUFHO0FBQzFELGNBQU0sSUFBSSxVQUFVLE1BQU0sSUFBSSxNQUFNO0FBQ3BDLG9CQUFZLE9BQU8sT0FBTyxTQUFTLENBQUM7QUFDcEMsWUFBSSxhQUFhLE1BQU0sU0FBUyxVQUFVLFVBQVUsU0FBUyxRQUFRO0FBQ25FLG9CQUFVLE9BQU8sTUFBTTtBQUN2QixvQkFBVSxRQUFRLE1BQU07QUFBQSxRQUMxQixPQUFPO0FBQ0wsaUJBQU8sS0FBSyxLQUFLO0FBQUEsUUFDbkI7QUFDQTtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFFBQVEsS0FBSyxVQUFVLFNBQVMsS0FBSyxXQUFXLFFBQVEsR0FBRztBQUM3RCxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxlQUFPLEtBQUssS0FBSztBQUNqQjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFFBQVEsS0FBSyxVQUFVLFNBQVMsR0FBRyxHQUFHO0FBQ3hDLGNBQU0sSUFBSSxVQUFVLE1BQU0sSUFBSSxNQUFNO0FBQ3BDLGVBQU8sS0FBSyxLQUFLO0FBQ2pCO0FBQUEsTUFDRjtBQUdBLFVBQUksUUFBUSxLQUFLLFVBQVUsR0FBRyxHQUFHLEdBQUc7QUFDbEMsY0FBTSxJQUFJLFVBQVUsTUFBTSxJQUFJLE1BQU07QUFDcEMsZUFBTyxLQUFLLEtBQUs7QUFDakI7QUFBQSxNQUNGO0FBR0EsVUFBSSxRQUFRLEtBQUssVUFBVSxJQUFJLEdBQUcsR0FBRztBQUNuQyxjQUFNLElBQUksVUFBVSxNQUFNLElBQUksTUFBTTtBQUNwQyxlQUFPLEtBQUssS0FBSztBQUNqQjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFFBQVEsS0FBSyxVQUFVLFNBQVMsS0FBSyxNQUFNLEdBQUc7QUFDaEQsY0FBTSxJQUFJLFVBQVUsTUFBTSxJQUFJLE1BQU07QUFDcEMsZUFBTyxLQUFLLEtBQUs7QUFDakI7QUFBQSxNQUNGO0FBR0EsVUFBSSxDQUFDLEtBQUssTUFBTSxXQUFXLFFBQVEsS0FBSyxVQUFVLElBQUksS0FBSyxNQUFNLElBQUk7QUFDbkUsY0FBTSxJQUFJLFVBQVUsTUFBTSxJQUFJLE1BQU07QUFDcEMsZUFBTyxLQUFLLEtBQUs7QUFDakI7QUFBQSxNQUNGO0FBSUEsZUFBUztBQUNULFVBQUksS0FBSyxRQUFRLGNBQWMsS0FBSyxRQUFRLFdBQVcsYUFBYTtBQUNsRSxZQUFJLGFBQWE7QUFDakIsY0FBTSxVQUFVLElBQUksTUFBTSxDQUFDO0FBQzNCLFlBQUk7QUFDSixhQUFLLFFBQVEsV0FBVyxZQUFZLFFBQVEsU0FBUyxlQUFlO0FBQ2xFLHNCQUFZLGNBQWMsS0FBSyxFQUFFLE9BQU8sS0FBSyxHQUFHLE9BQU87QUFDdkQsY0FBSSxPQUFPLGNBQWMsWUFBWSxhQUFhLEdBQUc7QUFBRSx5QkFBYSxLQUFLLElBQUksWUFBWSxTQUFTO0FBQUEsVUFBRztBQUFBLFFBQ3ZHLENBQUM7QUFDRCxZQUFJLGFBQWEsWUFBWSxjQUFjLEdBQUc7QUFDNUMsbUJBQVMsSUFBSSxVQUFVLEdBQUcsYUFBYSxDQUFDO0FBQUEsUUFDMUM7QUFBQSxNQUNGO0FBQ0EsVUFBSSxRQUFRLEtBQUssVUFBVSxXQUFXLFFBQVEsV0FBVyxHQUFHO0FBQzFELGNBQU0sSUFBSSxVQUFVLE1BQU0sSUFBSSxNQUFNO0FBQ3BDLFlBQUksTUFBTSxJQUFJLE1BQU0sRUFBRSxNQUFNLEtBQUs7QUFDL0IscUJBQVcsTUFBTSxJQUFJLE1BQU0sRUFBRTtBQUFBLFFBQy9CO0FBQ0EsdUJBQWU7QUFDZixvQkFBWSxPQUFPLE9BQU8sU0FBUyxDQUFDO0FBQ3BDLFlBQUksYUFBYSxVQUFVLFNBQVMsUUFBUTtBQUMxQyxvQkFBVSxPQUFPLE1BQU07QUFDdkIsb0JBQVUsUUFBUSxNQUFNO0FBQUEsUUFDMUIsT0FBTztBQUNMLGlCQUFPLEtBQUssS0FBSztBQUFBLFFBQ25CO0FBQ0E7QUFBQSxNQUNGO0FBRUEsVUFBSSxLQUFLO0FBQ1AsY0FBTSxTQUFTLDRCQUE0QixJQUFJLFdBQVcsQ0FBQztBQUMzRCxZQUFJLEtBQUssUUFBUSxRQUFRO0FBQ3ZCLGtCQUFRLE1BQU0sTUFBTTtBQUNwQjtBQUFBLFFBQ0YsT0FBTztBQUNMLGdCQUFNLElBQUksTUFBTSxNQUFNO0FBQUEsUUFDeEI7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQ0Y7QUFLQSxJQUFNLFdBQU4sTUFBZTtBQUFBLEVBQ2IsWUFBWUMsVUFBUztBQUNuQixTQUFLLFVBQVVBLFlBQVc7QUFBQSxFQUM1QjtBQUFBLEVBRUEsS0FBSyxNQUFNLFlBQVksU0FBUztBQUM5QixVQUFNLFFBQVEsY0FBYyxJQUFJLE1BQU0sS0FBSyxFQUFFLENBQUM7QUFDOUMsUUFBSSxLQUFLLFFBQVEsV0FBVztBQUMxQixZQUFNLE1BQU0sS0FBSyxRQUFRLFVBQVUsTUFBTSxJQUFJO0FBQzdDLFVBQUksT0FBTyxRQUFRLFFBQVEsTUFBTTtBQUMvQixrQkFBVTtBQUNWLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUVBLFdBQU8sS0FBSyxRQUFRLE9BQU8sRUFBRSxJQUFJO0FBRWpDLFFBQUksQ0FBQyxNQUFNO0FBQ1QsYUFBTyxpQkFDRixVQUFVLE9BQU8sT0FBTyxNQUFNLElBQUksS0FDbkM7QUFBQSxJQUNOO0FBRUEsV0FBTyx1QkFDSCxLQUFLLFFBQVEsYUFDYixPQUFPLElBQUksSUFDWCxRQUNDLFVBQVUsT0FBTyxPQUFPLE1BQU0sSUFBSSxLQUNuQztBQUFBLEVBQ047QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFdBQVcsT0FBTztBQUNoQixXQUFPO0FBQUEsRUFBaUI7QUFBQTtBQUFBLEVBQzFCO0FBQUEsRUFFQSxLQUFLLE1BQU07QUFDVCxXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUEsUUFBUSxNQUFNLE9BQU8sS0FBSyxTQUFTO0FBQ2pDLFFBQUksS0FBSyxRQUFRLFdBQVc7QUFDMUIsWUFBTSxLQUFLLEtBQUssUUFBUSxlQUFlLFFBQVEsS0FBSyxHQUFHO0FBQ3ZELGFBQU8sS0FBSyxhQUFhLE9BQU8sVUFBVTtBQUFBO0FBQUEsSUFDNUM7QUFHQSxXQUFPLEtBQUssU0FBUyxVQUFVO0FBQUE7QUFBQSxFQUNqQztBQUFBLEVBRUEsS0FBSztBQUNILFdBQU8sS0FBSyxRQUFRLFFBQVEsWUFBWTtBQUFBLEVBQzFDO0FBQUEsRUFFQSxLQUFLLE1BQU0sU0FBUyxPQUFPO0FBQ3pCLFVBQU0sT0FBTyxVQUFVLE9BQU8sTUFDNUIsV0FBWSxXQUFXLFVBQVUsSUFBTSxhQUFhLFFBQVEsTUFBTztBQUNyRSxXQUFPLE1BQU0sT0FBTyxXQUFXLFFBQVEsT0FBTyxPQUFPLE9BQU87QUFBQSxFQUM5RDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsU0FBUyxNQUFNO0FBQ2IsV0FBTyxPQUFPO0FBQUE7QUFBQSxFQUNoQjtBQUFBLEVBRUEsU0FBUyxTQUFTO0FBQ2hCLFdBQU8sYUFDRixVQUFVLGdCQUFnQixNQUMzQixpQ0FDQyxLQUFLLFFBQVEsUUFBUSxPQUFPLE1BQzdCO0FBQUEsRUFDTjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsVUFBVSxNQUFNO0FBQ2QsV0FBTyxNQUFNO0FBQUE7QUFBQSxFQUNmO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLE1BQU0sUUFBUSxNQUFNO0FBQ2xCLFFBQUk7QUFBTSxhQUFPLFVBQVU7QUFFM0IsV0FBTyx1QkFFSCxTQUNBLGVBQ0EsT0FDQTtBQUFBLEVBQ047QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFNBQVMsU0FBUztBQUNoQixXQUFPO0FBQUEsRUFBUztBQUFBO0FBQUEsRUFDbEI7QUFBQSxFQUVBLFVBQVUsU0FBUyxPQUFPO0FBQ3hCLFVBQU0sT0FBTyxNQUFNLFNBQVMsT0FBTztBQUNuQyxVQUFNLE1BQU0sTUFBTSxRQUNkLElBQUksZUFBZSxNQUFNLFlBQ3pCLElBQUk7QUFDUixXQUFPLE1BQU0sVUFBVSxLQUFLO0FBQUE7QUFBQSxFQUM5QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxPQUFPLE1BQU07QUFDWCxXQUFPLFdBQVc7QUFBQSxFQUNwQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsR0FBRyxNQUFNO0FBQ1AsV0FBTyxPQUFPO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFNBQVMsTUFBTTtBQUNiLFdBQU8sU0FBUztBQUFBLEVBQ2xCO0FBQUEsRUFFQSxLQUFLO0FBQ0gsV0FBTyxLQUFLLFFBQVEsUUFBUSxVQUFVO0FBQUEsRUFDeEM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksTUFBTTtBQUNSLFdBQU8sUUFBUTtBQUFBLEVBQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsS0FBSyxNQUFNLE9BQU8sTUFBTTtBQUN0QixXQUFPLFNBQVMsS0FBSyxRQUFRLFVBQVUsS0FBSyxRQUFRLFNBQVMsSUFBSTtBQUNqRSxRQUFJLFNBQVMsTUFBTTtBQUNqQixhQUFPO0FBQUEsSUFDVDtBQUNBLFFBQUksTUFBTSxjQUFjLE9BQU87QUFDL0IsUUFBSSxPQUFPO0FBQ1QsYUFBTyxhQUFhLFFBQVE7QUFBQSxJQUM5QjtBQUNBLFdBQU8sTUFBTSxPQUFPO0FBQ3BCLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxNQUFNLE9BQU8sTUFBTTtBQUN2QixXQUFPLFNBQVMsS0FBSyxRQUFRLFVBQVUsS0FBSyxRQUFRLFNBQVMsSUFBSTtBQUNqRSxRQUFJLFNBQVMsTUFBTTtBQUNqQixhQUFPO0FBQUEsSUFDVDtBQUVBLFFBQUksTUFBTSxhQUFhLGNBQWM7QUFDckMsUUFBSSxPQUFPO0FBQ1QsYUFBTyxXQUFXO0FBQUEsSUFDcEI7QUFDQSxXQUFPLEtBQUssUUFBUSxRQUFRLE9BQU87QUFDbkMsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLEtBQUssTUFBTTtBQUNULFdBQU87QUFBQSxFQUNUO0FBQ0Y7QUFNQSxJQUFNLGVBQU4sTUFBbUI7QUFBQTtBQUFBLEVBRWpCLE9BQU8sTUFBTTtBQUNYLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxHQUFHLE1BQU07QUFDUCxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsU0FBUyxNQUFNO0FBQ2IsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLElBQUksTUFBTTtBQUNSLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxLQUFLLE1BQU07QUFDVCxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsS0FBSyxNQUFNO0FBQ1QsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLEtBQUssTUFBTSxPQUFPLE1BQU07QUFDdEIsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUFBLEVBRUEsTUFBTSxNQUFNLE9BQU8sTUFBTTtBQUN2QixXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUEsRUFFQSxLQUFLO0FBQ0gsV0FBTztBQUFBLEVBQ1Q7QUFDRjtBQUtBLElBQU0sVUFBTixNQUFjO0FBQUEsRUFDWixjQUFjO0FBQ1osU0FBSyxPQUFPLENBQUM7QUFBQSxFQUNmO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxVQUFVLE9BQU87QUFDZixXQUFPLE1BQ0osWUFBWSxFQUNaLEtBQUssRUFFTCxRQUFRLG1CQUFtQixFQUFFLEVBRTdCLFFBQVEsaUVBQWlFLEVBQUUsRUFDM0UsUUFBUSxPQUFPLEdBQUc7QUFBQSxFQUN2QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLGdCQUFnQixjQUFjLFVBQVU7QUFDdEMsUUFBSSxPQUFPO0FBQ1gsUUFBSSx1QkFBdUI7QUFDM0IsUUFBSSxLQUFLLEtBQUssZUFBZSxJQUFJLEdBQUc7QUFDbEMsNkJBQXVCLEtBQUssS0FBSyxZQUFZO0FBQzdDLFNBQUc7QUFDRDtBQUNBLGVBQU8sZUFBZSxNQUFNO0FBQUEsTUFDOUIsU0FBUyxLQUFLLEtBQUssZUFBZSxJQUFJO0FBQUEsSUFDeEM7QUFDQSxRQUFJLENBQUMsVUFBVTtBQUNiLFdBQUssS0FBSyxZQUFZLElBQUk7QUFDMUIsV0FBSyxLQUFLLElBQUksSUFBSTtBQUFBLElBQ3BCO0FBQ0EsV0FBTztBQUFBLEVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVFBLEtBQUssT0FBT0EsV0FBVSxDQUFDLEdBQUc7QUFDeEIsVUFBTSxPQUFPLEtBQUssVUFBVSxLQUFLO0FBQ2pDLFdBQU8sS0FBSyxnQkFBZ0IsTUFBTUEsU0FBUSxNQUFNO0FBQUEsRUFDbEQ7QUFDRjtBQUtBLElBQU0sU0FBTixNQUFhO0FBQUEsRUFDWCxZQUFZQSxVQUFTO0FBQ25CLFNBQUssVUFBVUEsWUFBVztBQUMxQixTQUFLLFFBQVEsV0FBVyxLQUFLLFFBQVEsWUFBWSxJQUFJLFNBQVM7QUFDOUQsU0FBSyxXQUFXLEtBQUssUUFBUTtBQUM3QixTQUFLLFNBQVMsVUFBVSxLQUFLO0FBQzdCLFNBQUssZUFBZSxJQUFJLGFBQWE7QUFDckMsU0FBSyxVQUFVLElBQUksUUFBUTtBQUFBLEVBQzdCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxPQUFPLE1BQU0sUUFBUUEsVUFBUztBQUM1QixVQUFNSSxVQUFTLElBQUksT0FBT0osUUFBTztBQUNqQyxXQUFPSSxRQUFPLE1BQU0sTUFBTTtBQUFBLEVBQzVCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxPQUFPLFlBQVksUUFBUUosVUFBUztBQUNsQyxVQUFNSSxVQUFTLElBQUksT0FBT0osUUFBTztBQUNqQyxXQUFPSSxRQUFPLFlBQVksTUFBTTtBQUFBLEVBQ2xDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLFFBQVEsTUFBTSxNQUFNO0FBQ3hCLFFBQUksTUFBTSxJQUNSLEdBQ0EsR0FDQSxHQUNBLElBQ0EsSUFDQSxLQUNBLE1BQ0EsUUFDQSxNQUNBLE9BQ0EsU0FDQSxPQUNBLE9BQ0EsVUFDQSxNQUNBLFNBQ0EsTUFDQSxVQUNBO0FBRUYsVUFBTSxJQUFJLE9BQU87QUFDakIsU0FBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLEtBQUs7QUFDdEIsY0FBUSxPQUFPLENBQUM7QUFHaEIsVUFBSSxLQUFLLFFBQVEsY0FBYyxLQUFLLFFBQVEsV0FBVyxhQUFhLEtBQUssUUFBUSxXQUFXLFVBQVUsTUFBTSxJQUFJLEdBQUc7QUFDakgsY0FBTSxLQUFLLFFBQVEsV0FBVyxVQUFVLE1BQU0sSUFBSSxFQUFFLEtBQUssRUFBRSxRQUFRLEtBQUssR0FBRyxLQUFLO0FBQ2hGLFlBQUksUUFBUSxTQUFTLENBQUMsQ0FBQyxTQUFTLE1BQU0sV0FBVyxRQUFRLFNBQVMsY0FBYyxRQUFRLFFBQVEsYUFBYSxNQUFNLEVBQUUsU0FBUyxNQUFNLElBQUksR0FBRztBQUN6SSxpQkFBTyxPQUFPO0FBQ2Q7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUVBLGNBQVEsTUFBTSxNQUFNO0FBQUEsUUFDbEIsS0FBSyxTQUFTO0FBQ1o7QUFBQSxRQUNGO0FBQUEsUUFDQSxLQUFLLE1BQU07QUFDVCxpQkFBTyxLQUFLLFNBQVMsR0FBRztBQUN4QjtBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssV0FBVztBQUNkLGlCQUFPLEtBQUssU0FBUztBQUFBLFlBQ25CLEtBQUssWUFBWSxNQUFNLE1BQU07QUFBQSxZQUM3QixNQUFNO0FBQUEsWUFDTixTQUFTLEtBQUssWUFBWSxNQUFNLFFBQVEsS0FBSyxZQUFZLENBQUM7QUFBQSxZQUMxRCxLQUFLO0FBQUEsVUFBTztBQUNkO0FBQUEsUUFDRjtBQUFBLFFBQ0EsS0FBSyxRQUFRO0FBQ1gsaUJBQU8sS0FBSyxTQUFTO0FBQUEsWUFBSyxNQUFNO0FBQUEsWUFDOUIsTUFBTTtBQUFBLFlBQ04sTUFBTTtBQUFBLFVBQU87QUFDZjtBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssU0FBUztBQUNaLG1CQUFTO0FBR1QsaUJBQU87QUFDUCxlQUFLLE1BQU0sT0FBTztBQUNsQixlQUFLLElBQUksR0FBRyxJQUFJLElBQUksS0FBSztBQUN2QixvQkFBUSxLQUFLLFNBQVM7QUFBQSxjQUNwQixLQUFLLFlBQVksTUFBTSxPQUFPLENBQUMsRUFBRSxNQUFNO0FBQUEsY0FDdkMsRUFBRSxRQUFRLE1BQU0sT0FBTyxNQUFNLE1BQU0sQ0FBQyxFQUFFO0FBQUEsWUFDeEM7QUFBQSxVQUNGO0FBQ0Esb0JBQVUsS0FBSyxTQUFTLFNBQVMsSUFBSTtBQUVyQyxpQkFBTztBQUNQLGVBQUssTUFBTSxLQUFLO0FBQ2hCLGVBQUssSUFBSSxHQUFHLElBQUksSUFBSSxLQUFLO0FBQ3ZCLGtCQUFNLE1BQU0sS0FBSyxDQUFDO0FBRWxCLG1CQUFPO0FBQ1AsaUJBQUssSUFBSTtBQUNULGlCQUFLLElBQUksR0FBRyxJQUFJLElBQUksS0FBSztBQUN2QixzQkFBUSxLQUFLLFNBQVM7QUFBQSxnQkFDcEIsS0FBSyxZQUFZLElBQUksQ0FBQyxFQUFFLE1BQU07QUFBQSxnQkFDOUIsRUFBRSxRQUFRLE9BQU8sT0FBTyxNQUFNLE1BQU0sQ0FBQyxFQUFFO0FBQUEsY0FDekM7QUFBQSxZQUNGO0FBRUEsb0JBQVEsS0FBSyxTQUFTLFNBQVMsSUFBSTtBQUFBLFVBQ3JDO0FBQ0EsaUJBQU8sS0FBSyxTQUFTLE1BQU0sUUFBUSxJQUFJO0FBQ3ZDO0FBQUEsUUFDRjtBQUFBLFFBQ0EsS0FBSyxjQUFjO0FBQ2pCLGlCQUFPLEtBQUssTUFBTSxNQUFNLE1BQU07QUFDOUIsaUJBQU8sS0FBSyxTQUFTLFdBQVcsSUFBSTtBQUNwQztBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssUUFBUTtBQUNYLG9CQUFVLE1BQU07QUFDaEIsa0JBQVEsTUFBTTtBQUNkLGtCQUFRLE1BQU07QUFDZCxlQUFLLE1BQU0sTUFBTTtBQUVqQixpQkFBTztBQUNQLGVBQUssSUFBSSxHQUFHLElBQUksSUFBSSxLQUFLO0FBQ3ZCLG1CQUFPLE1BQU0sTUFBTSxDQUFDO0FBQ3BCLHNCQUFVLEtBQUs7QUFDZixtQkFBTyxLQUFLO0FBRVosdUJBQVc7QUFDWCxnQkFBSSxLQUFLLE1BQU07QUFDYix5QkFBVyxLQUFLLFNBQVMsU0FBUyxPQUFPO0FBQ3pDLGtCQUFJLE9BQU87QUFDVCxvQkFBSSxLQUFLLE9BQU8sU0FBUyxLQUFLLEtBQUssT0FBTyxDQUFDLEVBQUUsU0FBUyxhQUFhO0FBQ2pFLHVCQUFLLE9BQU8sQ0FBQyxFQUFFLE9BQU8sV0FBVyxNQUFNLEtBQUssT0FBTyxDQUFDLEVBQUU7QUFDdEQsc0JBQUksS0FBSyxPQUFPLENBQUMsRUFBRSxVQUFVLEtBQUssT0FBTyxDQUFDLEVBQUUsT0FBTyxTQUFTLEtBQUssS0FBSyxPQUFPLENBQUMsRUFBRSxPQUFPLENBQUMsRUFBRSxTQUFTLFFBQVE7QUFDekcseUJBQUssT0FBTyxDQUFDLEVBQUUsT0FBTyxDQUFDLEVBQUUsT0FBTyxXQUFXLE1BQU0sS0FBSyxPQUFPLENBQUMsRUFBRSxPQUFPLENBQUMsRUFBRTtBQUFBLGtCQUM1RTtBQUFBLGdCQUNGLE9BQU87QUFDTCx1QkFBSyxPQUFPLFFBQVE7QUFBQSxvQkFDbEIsTUFBTTtBQUFBLG9CQUNOLE1BQU07QUFBQSxrQkFDUixDQUFDO0FBQUEsZ0JBQ0g7QUFBQSxjQUNGLE9BQU87QUFDTCw0QkFBWTtBQUFBLGNBQ2Q7QUFBQSxZQUNGO0FBRUEsd0JBQVksS0FBSyxNQUFNLEtBQUssUUFBUSxLQUFLO0FBQ3pDLG9CQUFRLEtBQUssU0FBUyxTQUFTLFVBQVUsTUFBTSxPQUFPO0FBQUEsVUFDeEQ7QUFFQSxpQkFBTyxLQUFLLFNBQVMsS0FBSyxNQUFNLFNBQVMsS0FBSztBQUM5QztBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssUUFBUTtBQUVYLGlCQUFPLEtBQUssU0FBUyxLQUFLLE1BQU0sSUFBSTtBQUNwQztBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssYUFBYTtBQUNoQixpQkFBTyxLQUFLLFNBQVMsVUFBVSxLQUFLLFlBQVksTUFBTSxNQUFNLENBQUM7QUFDN0Q7QUFBQSxRQUNGO0FBQUEsUUFDQSxLQUFLLFFBQVE7QUFDWCxpQkFBTyxNQUFNLFNBQVMsS0FBSyxZQUFZLE1BQU0sTUFBTSxJQUFJLE1BQU07QUFDN0QsaUJBQU8sSUFBSSxJQUFJLEtBQUssT0FBTyxJQUFJLENBQUMsRUFBRSxTQUFTLFFBQVE7QUFDakQsb0JBQVEsT0FBTyxFQUFFLENBQUM7QUFDbEIsb0JBQVEsUUFBUSxNQUFNLFNBQVMsS0FBSyxZQUFZLE1BQU0sTUFBTSxJQUFJLE1BQU07QUFBQSxVQUN4RTtBQUNBLGlCQUFPLE1BQU0sS0FBSyxTQUFTLFVBQVUsSUFBSSxJQUFJO0FBQzdDO0FBQUEsUUFDRjtBQUFBLFFBRUEsU0FBUztBQUNQLGdCQUFNLFNBQVMsaUJBQWlCLE1BQU0sT0FBTztBQUM3QyxjQUFJLEtBQUssUUFBUSxRQUFRO0FBQ3ZCLG9CQUFRLE1BQU0sTUFBTTtBQUNwQjtBQUFBLFVBQ0YsT0FBTztBQUNMLGtCQUFNLElBQUksTUFBTSxNQUFNO0FBQUEsVUFDeEI7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsWUFBWSxRQUFRLFVBQVU7QUFDNUIsZUFBVyxZQUFZLEtBQUs7QUFDNUIsUUFBSSxNQUFNLElBQ1IsR0FDQSxPQUNBO0FBRUYsVUFBTSxJQUFJLE9BQU87QUFDakIsU0FBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLEtBQUs7QUFDdEIsY0FBUSxPQUFPLENBQUM7QUFHaEIsVUFBSSxLQUFLLFFBQVEsY0FBYyxLQUFLLFFBQVEsV0FBVyxhQUFhLEtBQUssUUFBUSxXQUFXLFVBQVUsTUFBTSxJQUFJLEdBQUc7QUFDakgsY0FBTSxLQUFLLFFBQVEsV0FBVyxVQUFVLE1BQU0sSUFBSSxFQUFFLEtBQUssRUFBRSxRQUFRLEtBQUssR0FBRyxLQUFLO0FBQ2hGLFlBQUksUUFBUSxTQUFTLENBQUMsQ0FBQyxVQUFVLFFBQVEsUUFBUSxTQUFTLFVBQVUsTUFBTSxZQUFZLE1BQU0sT0FBTyxNQUFNLEVBQUUsU0FBUyxNQUFNLElBQUksR0FBRztBQUMvSCxpQkFBTyxPQUFPO0FBQ2Q7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUVBLGNBQVEsTUFBTSxNQUFNO0FBQUEsUUFDbEIsS0FBSyxVQUFVO0FBQ2IsaUJBQU8sU0FBUyxLQUFLLE1BQU0sSUFBSTtBQUMvQjtBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssUUFBUTtBQUNYLGlCQUFPLFNBQVMsS0FBSyxNQUFNLElBQUk7QUFDL0I7QUFBQSxRQUNGO0FBQUEsUUFDQSxLQUFLLFFBQVE7QUFDWCxpQkFBTyxTQUFTLEtBQUssTUFBTSxNQUFNLE1BQU0sT0FBTyxLQUFLLFlBQVksTUFBTSxRQUFRLFFBQVEsQ0FBQztBQUN0RjtBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssU0FBUztBQUNaLGlCQUFPLFNBQVMsTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPLE1BQU0sSUFBSTtBQUN6RDtBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssVUFBVTtBQUNiLGlCQUFPLFNBQVMsT0FBTyxLQUFLLFlBQVksTUFBTSxRQUFRLFFBQVEsQ0FBQztBQUMvRDtBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssTUFBTTtBQUNULGlCQUFPLFNBQVMsR0FBRyxLQUFLLFlBQVksTUFBTSxRQUFRLFFBQVEsQ0FBQztBQUMzRDtBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssWUFBWTtBQUNmLGlCQUFPLFNBQVMsU0FBUyxNQUFNLElBQUk7QUFDbkM7QUFBQSxRQUNGO0FBQUEsUUFDQSxLQUFLLE1BQU07QUFDVCxpQkFBTyxTQUFTLEdBQUc7QUFDbkI7QUFBQSxRQUNGO0FBQUEsUUFDQSxLQUFLLE9BQU87QUFDVixpQkFBTyxTQUFTLElBQUksS0FBSyxZQUFZLE1BQU0sUUFBUSxRQUFRLENBQUM7QUFDNUQ7QUFBQSxRQUNGO0FBQUEsUUFDQSxLQUFLLFFBQVE7QUFDWCxpQkFBTyxTQUFTLEtBQUssTUFBTSxJQUFJO0FBQy9CO0FBQUEsUUFDRjtBQUFBLFFBQ0EsU0FBUztBQUNQLGdCQUFNLFNBQVMsaUJBQWlCLE1BQU0sT0FBTztBQUM3QyxjQUFJLEtBQUssUUFBUSxRQUFRO0FBQ3ZCLG9CQUFRLE1BQU0sTUFBTTtBQUNwQjtBQUFBLFVBQ0YsT0FBTztBQUNMLGtCQUFNLElBQUksTUFBTSxNQUFNO0FBQUEsVUFDeEI7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFDQSxXQUFPO0FBQUEsRUFDVDtBQUNGO0FBRUEsSUFBTSxRQUFOLE1BQVk7QUFBQSxFQUNWLFlBQVlKLFVBQVM7QUFDbkIsU0FBSyxVQUFVQSxZQUFXO0FBQUEsRUFDNUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVVBLFdBQVcsVUFBVTtBQUNuQixXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsWUFBWSxNQUFNO0FBQ2hCLFdBQU87QUFBQSxFQUNUO0FBQ0Y7QUFsQkUsY0FMSSxPQUtHLG9CQUFtQixvQkFBSSxJQUFJO0FBQUEsRUFDaEM7QUFBQSxFQUNBO0FBQ0YsQ0FBQztBQWlCSCxTQUFTLFFBQVEsUUFBUSxPQUFPLFVBQVU7QUFDeEMsU0FBTyxDQUFDLE1BQU07QUFDWixNQUFFLFdBQVc7QUFFYixRQUFJLFFBQVE7QUFDVixZQUFNLE1BQU0sbUNBQ1IsT0FBTyxFQUFFLFVBQVUsSUFBSSxJQUFJLElBQzNCO0FBQ0osVUFBSSxPQUFPO0FBQ1QsZUFBTyxRQUFRLFFBQVEsR0FBRztBQUFBLE1BQzVCO0FBQ0EsVUFBSSxVQUFVO0FBQ1osaUJBQVMsTUFBTSxHQUFHO0FBQ2xCO0FBQUEsTUFDRjtBQUNBLGFBQU87QUFBQSxJQUNUO0FBRUEsUUFBSSxPQUFPO0FBQ1QsYUFBTyxRQUFRLE9BQU8sQ0FBQztBQUFBLElBQ3pCO0FBQ0EsUUFBSSxVQUFVO0FBQ1osZUFBUyxDQUFDO0FBQ1Y7QUFBQSxJQUNGO0FBQ0EsVUFBTTtBQUFBLEVBQ1I7QUFDRjtBQUVBLFNBQVMsY0FBY0QsUUFBT0ssU0FBUTtBQUNwQyxTQUFPLENBQUMsS0FBSyxLQUFLLGFBQWE7QUFDN0IsUUFBSSxPQUFPLFFBQVEsWUFBWTtBQUM3QixpQkFBVztBQUNYLFlBQU07QUFBQSxJQUNSO0FBRUEsVUFBTSxVQUFVLEVBQUUsR0FBRyxJQUFJO0FBQ3pCLFVBQU0sRUFBRSxHQUFHLE9BQU8sVUFBVSxHQUFHLFFBQVE7QUFDdkMsVUFBTSxhQUFhLFFBQVEsSUFBSSxRQUFRLElBQUksT0FBTyxRQUFRO0FBRzFELFFBQUksT0FBTyxRQUFRLGVBQWUsUUFBUSxNQUFNO0FBQzlDLGFBQU8sV0FBVyxJQUFJLE1BQU0sZ0RBQWdELENBQUM7QUFBQSxJQUMvRTtBQUNBLFFBQUksT0FBTyxRQUFRLFVBQVU7QUFDM0IsYUFBTyxXQUFXLElBQUksTUFBTSwwQ0FDeEIsT0FBTyxVQUFVLFNBQVMsS0FBSyxHQUFHLElBQUksbUJBQW1CLENBQUM7QUFBQSxJQUNoRTtBQUVBLDZCQUF5QixHQUFHO0FBRTVCLFFBQUksSUFBSSxPQUFPO0FBQ2IsVUFBSSxNQUFNLFVBQVU7QUFBQSxJQUN0QjtBQUVBLFFBQUksVUFBVTtBQUNaLFlBQU0sWUFBWSxJQUFJO0FBQ3RCLFVBQUk7QUFFSixVQUFJO0FBQ0YsWUFBSSxJQUFJLE9BQU87QUFDYixnQkFBTSxJQUFJLE1BQU0sV0FBVyxHQUFHO0FBQUEsUUFDaEM7QUFDQSxpQkFBU0wsT0FBTSxLQUFLLEdBQUc7QUFBQSxNQUN6QixTQUFTLEdBQVA7QUFDQSxlQUFPLFdBQVcsQ0FBQztBQUFBLE1BQ3JCO0FBRUEsWUFBTSxPQUFPLFNBQVMsS0FBSztBQUN6QixZQUFJO0FBRUosWUFBSSxDQUFDLEtBQUs7QUFDUixjQUFJO0FBQ0YsZ0JBQUksSUFBSSxZQUFZO0FBQ2xCLHFCQUFPLFdBQVcsUUFBUSxJQUFJLFVBQVU7QUFBQSxZQUMxQztBQUNBLGtCQUFNSyxRQUFPLFFBQVEsR0FBRztBQUN4QixnQkFBSSxJQUFJLE9BQU87QUFDYixvQkFBTSxJQUFJLE1BQU0sWUFBWSxHQUFHO0FBQUEsWUFDakM7QUFBQSxVQUNGLFNBQVMsR0FBUDtBQUNBLGtCQUFNO0FBQUEsVUFDUjtBQUFBLFFBQ0Y7QUFFQSxZQUFJLFlBQVk7QUFFaEIsZUFBTyxNQUNILFdBQVcsR0FBRyxJQUNkLFNBQVMsTUFBTSxHQUFHO0FBQUEsTUFDeEI7QUFFQSxVQUFJLENBQUMsYUFBYSxVQUFVLFNBQVMsR0FBRztBQUN0QyxlQUFPLEtBQUs7QUFBQSxNQUNkO0FBRUEsYUFBTyxJQUFJO0FBRVgsVUFBSSxDQUFDLE9BQU87QUFBUSxlQUFPLEtBQUs7QUFFaEMsVUFBSSxVQUFVO0FBQ2QsYUFBTyxXQUFXLFFBQVEsU0FBUyxPQUFPO0FBQ3hDLFlBQUksTUFBTSxTQUFTLFFBQVE7QUFDekI7QUFDQSxxQkFBVyxNQUFNO0FBQ2Ysc0JBQVUsTUFBTSxNQUFNLE1BQU0sTUFBTSxTQUFTLEtBQUssTUFBTTtBQUNwRCxrQkFBSSxLQUFLO0FBQ1AsdUJBQU8sS0FBSyxHQUFHO0FBQUEsY0FDakI7QUFDQSxrQkFBSSxRQUFRLFFBQVEsU0FBUyxNQUFNLE1BQU07QUFDdkMsc0JBQU0sT0FBTztBQUNiLHNCQUFNLFVBQVU7QUFBQSxjQUNsQjtBQUVBO0FBQ0Esa0JBQUksWUFBWSxHQUFHO0FBQ2pCLHFCQUFLO0FBQUEsY0FDUDtBQUFBLFlBQ0YsQ0FBQztBQUFBLFVBQ0gsR0FBRyxDQUFDO0FBQUEsUUFDTjtBQUFBLE1BQ0YsQ0FBQztBQUVELFVBQUksWUFBWSxHQUFHO0FBQ2pCLGFBQUs7QUFBQSxNQUNQO0FBRUE7QUFBQSxJQUNGO0FBRUEsUUFBSSxJQUFJLE9BQU87QUFDYixhQUFPLFFBQVEsUUFBUSxJQUFJLFFBQVEsSUFBSSxNQUFNLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFDL0QsS0FBSyxDQUFBQyxTQUFPTixPQUFNTSxNQUFLLEdBQUcsQ0FBQyxFQUMzQixLQUFLLFlBQVUsSUFBSSxhQUFhLFFBQVEsSUFBSSxPQUFPLFdBQVcsUUFBUSxJQUFJLFVBQVUsQ0FBQyxFQUFFLEtBQUssTUFBTSxNQUFNLElBQUksTUFBTSxFQUNsSCxLQUFLLFlBQVVELFFBQU8sUUFBUSxHQUFHLENBQUMsRUFDbEMsS0FBSyxVQUFRLElBQUksUUFBUSxJQUFJLE1BQU0sWUFBWSxJQUFJLElBQUksSUFBSSxFQUMzRCxNQUFNLFVBQVU7QUFBQSxJQUNyQjtBQUVBLFFBQUk7QUFDRixVQUFJLElBQUksT0FBTztBQUNiLGNBQU0sSUFBSSxNQUFNLFdBQVcsR0FBRztBQUFBLE1BQ2hDO0FBQ0EsWUFBTSxTQUFTTCxPQUFNLEtBQUssR0FBRztBQUM3QixVQUFJLElBQUksWUFBWTtBQUNsQixlQUFPLFdBQVcsUUFBUSxJQUFJLFVBQVU7QUFBQSxNQUMxQztBQUNBLFVBQUksT0FBT0ssUUFBTyxRQUFRLEdBQUc7QUFDN0IsVUFBSSxJQUFJLE9BQU87QUFDYixlQUFPLElBQUksTUFBTSxZQUFZLElBQUk7QUFBQSxNQUNuQztBQUNBLGFBQU87QUFBQSxJQUNULFNBQVMsR0FBUDtBQUNBLGFBQU8sV0FBVyxDQUFDO0FBQUEsSUFDckI7QUFBQSxFQUNGO0FBQ0Y7QUFLQSxTQUFTLE9BQU8sS0FBSyxLQUFLLFVBQVU7QUFDbEMsU0FBTyxjQUFjLE1BQU0sS0FBSyxPQUFPLEtBQUssRUFBRSxLQUFLLEtBQUssUUFBUTtBQUNsRTtBQU1BLE9BQU8sVUFDUCxPQUFPLGFBQWEsU0FBUyxLQUFLO0FBQ2hDLFNBQU8sV0FBVyxFQUFFLEdBQUcsT0FBTyxVQUFVLEdBQUcsSUFBSTtBQUMvQyxpQkFBZSxPQUFPLFFBQVE7QUFDOUIsU0FBTztBQUNUO0FBRUEsT0FBTyxjQUFjO0FBRXJCLE9BQU8sV0FBVztBQU1sQixPQUFPLE1BQU0sWUFBWSxNQUFNO0FBQzdCLFFBQU0sYUFBYSxPQUFPLFNBQVMsY0FBYyxFQUFFLFdBQVcsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxFQUFFO0FBRWxGLE9BQUssUUFBUSxDQUFDLFNBQVM7QUFFckIsVUFBTSxPQUFPLEVBQUUsR0FBRyxLQUFLO0FBR3ZCLFNBQUssUUFBUSxPQUFPLFNBQVMsU0FBUyxLQUFLLFNBQVM7QUFHcEQsUUFBSSxLQUFLLFlBQVk7QUFDbkIsV0FBSyxXQUFXLFFBQVEsQ0FBQyxRQUFRO0FBQy9CLFlBQUksQ0FBQyxJQUFJLE1BQU07QUFDYixnQkFBTSxJQUFJLE1BQU0seUJBQXlCO0FBQUEsUUFDM0M7QUFDQSxZQUFJLElBQUksVUFBVTtBQUNoQixnQkFBTSxlQUFlLFdBQVcsVUFBVSxJQUFJLElBQUk7QUFDbEQsY0FBSSxjQUFjO0FBRWhCLHVCQUFXLFVBQVUsSUFBSSxJQUFJLElBQUksWUFBWUUsT0FBTTtBQUNqRCxrQkFBSSxNQUFNLElBQUksU0FBUyxNQUFNLE1BQU1BLEtBQUk7QUFDdkMsa0JBQUksUUFBUSxPQUFPO0FBQ2pCLHNCQUFNLGFBQWEsTUFBTSxNQUFNQSxLQUFJO0FBQUEsY0FDckM7QUFDQSxxQkFBTztBQUFBLFlBQ1Q7QUFBQSxVQUNGLE9BQU87QUFDTCx1QkFBVyxVQUFVLElBQUksSUFBSSxJQUFJLElBQUk7QUFBQSxVQUN2QztBQUFBLFFBQ0Y7QUFDQSxZQUFJLElBQUksV0FBVztBQUNqQixjQUFJLENBQUMsSUFBSSxTQUFVLElBQUksVUFBVSxXQUFXLElBQUksVUFBVSxVQUFXO0FBQ25FLGtCQUFNLElBQUksTUFBTSw2Q0FBNkM7QUFBQSxVQUMvRDtBQUNBLGNBQUksV0FBVyxJQUFJLEtBQUssR0FBRztBQUN6Qix1QkFBVyxJQUFJLEtBQUssRUFBRSxRQUFRLElBQUksU0FBUztBQUFBLFVBQzdDLE9BQU87QUFDTCx1QkFBVyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksU0FBUztBQUFBLFVBQ3hDO0FBQ0EsY0FBSSxJQUFJLE9BQU87QUFDYixnQkFBSSxJQUFJLFVBQVUsU0FBUztBQUN6QixrQkFBSSxXQUFXLFlBQVk7QUFDekIsMkJBQVcsV0FBVyxLQUFLLElBQUksS0FBSztBQUFBLGNBQ3RDLE9BQU87QUFDTCwyQkFBVyxhQUFhLENBQUMsSUFBSSxLQUFLO0FBQUEsY0FDcEM7QUFBQSxZQUNGLFdBQVcsSUFBSSxVQUFVLFVBQVU7QUFDakMsa0JBQUksV0FBVyxhQUFhO0FBQzFCLDJCQUFXLFlBQVksS0FBSyxJQUFJLEtBQUs7QUFBQSxjQUN2QyxPQUFPO0FBQ0wsMkJBQVcsY0FBYyxDQUFDLElBQUksS0FBSztBQUFBLGNBQ3JDO0FBQUEsWUFDRjtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBQ0EsWUFBSSxJQUFJLGFBQWE7QUFDbkIscUJBQVcsWUFBWSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQUEsUUFDekM7QUFBQSxNQUNGLENBQUM7QUFDRCxXQUFLLGFBQWE7QUFBQSxJQUNwQjtBQUdBLFFBQUksS0FBSyxVQUFVO0FBQ2pCLFlBQU0sV0FBVyxPQUFPLFNBQVMsWUFBWSxJQUFJLFNBQVM7QUFDMUQsaUJBQVcsUUFBUSxLQUFLLFVBQVU7QUFDaEMsY0FBTSxlQUFlLFNBQVMsSUFBSTtBQUVsQyxpQkFBUyxJQUFJLElBQUksSUFBSUEsVUFBUztBQUM1QixjQUFJLE1BQU0sS0FBSyxTQUFTLElBQUksRUFBRSxNQUFNLFVBQVVBLEtBQUk7QUFDbEQsY0FBSSxRQUFRLE9BQU87QUFDakIsa0JBQU0sYUFBYSxNQUFNLFVBQVVBLEtBQUk7QUFBQSxVQUN6QztBQUNBLGlCQUFPO0FBQUEsUUFDVDtBQUFBLE1BQ0Y7QUFDQSxXQUFLLFdBQVc7QUFBQSxJQUNsQjtBQUNBLFFBQUksS0FBSyxXQUFXO0FBQ2xCLFlBQU0sWUFBWSxPQUFPLFNBQVMsYUFBYSxJQUFJLFVBQVU7QUFDN0QsaUJBQVcsUUFBUSxLQUFLLFdBQVc7QUFDakMsY0FBTSxnQkFBZ0IsVUFBVSxJQUFJO0FBRXBDLGtCQUFVLElBQUksSUFBSSxJQUFJQSxVQUFTO0FBQzdCLGNBQUksTUFBTSxLQUFLLFVBQVUsSUFBSSxFQUFFLE1BQU0sV0FBV0EsS0FBSTtBQUNwRCxjQUFJLFFBQVEsT0FBTztBQUNqQixrQkFBTSxjQUFjLE1BQU0sV0FBV0EsS0FBSTtBQUFBLFVBQzNDO0FBQ0EsaUJBQU87QUFBQSxRQUNUO0FBQUEsTUFDRjtBQUNBLFdBQUssWUFBWTtBQUFBLElBQ25CO0FBR0EsUUFBSSxLQUFLLE9BQU87QUFDZCxZQUFNLFFBQVEsT0FBTyxTQUFTLFNBQVMsSUFBSSxNQUFNO0FBQ2pELGlCQUFXLFFBQVEsS0FBSyxPQUFPO0FBQzdCLGNBQU0sV0FBVyxNQUFNLElBQUk7QUFDM0IsWUFBSSxNQUFNLGlCQUFpQixJQUFJLElBQUksR0FBRztBQUNwQyxnQkFBTSxJQUFJLElBQUksQ0FBQyxRQUFRO0FBQ3JCLGdCQUFJLE9BQU8sU0FBUyxPQUFPO0FBQ3pCLHFCQUFPLFFBQVEsUUFBUSxLQUFLLE1BQU0sSUFBSSxFQUFFLEtBQUssT0FBTyxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUFDLFNBQU87QUFDcEUsdUJBQU8sU0FBUyxLQUFLLE9BQU9BLElBQUc7QUFBQSxjQUNqQyxDQUFDO0FBQUEsWUFDSDtBQUVBLGtCQUFNLE1BQU0sS0FBSyxNQUFNLElBQUksRUFBRSxLQUFLLE9BQU8sR0FBRztBQUM1QyxtQkFBTyxTQUFTLEtBQUssT0FBTyxHQUFHO0FBQUEsVUFDakM7QUFBQSxRQUNGLE9BQU87QUFDTCxnQkFBTSxJQUFJLElBQUksSUFBSUQsVUFBUztBQUN6QixnQkFBSSxNQUFNLEtBQUssTUFBTSxJQUFJLEVBQUUsTUFBTSxPQUFPQSxLQUFJO0FBQzVDLGdCQUFJLFFBQVEsT0FBTztBQUNqQixvQkFBTSxTQUFTLE1BQU0sT0FBT0EsS0FBSTtBQUFBLFlBQ2xDO0FBQ0EsbUJBQU87QUFBQSxVQUNUO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFDQSxXQUFLLFFBQVE7QUFBQSxJQUNmO0FBR0EsUUFBSSxLQUFLLFlBQVk7QUFDbkIsWUFBTUUsY0FBYSxPQUFPLFNBQVM7QUFDbkMsV0FBSyxhQUFhLFNBQVMsT0FBTztBQUNoQyxZQUFJLFNBQVMsQ0FBQztBQUNkLGVBQU8sS0FBSyxLQUFLLFdBQVcsS0FBSyxNQUFNLEtBQUssQ0FBQztBQUM3QyxZQUFJQSxhQUFZO0FBQ2QsbUJBQVMsT0FBTyxPQUFPQSxZQUFXLEtBQUssTUFBTSxLQUFLLENBQUM7QUFBQSxRQUNyRDtBQUNBLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUVBLFdBQU8sV0FBVyxJQUFJO0FBQUEsRUFDeEIsQ0FBQztBQUNIO0FBTUEsT0FBTyxhQUFhLFNBQVMsUUFBUSxVQUFVO0FBQzdDLE1BQUksU0FBUyxDQUFDO0FBQ2QsYUFBVyxTQUFTLFFBQVE7QUFDMUIsYUFBUyxPQUFPLE9BQU8sU0FBUyxLQUFLLFFBQVEsS0FBSyxDQUFDO0FBQ25ELFlBQVEsTUFBTSxNQUFNO0FBQUEsTUFDbEIsS0FBSyxTQUFTO0FBQ1osbUJBQVcsUUFBUSxNQUFNLFFBQVE7QUFDL0IsbUJBQVMsT0FBTyxPQUFPLE9BQU8sV0FBVyxLQUFLLFFBQVEsUUFBUSxDQUFDO0FBQUEsUUFDakU7QUFDQSxtQkFBVyxPQUFPLE1BQU0sTUFBTTtBQUM1QixxQkFBVyxRQUFRLEtBQUs7QUFDdEIscUJBQVMsT0FBTyxPQUFPLE9BQU8sV0FBVyxLQUFLLFFBQVEsUUFBUSxDQUFDO0FBQUEsVUFDakU7QUFBQSxRQUNGO0FBQ0E7QUFBQSxNQUNGO0FBQUEsTUFDQSxLQUFLLFFBQVE7QUFDWCxpQkFBUyxPQUFPLE9BQU8sT0FBTyxXQUFXLE1BQU0sT0FBTyxRQUFRLENBQUM7QUFDL0Q7QUFBQSxNQUNGO0FBQUEsTUFDQSxTQUFTO0FBQ1AsWUFBSSxPQUFPLFNBQVMsY0FBYyxPQUFPLFNBQVMsV0FBVyxlQUFlLE9BQU8sU0FBUyxXQUFXLFlBQVksTUFBTSxJQUFJLEdBQUc7QUFDOUgsaUJBQU8sU0FBUyxXQUFXLFlBQVksTUFBTSxJQUFJLEVBQUUsUUFBUSxTQUFTLGFBQWE7QUFDL0UscUJBQVMsT0FBTyxPQUFPLE9BQU8sV0FBVyxNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUM7QUFBQSxVQUN4RSxDQUFDO0FBQUEsUUFDSCxXQUFXLE1BQU0sUUFBUTtBQUN2QixtQkFBUyxPQUFPLE9BQU8sT0FBTyxXQUFXLE1BQU0sUUFBUSxRQUFRLENBQUM7QUFBQSxRQUNsRTtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNBLFNBQU87QUFDVDtBQU1BLE9BQU8sY0FBYyxjQUFjLE1BQU0sV0FBVyxPQUFPLFdBQVc7QUFLdEUsT0FBTyxTQUFTO0FBQ2hCLE9BQU8sU0FBUyxPQUFPO0FBQ3ZCLE9BQU8sV0FBVztBQUNsQixPQUFPLGVBQWU7QUFDdEIsT0FBTyxRQUFRO0FBQ2YsT0FBTyxRQUFRLE1BQU07QUFDckIsT0FBTyxZQUFZO0FBQ25CLE9BQU8sVUFBVTtBQUNqQixPQUFPLFFBQVE7QUFDZixPQUFPLFFBQVE7QUFFZixJQUFNLFVBQVUsT0FBTztBQUN2QixJQUFNLGFBQWEsT0FBTztBQUMxQixJQUFNLE1BQU0sT0FBTztBQUNuQixJQUFNLGFBQWEsT0FBTztBQUMxQixJQUFNLGNBQWMsT0FBTztBQUUzQixJQUFNLFNBQVMsT0FBTztBQUN0QixJQUFNLFFBQVEsTUFBTTs7O0FDcDBGcEIsSUFBQUMsbUJBQXVCOzs7QUNBdkIsSUFBQUMsbUJBQTJCOzs7QUNBcEIsSUFBTSxVQUFVOzs7QUNVakIsSUFBTyxTQUFQLE1BQWE7Y0FNakIsVUFBOEIsWUFBNkI7U0FDekQsV0FBSztTQUNMLGFBQUs7U0FDTCxVQUFLLElBQVUsV0FBSTs7U0FHUixlQUFjO1FBQ3pCLENBQUEsS0FBSyxTQUFLLE1BQVM7c0JBQ1osTUFBVztZQUNoQixJQUFBLE1BQVUsbURBQU07O1VBRWxCLGNBQU0sSUFBYyxZQUFJO1VBRXhCLE9BQU0sNEJBQU8sS0FBbUMsU0FBSyxJQUFTO3FCQUNuRCxTQUFXLE1BQUk7aUJBQ25CLFFBQU0sWUFBUSxPQUFZLEtBQU0sR0FBQztvQkFDcEMsS0FBUyxRQUFRLE9BQU8sSUFBQzs7QUFDekIsZ0JBQU87OztlQUVWLFFBQUEsWUFBQSxNQUFBLEdBQUE7WUFFRCxNQUFLLEtBQVUsUUFBSSxPQUFXLElBQUM7O0FBQzdCLGNBQVM7OztVQUVWLE9BQUEsYUFBQSxJQUFBO0FBQ0gsUUFBQyxPQUFBO0FBRUQsUUFBQTt1QkFDYSxPQUFNLEtBQUEsYUFBQSxHQUFBO0FBQ2pCLFlBQUk7QUFBQTtZQUNGLElBQUksS0FBSyxXQUFXLFFBQVEsR0FBQztpQkFDM0I7OzswQkFHTSxNQUFROztrQkFFYixLQUFBLE1BQUEsSUFBQSxJQUFBO21CQUVEO29CQUNFLE1BQUksc0NBQUEsSUFBQSxJQUFBOzBCQUNGLGVBQWlCLElBQUksR0FBQTs7Ozs7Ozt1QkFPMUIsU0FBQSxFQUFBLFNBQUE7QUFBQTtZQUNEOzs7QUFFQSxhQUFBLFdBQUEsTUFBQTs7Ozt1QkFHRDtnQkFBUztpQkFDUjtnQkFDSSxDQUFDO2tCQUFNLENBQUE7O1NBRWQsTUFBQTtBQUNGLFFBQUEsS0FBQSxTQUFBLElBQUEsR0FBQTtBQUVLLGFBQUEsS0FBVSxVQUFBLEdBQUEsS0FBQSxTQUFBLENBQUE7SUFLZDtRQUNFLENBQUEsTUFBSztVQUVMLENBQUEsS0FBSyxTQUFZLENBQUEsS0FBQSxLQUFBO0FBQUEsZUFBQTtBQUNsQixZQUFBLE1BQUE7UUFFRCxPQUFtQixLQUFBO1FBQ2pCLE1BQUksS0FBSyxLQUFBLEtBQVMsSUFBTzthQUN2QixLQUFJOztXQUdOLFFBQVc7a0JBQ1QsQ0FBQTtvQkFDSyxDQUFJOzs7Z0JBR1AsS0FBSyxJQUFFO3dCQUNELEdBQUssR0FBQTs7O29CQUlSLEdBQUssS0FBRyxJQUFLLFVBQUEsTUFBQSxHQUFBO2NBQ2xCLFdBQVksR0FBRyxHQUFBO2NBQ2YsTUFBSyxVQUFZLENBQUE7O3NCQUdsQixTQUFBO1dBRUQsUUFBVztlQUVQLGNBQWdCLFFBQU07Z0JBQ3hCLEtBQU8sS0FBSzs7V0FHZDs7O3dCQVVDO2dCQUVNO0FBQ1QsU0FBQyxTQUFBLENBQUE7QUFDRixTQUFBLGFBQUE7RUFFRDs7Ozs7QUFLRyxXQUFBLGFBQUE7SUFDSDtBQVNFLFFBQUEsS0FBQSxTQUFBLElBQUEsR0FBQTtXQUNFLGFBQWdCO2FBQ1gsS0FBQSxNQUFVLEdBQUcsRUFBQTtJQUNwQjtBQUVBLFFBQUEsQ0FBQSxNQUFPO2FBQ0QsQ0FBQTs7NEJBR1ksWUFBSyxjQUFBLElBQUEsS0FBQSxLQUFBLFNBQUEsQ0FBQSxLQUFBLEVBQUE7Z0JBQ2YsS0FBQyxNQUFVLFlBQVMsY0FBQTtjQUN6QixXQUFBLEtBQUEsQ0FBQSxpQkFBQTtXQUNELE9BQVMsS0FBQSxNQUFTLENBQUksQ0FBQzthQUNyQixDQUFBOzthQUVELE9BQUEsU0FBQSxHQUFBO2NBRUksQ0FBQSxLQUFNLE9BQUEsS0FBQSxFQUFBLElBQUEsTUFBQSxDQUFBLEdBQUEsR0FBQSxNQUFBLE1BQUEsQ0FBQSxDQUFBO29CQUNGLENBQUU7O1FBR1gsQ0FBQSxpQkFBTTtXQUNOLFNBQVksQ0FBQSxNQUFLLElBQU0sS0FBQSxFQUFBOzs7O2FBS3RCLE9BQUE7UUFFREM7aUJBQ087QUFBSSxhQUFLO2VBQ2QsVUFBVztBQUFNLGFBQUE7UUFHbkIsT0FBSyxXQUFBLGFBQWlCOzJCQUNMLFFBQU07ZUFDdEIsTUFBQSxTQUFBOztBQUdGLFVBQUEsaUJBQUEsWUFBQTtBQUVELGVBQVcsT0FBWSxLQUFBLEtBQUEsRUFBQSxTQUFBOztZQUNqQixJQUFBO2dEQUF5QixNQUFBLFlBQUE7OztRQUk3QixPQUFJLGdCQUFrQixhQUFhOzJCQUN4QixjQUFvQixpQkFBQSxhQUFBO29CQUMzQixpQkFBYSxRQUFXQSxRQUFBLFNBQUFBLE1BQUEsS0FBQSxjQUFBLElBQUEsWUFBQSxNQUFBO2VBQ3pCLEtBQUEsWUFBQSxPQUFBLEtBQUE7O2dCQUVDOzREQUNELE1BQUEsWUFBQTs7O1VBT0gsSUFBQTs7Ozs7Y0FLRyxPQUFBLFVBQUEsQ0FBQSxLQUFBLFlBQUE7YUFFRCxDQUFBOztVQU9GLFFBQVUsQ0FBQSxLQUNSLE9BQUEsS0FBQSxFQUFBLENBQUE7QUFFSixTQUFDLFNBQUEsQ0FBQTtBQUVELFNBQUssYUFBQTtXQUNIOzs7WUFLSSxnQkFBYSxvQkFBQSxJQUFBLENBQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxLQUFBLEtBQUEsS0FBQSxRQUFBLFVBQUEsUUFBQSxDQUFBO1lBQ2IsaUJBQWM7U0FDbEIsVUFBTyxLQUFNLFdBQUE7UUFDZCxRQUFBLElBQUEsUUFBQSxTQUFBOztBQS9GRCxXQUFBLENBQUEsSUFBQSxVQUFrQixHQUFBLEtBQUEsR0FBQSxXQUFBLElBQUEsVUFBQSxRQUFBLFVBQUEsTUFBQSxDQUFBO0VBQ1g7QUFDQSxTQUFBLENBQUEsS0FBQSxJQUFBLEVBQUE7QUFnR1Q7QUFTQSxTQUFBLDRCQUFBLFFBQUE7Ozs7OztBQUtHLFVBQUE7QUFDSCxjQUFTLFNBQUEsTUFBQSxPQUEyQixLQUFJO0FBQ2xDLFlBQUEsV0FBYyxRQUFBLFdBQWMsU0FBQSxTQUFBLE9BQUE7QUFBQSxpQkFBQSxZQUFBO0FBQUUsZUFBTztNQUV6QyxTQUFNLEdBQU47QUFDQSxlQUFPLFlBQUE7QUFDTCxjQUFNOzs7bUJBR0Y7NEJBQXlCLE9BQUEsT0FBZTt5QkFDakM7O2FBQ1AsRUFBQSxNQUFRLE1BQUUsT0FBQSxPQUFBOzt5QkFFRixJQUFBO2FBQ1Q7Ozs7OztBQ3hRUDs7Ozs7Ozs7Ozs7Ozs7O0FBSU0sSUFBTyxXQUFQLGNBQXdCLE1BQUs7Y0FTakMsUUFDNEIsT0FDRCxTQUNFLFNBQ0M7VUFFNUIsU0FBTSxZQUFTLE9BQVksT0FBTyxDQUFBO1NBQ2xDLFNBQUs7U0FDTCxVQUFLO1VBRUwsT0FBTTtTQUNOLFFBQUs7U0FDTCxPQUFLLFNBQVcsUUFBQSxTQUFBLFNBQUEsU0FBQSxLQUFKLE1BQU87U0FDbkIsUUFBSyxTQUFZLFFBQUEsU0FBQSxTQUFBLFNBQUEsS0FBSixPQUFPO1NBQ3BCLE9BQUssU0FBVyxRQUFBLFNBQUEsU0FBQSxTQUFBLEtBQUosTUFBTzs7U0FHYixZQUFPLE9BQXNCLFNBQTZCO3NCQUkxRCxRQUFLLFVBQVUsU0FBTSxTQUFRLE1BQUEsd0JBRS9CLFlBQVcsV0FBQSxNQUFBLFVBRWhCLEtBQUEsVUFBQSxNQUFBLE9BQUEsSUFFRCxRQUFPLEtBQ0wsVUFDQSxLQUFBLElBSUEsV0FBVzs7U0FJWCxTQUFNLFFBQVMsZUFBcUMsU0FBckMsU0FBQTtRQUVmLENBQUEsUUFBSTthQUNGLElBQUEsbUJBQVcsRUFBZSxPQUFPLFlBQVMsYUFBZ0IsRUFBRSxDQUFBOztVQUc5RCxRQUFVLGtCQUFVLFFBQUEsa0JBQUEsU0FBQSxTQUFBLGNBQUEsT0FBQTttQkFDWCxLQUFJO2FBQ1osSUFBQSxnQkFBQSxRQUFBLE9BQUEsU0FBQSxPQUFBOzttQkFHUSxLQUFJO2FBQ1osSUFBQSxvQkFBQSxRQUFBLE9BQUEsU0FBQSxPQUFBOzttQkFHUSxLQUFJO2FBQ1osSUFBQSxzQkFBQSxRQUFBLE9BQUEsU0FBQSxPQUFBOzttQkFHUSxLQUFJO2FBQ1osSUFBQSxjQUFBLFFBQUEsT0FBQSxTQUFBLE9BQUE7O21CQUdRLEtBQUk7YUFDWixJQUFBLGNBQUEsUUFBQSxPQUFBLFNBQUEsT0FBQTs7bUJBR1EsS0FBSTthQUNaLElBQUEseUJBQUEsUUFBQSxPQUFBLFNBQUEsT0FBQTs7bUJBR1EsS0FBSTthQUNaLElBQUEsZUFBQSxRQUFBLE9BQUEsU0FBQSxPQUFBOztBQUdILFFBQUMsVUFBQSxLQUFBO0FBQ0YsYUFBQSxJQUFBLG9CQUFBLFFBQUEsT0FBQSxTQUFBLE9BQUE7SUFFRDtBQUdFLFdBQUEsSUFBQSxTQUFjLFFBQW9DLE9BQUEsU0FBQSxPQUFBOzs7QUFFakQsSUFBQSxvQkFBQSxjQUFBLFNBQUE7RUFDRixZQUFBLEVBQUEsUUFBQSxJQUFBLENBQUEsR0FBQTtBQUVELFVBQU0sUUFBTyxRQUFtQixXQUFRLHdCQUFRLE1BQUE7QUFHOUMsU0FBQSxTQUFjOzs7SUFFWixtQ0FBQSxTQUFBO2NBQ0EsRUFBQSxTQUFhLE1BQUEsR0FBQTtVQUNiLFFBQVMsUUFBQSxXQUFBLHFCQUFBLE1BQUE7a0JBQU87QUFJcEIsUUFBTTtBQUFPLFdBQUEsUUFBQTs7O0FBR1YsSUFBQSw0QkFBQSxjQUFBLG1CQUFBO0VBQ0YsWUFBQSxFQUFBLFFBQUEsSUFBQSxDQUFBLEdBQUE7QUFFRCxVQUFNLEVBQUEsU0FBTyxZQUFnQixRQUFRLFlBQVEsU0FBQSxVQUFBLHFCQUFBLENBQUE7OztJQUN6QixnQ0FBa0IsU0FBQTtnQkFDckM7QUFBQSxVQUFBLEdBQUEsU0FBQTtBQUVELFNBQU0sU0FBTzs7O0lBQ08sb0NBQWtCLFNBQUE7Z0JBQ3JDO0FBQUEsVUFBQSxHQUFBLFNBQUE7QUFFRCxTQUFNLFNBQU87OztJQUNPLHNDQUFrQixTQUFBO2dCQUNyQztBQUFBLFVBQUEsR0FBQSxTQUFBO0FBRUQsU0FBTSxTQUFPOzs7SUFDTyw4QkFBa0IsU0FBQTtnQkFDckM7QUFBQSxVQUFBLEdBQUEsU0FBQTtBQUVELFNBQU0sU0FBTzs7O0lBQ08sOEJBQWtCLFNBQUE7Z0JBQ3JDO0FBQUEsVUFBQSxHQUFBLFNBQUE7QUFFRCxTQUFNLFNBQU87OztJQUNPLHlDQUFrQixTQUFBO2dCQUNyQztBQUFBLFVBQUEsR0FBQSxTQUFBO0FBRUQsU0FBTSxTQUFPOzs7SUFDTywrQkFBa0IsU0FBQTtnQkFDckM7QUFBQSxVQUFBLEdBQUEsU0FBQTtBQUVELFNBQU0sU0FBTztFQUF1Qzs7Ozs7O0FDcEk3QyxJQUFNLGtCQUFrQixDQUFDLFFBQW9CO1NBQ2xEO0FBQ0Y7OztBQ0pBLElBQU0sU0FBUyxNQUFNLEtBQUssTUFBUztBQUs1QixJQUFNLGVBQWU7OztBQ1I1QixJQUFNLFlBQVk7QUFHbEIsSUFBTSxRQUNKLE9BQU8sU0FBUyxjQUFjO0FBQUE7QUFBQSxFQUU1QixNQUFNQyxjQUFhLEtBQUs7QUFBQSxJQUN0QixjQUFjO0FBQ1osWUFBTSxJQUFJLE1BQU0sZ0ZBQWdGO0FBQUEsSUFDbEc7QUFBQSxFQUNGO0FBQUE7OztBQ05KLGVBQXNCLDJCQUNwQixNQUNBLE1BQXVCO1NBRXZCLEVBQU8sR0FBRSxNQUFPLE1BQU0sSUFBRSxjQUFJLElBQWMsRUFBSTtBQUNoRDs7O0FDV0EsZUFBc0IsZUFBWTtRQUNoQyxJQUFNO0lBR1A7Ozs7O0FDREssU0FBVSxlQUFlLE9BQVU7U0FDdkM7QUFDRjs7O0FDNEJPLElBQU0saUJBQWlCLENBQUMsbUJBRXRCLGVBQ1AsVUFBYSxtQkFDYixNQUFPLFFBQVUsWUFFbkIsT0FBTyxNQUFNLFNBQVU7QUFFckIsSUFBTyxhQUFVLENBQUEsbUJBQ1YsZUFDUCxVQUFhLG1CQUNiLE1BQVcsU0FBTyxZQUVwQixPQUFBLE1BQUEsaUJBQUE7QUFPRSxJQUFPLGFBQWUsQ0FBQSxtQkFDZixlQUNQLFVBQWEsbUJBQ2IsTUFBTyxTQUFXLG1CQUNsQixNQUFPLFNBQU0sWUFFZixPQUFPLE1BQU0sU0FBQSxxQkFDWCxNQUFPLFVBQVcsY0FDbEIsT0FBQSxNQUFBLGdCQUFBO0FBSUYsSUFBQSxlQUFBLENBQUEsVUFBQTs7O2VBZWdCLE9BQU0sT0FBQSxNQUFBQyxXQUFBLENBQUEsR0FBQTtNQUVwQkMsS0FBSSxJQUFBO1VBRUYsTUFBSTtxQkFFTyxLQUFNLEdBQVc7VUFDN0IsT0FBQSxNQUFBLE1BQUEsS0FBQTtBQUVELGFBRUEsUUFFS0EsTUFBQSxJQUFRLElBQUksTUFBRSxHQUFBLEVBQUEsU0FBQSxNQUFBLE9BQUEsRUFBQSxJQUFBLE9BQUEsUUFBQUEsUUFBQSxTQUNqQkEsTUFDQTtlQUNFLE1BQU8sQ0FBQSxJQUFLLEdBQUcsTUFBT0QsUUFBTTs7UUFFL0IsT0FBQSxNQUFBLFNBQUEsS0FBQTtXQUVNLFFBQVEsS0FBSyxRQUFRLEtBQUEsT0FBUyxRQUFBLE9BQUEsU0FBQSxLQUFBO0FBQ3RDLE1BQUEsQ0FBQUEsU0FBQSxNQUFBO0FBRUQsVUFBSyxRQUFVLEtBQVEsS0FBQyxDQUFrQixPQUFBLFFBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQTs7QUFDeEMsTUFBQUEsV0FBNkIsRUFBRSxHQUFDQSxVQUFBLEtBQUE7SUFDaEM7O1NBR0UsSUFBSyxNQUFBLE1BQUEsTUFBWUEsUUFBVzs7ZUFHN0IsU0FBQSxPQUFBOztjQUNPLENBQUE7YUFDRCxVQUNMLHdCQUNBLE9BQUEsS0FBQTttQkFDVztVQUVWLEtBQUEsS0FBQTthQUNGLFdBQUEsS0FBQSxHQUFBO1VBQU0sS0FBQSxNQUFBLE1BQUEsWUFBQSxDQUFBO3FDQU1OLEtBQUEsR0FFRDtBQUNELHFCQUFBLFNBQUEsT0FBQTtBQUVELFlBQVMsS0FBQSxLQUFhO0lBQ3BCO1NBQ0E7QUFDRCxVQUFBLElBQUE7TUFFRCx5QkFBMkIsT0FBQSw0SEFDekIsU0FFRUMsSUFBQTs7O0FBSUgsU0FBQTtBQUVEO1NBQ00sY0FBYSxPQUFRO1FBQUUsUUFBUSxPQUFDLG9CQUFBLEtBQUE7U0FDaEMsSUFBQSxNQUFPLElBQU0sQ0FBQSxNQUFLLElBQUEsSUFBVyxFQUFBLEtBQUssSUFBQTs7U0FDdEMsUUFBTyxPQUFVO0FBQ2pCLE1BQUFBO0FBRUYsU0FHQSx5QkFBMEIsTUFBQSxJQUFBLEtBQ3hCLHlCQUE0QyxNQUFBLFFBQUE7SUFBSUEsTUFBQSx5QkFBQSxNQUFBLElBQUEsT0FBQSxRQUFBQSxRQUFBLFNBQUEsU0FBQUEsSUFBQSxNQUFBLE9BQUEsRUFBQSxJQUFBOztJQUcvQywyQkFBQSxDQUFBLE1BQUE7QUFDRixNQUFBLE9BQUEsTUFBQTtBQUFBLFdBQUE7QUFFRCxNQUFNLE9BQU8sV0FBQSxlQUFxRCxhQUN4RDtBQUFXLFdBQUssT0FBUSxDQUFBO0FBRWxDLFNBQUE7O2tEQUdHLFFBQUEsT0FBQSxVQUFBLFlBQUEsT0FBQSxNQUFBLE9BQUEsYUFBQSxNQUFBO0FBQ0ksSUFBTSxnQkFBTixNQUFNO2NBR04sTUFBQTtTQUErQixPQUFPOztPQUczQyxPQUFPLFdBQUEsSUFBQTtBQUNQLFdBQUE7RUFFRjs7QUFJRSxJQUFPLGtCQUFBLENBQUEsU0FDUCxRQUFBLE9BQUEsU0FBQSxZQUFBLEtBQUEsUUFBQSxLQUFBLE9BQUEsV0FBQSxNQUFBO0lBVTBCLDhCQUFrQixPQUFvQixTQUFBO1FBQzVELE9BQUssTUFBSSxXQUFZLEtBQUssSUFBQTtTQUM1QiwyQkFBdUIsTUFBQSxJQUFBOztpQkFDNkIsT0FBSyxTQUFBO2VBQ3hELElBQUEsVUFBQTtRQUNGLFFBQUEsSUFBQSxPQUFBLFFBQUEsUUFBQSxDQUFBLENBQUEsRUFBQSxJQUFBLENBQUEsQ0FBQSxLQUFBLEtBQUEsTUFBQSxhQUFBLE1BQUEsS0FBQSxLQUFBLENBQUEsQ0FBQTtTQUNEO0FBQ0Y7bUJBYWEsT0FBYSxNQUFRLEtBQUEsVUFBQTtnQkFDeEI7QUFBYTtlQUNkLE1BQU87VUFDYixJQUFBOzRCQUF3Qjs7O2FBR3ZCLFVBQWMsWUFDTCxPQUFRLFVBQVcsWUFBWSxPQUFNLFVBQUEsV0FBc0I7U0FFckUsT0FBQSxLQUFBLE9BQUEsS0FBQSxDQUFBO2FBQU0sYUFBQSxLQUFBLEdBQUE7VUFDTCxPQUFNLE1BQUksT0FDUixLQUFBO1NBRUgsT0FBQSxLQUFBLElBQUE7RUFDRCxXQUFBLE1BQUEsUUFBQSxLQUFBLEdBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQ25QQSxVQUNBLE9BQVksTUFBSSxHQUFBO01BT1gsU0FBRSxPQUFlLENBQUE7QUFBRSxVQUFBLElBQUEsVUFBQSwrQ0FBQTtNQUNuQixPQUNMLFVBQUEsYUFBQSxhQUNBLFNBQUEsQ0FBQSxJQUFBLENBQUEsTUFDQSxJQUFBLFFBQVU7QUFJTixVQUFBLElBQUEsVUFBZ0IsMEVBQUE7QUFZdEIsU0FDRSxTQUFRLE1BQVEsSUFDWixTQUFNLE1BQVEsRUFBQSxLQUFRLFFBQUEsSUFDeEIsSUFBQSxFQUFBLFFBQ0EsTUFBQSxJQUFBLFFBQUE7O0lBSUY7SUFXQSxjQUFnQjtlQUNPLHFCQUFDLE9BQUE7QUFDekIsUUFBQSxFQUFBLFNBQUEsSUFBQTtBQUVELE1BQUEsTUFBQSxRQUFBLFFBQUE7QUFHRyxXQUFBLElBQUEsT0FBQSxVQUFBLE1BQUEsVUFBQTtFQUNIO1FBR0UsY0FDVSxTQUEwQyxRQUMxQyxJQUFBLGNBQWdFO3NCQUUxRCxRQUFJLGdCQUFBLFNBQUEsU0FBQSxZQUFBLFNBQUEsa0JBQUEsR0FBQTtpQkFDaEIsTUFBQSxTQUFBLEtBQUE7c0JBQ0EsU0FBQSxRQUFBLFNBQUEsS0FBQSxTQUFBLFNBQUEsSUFBQTs7O1FBTE0sT0FBQSxNQUFBLFNBQWUsS0FBZjtRQUNBLFlBQUEsU0FBQSxRQUFBLFNBQW9GLEtBQUEsU0FBQSxTQUFBLElBQUE7U0FRN0Y7Ozs7O2NBY0MsSUFBTztJQUNULENBQUM7QUFDRCxTQUFBLGtCQUFBOzs7Ozs7Ozs7Ozs7O2VBY0c7V0FDRCxLQUFPLGdCQUFLLEtBQWMsQ0FBQSxNQUFBLEVBQUEsUUFBQTs7Ozs7Ozs7UUFnQm5CLGVBQW1EO1VBQzFELENBQUEsTUFBTyxRQUFVLElBQUcsTUFBTyxRQUFDLElBQVcsQ0FBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLFdBQUEsQ0FBQSxDQUFBO0FBQ3pDLFdBQUMsRUFBQSxNQUFBLFNBQUE7RUFDRjtFQUVELFFBQU07QUFTSixRQUFBLENBQUEsS0FBQSxlQUVFO0FBRUEsV0FBQSxnQkFDTyxLQUFBLGdCQU9SLEtBQUEsS0FBQSxhQUFBOztXQUVDLEtBQUs7O29CQUVBLFlBQVk7V0FFakIsS0FBSyxNQUFRLEVBQUEsS0FBQSxhQUFjLFVBQWQ7O1FBR0wsWUFBcUM7V0FDN0MsS0FBTyxNQUFHLEVBQUEsTUFBQSxVQUFBOztVQUdaLFdBQUE7Ozs7Ozs7O0lBUVUsVUFBQTs7Ozs7bUJBSU47c0JBQ0c7O3FCQUVILFFBQUEsZUFBQSxTQUFBLGFBQUE7SUFDSjtBQUlBLFNBQUEsVUFBQSx3QkFBQSxXQUFBLE9BQUE7O1NBRUcsUUFBQSxtQkFBQSxRQUFBLG1CQUFBLFNBQUEsaUJBQUE7O2NBR08sTUFBQTtXQUNSLENBQUE7Ozs7Ozs7Ozs7aUJBYUQsTUFBQTtBQUVELFdBQXlCO2NBQ3ZCO01BQ0QsZ0JBQUE7TUFFRCxjQUEwQyxLQUEwQyxhQUFBO1NBQ2xGLG1CQUFZO01BQ2IsR0FBQSxLQUFBLFlBQUEsSUFBQTtJQUVPOzs7OztrQkFjUCxTQUFBLGVBQUE7RUFBQTswQkFFNkI7V0FDNUIsd0JBQW9CLE1BQVU7O2tCQUUxQjtnQkFDRCxjQUFBLE9BQUEsTUFBQSxJQUFBOzttQkFHQztnQkFDQSxjQUFhLFFBQUcsTUFBUSxJQUFPOztjQUVoQyxNQUFBO1dBQ0YsS0FBQSxjQUFBLFNBQUEsTUFBQSxJQUFBOztNQUdGLE1BQUEsTUFBQTtBQUVELFdBQUEsS0FBWSxjQUN1QixPQUFBLE1BQUEsSUFBQTs7U0FFakMsTUFBTSxNQUFFO1dBRVIsS0FBTSxjQUNKLFVBQWdCLE1BQVEsSUFBSzs7Z0JBRTdCLFFBQU8sTUFBQSxNQUFBO1dBQ1QsS0FBTSxRQUFBLFFBQWdCLFFBQUssSUFBQSxFQUFBLEtBQUEsQ0FBQUMsV0FBMkIsRUFBRSxRQUFBLE1BQUEsR0FBQUEsTUFBQSxFQUFBLENBQUE7O2FBR3BELE1BQUFDLE9BQWEsTUFBQTtnQkFBUyxlQUFBQSxPQUF3QixFQUFBLFFBQVcsT0FBTyxNQUFDLEdBQVEsS0FBQyxDQUFBOzt5QkFFL0QsTUFBRztRQUNsQixPQUFNLFNBQUEsVUFBa0I7VUFDeEIsT0FDRSxXQUFRLGFBQWlCO2VBQ3pCLE9BQUEsV0FBbUIsTUFBQyxNQUFBLEVBQWtCLFNBQVE7O2lCQUc5QyxnQkFBQSxhQUFBO2NBQ0EsVUFBQSxJQUFBLFlBQUE7Y0FDQSxVQUFBLFFBQUEsT0FBQSxJQUFBO2VBQ0MsUUFBa0IsT0FBUSxTQUFPOzs7OztlQUtsQ0MsVUFBWTthQUNiLElBQUEsSUFBQSxJQUFBLElBQUE7VUFFRCxFQUFBLFFBQU0sTUFBVSxPQUEyQixVQUFBLENBQUEsRUFBQSxJQUFBQTtpQ0FFakNBLFNBQUEsSUFBYyxJQUFDQSxTQUFRLEtBQUEsZ0JBQzVCLE9BQU8sS0FBQSxVQUFBQSxTQUFBLE1BQUEsTUFBQSxDQUFBO1VBRVosZ0JBQUEsS0FBQSx1QkFBQSxJQUFBO1VBQ0EsTUFBSSxLQUFBLFNBQWdCLE1BQVEsS0FBSztxQkFDeEJBO0FBQVcsOEJBQWdCLFdBQUFBLFNBQUEsT0FBQTtVQUNuQyxXQUFBQyxNQUFBRCxTQUFBLGFBQUEsUUFBQUMsUUFBQSxTQUFBQSxNQUFBLEtBQUE7VUFFRCxhQUdBLE1BQU0sS0FBbUJELFNBQUEsZUFBQSxRQUFBLE9BQUEsU0FBQSxLQUFBLEtBQUEsZUFBQSxlQUN2Qiw4QkFHSSxHQUFTOzRCQUNiLFVBQUE7aUJBR0QsS0FBQyxjQUFBLFFBQUEsY0FBQSxTQUFBLFNBQUEsVUFBQSxhQUFBLFFBRUYsT0FBSyxTQUdOLFNBRUQsR0FBQSxhQUFBO0FBV1UsZ0JBQVksUUFBd0MsVUFBQTs7YUFHekQscUJBQW9CLFdBQVMsT0FBQTtvQkFDNUI7QUFBbUIsUUFBQUEsU0FBTSxpQkFBeUMsS0FBQSxzQkFBd0I7bUJBQzFGLGlCQUNGLElBQUFBLFNBQUE7SUFDSjtBQUVVLFVBQUEsYUFDUjtTQUtBLGlCQUFnQixFQUFBLGtCQUFzQixjQUFXO01BQ2xELEdBQUEsS0FBQSxlQUFBQSxRQUFBO01BRUQsR0FBQTs7QUFPUSxRQUFBLGdCQUNOQSxTQUFBLElBQ0EsS0FBQSxDQUFBLGNBQStCOzs7Z0JBSTdCLFVBQUEsRUFBZ0IsUUFBRyxDQUFBLFFBQVEsV0FBVSxHQUFBLE1BQUEsUUFBQSxPQUFBLFdBQUksR0FBSSxDQUFDO1VBQy9DLE1BQUE7O1NBSUQsUUFBVSxFQUFDLEtBQUE7ZUFFTDtTQUVOLGFBQUksRUFBTyxPQUFPLFVBQUE7OztlQUlaLEtBQUFBLFNBQWEsWUFBSSxRQUFpQixPQUFDLFNBQUEsS0FBQTs7U0FHekMsZ0JBQVksWUFBaUIsT0FBRTthQUM3QixLQUFJLEtBQUEsUUFBUTs7Ozs7Ozs7dUJBUVgsU0FBQSxFQUFBLEtBQUEsU0FBQUEsU0FBQSxHQUFBO0VBQUE7ZUFDRCxTQUFVO3NCQUdOLENBQUEsSUFFTixPQUFLLFlBQWEsVUFBQSxPQUFBLFlBQUEsTUFBQSxLQUFBLE9BQUEsRUFBQSxJQUFBLENBQUEsV0FBQSxDQUFBLEdBQUEsTUFBQSxDQUFBLENBQUEsU0FDaEIsUUFBSTs7a0JBSUUsUUFBTyxPQUFHLFNBQWMsU0FBUTtvQkFDaEMsU0FBVSxRQUFTLE9BQU8sU0FBRSxPQUFBOztvQkFHNUIsbUJBQW9CLE1BQUM7ZUFFM0IsV0FBWSxLQUFLLFlBQUFBLFVBQWdCLGdCQUFpQixDQUFPOztvQkFFMUQsY0FBQSxrQkFBQTtRQUVEQyxLQUFBLElBQU87QUFDVCxVQUFDRCxXQUFBLE1BQUE7QUFFRCxRQUFBLG9CQUVFLE1BQTRCOzBCQUVaQyxNQUFLRCxTQUFBLGdCQUEwQixRQUFDQyxRQUFBLFNBQUFBLE1BQUEsS0FBQTs7QUFFbEQsVUFBQyxFQUFBLEtBQUEsS0FBQSxRQUFBLElBQUEsS0FBQSxhQUFBRCxRQUFBO0FBRUQsVUFBQSxLQUE4QyxlQUEyQyxLQUFBLEVBQUEsS0FBQSxTQUFBQSxTQUFBLENBQUE7VUFDdkYsV0FDRSxLQUFBQSxVQUFjLElBQUssT0FBRTtjQUNuQkEsU0FBUSxZQUFLLFFBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQSxTQUFBO1lBQ2YsSUFBRSxrQkFBb0I7O1VBR3hCLGFBQWUsSUFBQyxnQkFBZTtxQkFDckIsTUFBSyxLQUFBLGlCQUErQixLQUFDLEtBQUEsU0FBQSxVQUFBLEVBQUEsTUFBQSxXQUFBOzRCQUM5QyxPQUFBO1dBRUQsS0FBSUEsU0FBTyxZQUFBLFFBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQSxTQUFBO2NBQ1QsSUFBSSxrQkFBYzs7VUFHcEIsa0JBQW1CO0FBQ3BCLGVBQUEsS0FBQSxhQUFBQSxVQUFBLGdCQUFBO01BRVM7VUFDUixTQUFPLFNBQU8sY0FBYztjQUN6QixJQUFBLDBCQUE4Qjs7WUFFN0IsSUFBSSxtQkFBaUIsRUFBQSxPQUFRLFNBQVcsQ0FBQTs7NEJBRXZDLHNCQUFBLFNBQUEsT0FBQTtrQkFDRyxJQUFLOzhCQUNHLEtBQUEsWUFBbUIsUUFBUSxHQUFBO2VBQ3RDLEtBQUEsYUFBQUEsVUFBQSxrQkFBQSxlQUFBOztZQUlELFVBQUEsTUFBQSxTQUFBLEtBQUEsRUFBQSxNQUFBLE1BQUEsU0FBQTtzQkFDUSxTQUFDLE9BQUE7QUFDZCxZQUFBLGFBQUEsVUFBQSxTQUFBO0FBRUQsWUFBTSxZQUFBLFNBRUosUUFDVSxLQUNWLGlCQUEyQixVQUFBO1lBRTNCLE1BQVEsS0FBTSxnQkFBaUIsU0FBUSxRQUFHLFNBQUEsWUFBQSxlQUFBO1lBQ3RDOztXQUVKLEVBQUEsVUFBYSxTQUFBQSxVQUFHLFdBQWlCOztpQkFHOUJELE9BQVNDLFVBQVU7b0JBQ1osS0FBSSxZQUFFQSxVQUFBLElBQUE7ZUFDWixZQUFhLE1BQVEsU0FBQ0QsS0FBQTs7V0FFM0IsTUFBQSxPQUFBO0FBRVMsVUFBQSxvQkFDQyxJQUFPLElBQ2pCLElBQUEsSUFBQSxJQUFBLElBRU8sSUFBQSxJQUFZLEtBQUEsV0FBa0IsS0FBQSxRQUFBLFNBQUEsR0FBQSxLQUFBLEtBQUEsV0FBQSxHQUFBLElBQUEsS0FBQSxNQUFBLENBQUEsSUFBQSxLQUFBO1VBQ3BDLGVBQUEsS0FBQSxhQUFBO1FBQ0EsQ0FBQSxXQUFNLFlBQWlCLEdBQUc7Y0FFMUIsRUFBQSxHQUFBLGNBQUEsR0FBQSxNQUFBOztlQUNrQztVQUNsQyxTQUFJLEtBQUEsZUFBc0IsS0FBTzs7V0FFakMsSUFBQSxTQUFBOztpQkFDNkIsT0FBWTtXQUV6QyxPQUFBLFFBQUEsS0FBQSxTQUNJLENBQUEsQ0FBQSxHQUFBLEtBQVMsTUFBTSxPQUFRLFVBQUEsV0FBQSxPQUFFLENBQUEsS0FBQSxLQUFXLE1BQUM7QUFFekMsVUFBQSxPQUFBLFVBQUEsWUFBeUIsT0FBQSxVQUFBLFlBQUEsT0FBQSxVQUFBLFdBQUE7QUFDekIsZUFBSSxHQUFRLG1CQUFjLEdBQUEsS0FBQSxtQkFBQSxLQUFBOztBQUUxQixVQUFBLFVBQWEsTUFBQTtBQUNkLGVBQUEsR0FBQSxtQkFBQSxHQUFBO01BRU87O1FBS04seUJBQXNCLE9BQUE7TUFFdEI7WUFFQSxHQUFBOztRQUVBLGlCQUFnQixLQUFHLE1BQVMsSUFBQSxZQUFlO1VBRTNDLEVBQUEsUUFBTSxHQUFBQyxTQUFhLElBQUEsUUFBUSxDQUFBO1FBQzNCO0FBQU0sYUFBTyxpQkFBUSxTQUFBLE1BQUEsV0FBNkIsTUFBQSxDQUFBO1VBQ2xELFVBQVksV0FBUyxNQUFBLFdBQUEsTUFBQSxHQUFBLEVBQUE7V0FFckIsS0FBTyxpQkFBaUIsRUFDekIsTUFBQSxLQUFBLEVBQUEsUUFBQSxXQUFBLFFBQUEsR0FBQUEsU0FBQSxDQUFBLEVBRU8sUUFBQSxNQUFBO0FBS04sbUJBQU0sT0FBQTs7O3FCQUlOO1dBQ0EsRUFBSSxPQUFPLEtBQUEsTUFBVTs7Y0FFcEIsVUFBQTtVQUlELG9CQUFBLFNBQUEsUUFBQSxJQUFBLGdCQUF3RDtRQUd4RCxzQkFBQTtBQUFBLGFBQUE7UUFDQSxzQkFBb0I7QUFBVyxhQUFJO0FBR3JDLFFBQUMsU0FBQSxXQUFBO0FBQUEsYUFBQTtRQUdDLFNBQU8sV0FBUTtBQUFBLGFBQWdCO0FBRWxDLFFBQUEsU0FBQSxVQUFBO0FBQUEsYUFBQTtBQUVELFdBQU07O1FBR0YsYUFBV0EsVUFBVSxrQkFBQSxpQkFBQTtRQUVyQkM7d0JBQ1k7QUFLZCxVQUFDLGFBQUE7T0FRRixvQkFBQSxRQUFBLG9CQUFBLFNBQUEsU0FBQSxnQkFBQSxhQUFBLE1BSUs7SUFPSjtVQU5BLGNBQUFBLE1BQUFELFNBQUEsZ0JBQW1CLFFBQUFDLFFBQUEsU0FBQUEsTUFBQSxLQUFBO1VBT2pCLFVBQUEsS0FBQSw2QkFBSSxrQkFBa0IsWUFBQSxVQUFBLElBQUE7VUFDdEIsTUFBSyxPQUFVO1dBQ2YsS0FBSyxZQUFXRCxVQUFTLGdCQUFBOzsrQkFFMUIsa0JBQUEsWUFBQSxZQUFBO0FBVUQsVUFBQSxvQkFBVztVQUNULGdCQUFrQjtRQUVsQixPQUFPLFVBQUssVUFBYyxLQUFJLGNBQUssSUFBQTtBQUNwQyxhQUFBO0lBRUQ7VUFDRSxhQUFjLGFBQVE7eUJBRVYsS0FDUixJQUFBLG9CQUFBLEtBQUEsSUFBQSxhQUFBLEdBQUEsQ0FBQSxHQUFBLGFBQUE7VUFHSixTQUFNLEtBQUEsT0FBZ0IsSUFBRztXQUN6QixlQUFnQjs7aUJBRWY7Y0FBTSxLQUFJLFlBQVMsV0FBVTs7O0lBZTlCLHFCQUFZO2NBQ1YsUUFBTyxVQUFXLE1BQUFFLFVBQWM7eUJBQ3JCLElBQUEsTUFBQSxNQUFBOzJCQUNaLE1BQUEsc0JBQUEsUUFBQSxHQUFBO0FBQ0gsU0FBQyxVQUFBQTtBQUVELFNBQUssV0FBRTtTQUNMLE9BQUk7O2dCQUVBO2tCQUNELEtBQUEsa0JBQUE7U0FDRixNQUFBO0FBQUEsYUFBQTtBQUNILFdBQUMsS0FBQSxhQUFBLEtBQUE7RUFDRjtFQUVELE1BQUEsY0FBQTs7Ozs7Ozs7QUFRRyxRQUFBLFlBQUEsVUFBQTtBQUNHLGtCQUFPLFFBSVgsRUFBQSxHQUFBLFlBQTZCLE9BQUEsR0FBQSxTQUFBLE9BQUE7SUFHN0IsV0FBQSxTQUVFLFVBQ0E7WUFFQSxTQUNTLENBQUEsR0FDUCxPQUFPLFFBQVUsWUFBUyxTQUFRLENBQUssQ0FBQyxHQUFBLEdBQUEsU0FBVSxJQUFNLGFBQUEsUUFBcUIsQ0FBQTtBQUVoRixpQkFBQSxDQUFBLEtBQUEsS0FBQSxLQUFBLFFBQUE7QUFFRCxpQkFBQSxJQUFBLGFBQUEsSUFBQSxLQUFBLEtBQUE7Ozs7OztXQU1HO01BQ0g7OztxQkFHVTtBQUVWLFFBQUMsT0FBQTtBQUNGLFVBQUE7QUFFRCxXQUFPLEtBQU0sWUFBQSxHQUFBO0FBR1gsYUFBTyxNQUFJLEtBQ1QsWUFBTztBQUNMLFlBQUE7SUFDQTs7V0FJRSx1QkFBaUIsb0JBQVUsUUFBQyxHQUFBLE9BQUEsY0FBQSxJQUFBO3FCQUNyQixRQUFVLEtBQUMsVUFBYyxHQUFBO2lCQUNqQyxRQUFBLEtBQUEsa0JBQUEsR0FBQTtBQUVILGNBQUE7TUFDRjtJQXdCRjtFQUNBO0FBQ0E7QUFXRSxJQUFTLGNBQVQsY0FBZSxXQUFBO2NBQ1AsUUFBSSxTQUFBQyxPQUFBO0FBQ1o7TUFDQTtNQUVJLE9BQU8sVUFBQSxJQUFBQSxNQUFtQixRQUF3QyxNQUFBLFVBQUEsTUFBQSxxQkFBQSxLQUFBLEdBQUEsTUFBQSxPQUFBO0lBQ3RFOzs7Ozs7Ozs7aUJBdUNJLGFBQUEsSUFBQTtpQkFDQSxNQUFBO3FCQUNBLFFBQUEsTUFBb0I7WUFDcEI7Ozs7QUFJSixJQUFJLHdCQUF1QixDQUFBLFlBQWE7U0FDdEMsSUFBQTs7O2NBR0UsUUFBQTs7O2tCQUdBLE1BQUE7Y0FDQSxNQUFBLEtBQUEsU0FBQTtBQUNILGVBQUEsT0FBQSxJQUFBLFlBQUEsQ0FBQSxLQUFBLE9BQUEsR0FBQTtNQUNEO0lBQ0E7Ozt5QkFNSTs7O1NBR0g7UUFFRDtXQUNJO2NBQ0Y7OzthQUdFOztrQkFFQTs7SUFFQSxtQkFBQSxDQUFBLFFBQUE7U0FHSixPQUFBLFFBQUEsWUFDQSxRQUFPLG9CQUNMLEdBQUEsWUFDQSxLQUFBLEdBQUEsRUFBQSxNQUFBLENBQUEsTUFBQSxPQUErQixvQkFBTyxDQUFBLENBQUE7OzRCQUdqQixNQUFFO2FBQ3ZCLFNBQUEsZUFBNkIsS0FBRSxTQUFTLE1BQUE7V0FDeEM7TUFDRixvQkFBQTtNQVNGLCtCQUFBO01BQ0Esa0JBQXVCLGtCQUFBLEtBQUEsTUFBQSxFQUFBO01BQ3JCLG9CQUFvQixjQUFnQixLQUFLLE1BQUEsSUFBUzs2QkFDcEM7TUFDYiwrQkFBQSxLQUFBO0lBRUQ7O2FBRU8sZ0JBQW1CLGFBQVM7V0FDL0I7MEJBQ29CO3FDQUNhO3dCQUNWOzBCQUNDLFNBQVM7TUFDbkMsdUJBQUE7TUFFRiwrQkFBQSxRQUFrQztJQUNsQzs7YUFHSSxVQUFXLFNBQVMsS0FBRSxPQUFNLFlBQUEsY0FBQSxVQUFBLENBQUEsTUFBQSxvQkFBQTs7MEJBRWQ7cUNBRVM7d0JBQ3hCLGtCQUFBLFFBQUEsUUFBQTtNQUNGLG9CQUFBLGNBQUEsUUFBQSxJQUFBO01BRUQsdUJBQVk7TUFDYiwrQkFBQSxRQUFBO0lBRUQ7O1FBRUUsY0FBQSxlQUFBO01BQ0EsYUFBYTtBQUNiLFdBQUE7TUFDQSxvQkFBa0I7cUNBQWU7TUFDakMsa0JBQWE7MEJBQXlDO01BQ3RELHVCQUFrQixXQUFBLFlBQUE7cUNBQWUsWUFBQTtJQUNqQzs7U0FDVTtJQUNWLG9CQUFpQjtJQUNqQiwrQkFBQTtJQUVGLGtCQUFNO0lBQ0osb0JBQWtCO0lBQ2xCLHVCQUFBO0lBQ0EsK0JBQWtCOzs7U0FNbEIsaUJBQUE7TUFDQSxPQUFBLGNBQUEsZUFBQSxDQUFBLFdBQUE7QUFDQSxXQUFBOztRQUU4QixrQkFBYTtJQUMzQyxFQUFBLEtBQUksUUFBUSxTQUFLLHVDQUFTO1dBQUUsTUFBTyxTQUFVLHVDQUFBO0lBQzdDLEVBQUEsS0FBSSxNQUFRLFNBQUssNkNBQVE7V0FBRSxVQUFPLFNBQVEseUNBQUE7SUFDMUMsRUFBQSxLQUFJLFdBQWEsU0FBTywwQ0FBQTtXQUFFLFVBQU8sU0FBVSxvRUFBQTs7YUFFdkMsRUFBQSxLQUFRLFFBQUssS0FBUyxpQkFBQTtVQUFFLFFBQU8sUUFBVSxLQUFBLFVBQUEsU0FBQTtBQUM3QyxRQUFJLE9BQUE7WUFBc0IsUUFBTyxNQUFRLENBQUEsS0FBQTtBQUN6QyxZQUFJLFFBQVEsTUFBQSxDQUFBLEtBQUE7WUFBRSxRQUFPLE1BQVMsQ0FBQSxLQUFRO0FBQ3RDLGFBQU8sRUFBQSxTQUFVLEtBQUEsU0FBQSxHQUFBLFNBQUEsU0FBQSxRQUFBO0lBQ2pCO0VBRUY7QUFDQSxTQUFNOztBQUVOLElBQUUsZ0JBQUEsQ0FBQSxTQUFBO01BS0UsU0FBVTtBQUFFLFdBQUE7ZUFDTCxZQUFVLFNBQUE7QUFBQSxXQUFBO01BQ2xCLFNBQUE7QUFBQSxXQUFBO0FBQ0QsTUFBQSxTQUFBLGFBQUEsU0FBQTtBQUFBLFdBQUE7QUFFRixNQUFBO0FBQUEsV0FBQSxTQUFBO0FBQ0EsU0FBTTtBQUNOO0lBQ0Usb0JBQU8sQ0FBQSxhQUE0QjthQVFsQyxTQUFBLFlBQUE7QUFLRCxNQUFBLFNBQUEsU0FBQSxLQUFBO0FBQUEsV0FBQTtBQUVGLE1BQU0sYUFBTztBQUFlLFdBQW1CO01BQzdDLGFBQU87QUFBaUIsV0FBQTttQkFBYTtBQUFBLFdBQUE7TUFDckMsYUFBVztBQUFXLFdBQUE7QUFDdEIsTUFBQSxhQUFBO0FBQUEsV0FBQTtBQUVGLE1BQU0sYUFBTztBQUFhLFdBQWtDO01BQzFEO0FBQVMsV0FBUSxTQUFBO1NBQUU7O0FBRXJCLElBQUU7QUFFRixJQUFBLHFCQUFBLE1BQUE7OztBQUtPLElBQU0sV0FBVyxDQUFBLFNBQW1DOztBQUN6RCxXQUFJLEtBQU8sTUFBTyxJQUFBO1dBQ2hCO1dBQ0Q7OztJQUlELHlCQUFpQixJQUFBLE9BQUEsbUJBQUEsR0FBQTtBQUNuQixJQUFFLGdCQUFBLENBQUEsUUFBQTtBQUVGLFNBQU8sdUJBQXVCLEtBQXdCLEdBQUU7O0lBQ3ZCLFFBQVksQ0FBQSxPQUFNLElBQU8sUUFBQSxDQUFBLFlBQUEsV0FBQSxTQUFBLEVBQUEsQ0FBQTtJQUN4RCwwQkFBcUIsQ0FBUSxNQUFBLE1BQUE7YUFBRSxNQUFPLFlBQWdCLENBQUEsT0FBSSxVQUFBLENBQUEsR0FBQTtBQUUxRCxVQUFNLElBQUksTUFBTSxHQUFBLHlCQUF5QjtFQUN6QztBQUVGLE1BQU0sSUFBQyxHQUFNO0FBQ1gsVUFBSSxJQUFBLE1BQVksR0FBQSxpQ0FBYTs7U0FDekI7O0FBRUosSUFBTSxjQUFVLENBQUEsUUFBQTtBQUNoQixNQUFBLGVBQUE7QUFBQSxXQUFBO0FBRUYsU0FBTyxJQUFNLE1BQUEsR0FBQTs7QUFVWCxJQUFPLFVBQUEsQ0FBYSxRQUFRO0FBQzVCLE1BQUFDLEtBQUEsSUFBQSxJQUFBO0FBRUYsTUFBTSxPQUFPLFlBQUEsYUFBa0M7QUFDN0MsWUFBSSxNQUFVQSxNQUFBLFFBQVcsU0FBQSxRQUFBQSxRQUFBLFNBQUEsU0FBQUEsSUFBQSxHQUFBLE9BQUEsUUFBQSxPQUFBLFNBQ3ZCLEtBQ0Q7O0FBRUQsTUFBQSxPQUFBLFNBQUEsYUFBQTtBQUVGLFlBQU8sTUFBTSxLQUFBLEtBQUEsU0FBc0IsUUFBdUMsT0FBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLFFBQUEsT0FBQSxTQUNwRSxTQUNGLEdBQUEsS0FBTyxJQUFBLEdBQUE7O1NBRVQ7QUFDRjtTQXNDVyxXQUFTLEtBQUs7QUFFdkIsTUFBQSxDQUFBO0FBQUEsV0FBQTtBQU9GLGFBQWEsTUFBQTtBQUFBLFdBQWlCO1NBQzVCO0FBQ0Y7QUFHRSxTQUFNLE9BQVcsS0FBSSxLQUFBO1NBQ2pCLE9BQUEsVUFBa0IsZUFBUSxLQUFBLEtBQUEsR0FBQTs7QUFDOUIsU0FBVyxNQUFHLFdBQVksTUFBSTtNQUM5QixPQUFTLFlBQVMsZUFBUSxRQUFBLElBQUEsT0FBQSxNQUFBLFFBQUE7WUFDcEIsSUFBQSxnQkFBaUIsVUFBQSxHQUFBLElBQUE7OztBQUt6QixJQUFFLFFBQUEsTUFBQTtBQUVGLFNBQUEsdUNBQUEsUUFBQSxTQUFBLENBQUEsTUFBQTs7QUFFRyxVQUFBLElBQUEsTUFBQSxNQUFBLElBQUEsSUFBQSxJQUFBO0FBQ0gsV0FBTyxFQUFNLFNBQVEsRUFBRzs7O0FBRXRCLElBQUkscUJBQWtCLE1BQWE7OztJQUluQyxPQUFJLFdBQVc7V0FFZCxPQUFBLGFBQUE7SUFHRCxPQUFBLGNBQUE7Ozs7O0FDbmhDSSxJQUFPLE9BQVAsY0FBMEIsYUFBa0I7Y0FLaEQsUUFBNkIsVUFBb0IsTUFBMEJDLFVBQThCO1VBQ3ZHLFFBQU0sVUFBUSxNQUFVQSxRQUFNO1NBRTlCLFNBQUssS0FBUztTQUNkLE9BQUssS0FBTzs7c0JBR0c7V0FDZixLQUFPOzs7Ozs7O21CQVFLO1dBQ1o7O2lCQUdVO1dBQ1Y7OztBQW9CRSxJQUFPLGFBQVAsY0FDSSxhQUFrQjtjQUsxQixRQUNtQixVQUNDLE1BQ1lBLFVBQ0Y7VUFFNUIsUUFBTSxVQUFRLE1BQVVBLFFBQU07U0FFOUIsT0FBSyxLQUFPOztzQkFHRztXQUNmLEtBQU87OzttQkFJSztVQUNaLE9BQU0sS0FBTyxhQUFLO1FBQ2xCLENBQUE7QUFBSyxhQUFJO29CQUFTO0FBQUssYUFBQSxLQUFBO1VBQ3ZCLFNBQUksT0FBWSxZQUFJLEtBQUEsSUFBQSxZQUFBO2dCQUFFLEtBQU8sTUFBSyxFQUFBO0FBQU8sYUFBQTtXQUN6Qzs7aUJBQ2lDO1FBQ2pDQyxLQUFBO0FBQ0YsUUFBQyxHQUFBQSxNQUFBLEtBQUEsVUFBQSxRQUFBQSxRQUFBLFNBQUEsU0FBQUEsSUFBQSxTQUFBO0FBRUQsYUFBQTs7VUFDRSxRQUFLLEtBQUEsS0FBSyxLQUFJLEtBQUEsS0FBQSxTQUFBLENBQUEsT0FBQSxRQUFBLE9BQUUsU0FBUSxTQUFBLEdBQUE7O0FBQ3RCLGFBQU87V0FDUixFQUFBLFFBQUEsRUFBQSxPQUFBLEtBQUEsRUFBQTs7Ozs7QUN6RkMsSUFBTyxjQUFQLE1BQWtCO2NBRXRCLFFBQTBCO1NBQ3hCLFNBQUs7U0FFTCxNQUFLLE9BQU0sSUFBTyxLQUFJLE1BQUs7U0FDM0IsT0FBSyxPQUFPLEtBQU8sS0FBSyxNQUFLO1NBQzdCLFFBQUssT0FBUSxNQUFPLEtBQU0sTUFBSztTQUMvQixNQUFLLE9BQU0sSUFBTyxLQUFJLE1BQUs7U0FDM0IsU0FBSyxPQUFTLE9BQU8sS0FBTyxNQUFLO1NBQ2pDLGFBQUssT0FBYSxXQUFPLEtBQVcsTUFBSzs7Ozs7QUNQdkMsSUFBTyxpQkFBUCxjQUE4QixZQUFXOzs7O1NBSTdDLE1BQXNDQyxVQUErQjtXQUNuRSxLQUFPLEtBQUsseUJBQUssNEJBQXlCLEVBQUEsTUFBOEIsR0FBSUEsU0FBSyxDQUFBLENBQUE7OztDQWtEckYsU0FBaUJDLGlCQUFjO0FBQUEsR0FBQSxtQkFBQSxpQkFBQSxDQUFBLEVBQUE7OztBQ3ZEekIsSUFBTyxlQUFQLGNBQTRCLFlBQVc7Ozs7U0FJM0MsTUFBb0NDLFVBQStCO1dBQ2pFLEtBQU8sS0FBSyx1QkFBSyw0QkFBdUIsRUFBQSxNQUE4QixHQUFJQSxTQUFLLENBQUEsQ0FBQTs7O0NBMkNuRixTQUFpQkMsZUFBWTtBQUFBLEdBQUEsaUJBQUEsZUFBQSxDQUFBLEVBQUE7OztBQ2hEdkIsSUFBTyxRQUFQLGNBQXFCLFlBQVc7Z0JBQXRDOztTQUNFLGlCQUFBLElBQWlDLGVBQUksS0FBZSxNQUFLO1NBQ3pELGVBQUEsSUFBNkIsYUFBSSxLQUFhLE1BQUs7OztDQUdyRCxTQUFpQkMsUUFBSztTQUNOLGlCQUFpQjtTQUlqQixlQUFlO0FBRy9CLEdBUmlCLFVBQUEsUUFBSyxDQUFBLEVBQUE7OztBQ0hoQixJQUFPLGNBQVAsY0FBMkIsWUFBVztTQWdCMUMsTUFDa0NDLFVBQ0g7O1dBRTdCLEtBQU8sS0FBSyxxQkFBSztNQUdsQjtNQUNGLEdBQUFBO01Ba2RELFNBQWlCQyxNQUFBLEtBQVcsWUFBQSxRQUFBQSxRQUFBLFNBQUFBLE1BQUE7SUFBWCxDQUFBOzs7Ozs7O0FDN2VYLElBQU8sT0FBUCxjQUFvQixZQUFXO2dCQUFyQzs7U0FDRSxjQUFBLElBQTJCLFlBQUksS0FBWSxNQUFLOzs7Q0FHbEQsU0FBaUJDLE9BQUk7UUFDTCxjQUFjO0FBYTlCLEdBZGlCLFNBQUEsT0FBSSxDQUFBLEVBQUE7OztBQ0ZmLElBQU9DLGVBQVAsY0FBMkIsWUFBVztTQWExQyxNQUM4QkMsVUFDQzs7V0FFN0IsS0FBTyxLQUFLLGdCQUFLO01BR2xCO01BQ0YsR0FBQUE7TUFpUkQsU0FBaUJDLE1BQUEsS0FBVyxZQUFBLFFBQUFBLFFBQUEsU0FBQUEsTUFBQTtJQUFYLENBQUE7Ozs7Ozs7QUN4U1gsSUFBTyxhQUFQLGNBQTBCLFlBQVc7Ozs7U0FJekMsTUFDNkJDLFVBQ0U7V0FFN0IsS0FBTyxLQUFLLGVBQUssRUFBYSxNQUFJLEdBQUlBLFNBQUssQ0FBQTs7O0NBMEYvQyxTQUFpQkMsYUFBVTtBQUFBLEdBQUEsZUFBQSxhQUFBLENBQUEsRUFBQTs7O0FDakdyQixJQUFPLFFBQVAsY0FBcUIsWUFBVzs7Ozs7Ozs7U0FRcEMsTUFBNkJDLFVBQStCO1dBQzFELEtBQU8sS0FBSyxVQUFLLEVBQVEsTUFBSSxHQUFJQSxTQUFLLENBQUE7OztDQXdGMUMsU0FBaUJDLFFBQUs7QUFBQSxHQUFBLFVBQUEsUUFBQSxDQUFBLEVBQUE7OztBQzlGaEIsSUFBTyxRQUFQLGNBQXFCLFlBQVc7Ozs7Ozs7U0FPcEMsTUFBNkJDLFVBQStCO1dBQzFELEtBQU8sS0FBSyxVQUFLLDRCQUFVLEVBQUEsTUFBOEIsR0FBSUEsU0FBSyxDQUFBLENBQUE7Ozs7O1dBTXBFLFFBQXVCQSxVQUErQjtXQUNwRCxLQUFPLElBQUssVUFBSSxVQUFnQkEsUUFBSTs7Ozs7T0FNdENBLFVBQWtDO1dBQ2hDLEtBQU8sV0FBSyxVQUFXLGlCQUFVQSxRQUFpQjs7Ozs7TUFNcEQsUUFBa0JBLFVBQStCO1dBQy9DLEtBQU8sT0FBSyxVQUFPLFVBQWdCQSxRQUFJOzs7OztrQkFNekMsUUFBOEJBLFVBQStCO1dBQzNELEtBQU8sSUFBSyxVQUFJLGtCQUFnQjs7ZUFFOUI7Z0JBQ0M7UUFDSixHQUFBQSxhQUFBLFFBQUFBLGFBQUEsU0FBQSxTQUFBQSxTQUFBO01BRUQ7Ozs7OztRQVVFLGtCQUFpQixJQUFLLEVBQUEsZUFBYSxLQUFBLFVBQUEsS0FBQSxLQUFBLElBQUEsSUFBQSxDQUFBLEdBQUE7VUFFbkMsa0JBQW1CLG9CQUFLLElBQUEsQ0FBQSxhQUFnQixTQUFTLFNBQVMsQ0FBQTtrQkFDbEQsS0FBSyxJQUFDO2VBRVosTUFBTyxLQUFNLFNBQUssRUFBQTtZQUNsQixLQUFJLFVBQVUsQ0FBQSxnQkFBa0IsSUFBRSxLQUFBLE1BQUEsR0FBQTtrQkFDaEMsWUFBVTt3QkFDUixTQUFTLEVBQUE7bUJBQ1IsSUFBQSxRQUFBLFNBQUE7Y0FDSixJQUFBLDBCQUFBO1VBQ0YsU0FBQSxpQ0FBQSxpQ0FBQTtRQUVELENBQUE7TUFDRDtJQUNGO0FBRUQsV0FBQTs7O0FBa0ZpQixJQUFBLGtCQUFBLGNBTWhCLEtBQUE7QUFBQTs7Ozs7QUM3SkssSUFBTyxZQUFQLGNBQXlCLFlBQVc7Ozs7Ozs7OztTQVN4QyxNQUFpQ0MsVUFBK0I7V0FDOUQsS0FBTyxLQUFLLGVBQUssRUFBYSxNQUFJLEdBQUlBLFNBQUssQ0FBQTs7Ozs7OztXQVE3QyxZQUEyQkEsVUFBK0I7V0FDeEQsS0FBTyxJQUFLLGVBQUksY0FBeUJBLFFBQUk7Ozs7O09BTS9DQSxVQUFrQztXQUNoQyxLQUFPLFdBQUssZUFBVyxlQUFlQSxRQUFlOzs7OztTQU12RCxZQUF5QkEsVUFBK0I7V0FDdEQsS0FBTyxLQUFLLGVBQUsscUJBQXlCQSxRQUFXOzthQXFCdkQsWUFDb0IsT0FDMEJBLFVBQ2Y7O1dBRTdCLEtBQU8sSUFBSyxlQUFJLHFCQUF5Qjs7ZUFFdkM7O2VBR0RDLE1BQWdGLFVBQUEsUUFBQSxVQUFBLFNBQUEsU0FBQSxNQUFBLFlBQUEsUUFBQUEsUUFBQSxTQUNsRkEsTUFDRjtJQUVELENBQUE7OztBQWlVaUIsSUFBUyxnQkFBVCxjQVNoQixLQUFBO0FBQUE7Ozs7O0FDL1lLLElBQU8sT0FBUCxjQUFvQixZQUFXOzs7Ozs7Ozs7U0FTbkMsTUFBNEJDLFVBQStCO1dBQ3pELEtBQU8sS0FBSyxxQkFBSyxFQUFtQixNQUFJLEdBQUlBLFNBQUssQ0FBQTs7Ozs7OztXQVFuRCxpQkFBZ0NBLFVBQStCO1dBQzdELEtBQU8sSUFBSyxxQkFBSSxtQkFBb0NBLFFBQUk7O09BVzFELFFBQ0UsQ0FBQSxHQUErQ0EsVUFDbEI7UUFFN0IsaUJBQUksS0FBaUIsR0FBQTthQUNuQixLQUFBLEtBQVcsQ0FBQyxHQUFBLEtBQU87O1dBRXJCLEtBQU8sV0FBSyxxQkFBVyxvQkFBcUIsRUFBa0IsT0FBSSxHQUFLQSxTQUFLLENBQUE7Ozs7O1NBTTlFLGlCQUE4QkEsVUFBK0I7V0FDM0QsS0FBTyxLQUFLLHFCQUFLLDBCQUFvQ0EsUUFBVzs7YUFlbEUsaUJBQ3lCLFFBQ3ZCLENBQUEsR0FBcURBLFVBQ3hCO1FBRTdCLGlCQUFJLEtBQWlCLEdBQUE7YUFDbkIsS0FBQSxXQUFZLGlCQUFXLENBQUEsR0FBZSxLQUFJOztXQUU1QyxLQUFPLFdBQUsscUJBQVcsMEJBQW9DLHlCQUFXOzs7Ozs7QUFPcEUsSUFBTyxxQkFBUCxjQUFrQyxXQUF5QjtBQUFBO0FBQUcsSUFBQSwwQkFBQSxjQUFBLFdBQUE7QUFBQTtDQUlwRSxTQUFNQyxPQUFPO0FBQUEsR0FBQSxTQUFBLE9BQXdCLENBQUEsRUFBQTs7O0FDakYvQixJQUFPLGFBQVAsY0FBMEIsWUFBVztnQkFBM0M7O1NBQ0UsT0FBQSxJQUFhLEtBQUksS0FBSyxNQUFLOzs7Q0FHN0IsU0FBaUJDLGFBQVU7Y0FDWCxPQUFPO2NBR1AscUJBQXFCO2NBQ3JCLDBCQUEwQjtBQUkxQyxHQVRpQixlQUFBLGFBQVUsQ0FBQSxFQUFBOzs7QUNIckIsSUFBTyxTQUFQLGNBQXNCLFlBQVc7Ozs7a0JBSXJDLE1BQ2tDQyxVQUNIO1dBRTdCLEtBQU8sS0FBSyxzQkFBSyw0QkFBc0IsRUFBQSxNQUE4QixHQUFJQSxTQUFLLENBQUEsQ0FBQTs7Ozs7T0FNaEYsTUFBMEJBLFVBQStCO1dBQ3ZELEtBQU8sS0FBSyxpQkFBSyw0QkFBaUIsRUFBQSxNQUE4QixHQUFJQSxTQUFLLENBQUEsQ0FBQTs7Ozs7V0FNM0UsTUFBa0NBLFVBQStCO1dBQy9ELEtBQU8sS0FBSyx1QkFBSyxFQUFxQixNQUFJLEdBQUlBLFNBQUssQ0FBQTs7O0NBb0l2RCxTQUFpQkMsU0FBTTtBQUFBLEdBQUEsV0FBQSxTQUFBLENBQUEsRUFBQTs7O0FDMUpqQixJQUFPLFNBQVAsY0FBc0IsWUFBVzs7Ozs7V0FLckMsT0FBc0JDLFVBQStCO1dBQ25ELEtBQU8sSUFBSyxXQUFJLFNBQWdCQSxRQUFJOzs7Ozs7T0FPdENBLFVBQWtDO1dBQ2hDLEtBQU8sV0FBSyxXQUFXLFlBQVdBLFFBQVk7Ozs7OztNQU9oRCxPQUFpQkEsVUFBK0I7V0FDOUMsS0FBTyxPQUFLLFdBQU8sU0FBZ0JBLFFBQUk7OztBQU9yQyxJQUFPLGFBQVAsY0FBMEIsS0FBVztBQUFBO0NBQUcsU0FBQUMsU0FBQTtBQUFBLEdBQUEsV0FBQSxTQUFBLENBQUEsRUFBQTs7O0FDOUJ4QyxJQUFPLGNBQVAsY0FBMkIsWUFBVzs7OztTQUkxQyxNQUM4QkMsVUFDQztXQUU3QixLQUFPLEtBQUssZ0JBQUssRUFBYyxNQUFJLEdBQUlBLFNBQUssQ0FBQTs7O0NBcU1oRCxTQUFpQkMsY0FBVztBQUFBLEdBQUEsZ0JBQUEsY0FBQSxDQUFBLEVBQUE7Ozs7QUNwSXRCLElBQU8sU0FBUCxjQUEyQixVQUFTOzs7Ozs7Ozs7Ozs7Ozs7Y0FvQnhDLElBSXFCOzs7ZUFDVCxRQUFLLGdCQUFXO3NCQUNkLEtBQ1IsUUFBQSxlQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsS0FBQTtTQUVIO1FBRUQsT0FBTSxTQUF5QixDQUFBLElBQUE7bUJBQ3ZCLFFBQUE7WUFDTixJQUFBOzs7O1VBS0ZDLFdBQVk7OztTQU1aO2dCQUNFLEtBQVMsS0FBQSxhQUFnQixRQUFBLE9BQUEsU0FBQSxLQUFBOztrQkFFekIsMkJBQTRCLG1CQUFBLEdBQUE7WUFDNUIsSUFBQTs7OztVQVVKO2VBQ0FBLFNBQW1CO2dCQUNuQixLQUFBQSxTQUE2QixhQUFRLFFBQWdCLE9BQUMsU0FBQSxLQUFBO2lCQUN0REEsU0FBdUI7a0JBQ3ZCQSxTQUF5QjthQUN6QkEsU0FBbUI7O1NBRW5CLGNBQXFCLElBQVFDLGFBQWEsSUFBQTtTQUMxQyxPQUFBLElBQVUsS0FBbUIsSUFBTztTQUNwQyxRQUFBLElBQTJCLE1BQUksSUFBSTtTQWhCakMsYUFBYSxJQUFHLFdBQVEsSUFBQTtTQUV4QixRQUFLLElBQVMsTUFBTyxJQUFBO1NBQ3JCLFNBQUssSUFBWSxPQUFHLElBQUE7QUFDdEIsU0FBQyxRQUFBLElBQUEsTUFBQSxJQUFBO0FBY2tCLFNBQUEsY0FBWSxJQUFBLFlBQUEsSUFBQTtTQUM3QixTQUFPLElBQUssT0FBUyxJQUFBO0FBQ3ZCLFNBQUMsYUFBQSxJQUFBLFdBQUEsSUFBQTtBQUVrQixTQUFBLFlBQWUsSUFBOEIsVUFBQSxJQUFBO1NBQzlELFdBQU9EO2tCQUNGO3dCQUNIOztpQkFFQTtBQUNKLFdBQUMsS0FBQSxTQUFBOztpQkFHVSxNQUFBO0FBQ1gsV0FBQzs7O01BRU0sR0FBQSxLQUFNLFNBQVE7SUFFZDtFQUNBO0VBQ0EsWUFBQSxNQUFBO0FBQ0EsV0FBQSxFQUFBLGVBQW9CLFVBQU8sS0FBQSxTQUFrQjtFQUM3QztBQUNBO0FBQ0EsS0FBQTtBQUNBLE9BQUEsU0FBQTtBQUNBLE9BQUEsV0FBQTtBQUNBLE9BQUEscUJBQTRCO0FBQzVCLE9BQUEsNEJBQStCO0FBQy9CLE9BQUEsb0JBQTJCO0FBR3BDLE9BQU8sZ0JBRUw7QUFhRixPQUFNLGdCQUF5QjtBQUMvQixPQUFNLGlCQUF1QjtBQUU3QixPQUFBLGtCQUF1QjtPQUNyQixzQkFBbUI7T0FDTCxzQkFBd0I7T0FDeEIsd0JBQXVCO09BSXZCLDJCQUF1QjtBQUd2QixJQUFBOzs7Ozs7Ozs7Ozs7O0lBbURBO0NBV2hCLFNBQUFFLFNBQWU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0E3QnZRZixlQUFzQixlQUNsQixVQUNBLHNCQUNBQyx5QkFBNkQsQ0FBQyxHQUM5RCxXQUNBLGFBQ0E7QUFiSixNQUFBQyxLQUFBO0FBY0ksUUFBTSxTQUFTLElBQUksZUFBTztBQUFBLElBQ3RCLFFBQVEsU0FBUztBQUFBLElBQ2pCLFNBQVMsU0FBUztBQUFBLElBQ2xCLHlCQUF5QjtBQUFBO0FBQUEsRUFDN0IsQ0FBQztBQUVELFFBQU1DLGtCQUFpQkYsdUJBQXNCLElBQUksV0FBUztBQUFBLElBQ3RELE1BQU0sS0FBSztBQUFBLElBQ1gsU0FBUyxLQUFLO0FBQUEsRUFDbEIsRUFBRTtBQUVGLE1BQUk7QUFDQSxVQUFNLFNBQVMsTUFBTSxPQUFPLEtBQUssWUFBWSxPQUFPO0FBQUEsTUFDaEQsT0FBTyxTQUFTO0FBQUEsTUFDaEIsWUFBWSxTQUFTLFNBQVM7QUFBQSxNQUM5QjtBQUFBLE1BQ0EsVUFBVTtBQUFBLFFBQ04sRUFBRSxNQUFNLFVBQVUsU0FBUyx1QkFBdUIsU0FBUyxZQUFZO0FBQUEsUUFDdkUsR0FBR0U7QUFBQSxNQUNQO0FBQUEsTUFDQSxRQUFRO0FBQUEsSUFDWixDQUFDO0FBRUQsUUFBSSxVQUFVO0FBRWQscUJBQWlCLFFBQVEsUUFBUTtBQUM3QixZQUFNLFlBQVUsTUFBQUQsTUFBQSxLQUFLLFFBQVEsQ0FBQyxNQUFkLGdCQUFBQSxJQUFpQixVQUFqQixtQkFBd0IsWUFBVztBQUVuRCxpQkFBVztBQUVYLFlBQU0scUJBQXFCLFNBQVMsY0FBYyxtQkFBbUI7QUFDckUsVUFBSSxvQkFBb0I7QUFDcEIsY0FBTSxjQUFjLG1CQUFtQixpQkFBaUIsYUFBYTtBQUNyRSxjQUFNLGlCQUFpQixZQUFZLFlBQVksU0FBUyxDQUFDO0FBRXpELGNBQU0sZUFBZSxlQUFlLGNBQWMsZUFBZTtBQUVqRSxZQUFJLGNBQWM7QUFDZCx1QkFBYSxZQUFZLE9BQU8sT0FBTztBQUV2Qyw2QkFBbUIsWUFBWTtBQUMvQiw0QkFBa0IsWUFBWTtBQUM5Qiw4QkFBb0IsWUFBWTtBQUFBLFFBQ3BDO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFFQSxlQUFXLFNBQVMsY0FBYyxRQUFRO0FBQUEsRUFDOUMsU0FBUyxPQUFQO0FBQ0UsVUFBTSxxQkFBcUIsU0FBUyxjQUFjLG1CQUFtQjtBQUNyRSxRQUFJLG9CQUFvQjtBQUNwQixZQUFNLGNBQWMsbUJBQW1CLGlCQUFpQixhQUFhO0FBQ3JFLFlBQU0saUJBQWlCLFlBQVksWUFBWSxTQUFTLENBQUM7QUFFekQsWUFBTSxlQUFlLGVBQWUsY0FBYyxlQUFlO0FBRWpFLFVBQUksY0FBYztBQUNkLHFCQUFhLFlBQVksU0FBTyxpQkFBTSxhQUFOLG1CQUFnQixTQUFoQixtQkFBc0IsVUFBUyxNQUFNLE9BQU87QUFDNUUsbUJBQVcsYUFBYSxXQUFXLGNBQWMsUUFBUTtBQUFBLE1BQzdEO0FBQUEsSUFDSjtBQUNBLFVBQU0sSUFBSSxRQUFNLGlCQUFNLGFBQU4sbUJBQWdCLFNBQWhCLG1CQUFzQixVQUFTLE1BQU0sT0FBTztBQUFBLEVBQ2hFO0FBQ0o7QUFFQSxlQUFzQixvQkFBb0IsVUFBdUIsaUJBQXlCO0FBL0UxRixNQUFBQSxLQUFBO0FBZ0ZJLFFBQU0sU0FBUyxJQUFJLGVBQU87QUFBQSxJQUN0QixRQUFRLFNBQVM7QUFBQSxJQUNqQixTQUFTLFNBQVM7QUFBQSxJQUNsQix5QkFBeUI7QUFBQTtBQUFBLEVBQzdCLENBQUM7QUFFRCxRQUFNLFNBQVM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlmLE1BQUk7QUFDQSxVQUFNLGlCQUFpQixNQUFNLE9BQU8sS0FBSyxZQUFZLE9BQU87QUFBQSxNQUN4RCxPQUFPLFNBQVM7QUFBQSxNQUNoQixVQUFVO0FBQUEsUUFDTixFQUFFLE1BQU0sVUFBVSxTQUFTLFNBQVMsZ0JBQWU7QUFBQSxNQUN2RDtBQUFBLElBQ0osQ0FBQztBQUVELFFBQUksUUFBUSxlQUFlLFFBQVEsQ0FBQyxFQUFFLFFBQVE7QUFFOUMsUUFBSSxPQUFPO0FBQ1AsY0FBUSxNQUFNLFFBQVEsV0FBVyxFQUFFO0FBQUEsSUFDdkM7QUFFQSxXQUFPO0FBQUEsRUFFWCxTQUFTLE9BQVA7QUFDRSxZQUFRLElBQUksT0FBTztBQUNuQixVQUFNLElBQUksUUFBTSxNQUFBQSxNQUFBLE1BQU0sYUFBTixnQkFBQUEsSUFBZ0IsU0FBaEIsbUJBQXNCLFVBQVMsTUFBTSxPQUFPO0FBQUEsRUFDaEU7QUFDSjtBQUdBLGVBQXNCLHVCQUNsQixLQUNBLFVBQ0Esc0JBQ0FELHlCQUE2RCxDQUFDLEdBQzlELFdBQ0EsYUFDQTtBQUNBLFFBQU0sVUFBVTtBQUFBLElBQ2QscUJBQXFCO0FBQUEsSUFDckIsZ0JBQWdCO0FBQUEsSUFDaEIsYUFBYSxTQUFTO0FBQUEsRUFDeEI7QUFFQSxRQUFNLHVCQUF1QkEsdUJBQXNCLElBQUksV0FBUyxNQUFNLE9BQU8sRUFBRSxLQUFLLElBQUk7QUFFeEYsUUFBTSxjQUFjO0FBQUEsSUFDaEIsT0FBTyxTQUFTO0FBQUEsSUFDaEIsUUFBUztBQUFBO0FBQUEsU0FBYztBQUFBO0FBQUEsRUFBMkIsU0FBUztBQUFBO0FBQUEsRUFBa0I7QUFBQTtBQUFBO0FBQUEsSUFDN0Usc0JBQXNCLFNBQVMsU0FBUyxLQUFLO0FBQUEsSUFDN0M7QUFBQSxJQUNBLFFBQVE7QUFBQSxFQUNaO0FBRUEsTUFBSTtBQUNGLFVBQU0sV0FBVyxVQUFNLDZCQUFXO0FBQUEsTUFDaEM7QUFBQSxNQUNBLFFBQVE7QUFBQSxNQUNSO0FBQUEsTUFDQSxNQUFNLEtBQUssVUFBVSxXQUFXO0FBQUEsSUFDbEMsQ0FBQztBQUVELFdBQU87QUFBQSxFQUVULFNBQVMsT0FBUDtBQUNFLFVBQU0scUJBQXFCLFNBQVMsY0FBYyxtQkFBbUI7QUFDckUsUUFBSSxvQkFBb0I7QUFDcEIsWUFBTSxjQUFjLG1CQUFtQixpQkFBaUIsYUFBYTtBQUNyRSxZQUFNLGlCQUFpQixZQUFZLFlBQVksU0FBUyxDQUFDO0FBRXpELFlBQU0sZUFBZSxlQUFlLGNBQWMsZUFBZTtBQUVqRSxVQUFJLGNBQWM7QUFDZCxxQkFBYSxZQUFZO0FBQ3pCLG1CQUFXLGFBQWEsV0FBVyxjQUFjLFFBQVE7QUFFekQsY0FBTSxZQUFZLGVBQWUsY0FBYyxVQUFVO0FBQ3pELFlBQUksV0FBVztBQUNYLG9CQUFVLGVBQWUsRUFBRSxVQUFVLFVBQVUsT0FBTyxNQUFNLENBQUM7QUFDN0QseUJBQWUsWUFBWSxTQUFTO0FBQUEsUUFDeEM7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUNGLFlBQVEsTUFBTSw2QkFBNkIsS0FBSztBQUNoRCxVQUFNO0FBQUEsRUFDUjtBQUNKO0FBR0EsZUFBc0IseUJBQ2xCLEtBQ0EsVUFDQSxzQkFDQUEseUJBQTZELENBQUMsR0FDOUQsV0FDQSxhQUNBO0FBQ0ksUUFBTUUsa0JBQWlCRix1QkFBc0IsSUFBSSxDQUFDLFVBQThDO0FBQUEsSUFDNUYsTUFBTSxLQUFLO0FBQUEsSUFDWCxTQUFTLEtBQUs7QUFBQSxFQUNsQixFQUFFO0FBRUYsTUFBSTtBQUNBLFVBQU0sV0FBVyxVQUFNLDZCQUFXO0FBQUEsTUFDOUIsS0FBSyxNQUFNO0FBQUEsTUFDWCxRQUFRO0FBQUEsTUFDUixTQUFTO0FBQUEsUUFDTCxnQkFBZ0I7QUFBQSxRQUNoQixpQkFBaUIsVUFBVSxTQUFTO0FBQUEsTUFDeEM7QUFBQSxNQUNBLE1BQU0sS0FBSyxVQUFVO0FBQUEsUUFDakIsT0FBTyxTQUFTO0FBQUEsUUFDaEIsVUFBVTtBQUFBLFVBQ04sRUFBRSxNQUFNLFVBQVUsU0FBUyx1QkFBdUIsU0FBUyxZQUFZO0FBQUEsVUFDdkUsR0FBR0U7QUFBQSxRQUNQO0FBQUEsUUFDQSxZQUFZLFNBQVMsU0FBUztBQUFBLFFBQzlCO0FBQUEsTUFDSixDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUQsV0FBTztBQUFBLEVBRVgsU0FBUyxPQUFQO0FBQ0UsWUFBUSxNQUFNLDZCQUE2QixLQUFLO0FBQ2hELFVBQU07QUFBQSxFQUNWO0FBQ1I7OztBRHRNTyxTQUFTLGVBQWUsT0FBZSxVQUF1QixRQUFnQjtBQUNuRixRQUFNLFVBQVUsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBRWxDLFVBQVEsU0FBUztBQUFBLElBQ2IsS0FBSztBQUFBLElBQ0wsS0FBSztBQUNELGtCQUFZLFFBQVE7QUFDcEI7QUFBQSxJQUNKLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFDRCxxQkFBZSxRQUFRO0FBQ3ZCO0FBQUEsSUFDSixLQUFLO0FBQ0QsYUFBTyxhQUFhLE9BQU8sVUFBVSxNQUFNO0FBQUEsSUFDL0MsS0FBSztBQUFBLElBQ0wsS0FBSztBQUNELHVCQUFpQixPQUFPLFVBQVUsTUFBTTtBQUN4QztBQUFBLElBQ0osS0FBSztBQUNELHlCQUFtQixPQUFPLFVBQVUsTUFBTTtBQUMxQztBQUFBLElBQ0osS0FBSztBQUNELHVCQUFpQixPQUFPLFVBQVUsTUFBTTtBQUN4QztBQUFBLElBQ0osS0FBSztBQUNELG9CQUFjLE9BQU8sVUFBVSxNQUFNO0FBQ3JDO0FBQUEsSUFDSixLQUFLO0FBQ0Qsb0JBQWMsUUFBUTtBQUN0QjtBQUFBLElBQ0osS0FBSztBQUNELGtCQUFZLFFBQVE7QUFDcEI7QUFBQSxJQUNKLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFDRCwwQkFBb0IsQ0FBQztBQUNyQjtBQUFBLElBQ0o7QUFDSSxtQkFBYSxVQUFVLE1BQU07QUFBQSxFQUNyQztBQUNGO0FBSUEsU0FBUyxpQkFBaUIsaUJBQThDO0FBQ3RFLFFBQU0sbUJBQW1CLFNBQVMsY0FBYyxtQkFBbUI7QUFDbkUsUUFBTSxhQUFhLFNBQVMsY0FBYyxLQUFLO0FBQy9DLGFBQVcsVUFBVSxJQUFJLFlBQVk7QUFDckMsYUFBVyxNQUFNLGtCQUFrQjtBQUFBLElBQ2pDLGdCQUFnQiw2QkFDZCxpQkFBaUIsU0FBUyxJQUFJLEVBQUUsaUJBQWlCLGlCQUFpQix5QkFBeUIsRUFBRSxLQUFLO0FBQUEsRUFDdEc7QUFDQSx1REFBa0IsWUFBWTtBQUU5QixRQUFNLGNBQWMsU0FBUyxjQUFjLE1BQU07QUFDakQsY0FBWSxjQUNWLGdCQUFnQixlQUFlLGlCQUFpQjtBQUVsRCxjQUFZLFlBQVk7QUFDeEIsYUFBVyxZQUFZLFdBQVc7QUFFbEMsUUFBTSxlQUFlLFNBQVMsY0FBYyxLQUFLO0FBQ2pELGVBQWEsVUFBVSxJQUFJLGNBQWM7QUFDekMsYUFBVyxZQUFZLFlBQVk7QUFFbkMsU0FBTztBQUNUO0FBR0EsU0FBUyxlQUFlLGNBQThCLGFBQXFCLGlCQUE4QjtBQUN2RyxRQUFNLG1CQUFtQixTQUFTLGNBQWMsbUJBQW1CO0FBRW5FLE1BQUksa0JBQWtCO0FBQ3BCLFVBQU0sY0FBYyxpQkFBaUIsaUJBQWlCLGFBQWE7QUFDbkUsVUFBTSxpQkFBaUIsWUFBWSxZQUFZLFNBQVMsQ0FBQztBQUV6RCxVQUFNLGdCQUFnQixlQUFlLGNBQWMsZUFBZTtBQUVsRSxRQUFJLGVBQWU7QUFDakIsb0JBQWMsWUFBWTtBQUMxQixpQkFBVyxhQUFhLFdBQVcsY0FBYyxlQUFlO0FBRWhFLHFCQUFlLFlBQVksYUFBYTtBQUN4QyxxQkFBZSxlQUFlLEVBQUUsVUFBVSxVQUFVLE9BQU8sUUFBUSxDQUFDO0FBQUEsSUFDdEU7QUFBQSxFQUNGO0FBQ0Y7QUFFQSxlQUFzQixhQUFhLGlCQUE4QixRQUFnQjtBQUMvRSxRQUFNLGVBQWUsaUJBQWlCLGVBQWU7QUFFckQsUUFBTSxvQkFBb0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU0xQixpQkFBZSxjQUFjLG1CQUFtQixlQUFlO0FBQy9ELFFBQU0sT0FBTyxhQUFhO0FBRTVCO0FBS08sU0FBUyxZQUFZLGlCQUE4QjtBQUN4RCxRQUFNLGVBQWUsaUJBQWlCLGVBQWU7QUFFckQsUUFBTSxvQkFBb0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWUxQixpQkFBZSxjQUFjLG1CQUFtQixlQUFlO0FBQ2pFO0FBR08sU0FBUyxlQUFlLGlCQUE4QjtBQUMzRCxRQUFNLGVBQWUsaUJBQWlCLGVBQWU7QUFFckQsUUFBTSxvQkFBb0I7QUFBQTtBQUFBO0FBQUEsbUNBR08sZ0JBQWdCO0FBQUEscUNBQ2QsZ0JBQWdCO0FBQUEseUNBQ1osZ0JBQWdCO0FBQUEseUNBQ2hCLGdCQUFnQjtBQUFBLG9EQUNMLGdCQUFnQjtBQUFBLHNDQUM5QixnQkFBZ0I7QUFBQSwwQ0FDWixnQkFBZ0I7QUFBQSxvREFDTixnQkFBZ0I7QUFBQSxtREFDakIsZ0JBQWdCO0FBQUEsMkNBQ3hCLGdCQUFnQjtBQUFBO0FBQUE7QUFJekQsaUJBQWUsY0FBYyxtQkFBbUIsZUFBZTtBQUNqRTtBQUdBLGVBQXNCLGFBQWEsT0FBZSxpQkFBOEIsUUFBZ0I7QUFsS2hHLE1BQUFDO0FBbUtFLFFBQU0sZUFBZSxpQkFBaUIsZUFBZTtBQUdyRCxNQUFJLENBQUMsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUc7QUFDeEIsVUFBTSxjQUFjO0FBQ3BCLG1CQUFlLGNBQWMsYUFBYSxlQUFlO0FBQ3pEO0FBQUEsRUFDRjtBQUVBLE1BQUksTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQU0sUUFBVztBQUNyQyxVQUFNLGFBQWEsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLEVBQUUsUUFBUSxZQUFZLElBQUk7QUFFL0QsVUFBTSxxQkFBcUIsa0JBQWtCLGdCQUFnQjtBQUM3RCxVQUFNLGtCQUFrQixrQkFBa0IsYUFBYTtBQUV2RCxRQUFJLGNBQWM7QUFFbEIsUUFBSSxnQkFBZ0IsT0FBTyxXQUFXLFFBQVEsR0FBRztBQUMvQyxVQUFJLG1CQUFtQixVQUE2QyxLQUFLLENBQUMsc0JBQXNCLFlBQVksRUFBRSxTQUFTLFVBQW9CLEdBQUc7QUFDNUksd0JBQWdCLFNBQVFBLE1BQUEsbUJBQW1CLFVBQTZDLE1BQWhFLE9BQUFBLE1BQXFFO0FBQzdGLHNCQUFjLDhEQUE4RCxnQkFBZ0I7QUFBQSxNQUM5RixPQUFPO0FBQ0wsc0JBQWMsb0RBQW9EO0FBQUEsTUFDcEU7QUFBQSxJQUNGLFdBQVcsZ0JBQWdCLE9BQU8sV0FBVyxLQUFLLEdBQUc7QUFDbkQsVUFBSSxnQkFBZ0IsVUFBMEMsS0FBSyxDQUFDLGlCQUFpQixzQkFBc0IsMEJBQTBCLFNBQVMsb0JBQW9CLEVBQUUsU0FBUyxVQUFVLEdBQUc7QUFDeEwsd0JBQWdCLFFBQVEsZ0JBQWdCLFVBQTBDLEtBQUs7QUFDdkYsc0JBQWMsOERBQThELGdCQUFnQjtBQUFBLE1BQzlGLE9BQU87QUFDTCxzQkFBYyxvREFBb0Q7QUFBQSxNQUNwRTtBQUFBLElBQ0YsT0FBTztBQUNMLG9CQUFjO0FBQUEsSUFDaEI7QUFFQSxtQkFBZSxjQUFjLGFBQWEsZUFBZTtBQUN6RCxVQUFNLE9BQU8sYUFBYTtBQUMxQixXQUFPO0FBQUEsRUFDVDtBQUNGO0FBR0EsZUFBc0IsaUJBQWlCLE9BQWUsaUJBQThCLFFBQWdCO0FBN01wRyxNQUFBQTtBQThNRSxRQUFNLGVBQWUsaUJBQWlCLGVBQWU7QUFFckQsTUFBSSxvQkFBb0I7QUFDeEIsUUFBTSw4QkFBOEIsU0FBUyxlQUFlLHNCQUFzQjtBQUNsRixRQUFNLGNBQWFBLE1BQUEsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQWxCLGdCQUFBQSxJQUFxQjtBQUV4QyxNQUFJLGVBQWUsVUFBVSxlQUFlLE1BQU07QUFDOUMsb0JBQWdCLHVCQUF1QjtBQUN2QyxRQUFJLDZCQUE2QjtBQUM3QixrQ0FBNEIsTUFBTSxVQUFVO0FBQUEsSUFDaEQ7QUFDQSx5QkFBcUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS3pCLFdBQVcsZUFBZSxXQUFXLGVBQWUsT0FBTztBQUN2RCxvQkFBZ0IsdUJBQXVCO0FBQ3ZDLFFBQUksNkJBQTZCO0FBQzdCLGtDQUE0QixNQUFNLFVBQVU7QUFBQSxJQUNoRDtBQUNBLHlCQUFxQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLekIsT0FBTztBQUNMLHlCQUFxQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLdkI7QUFFQSxpQkFBZSxjQUFjLG1CQUFtQixlQUFlO0FBQy9ELFFBQU0sT0FBTyxhQUFhO0FBQzVCO0FBR0EsZUFBc0IsbUJBQW1CLE9BQWUsaUJBQThCLFFBQWdCO0FBQ3BHLFFBQU0sZUFBZSxpQkFBaUIsZUFBZTtBQUVyRCxRQUFNLGFBQWEsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ3JDLFFBQU0sYUFBYSxXQUFXLFVBQVU7QUFDeEMsTUFBSTtBQUVKLE1BQUksbUJBQW1CLENBQUMsTUFBTSxVQUFVLEtBQUssY0FBYyxLQUFRLGNBQWMsR0FBTTtBQUNuRixvQkFBZ0IsY0FBYyxZQUFZLEtBQUssTUFBTSxhQUFhLElBQUksSUFBSSxNQUFNLFFBQVEsQ0FBQyxDQUFDO0FBQzFGLGdDQUE0QixHQUFHLGdCQUFnQjtBQUFBLEVBQ25ELE9BQU87QUFDSCxnQ0FBNEI7QUFBQSxFQUNoQztBQUVBLFFBQU0sb0JBQW9CO0FBQUE7QUFBQSwwQ0FFYztBQUFBO0FBQUE7QUFJeEMsaUJBQWUsY0FBYyxtQkFBbUIsZUFBZTtBQUMvRCxRQUFNLE9BQU8sYUFBYTtBQUM1QjtBQUdBLGVBQXNCLGlCQUFpQixPQUFlLGlCQUE4QixRQUFnQjtBQUNsRyxRQUFNLGVBQWUsaUJBQWlCLGVBQWU7QUFFckQsTUFBSSxvQkFBb0I7QUFDeEIsUUFBTSxpQkFBaUIsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ3pDLE1BQUk7QUFFSixNQUFJLG1CQUFtQixVQUFhLG1CQUFtQixJQUFJO0FBQ3ZELFVBQU0sYUFBYSxTQUFTLGNBQWM7QUFFMUMsUUFBSSxDQUFDLE1BQU0sVUFBVSxLQUFLLGNBQWMsR0FBRztBQUV2QyxzQkFBZ0IsYUFBYSxXQUFXLFNBQVM7QUFDakQsZ0NBQTBCLHVCQUF1QjtBQUFBLElBQ3JELE9BQU87QUFFSCxnQ0FBMEI7QUFBQSxJQUM5QjtBQUFBLEVBQ0osT0FBTztBQUVILG9CQUFnQixhQUFhO0FBQzdCLDhCQUEwQjtBQUFBLEVBQzlCO0FBRUEsdUJBQXFCO0FBQUE7QUFBQSx1QkFFQTtBQUFBO0FBQUE7QUFJckIsaUJBQWUsY0FBYyxtQkFBbUIsZUFBZTtBQUMvRCxRQUFNLE9BQU8sYUFBYTtBQUM1QjtBQUdBLGVBQXNCLGNBQWMsT0FBZSxpQkFBOEIsUUFBZ0I7QUFDL0YsUUFBTSxlQUFlLGlCQUFpQixlQUFlO0FBRXJELE1BQUksb0JBQW9CO0FBQ3hCLFFBQU0sb0JBQW9CLE1BQU0sTUFBTSxXQUFXO0FBRWpELE1BQUksc0JBQXNCLE1BQU07QUFDNUIsUUFBSSxrQkFBa0IsQ0FBQyxHQUFHO0FBQ3RCLHNCQUFnQixjQUFjLGtCQUFrQixDQUFDO0FBQ2pELDJCQUFxQjtBQUFBO0FBQUEsZ0RBRWlCLGtCQUFrQixDQUFDO0FBQUE7QUFBQTtBQUFBLElBRzdEO0FBQUEsRUFDSixPQUFPO0FBQ0gsb0JBQWdCLGNBQWM7QUFDOUIseUJBQXFCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUt6QjtBQUVBLGlCQUFlLGNBQWMsbUJBQW1CLGVBQWU7QUFDL0QsUUFBTSxPQUFPLGFBQWE7QUFDNUI7QUFFQSxlQUFzQixjQUFjLGlCQUE4QjtBQUNoRSxNQUFJLGtCQUFrQjtBQUV0QixRQUFNLGFBQWEsSUFBSSxVQUFVLGNBQWM7QUFFL0MsT0FBSSx5Q0FBWSxlQUFjLE1BQU07QUFDbEMsVUFBTSxrQkFBa0IsTUFBTSxJQUFJLE1BQU0sS0FBSyxVQUFVO0FBR3ZELFVBQU0sWUFBWSxTQUFTLGlCQUFpQixXQUFXO0FBRXZELFFBQUksZUFBZTtBQUNuQixRQUFJLFVBQVUsU0FBUyxHQUFHO0FBQ3RCLFlBQU0sZUFBZSxVQUFVLENBQUM7QUFDaEMsWUFBTSxLQUFLLGFBQWEsVUFBVSxFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBRWxELFlBQUksS0FBSyxhQUFhLEtBQUssYUFBYSxLQUFLLGFBQWE7QUFDdEQseUJBQWUsS0FBSyxZQUFZLEtBQUssRUFBRSxZQUFZO0FBQUEsUUFDdkQ7QUFBQSxNQUNKLENBQUM7QUFBQSxJQUNMO0FBR0EsVUFBTSxlQUFlLFNBQVMsaUJBQWlCLGNBQWM7QUFDN0QsVUFBTSxrQkFBa0IsYUFBYSxTQUFTLEtBQUssYUFBYSxDQUFDLEVBQUUsY0FBYyxhQUFhLENBQUMsRUFBRSxZQUFZLFlBQVksSUFBSTtBQUc3SCxRQUFJLE1BQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxPQUFPLDBCQUEwQixHQUFHO0FBQ25FLFVBQUk7QUFDRixjQUFNLGNBQWMsTUFBTSxLQUFLLElBQUksTUFBTSxRQUFRLEtBQUssMEJBQTBCO0FBQ2hGLGNBQU0sV0FBVyxLQUFLLE1BQU0sV0FBVztBQUd2QyxZQUFJLFdBQVc7QUFDZiwyQkFBbUIsU0FDaEIsT0FBTyxDQUFDLFNBQTZDLE9BQWUsVUFBMEI7QUFDN0YsY0FBSSxZQUFZLFFBQVEsU0FBUyxhQUFhO0FBQzVDLHVCQUFXO0FBQ1gsbUJBQU87QUFBQSxVQUNUO0FBQ0EsY0FBSSxRQUFRLFFBQVEsV0FBVyxHQUFHLEdBQUc7QUFFbkMsdUJBQVcsUUFBUSxJQUFJLE1BQU0sVUFBVSxNQUFNLFFBQVEsQ0FBQyxFQUFFLFNBQVM7QUFDakUsbUJBQU87QUFBQSxVQUNUO0FBQ0EsaUJBQU87QUFBQSxRQUNULENBQUMsRUFDQSxJQUFJLENBQUMsWUFBZ0Q7QUFDcEQsY0FBSSxXQUFXLFFBQVEsS0FBSyxZQUFZO0FBQ3hDLHFCQUFXLGFBQWEsU0FBUyxlQUFlO0FBQ2hELHFCQUFXLGFBQWEsY0FBYyxrQkFBa0I7QUFDeEQsaUJBQU8sVUFBVTtBQUFBLEVBQWEsUUFBUTtBQUFBO0FBQUEsUUFDeEMsQ0FBQyxFQUNBLEtBQUssSUFBSTtBQUFBLE1BRWQsU0FBUyxPQUFQO0FBQ0EsZ0JBQVEsTUFBTSxxQ0FBcUMsS0FBSztBQUFBLE1BQzFEO0FBQUEsSUFDRjtBQUVBLFVBQU0saUJBQWlCLGtCQUFrQixPQUFPO0FBR2hELFVBQU0sSUFBSSxNQUFNLE9BQU8sWUFBWSxjQUFjO0FBQ2pELFFBQUksd0JBQU8sd0JBQXdCO0FBQUEsRUFDckMsT0FDSztBQUNILFFBQUksd0JBQU8sOEJBQThCO0FBQUEsRUFDM0M7QUFDRjtBQUlBLGVBQXNCLFlBQVksaUJBQThCO0FBQzlELE1BQUksYUFBYSxnQkFBZ0I7QUFDakMsUUFBTSxlQUFlO0FBQ3JCLFFBQU0sZ0JBQWdCO0FBRXRCLE1BQUksY0FBYyxDQUFDLFdBQVcsU0FBUyxHQUFHLEdBQUc7QUFDM0Msa0JBQWM7QUFBQSxFQUNoQjtBQUtBLFFBQU0sTUFBTSxJQUFJLEtBQUs7QUFDckIsUUFBTSxnQkFBZ0IsSUFBSSxZQUFZLElBQUksT0FDakIsSUFBSSxTQUFTLElBQUksR0FBRyxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUcsSUFBSSxNQUNuRCxJQUFJLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUcsSUFBSSxNQUM1QyxJQUFJLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUcsSUFBSSxNQUM3QyxJQUFJLFdBQVcsRUFBRSxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUcsSUFBSSxNQUMvQyxJQUFJLFdBQVcsRUFBRSxTQUFTLEVBQUUsU0FBUyxHQUFHLEdBQUc7QUFFbkUsTUFBSTtBQUNGLFFBQUksa0JBQWtCO0FBQ3RCLFVBQU0sV0FBVyxJQUFJLE1BQU0sU0FBUztBQUdwQyxVQUFNLG1CQUFtQixTQUFTLGNBQWMsWUFBWTtBQUM1RCxRQUFJLFlBQVk7QUFDaEIsUUFBSSxvQkFBb0IsaUJBQWlCLGFBQWE7QUFDbEQsa0JBQVksaUJBQWlCLFlBQVksUUFBUSxXQUFXLEVBQUUsRUFBRSxZQUFZO0FBQUEsSUFDaEY7QUFFQSxVQUFNLGVBQWUsU0FBUyxLQUFLLENBQUFDLFVBQVFBLE1BQUssS0FBSyxZQUFZLE1BQU0sZ0JBQWdCLGlCQUFpQixZQUFZLENBQUM7QUFFckgsUUFBSSxjQUFjO0FBQ2hCLFVBQUksY0FBYyxNQUFNLElBQUksTUFBTSxLQUFLLFlBQVk7QUFHbkQsVUFBSSxxQkFBcUIsS0FBSyxXQUFXLEdBQUc7QUFFeEMsc0JBQWMsWUFBWSxRQUFRLFFBQVE7QUFBQSxTQUFlLFdBQVc7QUFBQSxNQUN4RSxPQUFPO0FBRUgsc0JBQWM7QUFBQSxXQUNiO0FBQUE7QUFBQSxJQUNGO0FBQUEsTUFDSDtBQUNBLHlCQUFtQjtBQUFBLElBRXZCLE9BQU87QUFFSCx5QkFDQTtBQUFBLFdBQ0s7QUFBQTtBQUFBO0FBQUEsSUFFVDtBQUdFLFVBQU0sWUFBWSxTQUFTLGlCQUFpQixXQUFXO0FBRXZELFFBQUksZUFBZTtBQUNuQixRQUFJLFVBQVUsU0FBUyxHQUFHO0FBQ3RCLFlBQU0sZUFBZSxVQUFVLENBQUM7QUFDaEMsWUFBTSxLQUFLLGFBQWEsVUFBVSxFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBRWxELFlBQUksS0FBSyxhQUFhLEtBQUssYUFBYSxLQUFLLGFBQWE7QUFDdEQseUJBQWUsS0FBSyxZQUFZLEtBQUssRUFBRSxZQUFZO0FBQUEsUUFDdkQ7QUFBQSxNQUNKLENBQUM7QUFBQSxJQUNMO0FBR0EsVUFBTSxlQUFlLFNBQVMsaUJBQWlCLGNBQWM7QUFDN0QsVUFBTSxrQkFBa0IsYUFBYSxTQUFTLEtBQUssYUFBYSxDQUFDLEVBQUUsY0FBYyxhQUFhLENBQUMsRUFBRSxZQUFZLFlBQVksSUFBSTtBQUc3SCxRQUFJLE1BQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxPQUFPLDBCQUEwQixHQUFHO0FBQ25FLFVBQUk7QUFDRixjQUFNLGNBQWMsTUFBTSxLQUFLLElBQUksTUFBTSxRQUFRLEtBQUssMEJBQTBCO0FBQ2hGLGNBQU0sV0FBVyxLQUFLLE1BQU0sV0FBVztBQUd2QyxZQUFJLFdBQVc7QUFDZiwyQkFBbUIsU0FDaEIsT0FBTyxDQUFDLFNBQTZDLE9BQWUsVUFBMEI7QUFDN0YsY0FBSSxZQUFZLFFBQVEsU0FBUyxhQUFhO0FBQzVDLHVCQUFXO0FBQ1gsbUJBQU87QUFBQSxVQUNUO0FBQ0EsY0FBSSxRQUFRLFFBQVEsV0FBVyxHQUFHLEdBQUc7QUFFbkMsdUJBQVcsUUFBUSxJQUFJLE1BQU0sVUFBVSxNQUFNLFFBQVEsQ0FBQyxFQUFFLFNBQVM7QUFDakUsbUJBQU87QUFBQSxVQUNUO0FBQ0EsaUJBQU87QUFBQSxRQUNULENBQUMsRUFDQSxJQUFJLENBQUMsWUFBZ0Q7QUFDcEQsY0FBSSxXQUFXLFFBQVEsS0FBSyxZQUFZO0FBQ3hDLHFCQUFXLGFBQWEsU0FBUyxlQUFlO0FBQ2hELHFCQUFXLGFBQWEsY0FBYyxrQkFBa0I7QUFDeEQsaUJBQU8sVUFBVTtBQUFBLEVBQWEsUUFBUTtBQUFBO0FBQUEsUUFDeEMsQ0FBQyxFQUNBLEtBQUssSUFBSTtBQUFBLE1BRWQsU0FBUyxPQUFQO0FBQ0EsZ0JBQVEsTUFBTSxxQ0FBcUMsS0FBSztBQUFBLE1BQzFEO0FBQUEsSUFDRjtBQUdBLFFBQUksQ0FBQyxNQUFNLEtBQUssSUFBSSxNQUFNLFFBQVEsT0FBTyxVQUFVLEdBQUc7QUFDcEQsWUFBTSxLQUFLLElBQUksTUFBTSxhQUFhLFVBQVU7QUFBQSxJQUM5QztBQUVBLFFBQUksV0FBVztBQUVmLFFBQUksZ0JBQWdCLHNCQUFzQjtBQUN4QyxVQUFJLHVCQUF1QjtBQUMzQixVQUFJLGtCQUFrQjtBQUN0QixVQUFJO0FBRUosWUFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFFcEQsVUFBSSxZQUFZO0FBQ1osWUFBSSxnQkFBZ0Isc0JBQXNCO0FBQ3RDLGlDQUF1QixNQUFNLHFCQUFxQixVQUFVO0FBQUEsUUFDaEU7QUFBQSxNQUNKO0FBR0EsWUFBTSxpQkFBaUIsQ0FBQyxTQUF3QjtBQUM1QyxlQUFPLFNBQVMsS0FBSyxDQUFDQSxVQUFTQSxNQUFLLFNBQVMsYUFBYSxPQUFPLGFBQWE7QUFBQSxNQUNsRjtBQUVBLGFBQU8sQ0FBQyxpQkFBaUI7QUFDckIsMkJBQW1CLE1BQU0sb0JBQW9CLGlCQUFpQix1QkFBdUIsZUFBZTtBQUVwRyxZQUFJLENBQUMsZUFBZSxnQkFBZ0IsR0FBRztBQUNuQyw0QkFBa0I7QUFBQSxRQUN0QjtBQUFBLE1BQ0o7QUFFQSxpQkFBVyxhQUFhLG1CQUFtQjtBQUFBLElBRTdDLE9BQ0s7QUFDSCxpQkFBVyxhQUFhLGVBQWUsTUFBTSxnQkFBZ0I7QUFBQSxJQUMvRDtBQUdBLFVBQU0sT0FBTyxNQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sVUFBVSxlQUFlO0FBQ2xFLFFBQUksTUFBTTtBQUVSLFVBQUksd0JBQU8scUJBQXFCO0FBR2hDLFdBQUssSUFBSSxVQUFVLGFBQWEsVUFBVSxJQUFJLE1BQU0sRUFBRSxRQUFRLEtBQUssQ0FBQztBQUFBLElBQ3RFO0FBQUEsRUFDRixTQUFTLE9BQVA7QUFDQSxZQUFRLE1BQU0sMEJBQTBCLEtBQUs7QUFBQSxFQUMvQztBQUNGO0FBR0EsU0FBUyxrQkFBa0IsYUFBb0M7QUFDN0QsUUFBTSxjQUEyQixDQUFDO0FBQ2xDLGNBQVksUUFBUSxDQUFDLE9BQU8sVUFBVTtBQUNwQyxpQkFBYSxRQUFRLEdBQUcsU0FBUyxDQUFDLElBQUk7QUFBQSxFQUN4QyxDQUFDO0FBQ0QsU0FBTztBQUNUOzs7QUh2akJPLElBQU0sb0JBQW9CO0FBQzFCLElBQU0sNkJBQTZCO0FBRW5DLElBQU0sbUJBQW1CLENBQUMsc0JBQXNCLFlBQVk7QUFDNUQsSUFBTSxnQkFBZ0IsQ0FBQyxpQkFBaUIsc0JBQXNCLFNBQVMsb0JBQW9CO0FBRTNGLElBQUksaUJBQXNELENBQUM7QUFFM0QsU0FBUyxzQkFBc0I7QUFDbEMsbUJBQWlCLENBQUM7QUFDdEI7QUFFQSxJQUFJLHdCQUE2RCxDQUFDO0FBRTNELElBQU0sVUFBTixjQUFzQiwwQkFBUztBQUFBLEVBT2xDLFlBQVksTUFBcUIsVUFBdUIsUUFBZ0I7QUFDcEUsVUFBTSxJQUFJO0FBSmQsU0FBUSxlQUFlO0FBS25CLFNBQUssV0FBVztBQUNoQixTQUFLLFNBQVM7QUFDZCxTQUFLLE9BQU87QUFBQSxFQUNoQjtBQUFBLEVBRUEsY0FBYztBQUNWLFdBQU87QUFBQSxFQUNYO0FBQUEsRUFFQSxpQkFBaUI7QUFDYixXQUFPO0FBQUEsRUFDWDtBQUFBLEVBR0EsTUFBTSxTQUF3QjtBQUMxQixTQUFLLGNBQWMsS0FBSyxJQUFJLFVBQVUsR0FBRyxhQUFhLEtBQUssb0JBQW9CLEtBQUssSUFBSSxDQUFDLENBQUM7QUFHMUYsVUFBTSxZQUFZLEtBQUssWUFBWSxTQUFTLENBQUM7QUFDN0MsY0FBVSxNQUFNO0FBQ2hCLFVBQU0sbUJBQW1CLFVBQVUsU0FBUyxPQUFPO0FBQUEsTUFDL0MsTUFBTTtBQUFBLFFBQ0YsT0FBTztBQUFBLE1BQ1g7QUFBQSxJQUNKLENBQUM7QUFFRCxxQkFBaUIsU0FBUyxNQUFNO0FBQUEsTUFDNUIsTUFBTSxLQUFLLFNBQVMsZUFBZSxpQkFBaUI7QUFBQSxNQUNwRCxNQUFNO0FBQUEsUUFDRixJQUFJO0FBQUEsTUFDUjtBQUFBLElBQ0osQ0FBQztBQUVELHFCQUFpQixTQUFTLEtBQUs7QUFBQSxNQUMzQixNQUFNLFlBQVksS0FBSyxTQUFTLFNBQVMsaUJBQWlCO0FBQUEsTUFDMUQsTUFBTTtBQUFBLFFBQ0YsSUFBSTtBQUFBLE1BQ1I7QUFBQSxJQUNKLENBQUM7QUFFRCxVQUFNLGNBQWMsaUJBQWlCLFNBQVMsUUFBUTtBQUFBLE1BQ2xELE1BQU07QUFBQSxRQUNGLE9BQU87QUFBQSxRQUNQLElBQUk7QUFBQSxNQUNSO0FBQUEsSUFDSixDQUFDO0FBRUQsVUFBTSw4QkFBOEIsaUJBQWlCLFNBQVMsS0FBSztBQUFBLE1BQy9ELE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxRQUNGLElBQUk7QUFBQSxNQUNSO0FBQUEsSUFDSixDQUFDO0FBRUQsZ0NBQTRCLFlBQVksV0FBVztBQUVuRCxnQ0FBNEIsTUFBTSxVQUFVO0FBRTVDLFFBQUksNkJBQTZCO0FBQzdCLFVBQUksS0FBSyxTQUFTLHNCQUFzQjtBQUNwQyxvQ0FBNEIsTUFBTSxVQUFVO0FBQUEsTUFDaEQsT0FBTztBQUNILG9DQUE0QixNQUFNLFVBQVU7QUFBQSxNQUNoRDtBQUFBLElBQ0o7QUFFQSxVQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVUsY0FBYztBQUNwRCxRQUFJLFlBQVk7QUFDWixZQUFNLHFCQUFxQixVQUFVO0FBQUEsSUFDekM7QUFFQSxVQUFNLG1CQUFtQixpQkFBaUIsU0FBUyxPQUFPO0FBQUEsTUFDdEQsTUFBTTtBQUFBLFFBQ0YsSUFBSTtBQUFBLE1BQ1I7QUFBQSxJQUNKLENBQUM7QUFFRCxVQUFNLFNBQVM7QUFFZixxQkFBaUIsS0FBSztBQUV0QixtQkFBZSxRQUFRLENBQUMsYUFBYSxVQUFVO0FBQzNDLFlBQU0scUJBQXFCLFNBQVMsY0FBYyxLQUFLO0FBQ3ZELHlCQUFtQixZQUFZO0FBRS9CLFVBQUksWUFBWSxRQUFRLFFBQVE7QUFDNUIsY0FBTSxpQkFBaUIsU0FBUyxjQUFjLEtBQUs7QUFDbkQsdUJBQWUsWUFBWTtBQUMzQix1QkFBZSxNQUFNLGtCQUFrQixXQUFXLEtBQUssU0FBUyw4QkFDNUQsaUJBQWlCLFNBQVMsSUFBSSxFQUFFLGlCQUFpQixpQkFBaUIsMEJBQTBCLEVBQUUsS0FBSyxDQUFDO0FBRXhHLGNBQU0sd0JBQXdCLFNBQVMsY0FBYyxLQUFLO0FBQzFELDhCQUFzQixZQUFZO0FBRWxDLGNBQU0sZUFBZSxTQUFTLGNBQWMsTUFBTTtBQUNsRCxxQkFBYSxZQUFZO0FBQ3pCLHFCQUFhLGNBQWMsS0FBSyxTQUFTLFlBQVksaUJBQWlCO0FBQ3RFLGNBQU0sUUFBUSxTQUFTLGNBQWMsR0FBRztBQUV4QyxjQUFNLGlCQUFpQixzQkFBc0IsS0FBSztBQUNsRCxjQUFNLGNBQWMsYUFBYTtBQUVqQyw4QkFBc0IsWUFBWSxZQUFZO0FBQzlDLDhCQUFzQixZQUFZLGtCQUFrQjtBQUNwRCwyQkFBbUIsWUFBWSxjQUFjO0FBQzdDLDJCQUFtQixZQUFZLFdBQVc7QUFDMUMsdUJBQWUsWUFBWSxxQkFBcUI7QUFDaEQsdUJBQWUsWUFBWSxLQUFLO0FBQ2hDLHlCQUFpQixZQUFZLGNBQWM7QUFFM0MsWUFBSSxpQkFBaUIsU0FBUyxLQUFLLFNBQVMsS0FBSyxHQUFHO0FBQ2hELGdCQUFNLGFBQWEsWUFBWTtBQUMvQixnQkFBTSxjQUFjLFdBQVcsTUFBTSxHQUFHLEVBQUUsTUFBTSxDQUFDLEVBQUUsS0FBSyxHQUFHLEVBQUUsS0FBSztBQUNsRSxnQkFBTSxZQUFZLE9BQU8sV0FBVztBQUFBLFFBQ3hDLE9BQU87QUFDSCxnQkFBTSxZQUFZLE9BQU8sWUFBWSxPQUFPO0FBQUEsUUFDaEQ7QUFBQSxNQUNKO0FBRUEsVUFBSSxZQUFZLFFBQVEsYUFBYTtBQUNqQyxjQUFNLGdCQUFnQixTQUFTLGNBQWMsS0FBSztBQUNsRCxzQkFBYyxZQUFZO0FBQzFCLHNCQUFjLE1BQU0sa0JBQWtCLFdBQVcsS0FBSyxTQUFTLDZCQUMzRCxpQkFBaUIsU0FBUyxJQUFJLEVBQUUsaUJBQWlCLGlCQUFpQix5QkFBeUIsRUFBRSxLQUFLLENBQUM7QUFFdkcsY0FBTSx1QkFBdUIsU0FBUyxjQUFjLEtBQUs7QUFDekQsNkJBQXFCLFlBQVk7QUFFakMsY0FBTSxjQUFjLFNBQVMsY0FBYyxNQUFNO0FBQ2pELG9CQUFZLGNBQWMsS0FBSyxTQUFTLGVBQWUsaUJBQWlCO0FBRXhFLG9CQUFZLFlBQVk7QUFFeEIsY0FBTSxrQkFBa0IsU0FBUyxjQUFjLEtBQUs7QUFDcEQsd0JBQWdCLFlBQVk7QUFFNUIsWUFBSSxPQUFPO0FBRVgsY0FBTSxjQUFjLFlBQVk7QUFDaEMsWUFBSSxlQUFlLFVBQVUsR0FBRztBQUM1QixjQUFJLGlCQUFpQixTQUFTLEtBQUssU0FBUyxLQUFLLEdBQUc7QUFDaEQsa0JBQU0sY0FBYyxZQUFZLE1BQU0sR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEtBQUssR0FBRyxFQUFFLEtBQUs7QUFDbkUsbUJBQU8sT0FBTyxXQUFXO0FBQUEsVUFDN0IsV0FBVyxZQUFZLFFBQVEsU0FBUywrQkFBK0IsR0FBRztBQUN0RSxtQkFBTyxZQUFZO0FBQUEsVUFDdkIsT0FDSztBQUNELG1CQUFPLE9BQU8sWUFBWSxPQUFPO0FBQUEsVUFDckM7QUFBQSxRQUNKO0FBRUEsY0FBTSxVQUFVLFNBQVMsY0FBYyxHQUFHO0FBQzFDLGdCQUFRLFlBQVk7QUFFcEIsNkJBQXFCLFlBQVksV0FBVztBQUM1Qyw2QkFBcUIsWUFBWSxrQkFBa0I7QUFFbkQsWUFBSSxDQUFDLFlBQVksU0FBUywrQkFBK0IsR0FBRztBQUN4RCxnQkFBTSxnQkFBZ0IscUJBQXFCLGFBQWEsS0FBSyxRQUFRO0FBQ3JFLDZCQUFtQixZQUFZLGFBQWE7QUFBQSxRQUNoRDtBQUNBLHNCQUFjLFlBQVksb0JBQW9CO0FBQzlDLHdCQUFnQixZQUFZLE9BQU87QUFDbkMsc0JBQWMsWUFBWSxlQUFlO0FBQ3pDLHlCQUFpQixZQUFZLGFBQWE7QUFFMUMsMEJBQWtCLGVBQWU7QUFDakMsNEJBQW9CLGVBQWU7QUFDbkMsWUFBSSxDQUFDLFlBQVksUUFBUSxTQUFTLCtCQUErQixHQUFFO0FBQy9ELDZCQUFtQixlQUFlO0FBQUEsUUFDdEM7QUFDQSxjQUFNLGNBQWMsaUJBQWlCLGlCQUFpQixhQUFhO0FBQ25FLGNBQU0saUJBQWlCLFlBQVksWUFBWSxTQUFTLENBQUM7QUFFekQsdUJBQWUsWUFBWSxlQUFlO0FBQzFDLHVCQUFlLGVBQWUsRUFBRSxVQUFVLFVBQVUsT0FBTyxRQUFRLENBQUM7QUFBQSxNQUN4RTtBQUFBLElBQ0osQ0FBQztBQUVELFVBQU0sZ0JBQWdCLFNBQVMsZUFBZSxpQkFBaUI7QUFDL0QsbURBQWUsWUFBWTtBQUUzQixVQUFNLFVBQVUsaUJBQWlCLFNBQVMsT0FBTztBQUFBLE1BQzdDLE1BQU07QUFBQSxRQUNGLE9BQU87QUFBQSxNQUNYO0FBQUEsSUFDSixDQUFDO0FBRUQsVUFBTSxXQUFXLFNBQVMsY0FBYyxVQUFVO0FBQ2xELGFBQVMsYUFBYSxtQkFBbUIsS0FBSyxTQUFTLENBQUM7QUFDeEQsYUFBUyxhQUFhLGVBQWUsaUJBQWlCO0FBQ3RELFlBQVEsWUFBWSxRQUFRO0FBRTVCLFNBQUssa0JBQWtCO0FBQ3ZCLFNBQUssa0JBQWtCO0FBQUEsRUFDM0I7QUFBQSxFQUVBLG9CQUFvQjtBQUNoQixTQUFLLGdCQUFnQixpQkFBaUIsU0FBUyxLQUFLLFlBQVksS0FBSyxJQUFJLENBQUM7QUFDMUUsU0FBSyxnQkFBZ0IsaUJBQWlCLFdBQVcsS0FBSyxjQUFjLEtBQUssSUFBSSxDQUFDO0FBQzlFLFNBQUssZ0JBQWdCLGlCQUFpQixTQUFTLEtBQUssWUFBWSxLQUFLLElBQUksQ0FBQztBQUMxRSxTQUFLLGdCQUFnQixpQkFBaUIsUUFBUSxLQUFLLFdBQVcsS0FBSyxJQUFJLENBQUM7QUFBQSxFQUM1RTtBQUFBLEVBRUEsTUFBTSxvQkFBb0IsTUFBYTtBQUNuQyxVQUFNLHFCQUFxQixJQUFJO0FBQUEsRUFDbkM7QUFBQSxFQUVBLE1BQU0sWUFBWSxPQUFzQjtBQUVwQyxRQUFJLEtBQUssaUJBQWlCLFNBQVMsQ0FBQyxNQUFNLFlBQVksTUFBTSxRQUFRLFNBQVM7QUFDekUsZUFBUztBQUNULFlBQU0sZUFBZTtBQUNyQixZQUFNLFFBQVEsS0FBSyxnQkFBZ0IsTUFBTSxLQUFLO0FBQzlDLFVBQUksTUFBTSxXQUFXLEdBQUc7QUFDcEI7QUFBQSxNQUNKO0FBRUEsVUFBSSxpQkFBaUIsU0FBUyxLQUFLLFNBQVMsS0FBSyxHQUFHO0FBQ2hELG1CQUFXLGdCQUFnQixPQUFPLGVBQWUsS0FBSyxRQUFRO0FBQUEsTUFDbEUsT0FBTztBQUNILG1CQUFXLE9BQU8sZUFBZSxLQUFLLFFBQVE7QUFBQSxNQUNsRDtBQUVBLFlBQU0sUUFBUSxTQUFTLGNBQWMsR0FBRztBQUN4QyxZQUFNLGtCQUFrQixPQUFPLEtBQUs7QUFDcEMsWUFBTSxZQUFZO0FBR2xCLFlBQU0saUJBQWlCLFNBQVMsY0FBYyxLQUFLO0FBQ25ELHFCQUFlLFlBQVk7QUFDM0IscUJBQWUsTUFBTSxrQkFBa0IsV0FBVyxLQUFLLFNBQVMsOEJBQzVELGlCQUFpQixTQUFTLElBQUksRUFBRSxpQkFBaUIsaUJBQWlCLDBCQUEwQixFQUFFLEtBQUssQ0FBQztBQUV4RyxZQUFNLHdCQUF3QixTQUFTLGNBQWMsS0FBSztBQUMxRCw0QkFBc0IsWUFBWTtBQUVsQyxZQUFNLGVBQWUsU0FBUyxjQUFjLE1BQU07QUFDbEQsbUJBQWEsWUFBWTtBQUN6QixtQkFBYSxjQUFjLEtBQUssU0FBUyxZQUFZLGlCQUFpQjtBQUV0RSxZQUFNLHFCQUFxQixTQUFTLGNBQWMsS0FBSztBQUN2RCx5QkFBbUIsWUFBWTtBQUUvQixZQUFNLG1CQUFtQixTQUFTLGNBQWMsbUJBQW1CO0FBQ25FLFVBQUksa0JBQWtCO0FBQ2xCLGNBQU0saUJBQWlCLHNCQUFzQixLQUFLO0FBQ2xELGNBQU0sY0FBYyxhQUFhO0FBRWpDLDhCQUFzQixZQUFZLFlBQVk7QUFDOUMsOEJBQXNCLFlBQVksa0JBQWtCO0FBQ3BELDJCQUFtQixZQUFZLGNBQWM7QUFDN0MsMkJBQW1CLFlBQVksV0FBVztBQUMxQyx1QkFBZSxZQUFZLHFCQUFxQjtBQUNoRCx1QkFBZSxZQUFZLEtBQUs7QUFDaEMseUJBQWlCLFlBQVksY0FBYztBQUkzQyxZQUFJLE1BQU0sV0FBVyxHQUFHLEdBQUc7QUFFdkIseUJBQWUsT0FBTyxLQUFLLFVBQVUsS0FBSyxNQUFNO0FBQ2hELGdCQUFNLFlBQVksU0FBUyxjQUFjLFlBQVk7QUFDckQsY0FBSSxXQUFXO0FBQ1gsc0JBQVUsY0FBYyxZQUFZLEtBQUssU0FBUyxNQUFNLFlBQVk7QUFBQSxVQUN4RTtBQUFBLFFBR0osT0FDSztBQUNELGdCQUFNLGdCQUFnQixTQUFTLGNBQWMsS0FBSztBQUNsRCx3QkFBYyxZQUFZO0FBQzFCLHdCQUFjLE1BQU0sa0JBQWtCLFdBQVcsS0FBSyxTQUFTLDZCQUMzRCxpQkFBaUIsU0FBUyxJQUFJLEVBQUUsaUJBQWlCLGlCQUFpQix5QkFBeUIsRUFBRSxLQUFLLENBQUM7QUFFdkcsZ0JBQU0sdUJBQXVCLFNBQVMsY0FBYyxLQUFLO0FBQ3pELCtCQUFxQixZQUFZO0FBRWpDLGdCQUFNLGNBQWMsU0FBUyxjQUFjLE1BQU07QUFDakQsc0JBQVksY0FBYyxLQUFLLFNBQVMsZUFBZSxpQkFBaUI7QUFFeEUsc0JBQVksWUFBWTtBQUV4QixnQkFBTSxrQkFBa0IsU0FBUyxjQUFjLEtBQUs7QUFDcEQsMEJBQWdCLFlBQVk7QUFFNUIsK0JBQXFCLFlBQVksV0FBVztBQUM1Qyx3QkFBYyxZQUFZLG9CQUFvQjtBQUM5Qyx3QkFBYyxZQUFZLGVBQWU7QUFDekMsMkJBQWlCLFlBQVksYUFBYTtBQUUxQyxnQkFBTSxZQUFZLFNBQVMsY0FBYyxNQUFNO0FBQy9DLG9CQUFVLGFBQWEsTUFBTSxTQUFTO0FBQ3RDLG9CQUFVLE1BQU0sVUFBVTtBQUMxQixvQkFBVSxjQUFjO0FBR3hCLGdCQUFNLHlCQUF5QixNQUFNO0FBeFV6RCxnQkFBQUM7QUF5VXdCLGtCQUFNQyxhQUFZLFNBQVMsY0FBYyxVQUFVO0FBQ25ELGdCQUFJLENBQUNBLFlBQVc7QUFDWjtBQUFBLFlBQ0o7QUFDQSxZQUFBQSxXQUFVLGVBQWU7QUFFekIsa0JBQUlELE1BQUFDLFdBQVUsZ0JBQVYsZ0JBQUFELElBQXVCLFdBQVVDLFdBQVUsWUFBWSxTQUFTLEdBQUc7QUFDbkUsY0FBQUEsV0FBVSxjQUFjO0FBQUEsWUFDNUI7QUFBQSxVQUNKO0FBRUEsY0FBSSxDQUFDLGNBQWMsU0FBUyxLQUFLLFNBQVMsS0FBSyxHQUFHO0FBQzlDLDBCQUFjLFlBQVksU0FBUztBQUNuQyxzQkFBVSxlQUFlLEVBQUUsVUFBVSxVQUFVLE9BQU8sTUFBTSxDQUFDO0FBQUEsVUFDakU7QUFFQSxnQkFBTSw2QkFBNkIsWUFBWSx3QkFBd0IsR0FBRztBQUcxRSxnQkFBTSxTQUFTLFNBQVMsY0FBYyxLQUFLO0FBQzNDLGlCQUFPLGFBQWEsTUFBTSxRQUFRO0FBQ2xDLDJCQUFpQixZQUFZLE1BQU07QUFFbkMseUJBQWUsZUFBZSxFQUFFLFVBQVUsVUFBVSxPQUFPLFFBQVEsQ0FBQztBQUVwRSxlQUFLLGVBQWU7QUFFcEIsZUFBSyxXQUFXLEtBQUssRUFDaEIsS0FBSyxNQUFNO0FBQ1Isa0JBQU1DLFVBQVMsaUJBQWlCLGNBQWMsU0FBUztBQUN2RCxnQkFBSUEsU0FBUTtBQUNSLGNBQUFBLFFBQU8sT0FBTztBQUFBLFlBQ2xCO0FBQ0EsaUJBQUssZUFBZTtBQUNwQiwwQkFBYywwQkFBMEI7QUFBQSxVQUM1QyxDQUFDLEVBQ0EsTUFBTSxNQUFNO0FBRVQsMEJBQWMsMEJBQTBCO0FBQ3hDLGtCQUFNLGVBQWUsU0FBUyxjQUFjLEdBQUc7QUFDL0MseUJBQWEsY0FBYztBQUMzQiwwQkFBYyxZQUFZLFlBQVk7QUFBQSxVQUMxQyxDQUFDO0FBQUEsUUFDVDtBQUFBLE1BRUo7QUFFQSxXQUFLLGdCQUFnQixRQUFRO0FBQzdCLFdBQUssZ0JBQWdCLE1BQU0sU0FBUztBQUNwQyxXQUFLLGdCQUFnQixRQUFRLEtBQUssZ0JBQWdCLE1BQU0sUUFBUSx1QkFBc0IsRUFBRTtBQUN4RixXQUFLLGdCQUFnQixrQkFBa0IsR0FBRyxDQUFDO0FBQUEsSUFDM0M7QUFBQSxFQUNSO0FBQUEsRUFFQSxjQUFjLE9BQXNCO0FBQ2hDLFFBQUksTUFBTSxRQUFRLFdBQVcsQ0FBQyxNQUFNLFVBQVU7QUFDMUMsWUFBTSxlQUFlO0FBQUEsSUFDekI7QUFBQSxFQUNKO0FBQUEsRUFFQSxZQUFZLE9BQWM7QUFDdEIsU0FBSyxnQkFBZ0IsTUFBTSxTQUFTO0FBQ3BDLFNBQUssZ0JBQWdCLE1BQU0sU0FBUyxLQUFLLGdCQUFnQixlQUFlO0FBQUEsRUFDNUU7QUFBQSxFQUVBLFdBQVcsT0FBYztBQUNyQixRQUFJLENBQUMsS0FBSyxnQkFBZ0IsT0FBTztBQUM3QixXQUFLLGdCQUFnQixNQUFNLFNBQVM7QUFBQSxJQUN4QztBQUFBLEVBQ0o7QUFBQSxFQUVBLGlCQUFpQjtBQUNiLFdBQU8sS0FBSztBQUFBLEVBQ2hCO0FBQUEsRUFFQSxVQUFVO0FBQ04sU0FBSyxnQkFBZ0Isb0JBQW9CLFNBQVMsS0FBSyxZQUFZLEtBQUssSUFBSSxDQUFDO0FBQzdFLFNBQUssZ0JBQWdCLGlCQUFpQixXQUFXLEtBQUssY0FBYyxLQUFLLElBQUksQ0FBQztBQUM5RSxTQUFLLGdCQUFnQixvQkFBb0IsU0FBUyxLQUFLLFlBQVksS0FBSyxJQUFJLENBQUM7QUFDN0UsU0FBSyxnQkFBZ0Isb0JBQW9CLFFBQVEsS0FBSyxXQUFXLEtBQUssSUFBSSxDQUFDO0FBRzNFLFFBQUksS0FBSyw0QkFBNEI7QUFDakMsb0JBQWMsS0FBSywwQkFBMEI7QUFBQSxJQUNqRDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sV0FBVyxRQUFnQjtBQUM3QixRQUFJLHVCQUF1QjtBQUUzQixVQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVUsY0FBYztBQUVwRCxRQUFJLFlBQVk7QUFDWixVQUFJLEtBQUssU0FBUyxzQkFBc0I7QUFDcEMsK0JBQXVCLE1BQU0scUJBQXFCLFVBQVU7QUFBQSxNQUNoRTtBQUFBLElBQ0o7QUFFQSxVQUFNLHFCQUFxQixTQUFTLGNBQWMsbUJBQW1CO0FBQ3JFLFVBQU0scUJBQXFCLFNBQVMsY0FBYyxxQkFBcUI7QUFDdkUsVUFBTSxVQUFVLFNBQVMsY0FBYyxtQkFBbUI7QUFHMUQsUUFBSSxDQUFDLEtBQUssU0FBUyxVQUFVLGNBQWMsU0FBUyxLQUFLLFNBQVMsS0FBSyxHQUFHO0FBQ3RFLFVBQUksd0JBQU8sMkVBQTJFO0FBQ3RGLFVBQUksb0JBQW1CO0FBQ25CLDJCQUFtQixjQUFjO0FBQUEsTUFDckM7QUFFQSxZQUFNLFVBQVUseURBQW9CO0FBQ3BDLFlBQU0sZUFBZSxTQUFTLGNBQWMsR0FBRztBQUMvQyxtQkFBYSxjQUFjO0FBQzNCLG1CQUFhLFVBQVUsSUFBSSxjQUFjO0FBRXpDLFlBQU0sbUJBQW1CLFFBQVEsY0FBYyxjQUFjO0FBQzdELHVCQUFpQixjQUFjO0FBQy9CLGNBQVEsWUFBWSxZQUFZO0FBQ2hDLGNBQVEsV0FBVztBQUFBLElBQ3ZCLE9BQ0s7QUFDRCxVQUFJLDZCQUE2QjtBQUVqQyxVQUFJLEtBQUssU0FBUyxzQkFBc0I7QUFDcEMscUNBQTZCO0FBQUEsTUFDakM7QUFFQSxZQUFNLFlBQVksS0FBSyxTQUFTO0FBQ2hDLFlBQU0sY0FBYyxLQUFLLFNBQVM7QUFDbEMsWUFBTSxXQUFXO0FBQUEsUUFDYixRQUFRLEtBQUssU0FBUztBQUFBLFFBQ3RCLE9BQU8sS0FBSyxTQUFTO0FBQUEsUUFDckIsYUFBYSw2QkFBNkIsS0FBSyxTQUFTO0FBQUEsTUFDNUQ7QUFJQSxVQUFJLGNBQWMsU0FBUyxLQUFLLFNBQVMsS0FBSyxHQUFHO0FBQzdDLFlBQUk7QUFDQSxnQkFBTSxlQUFlLEtBQUssVUFBVSxzQkFBc0IsdUJBQXVCLFdBQVcsV0FBVztBQUFBLFFBQzNHLFNBQ08sT0FBUDtBQUNJLGNBQUksd0JBQU8sK0NBQStDLE1BQU0sT0FBTztBQUN2RSxrQkFBUSxJQUFJLE1BQU0sT0FBTztBQUN6QixrQkFBUSxJQUFJLHFCQUFxQixjQUFjO0FBQUEsUUFDbkQ7QUFBQSxNQUNKLFdBQ1MsaUJBQWlCLFNBQVMsS0FBSyxTQUFTLEtBQUssR0FBRztBQUNyRCxZQUFJO0FBQ0EsZ0JBQU0sTUFBTTtBQUNaLGdCQUFNLFdBQVcsTUFBTSx1QkFBdUIsS0FBSyxLQUFLLFVBQVUsc0JBQXNCLHVCQUF1QixXQUFXLFdBQVc7QUFFckksZ0JBQU0sVUFBVSxTQUFTO0FBQ3pCLGdCQUFNLFFBQVEsUUFBUSxNQUFNLElBQUk7QUFDaEMsY0FBSSxpQkFBaUI7QUFFckIscUJBQVcsUUFBUSxPQUFPO0FBQ3hCLGdCQUFJLEtBQUssV0FBVyxPQUFPLEdBQUc7QUFDNUIsb0JBQU0sWUFBWSxLQUFLLE1BQU0sS0FBSyxNQUFNLFFBQVEsTUFBTSxDQUFDO0FBQ3ZELGtCQUFJLFVBQVUsWUFBWTtBQUN4QixrQ0FBa0IsVUFBVTtBQUFBLGNBQzlCO0FBQUEsWUFDRjtBQUFBLFVBQ0Y7QUFFQSxjQUFJLG9CQUFvQjtBQUNwQixrQkFBTSxjQUFjLG1CQUFtQixpQkFBaUIsYUFBYTtBQUNyRSxrQkFBTSxpQkFBaUIsWUFBWSxZQUFZLFNBQVMsQ0FBQztBQUN6RCxrQkFBTSxZQUFZLGVBQWUsY0FBYyxVQUFVO0FBRXpELGdCQUFJLFdBQVc7QUFDWCx3QkFBVSxlQUFlLEVBQUUsVUFBVSxVQUFVLE9BQU8sTUFBTSxDQUFDO0FBQzdELDZCQUFlLFlBQVksU0FBUztBQUFBLFlBQ3hDO0FBRUEsa0JBQU0sZUFBZSxlQUFlLGNBQWMsZUFBZTtBQUVqRSxnQkFBSSxjQUFjO0FBQ2QsMkJBQWEsWUFBWSxPQUFPLGNBQWM7QUFFOUMsaUNBQW1CLFlBQVk7QUFDL0IsZ0NBQWtCLFlBQVk7QUFDOUIsa0NBQW9CLFlBQVk7QUFBQSxZQUNwQztBQUNBLDJCQUFlLGVBQWUsRUFBRSxVQUFVLFVBQVUsT0FBTyxRQUFRLENBQUM7QUFBQSxVQUN4RTtBQUVBLHFCQUFXLG9CQUFvQixnQkFBZ0IsY0FBYyxLQUFLLFFBQVE7QUFBQSxRQUM5RSxTQUNPLE9BQVA7QUFDSSxrQkFBUSxNQUFNLFVBQVUsS0FBSztBQUFBLFFBQ2pDO0FBQUEsTUFDSixPQUNLO0FBQ0QsWUFBSTtBQUNBLGdCQUFNLFdBQVcsTUFBTSx5QkFBeUIsS0FBSyxTQUFTLFlBQVksVUFBVSxzQkFBc0IsdUJBQXVCLFdBQVcsV0FBVztBQUV2SixnQkFBTSxVQUFVLFNBQVMsS0FBSyxRQUFRLENBQUMsRUFBRSxRQUFRO0FBRWpELHFCQUFXLFNBQVMsY0FBYyxLQUFLLFFBQVE7QUFFL0MsY0FBSSxvQkFBb0I7QUFDcEIsa0JBQU0sY0FBYyxtQkFBbUIsaUJBQWlCLGFBQWE7QUFDckUsa0JBQU0saUJBQWlCLFlBQVksWUFBWSxTQUFTLENBQUM7QUFDekQsa0JBQU0sWUFBWSxlQUFlLGNBQWMsVUFBVTtBQUV6RCxnQkFBSSxXQUFXO0FBQ1gsd0JBQVUsZUFBZSxFQUFFLFVBQVUsVUFBVSxPQUFPLE1BQU0sQ0FBQztBQUM3RCw2QkFBZSxZQUFZLFNBQVM7QUFBQSxZQUN4QztBQUVBLGtCQUFNLGVBQWUsU0FBUyxjQUFjLEdBQUc7QUFDL0Msa0JBQU0sa0JBQWtCLE9BQU8sT0FBTztBQUN0Qyx5QkFBYSxZQUFZO0FBQ3pCLHlCQUFhLFVBQVUsSUFBSSxjQUFjO0FBRXpDLCtCQUFtQixZQUFZO0FBQy9CLDhCQUFrQixZQUFZO0FBQzlCLGdDQUFvQixZQUFZO0FBRWhDLDJCQUFlLFlBQVksWUFBWTtBQUN2QywyQkFBZSxlQUFlLEVBQUUsVUFBVSxVQUFVLE9BQU8sUUFBUSxDQUFDO0FBQUEsVUFDeEU7QUFBQSxRQUNKLFNBQ08sT0FBUDtBQUNJLGNBQUksd0JBQU8sK0NBQStDLE1BQU0sT0FBTztBQUN2RSxrQkFBUSxJQUFJLE1BQU0sT0FBTztBQUN6QixrQkFBUSxJQUFJLHFCQUFxQixjQUFjO0FBQUEsUUFDbkQ7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUFBLEVBRUo7QUFBQSxFQUVBLE1BQU0sVUFBVTtBQUFBLEVBRWhCO0FBRUo7QUFHQSxlQUFlLFdBQVc7QUFDdEIsTUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxPQUFPLHVDQUF1QyxHQUFHO0FBQy9FLFNBQUssSUFBSSxNQUFNLFFBQVEsTUFBTSx1Q0FBdUM7QUFBQSxFQUN4RTtBQUVBLE1BQUksTUFBTSxLQUFLLElBQUksTUFBTSxRQUFRLE9BQU8sMEJBQTBCLEdBQUc7QUFDakUsUUFBSTtBQUNBLFlBQU0sY0FBYyxNQUFNLEtBQUssSUFBSSxNQUFNLFFBQVEsS0FBSywwQkFBMEI7QUFFaEYsVUFBSSxZQUFZLEtBQUssTUFBTSxJQUFJO0FBQzNCLHlCQUFpQixDQUFDO0FBQUEsTUFDdEIsT0FBTztBQUNILHlCQUFpQixLQUFLLE1BQU0sV0FBVztBQUFBLE1BQzNDO0FBQUEsSUFDSixTQUFTLE9BQVA7QUFDRSxjQUFRLE1BQU0scUNBQXFDLEtBQUs7QUFBQSxJQUM1RDtBQUFBLEVBQ0osT0FBTztBQUNILHFCQUFpQixDQUFDO0FBQUEsRUFDdEI7QUFDSjtBQUdBLGVBQXNCLHFCQUFxQixNQUFhO0FBQ3BELFFBQU0sYUFBYSxJQUFJLFVBQVUsY0FBYztBQUMvQyxRQUFNLGFBQWEsU0FBUyxjQUFjLGVBQWU7QUFDekQsTUFBSSxjQUFjO0FBQ2xCLE9BQUkseUNBQVksZUFBYyxNQUFNO0FBQ2hDLFVBQU0sVUFBVSxNQUFNLElBQUksTUFBTSxLQUFLLFVBQVU7QUFDL0Msa0JBQWMsYUFBYSxVQUFVO0FBQ3JDLFFBQUksWUFBWTtBQUNaLE1BQUMsV0FBMkIsTUFBTSxrQkFBa0I7QUFBQSxJQUN4RDtBQUFBLEVBQ0osT0FBTztBQUNILFFBQUksWUFBWTtBQUNaLE1BQUMsV0FBMkIsTUFBTSxrQkFBa0I7QUFBQSxJQUN4RDtBQUFBLEVBQ0o7QUFDQSxTQUFPO0FBQ1g7QUFHQSxlQUFzQixXQUFXLE9BQWUsYUFBMkMsVUFBdUIsT0FBZ0I7QUFDOUgsUUFBTSxhQUFnRDtBQUFBLElBQ2xELE1BQU07QUFBQSxJQUNOLFNBQVM7QUFBQSxFQUNiO0FBRUEsTUFBSSxnQkFBZ0IsZUFBZTtBQUMvQixlQUFXLE9BQU87QUFDbEIsZUFBVyxVQUFVO0FBQUEsRUFDekIsV0FBVyxnQkFBZ0IsY0FBYztBQUNyQyxlQUFXLE9BQU87QUFDbEIsZUFBVyxVQUFVO0FBRXJCLFVBQU0sdUJBQXVCLFNBQVMsaUJBQWlCLG9CQUFvQjtBQUMzRSxVQUFNLDJCQUEyQixxQkFBcUIscUJBQXFCLFNBQVMsQ0FBQztBQUNyRixRQUFJLHFCQUFxQixTQUFTLEdBQUc7QUFDakMsVUFBSSxDQUFDLFdBQVcsUUFBUSxTQUFTLCtCQUErQixHQUFHO0FBQy9ELGNBQU0sZ0JBQWdCLHFCQUFxQixZQUFZLFFBQVE7QUFDL0QsaUNBQXlCLFlBQVksYUFBYTtBQUFBLE1BQ3REO0FBQUEsSUFDSjtBQUFBLEVBRUo7QUFFQSxpQkFBZSxLQUFLLFVBQVU7QUFFOUIsMEJBQXdCLGVBQWUsSUFBSSxVQUFRO0FBQy9DLFdBQU87QUFBQSxNQUNILE1BQU0sS0FBSztBQUFBLE1BQ1gsU0FBUyxLQUFLO0FBQUEsSUFDbEI7QUFBQSxFQUNKLENBQUM7QUFFRCxRQUFNLGFBQWEsS0FBSyxVQUFVLHVCQUF1QixNQUFNLENBQUM7QUFFaEUsTUFBSTtBQUNBLFVBQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxNQUFNLDRCQUE0QixVQUFVO0FBQUEsRUFDN0UsU0FBUyxPQUFQO0FBQ0UsWUFBUSxNQUFNLDBDQUEwQyxLQUFLO0FBQUEsRUFDakU7QUFDSjtBQUdPLFNBQVMsa0JBQWtCLGNBQTREO0FBQ3RGLGtDQUFVLEVBQUUsS0FBSyxDQUFDLFVBQVU7QUFDNUIsVUFBTSxhQUFhLDZDQUFjLGlCQUFpQjtBQUVsRCw2Q0FBWSxRQUFRLENBQUMsY0FBd0U7QUFDekYsWUFBTSxXQUFXLFVBQVUsVUFBVSxRQUFRLGFBQWEsRUFBRTtBQUM1RCxZQUFNLE9BQU8sVUFBVTtBQUV2QixVQUFJLFlBQVksTUFBTSxVQUFVLFFBQVEsR0FBRztBQUN2QyxjQUFNLGtCQUFrQixNQUFNLFVBQVUsTUFBTSxNQUFNLFVBQVUsUUFBUSxDQUFDO0FBQ3ZFLGtCQUFVLFlBQVk7QUFBQSxNQUMxQjtBQUFBLElBQ0o7QUFBQSxFQUNKLENBQUM7QUFDTDtBQUdPLFNBQVMsb0JBQW9CLGNBQTREO0FBQzVGLFFBQU0sYUFBYSxhQUFhLGlCQUFpQix3QkFBd0I7QUFDekUsYUFBVyxRQUFRLENBQUMsZ0JBQTZCO0FBQzdDLFVBQU0sYUFBYSxTQUFTLGNBQWMsUUFBUTtBQUNsRCxlQUFXLGNBQWM7QUFDekIsa0NBQVEsWUFBWSxNQUFNO0FBQzFCLGVBQVcsVUFBVSxJQUFJLGFBQWE7QUFDdEMsZUFBVyxRQUFRO0FBQ25CLFFBQUksWUFBWSxZQUFZO0FBQ3hCLGtCQUFZLFdBQVcsYUFBYSxZQUFZLFlBQVksV0FBVztBQUFBLElBQzNFO0FBQ0EsZUFBVyxpQkFBaUIsU0FBUyxNQUFNO0FBMXFCbkQsVUFBQUY7QUE0cUJZLFlBQU0sYUFBV0EsTUFBQSxZQUFZLGFBQWEsT0FBTyxNQUFoQyxnQkFBQUEsSUFBbUMsUUFBUSxhQUFhLFFBQU87QUFFaEYsWUFBTSxXQUFXLFNBQVM7QUFBQSxFQUFhLFlBQVk7QUFDbkQsVUFBSSxVQUFVO0FBQ1Ysa0JBQVUsVUFBVSxVQUFVLFFBQVEsRUFBRSxLQUFLLE1BQU07QUFDL0MsY0FBSSx3QkFBTyxtQkFBbUI7QUFBQSxRQUNsQyxHQUFHLENBQUMsUUFBUTtBQUNSLGtCQUFRLE1BQU0seUJBQXlCLEdBQUc7QUFDMUMsY0FBSSx3QkFBTyx5QkFBeUIsR0FBRztBQUFBLFFBQzNDLENBQUM7QUFBQSxNQUNMO0FBQUEsSUFDSixDQUFDO0FBQUEsRUFDTCxDQUFDO0FBQ0w7QUFHTyxTQUFTLG1CQUFtQixjQUE0RDtBQUMzRixRQUFNLGFBQWEsYUFBYSxpQkFBaUIsR0FBRztBQUNwRCxXQUFTLElBQUksR0FBRyxJQUFJLFdBQVcsUUFBUSxLQUFLO0FBQ3hDLFVBQU0sSUFBSSxXQUFXLENBQUM7QUFDdEIsVUFBTSxjQUFjLEVBQUU7QUFDdEIsUUFBSSxlQUFlLFlBQVksYUFBYSxLQUFLO0FBQzdDLFlBQU0sS0FBSyxTQUFTLGNBQWMsSUFBSTtBQUN0QyxZQUFNLFNBQVMsRUFBRTtBQUNqQixVQUFJLFFBQVE7QUFDUixlQUFPLGFBQWEsSUFBSSxXQUFXO0FBQUEsTUFDdkM7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNKO0FBRU8sU0FBUyx1QkFBdUIsU0FBaUI7QUFDcEQsWUFBVSxVQUFVLFVBQVUsT0FBTyxFQUFFLEtBQUssV0FBVztBQUFBLEVBRXZELENBQUMsRUFBRSxNQUFNLFNBQVMsS0FBSztBQUNyQixZQUFRLE1BQU0sNEJBQTRCLEdBQUc7QUFBQSxFQUMvQyxDQUFDO0FBQ0w7QUFFQSxTQUFTLHNCQUF1QixPQUE2QjtBQUN6RCxRQUFNLGFBQWEsU0FBUyxjQUFjLFFBQVE7QUFDbEQsYUFBVyxjQUFjO0FBQ3pCLGdDQUFRLFlBQVksTUFBTTtBQUMxQixhQUFXLFVBQVUsSUFBSSxhQUFhO0FBQ3RDLGFBQVcsUUFBUTtBQUVuQixhQUFXLGlCQUFpQixTQUFTLFdBQVk7QUFDN0MsVUFBTSxjQUFjLE1BQU07QUFFMUIsUUFBSSxnQkFBZ0IsTUFBTTtBQUN0Qiw2QkFBdUIsV0FBVztBQUNsQyxVQUFJLHdCQUFPLHNCQUFzQjtBQUFBLElBQ3JDLE9BQU87QUFDSCxjQUFRLE1BQU0sdUNBQXVDO0FBQUEsSUFDekQ7QUFBQSxFQUNKLENBQUM7QUFDRCxTQUFPO0FBQ1g7QUFFQSxTQUFTLHFCQUFzQixZQUE4QyxVQUF1QjtBQUNoRyxRQUFNLGFBQWEsU0FBUyxjQUFjLFFBQVE7QUFDbEQsYUFBVyxjQUFjO0FBQ3pCLGdDQUFRLFlBQVksTUFBTTtBQUMxQixhQUFXLFVBQVUsSUFBSSxhQUFhO0FBQ3RDLGFBQVcsUUFBUTtBQUVuQixNQUFJLGNBQWMsV0FBVztBQUU3QixNQUFJLGdCQUFnQixNQUFNO0FBQ3RCLFFBQUksaUJBQWlCLFNBQVMsU0FBUyxLQUFLLEdBQUc7QUFDM0MsWUFBTSxhQUFhLFdBQVc7QUFDOUIsWUFBTSxjQUFjLFdBQVcsTUFBTSxHQUFHLEVBQUUsTUFBTSxDQUFDLEVBQUUsS0FBSyxHQUFHLEVBQUUsS0FBSztBQUNsRSxvQkFBYztBQUFBLElBQ2xCO0FBQUEsRUFDSixPQUFPO0FBQ0gsUUFBSSx3QkFBTyx1Q0FBdUM7QUFDbEQsWUFBUSxNQUFNLHVDQUF1QztBQUFBLEVBQ3pEO0FBRUEsYUFBVyxpQkFBaUIsU0FBUyxXQUFZO0FBQzdDLFFBQUksZ0JBQWdCLE1BQU07QUFDdEIsNkJBQXVCLFdBQVc7QUFDbEMsVUFBSSx3QkFBTyxxQkFBcUI7QUFBQSxJQUNwQyxPQUFPO0FBQ0gsY0FBUSxNQUFNLHVDQUF1QztBQUFBLElBQ3pEO0FBQUEsRUFDSixDQUFDO0FBQ0QsU0FBTztBQUNYO0FBRUEsU0FBUyxlQUFnQjtBQUNyQixRQUFNLGNBQWMsU0FBUyxjQUFjLFFBQVE7QUFDbkQsY0FBWSxjQUFjO0FBQzFCLGdDQUFRLGFBQWEsT0FBTztBQUM1QixjQUFZLFVBQVUsSUFBSSxjQUFjO0FBQ3hDLGNBQVksUUFBUTtBQUVwQixNQUFJLHFCQUF5QztBQUc3QyxjQUFZLGlCQUFpQixTQUFTLFNBQVUsT0FBTztBQUNuRCxVQUFNLGdCQUFnQjtBQUN0Qix5QkFBcUIsTUFBTTtBQUUzQixXQUFPLHNCQUFzQixDQUFDLG1CQUFtQixVQUFVLFNBQVMsYUFBYSxHQUFHO0FBQ2hGLDJCQUFxQixtQkFBbUI7QUFBQSxJQUM1QztBQUVBLFFBQUksb0JBQW9CO0FBQ3BCLFlBQU0sZUFBZSxNQUFNLEtBQUssU0FBUyxpQkFBaUIsZ0NBQWdDLENBQUM7QUFFM0YsWUFBTSxRQUFRLGFBQWEsUUFBUSxrQkFBa0IsSUFBSTtBQUV6RCxVQUFJLFVBQVUsSUFBSTtBQUNkLGNBQU0sUUFBUSxJQUFJLHVCQUFNLEdBQUc7QUFFM0IsY0FBTSxVQUFVLFlBQVk7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRNUIsY0FBTSxzQkFBc0IsTUFBTSxVQUFVLGNBQWMsZ0JBQWdCO0FBQzFFLG1FQUFxQixpQkFBaUIsU0FBUyxpQkFBa0I7QUFDN0Qsd0JBQWMsS0FBSztBQUNuQixjQUFJLHdCQUFPLGtCQUFrQjtBQUU3QixnQkFBTSxNQUFNO0FBQUEsUUFDaEI7QUFFQSxjQUFNLEtBQUs7QUFBQSxNQUVmO0FBQUEsSUFDSjtBQUFBLEVBRUosQ0FBQztBQUNELFNBQU87QUFDWDtBQUVBLGVBQXNCLGNBQWMsT0FBZTtBQUMvQyxRQUFNLG1CQUFtQixTQUFTLGNBQWMsbUJBQW1CO0FBRW5FLFFBQU0sY0FBYyxxREFBa0IsaUJBQWlCO0FBRXZELE1BQUksZUFBZSxZQUFZLFNBQVMsS0FBSyxTQUFTLEtBQUssUUFBUSxZQUFZLFFBQVE7QUFFbkYseURBQWtCLFlBQVksWUFBWSxLQUFLO0FBRS9DLFFBQUksUUFBUSxJQUFJLFlBQVksUUFBUTtBQUNoQyxZQUFNLGNBQWMsWUFBWSxRQUFRLENBQUM7QUFDekMsVUFBSSxZQUFZLFVBQVUsU0FBUyxZQUFZLEdBQUc7QUFDOUMsNkRBQWtCLFlBQVk7QUFBQSxNQUNsQztBQUFBLElBQ0o7QUFBQSxFQUNKO0FBR0EsTUFBSSxlQUFlLFFBQVEsQ0FBQyxLQUFLLGVBQWUsUUFBUSxDQUFDLEVBQUUsU0FBUyxhQUFhO0FBQzdFLG1CQUFlLE9BQU8sT0FBTyxDQUFDO0FBQUEsRUFDbEMsT0FBTztBQUNILG1CQUFlLE9BQU8sT0FBTyxDQUFDO0FBQUEsRUFDbEM7QUFFQSxRQUFNLGFBQWEsS0FBSyxVQUFVLGdCQUFnQixNQUFNLENBQUM7QUFFekQsTUFBSTtBQUNBLFVBQU0sSUFBSSxNQUFNLFFBQVEsTUFBTSw0QkFBNEIsVUFBVTtBQUFBLEVBQ3hFLFNBQVMsT0FBUDtBQUNFLFlBQVEsTUFBTSxxQ0FBcUMsS0FBSztBQUFBLEVBQzVEO0FBQ0o7QUFFQSxlQUFzQixvQkFBb0IsT0FBZTtBQUNyRCxRQUFNLG1CQUFtQixTQUFTLGNBQWMsbUJBQW1CO0FBRW5FLFFBQU0sY0FBYyxxREFBa0IsaUJBQWlCO0FBRXZELE1BQUksZUFBZSxZQUFZLFNBQVMsS0FBSyxTQUFTLEtBQUssUUFBUSxZQUFZLFFBQVE7QUFDckYsYUFBUyxJQUFJLE9BQU8sSUFBSSxZQUFZLFFBQVEsS0FBSztBQUMvQywyREFBa0IsWUFBWSxZQUFZLENBQUM7QUFBQSxJQUM3QztBQUFBLEVBQ0Y7QUFFQSxpQkFBZSxPQUFPLEtBQUs7QUFDM0IsUUFBTSxhQUFhLEtBQUssVUFBVSxnQkFBZ0IsTUFBTSxDQUFDO0FBRXpELE1BQUk7QUFDQSxVQUFNLElBQUksTUFBTSxRQUFRLE1BQU0sNEJBQTRCLFVBQVU7QUFBQSxFQUN4RSxTQUFTLE9BQVA7QUFDRSxZQUFRLE1BQU0scUNBQXFDLEtBQUs7QUFBQSxFQUM1RDtBQUNKOzs7QURyMUJPLElBQU0sbUJBQWdDO0FBQUEsRUFDNUMsUUFBUTtBQUFBLEVBQ1IsWUFBWTtBQUFBLEVBQ1osT0FBTztBQUFBLEVBQ1AsYUFBYTtBQUFBLEVBQ2IsYUFBYTtBQUFBLEVBQ2IsVUFBVTtBQUFBLEVBQ1YsYUFBYTtBQUFBLEVBQ2IsaUNBQWlDO0FBQUEsRUFDakMsNEJBQTRCO0FBQUEsRUFDNUIsMkJBQTJCO0FBQUEsRUFDM0IsaUJBQWlCO0FBQUEsRUFDakIsa0JBQWtCO0FBQUEsRUFDbEIsZUFBZTtBQUFBLEVBQ2YsWUFBWTtBQUFBLEVBQ1osUUFBUTtBQUFBLEVBQ1Isc0JBQXNCO0FBQUEsRUFDdEIsc0JBQXNCO0FBQ3ZCO0FBR0EsSUFBcUIsU0FBckIsY0FBb0Msd0JBQU87QUFBQSxFQUcxQyxNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQUV4QixTQUFLO0FBQUEsTUFDSjtBQUFBLE1BQ0EsQ0FBQyxTQUFTLElBQUksUUFBUSxNQUFNLEtBQUssVUFBVSxJQUFJO0FBQUEsSUFDaEQ7QUFFQSxTQUFLLGNBQWMsT0FBTyxnQ0FBZ0MsTUFBTTtBQUMvRCxXQUFLLGFBQWE7QUFDbEIsV0FBSyxJQUFJLE1BQU0sUUFBUSxNQUFNLDRCQUE0QixFQUFFO0FBQzNELDBCQUFvQjtBQUFBLElBRXJCLENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNOLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNaLGFBQUssYUFBYTtBQUFBLE1BQ3RCO0FBQUEsTUFDQSxTQUFTO0FBQUEsUUFDakI7QUFBQSxVQUNDLFdBQVcsQ0FBQyxLQUFLO0FBQUEsVUFDakIsS0FBSztBQUFBLFFBQ047QUFBQSxNQUNRO0FBQUEsSUFDSixDQUFDO0FBRVAsU0FBSyxjQUFjLElBQUksY0FBYyxLQUFLLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDckQ7QUFBQSxFQUVBLE1BQU0sV0FBVztBQUNoQixTQUFLLElBQUksVUFBVSxnQkFBZ0IsaUJBQWlCLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFDdkUsWUFBTSxVQUFVLEtBQUs7QUFFckIsVUFBSSxTQUFTO0FBQ1osYUFBSyxhQUFhO0FBQ2xCLGdCQUFRLFFBQVE7QUFBQSxNQUNqQjtBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixTQUFLLElBQUksVUFBVSxtQkFBbUIsaUJBQWlCO0FBRXZELFVBQU0sWUFBWSxLQUFLLElBQUksVUFBVSxhQUFhLEtBQUs7QUFDdkQsVUFBTSxVQUFVLGFBQWE7QUFBQSxNQUM1QixNQUFNO0FBQUEsTUFDTixRQUFRO0FBQUEsSUFDVCxDQUFDO0FBRUQsU0FBSyxJQUFJLFVBQVU7QUFBQSxNQUNsQixLQUFLLElBQUksVUFBVSxnQkFBZ0IsaUJBQWlCLEVBQUUsQ0FBQztBQUFBLElBQ3hEO0FBR0EsVUFBTSxXQUFXLFNBQVMsY0FBYyxtQkFBbUI7QUFFM0QsUUFBSSxVQUFVO0FBQ2IsZUFBUyxNQUFNLFVBQVU7QUFDekIsZUFBUyxNQUFNLGFBQWE7QUFFNUIsaUJBQVcsTUFBTTtBQUNoQixpQkFBUyxNQUFNO0FBQ2YsaUJBQVMsTUFBTSxVQUFVO0FBQUEsTUFDMUIsR0FBRyxFQUFFO0FBQUEsSUFDTjtBQUVBLFNBQUssSUFBSSxVQUFVO0FBQUEsTUFDbEIsS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLGlCQUFpQixFQUFFLENBQUM7QUFBQSxJQUN4RDtBQUVBLFVBQU0sbUJBQW1CLFNBQVMsY0FBYyxtQkFBbUI7QUFDbkUsUUFBSSxrQkFBa0I7QUFDckIsdUJBQWlCLE9BQU87QUFBQSxRQUN2QixLQUFLLGlCQUFpQjtBQUFBLFFBQ3RCLFVBQVU7QUFBQSxNQUNYLENBQUM7QUFBQSxJQUNGO0FBQUEsRUFDRDtBQUFBLEVBR0EsTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDMUU7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJtb2RlbHMiLCAiaGV4IiwgIm5vb3BUZXN0IiwgImxleGVyIiwgIm9wdGlvbnMiLCAidGV4dCIsICJtYW5nbGUiLCAic21hcnR5cGFudHMiLCAicGFyc2VyIiwgInNyYyIsICJhcmdzIiwgInJldCIsICJ3YWxrVG9rZW5zIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiRmlsZSIsICJvcHRpb25zIiwgIl9hIiwgIm9wdHMiLCAiUGFnZSIsICJvcHRpb25zIiwgIl9hIiwgIm9wdGlvbnMiLCAiUGFnZSIsICJfYSIsICJvcHRpb25zIiwgIl9hIiwgIm9wdGlvbnMiLCAiVHJhbnNjcmlwdGlvbnMiLCAib3B0aW9ucyIsICJUcmFuc2xhdGlvbnMiLCAiQXVkaW8iLCAib3B0aW9ucyIsICJfYSIsICJDaGF0IiwgIkNvbXBsZXRpb25zIiwgIm9wdGlvbnMiLCAiX2EiLCAib3B0aW9ucyIsICJFbWJlZGRpbmdzIiwgIm9wdGlvbnMiLCAiRWRpdHMiLCAib3B0aW9ucyIsICJvcHRpb25zIiwgIl9hIiwgIm9wdGlvbnMiLCAiSm9icyIsICJGaW5lVHVuaW5nIiwgIm9wdGlvbnMiLCAiSW1hZ2VzIiwgIm9wdGlvbnMiLCAiTW9kZWxzIiwgIm9wdGlvbnMiLCAiTW9kZXJhdGlvbnMiLCAib3B0aW9ucyIsICJDb21wbGV0aW9ucyIsICJPcGVuQUkiLCAibWVzc2FnZUhpc3RvcnlDb250ZW50IiwgIl9hIiwgIm1lc3NhZ2VIaXN0b3J5IiwgIl9hIiwgImZpbGUiLCAiX2EiLCAibG9hZGluZ0VsIiwgInNwYWNlciJdCn0K
